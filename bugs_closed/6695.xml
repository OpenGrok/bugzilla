<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "http://defect.opensolaris.org/bz/bugzilla.dtd">

<bugzilla version="3.6.5"
          urlbase="http://defect.opensolaris.org/bz/"
          
          maintainer="website-admin@opensolaris.org"
>

    <bug>
          <bug_id>6695</bug_id>
          
          <creation_ts>2009-02-17 10:59:00 +0000</creation_ts>
          <short_desc>CVS History Date Interpretation</short_desc>
          <delta_ts>2009-02-18 05:38:13 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Development</classification>
          <product>opengrok</product>
          <component>indexer</component>
          <version>unspecified</version>
          <rep_platform>Other</rep_platform>
          <op_sys>Windows</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXED</resolution>
          
          
          
          
          
          <priority>P4</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>0.8</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Vasanth Manickam">vasanth.manickam</reporter>
          <assigned_to name="Trond Norbye">trond.norbye</assigned_to>
          
          

      

      

      

          <long_desc isprivate="0">
            <commentid>28003</commentid>
            <who name="Vasanth Manickam">vasanth.manickam</who>
            <bug_when>2009-02-17 10:59:25 +0000</bug_when>
            <thetext>in File src/org/opensolaris/opengrok/history/CVSHistoryParser.java  
The indexer expects the date format to be of yyyy-mm-dd hh:mm:ss ZZZZ
but some CVS repos seem to have it in the format yyyy/mm/dd hh:mm:ss


This seems to fix the issue for me

diff   src/org/opensolaris/opengrok/history/CVSHistoryParser.java /home/manicv
60,64c60,61
&lt;                 new SimpleDateFormat(&quot;yyyy/mm/dd hh:mm:ss&quot;, Locale.US);
&lt;         SimpleDateFormat df2 =
&lt;             new SimpleDateFormat(&quot;yyyy-mm-dd hh:mm:ss ZZZZ&quot;, Locale.US);
&lt;
&lt;          ArrayList&lt;HistoryEntry&gt; entries = new ArrayList&lt;HistoryEntry&gt;();
---
&gt;                 new SimpleDateFormat(&quot;yyyy-mm-dd hh:mm:ss ZZZZ&quot;, Locale.US);
&gt;         ArrayList&lt;HistoryEntry&gt; entries = new ArrayList&lt;HistoryEntry&gt;();
94,97d90
&lt;                             try {
&lt;                                 entry.setDate(df2.parse(val));
&lt;                             } catch (ParseException pe2) {
&lt;
99c92
&lt;                         }}
---
&gt;                         }</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>28097</commentid>
            <who name="Trond Norbye">trond.norbye</who>
            <bug_when>2009-02-18 05:38:13 +0000</bug_when>
            <thetext>This is stored pr. repository in the configuration file (generated by -W) inside:
   &lt;void property=&quot;datePattern&quot;&gt;
      &lt;string&gt;yyyy-mm-dd hh:mm:ss ZZZZ&lt;/string&gt;
   &lt;/void&gt;

Replace with your desired format.

Fixed in changeset:   749:c997c69c6b0a</thetext>
          </long_desc>
      
      

    </bug>

</bugzilla>