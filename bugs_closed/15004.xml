<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "http://defect.opensolaris.org/bz/bugzilla.dtd">

<bugzilla version="3.6.5"
          urlbase="http://defect.opensolaris.org/bz/"
          
          maintainer="website-admin@opensolaris.org"
>

    <bug>
          <bug_id>15004</bug_id>
          
          <creation_ts>2010-03-03 22:05:00 +0000</creation_ts>
          <short_desc>Improved handling of UTF Byte Order Marks</short_desc>
          <delta_ts>2010-03-24 17:12:11 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Development</classification>
          <product>opengrok</product>
          <component>indexer</component>
          <version>unspecified</version>
          <rep_platform>ANY/Generic</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>FIXINSOURCE</resolution>
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>normal</bug_severity>
          <target_milestone>0.9</target_milestone>
          
          <blocked>15114</blocked>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Chris Eldredge">chris.eldredge</reporter>
          <assigned_to name="Lubos Kosco">Lubos.Kosco</assigned_to>
          <cc>knut.hatlen</cc>
    
    <cc>Lubos.Kosco</cc>
    
    <cc>opengrok-dev</cc>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>68311</commentid>
              <attachid>3761</attachid>
            <who name="Chris Eldredge">chris.eldredge</who>
            <bug_when>2010-03-03 22:05:08 +0000</bug_when>
            <thetext>Created attachment 3761
Patch against 951:79402e76ba5a.

Attached patch against 951:79402e76ba5a improves handling of UTF8 encoded files
that being with a byte order mark (BOM).  The patch changes text based
analyzers to subclass a new TextAnalyzer that detects encoding and passes an
initialized InputStreamReader into subclasses.

Additionally the patch fixes file type detection magic to run once with the BOM
and once without it to allow the PlainAnalyzer to work properly on these types
of files.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>68312</commentid>
              <attachid>3761</attachid>
            <who name="Chris Eldredge">chris.eldredge</who>
            <bug_when>2010-03-03 22:13:50 +0000</bug_when>
            <thetext>Comment on attachment 3761
Patch against 951:79402e76ba5a.

Oops, patch contains AnalyzerGuru.java.orig which should be ignored.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>68392</commentid>
              <attachid>3767</attachid>
            <who name="Chris Eldredge">chris.eldredge</who>
            <bug_when>2010-03-04 15:53:10 +0000</bug_when>
            <thetext>Created attachment 3767
Updated patch that corrects a few mistakes

Previous patch included a .orig file by mistake and removed ExpandTabsReader decorator in PlainAnalyzer.java.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>68752</commentid>
            <who name="Knut Anders Hatlen">knut.hatlen</who>
            <bug_when>2010-03-09 16:14:20 +0000</bug_when>
            <thetext>Hi Chris,

The attachment appears to contain three patches that build on top of each other. Do you think you could generate a single patch against head of trunk so that it will be easier to review it?

Thanks.</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>68756</commentid>
              <attachid>3784</attachid>
            <who name="Chris Eldredge">chris.eldredge</who>
            <bug_when>2010-03-09 16:40:23 +0000</bug_when>
            <thetext>Created attachment 3784
updated patch as one changeset</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>68886</commentid>
            <who name="Lubos Kosco">Lubos.Kosco</who>
            <bug_when>2010-03-10 15:36:47 +0000</bug_when>
            <thetext>changeset:   953:0f1b28883a09</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>68897</commentid>
            <who name="Knut Anders Hatlen">knut.hatlen</who>
            <bug_when>2010-03-10 16:45:19 +0000</bug_when>
            <thetext>Thanks, Chris, for providing the patch! It looks like a good and useful improvement. And thanks, Ľuboš, for importing it into the source repository!</thetext>
          </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
              isurl="0"
          >
            <attachid>3761</attachid>
            <date>2010-03-03 22:05:00 +0000</date>
            <delta_ts>2010-03-04 15:53:10 +0000</delta_ts>
            <desc>Patch against 951:79402e76ba5a.</desc>
            <filename>patch</filename>
            <type>text/plain</type>
            <size>37859</size>
            <attacher>chris.eldredge</attacher>
            
              <data encoding="base64">ZGlmZiAtciA3OTQwMmU3NmJhNWEgLXIgNzYzZTYyYzZjNDMzIHNyYy9vcmcvb3BlbnNvbGFyaXMv
b3Blbmdyb2svYW5hbHlzaXMvQW5hbHl6ZXJHdXJ1LmphdmENCi0tLSBhL3NyYy9vcmcvb3BlbnNv
bGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvQW5hbHl6ZXJHdXJ1LmphdmEJVHVlIE1hciAwMiAxNjo1
NTo0OSAyMDEwICswMTAwDQorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5
c2lzL0FuYWx5emVyR3VydS5qYXZhCVdlZCBNYXIgMDMgMTY6NDE6MDggMjAxMCAtMDUwMA0KQEAg
LTQ0Miw2ICs0NDIsMTIgQEANCiAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgIH0N
CiANCisgICAgICAgIFN0cmluZyBjb250ZW50Tm9CT01TdHIgPSBzdHJpcEJPTShuZXcgU3RyaW5n
KGNvbnRlbnQsIDAsIGxlbikpOw0KKyAgICAgICAgYnl0ZVtdIGNvbnRlbnROb0JPTSA9IG51bGw7
DQorICAgICAgICBpZiAoY29udGVudE5vQk9NU3RyICE9IG51bGwpIHsNCisgICAgICAgIAljb250
ZW50Tm9CT00gPSBjb250ZW50Tm9CT01TdHIuZ2V0Qnl0ZXMoKTsNCisgICAgICAgIH0NCisgICAg
ICAgIA0KICAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5ID0gZmluZChjb250ZW50
KTsNCiAgICAgICAgIGlmIChmYWN0b3J5ICE9IG51bGwpIHsNCiAgICAgICAgICAgICByZXR1cm4g
ZmFjdG9yeTsNCkBAIC00NDksNiArNDU1LDkgQEANCiANCiAgICAgICAgIGZvciAoRmlsZUFuYWx5
emVyRmFjdG9yeS5NYXRjaGVyIG1hdGNoZXIgOiBtYXRjaGVycykgew0KICAgICAgICAgICAgIEZp
bGVBbmFseXplckZhY3RvcnkgZmFjID0gbWF0Y2hlci5pc01hZ2ljKGNvbnRlbnQsIGluKTsNCisg
ICAgICAgICAgICBpZiAoZmFjID09IG51bGwgJiYgY29udGVudE5vQk9NICE9IG51bGwpIHsNCisg
ICAgICAgICAgICAJZmFjID0gbWF0Y2hlci5pc01hZ2ljKGNvbnRlbnROb0JPTSwgaW4pOw0KKyAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgICBpZiAoZmFjICE9IG51bGwpIHsNCiAgICAgICAgICAg
ICAgICAgcmV0dXJuIGZhYzsNCiAgICAgICAgICAgICB9DQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAt
ciA3NjNlNjJjNmM0MzMgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9BbmFs
eXplckd1cnUuamF2YS5vcmlnDQotLS0gL2Rldi9udWxsCVRodSBKYW4gMDEgMDA6MDA6MDAgMTk3
MCArMDAwMA0KKysrIGIvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9BbmFs
eXplckd1cnUuamF2YS5vcmlnCVdlZCBNYXIgMDMgMTY6NDE6MDggMjAxMCAtMDUwMA0KQEAgLTAs
MCArMSw1MjIgQEANCisvKg0KKyAqIENEREwgSEVBREVSIFNUQVJUDQorICoNCisgKiBUaGUgY29u
dGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUNCisgKiBD
b21tb24gRGV2ZWxvcG1lbnQgYW5kIERpc3RyaWJ1dGlvbiBMaWNlbnNlICh0aGUgIkxpY2Vuc2Ui
KS4NCisgKiBZb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdp
dGggdGhlIExpY2Vuc2UuDQorICoNCisgKiBTZWUgTElDRU5TRS50eHQgaW5jbHVkZWQgaW4gdGhp
cyBkaXN0cmlidXRpb24gZm9yIHRoZSBzcGVjaWZpYw0KKyAqIGxhbmd1YWdlIGdvdmVybmluZyBw
ZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQorICoNCisgKiBX
aGVuIGRpc3RyaWJ1dGluZyBDb3ZlcmVkIENvZGUsIGluY2x1ZGUgdGhpcyBDRERMIEhFQURFUiBp
biBlYWNoDQorICogZmlsZSBhbmQgaW5jbHVkZSB0aGUgTGljZW5zZSBmaWxlIGF0IExJQ0VOU0Uu
dHh0Lg0KKyAqIElmIGFwcGxpY2FibGUsIGFkZCB0aGUgZm9sbG93aW5nIGJlbG93IHRoaXMgQ0RE
TCBIRUFERVIsIHdpdGggdGhlDQorICogZmllbGRzIGVuY2xvc2VkIGJ5IGJyYWNrZXRzICJbXSIg
cmVwbGFjZWQgd2l0aCB5b3VyIG93biBpZGVudGlmeWluZw0KKyAqIGluZm9ybWF0aW9uOiBQb3J0
aW9ucyBDb3B5cmlnaHQgW3l5eXldIFtuYW1lIG9mIGNvcHlyaWdodCBvd25lcl0NCisgKg0KKyAq
IENEREwgSEVBREVSIEVORA0KKyAqLw0KKw0KKy8qDQorICogQ29weXJpZ2h0IDIwMDkgU3VuIE1p
Y3Jvc3lzdGVtcywgSW5jLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4NCisgKiBVc2UgaXMgc3ViamVj
dCB0byBsaWNlbnNlIHRlcm1zLg0KKyAqLw0KK3BhY2thZ2Ugb3JnLm9wZW5zb2xhcmlzLm9wZW5n
cm9rLmFuYWx5c2lzOw0KKw0KK2ltcG9ydCBqYXZhLmlvLkZpbGU7DQoraW1wb3J0IGphdmEuaW8u
SU9FeGNlcHRpb247DQoraW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07DQoraW1wb3J0IGphdmEu
aW8uUmVhZGVyOw0KK2ltcG9ydCBqYXZhLmlvLldyaXRlcjsNCitpbXBvcnQgamF2YS51dGlsLkFy
cmF5TGlzdDsNCitpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7DQoraW1wb3J0IGphdmEudXRpbC5M
aXN0Ow0KK2ltcG9ydCBqYXZhLnV0aWwuTG9jYWxlOw0KK2ltcG9ydCBqYXZhLnV0aWwuTWFwOw0K
K2ltcG9ydCBqYXZhLnV0aWwuU29ydGVkTWFwOw0KK2ltcG9ydCBqYXZhLnV0aWwuVHJlZU1hcDsN
CitpbXBvcnQgamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWw7DQoraW1wb3J0IG9yZy5hcGFjaGUubHVj
ZW5lLmRvY3VtZW50LkRhdGVUb29sczsNCitpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1l
bnQuRG9jdW1lbnQ7DQoraW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0K
K2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suT3Blbkdyb2tMb2dnZXI7DQoraW1wb3J0
IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5GaWxlQW5hbHl6ZXIuR2VucmU7DQor
aW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5hcmNoaXZlLkJaaXAyQW5h
bHl6ZXJGYWN0b3J5Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMu
YXJjaGl2ZS5HWklQQW5hbHl6ZXJGYWN0b3J5Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Bl
bmdyb2suYW5hbHlzaXMuYXJjaGl2ZS5UYXJBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5v
cGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5hcmNoaXZlLlppcEFuYWx5emVyRmFjdG9yeTsN
CitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmMuQ0FuYWx5emVyRmFj
dG9yeTsNCitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmMuQ3h4QW5h
bHl6ZXJGYWN0b3J5Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMu
ZGF0YS5JZ25vcmFudEFuYWx5emVyRmFjdG9yeTsNCitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9w
ZW5ncm9rLmFuYWx5c2lzLmRhdGEuSW1hZ2VBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5v
cGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5kb2N1bWVudC5Ucm9mZkFuYWx5emVyRmFjdG9y
eTsNCitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmV4ZWN1dGFibGVz
LkVMRkFuYWx5emVyRmFjdG9yeTsNCitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFu
YWx5c2lzLmV4ZWN1dGFibGVzLkphckFuYWx5emVyRmFjdG9yeTsNCitpbXBvcnQgb3JnLm9wZW5z
b2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmV4ZWN1dGFibGVzLkphdmFDbGFzc0FuYWx5emVyRmFj
dG9yeTsNCitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmZvcnRyYW4u
Rm9ydHJhbkFuYWx5emVyRmFjdG9yeTsNCitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9r
LmFuYWx5c2lzLmphdmEuSmF2YUFuYWx5emVyRmFjdG9yeTsNCitpbXBvcnQgb3JnLm9wZW5zb2xh
cmlzLm9wZW5ncm9rLmFuYWx5c2lzLmxpc3AuTGlzcEFuYWx5emVyRmFjdG9yeTsNCitpbXBvcnQg
b3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLnBsYWluLlBsYWluQW5hbHl6ZXJGYWN0
b3J5Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMucGxhaW4uWE1M
QW5hbHl6ZXJGYWN0b3J5Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlz
aXMuc2guU2hBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jv
ay5hbmFseXNpcy5zcWwuU1FMQW5hbHl6ZXJGYWN0b3J5Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFy
aXMub3Blbmdyb2suYW5hbHlzaXMudGNsLlRjbEFuYWx5emVyRmFjdG9yeTsNCitpbXBvcnQgb3Jn
Lm9wZW5zb2xhcmlzLm9wZW5ncm9rLmNvbmZpZ3VyYXRpb24uUHJvamVjdDsNCitpbXBvcnQgb3Jn
Lm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuQW5ub3RhdGlvbjsNCitpbXBvcnQgb3JnLm9w
ZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuSGlzdG9yeUV4Y2VwdGlvbjsNCitpbXBvcnQgb3Jn
Lm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuSGlzdG9yeUd1cnU7DQoraW1wb3J0IG9yZy5v
cGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5Lkhpc3RvcnlSZWFkZXI7DQoraW1wb3J0IG9yZy5v
cGVuc29sYXJpcy5vcGVuZ3Jvay53ZWIuVXRpbDsNCisNCisvKioNCisgKiBNYW5hZ2VzIGFuZCBw
b3J2aWRlcyBBbmFseXplcnMgYXMgbmVlZGVkLiBQbGVhc2Ugc2VlDQorICogPGEgaHJlZj0iaHR0
cDovL3d3dy5vcGVuc29sYXJpcy5vcmcvb3MvcHJvamVjdC9vcGVuZ3Jvay9tYW51YWwvaW50ZXJu
YWxzLyI+DQorICogdGhpczwvYT4gcGFnZSBmb3IgYSBncmVhdCBkZXNjcmlwdGlvbiBvZiB0aGUg
cHVycG9zZSBvZiB0aGUgQW5hbHl6ZXJHdXJ1Lg0KKyAqDQorICogQ3JlYXRlZCBvbiBTZXB0ZW1i
ZXIgMjIsIDIwMDUNCisgKiBAYXV0aG9yIENoYW5kYW4NCisgKi8NCitwdWJsaWMgY2xhc3MgQW5h
bHl6ZXJHdXJ1IHsNCisNCisgICAgLyoqIFRoZSBkZWZhdWx0IHtAY29kZSBGaWxlQW5hbHl6ZXJG
YWN0b3J5fSBpbnN0YW5jZS4gKi8NCisgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgRmlsZUFuYWx5
emVyRmFjdG9yeQ0KKyAgICAgICAgREVGQVVMVF9BTkFMWVpFUl9GQUNUT1JZID0gbmV3IEZpbGVB
bmFseXplckZhY3RvcnkoKTsNCisNCisgICAgLyoqIE1hcCBmcm9tIGZpbGUgbmFtZXMgdG8gYW5h
bHl6ZXIgZmFjdG9yaWVzLiAqLw0KKyAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBNYXA8U3RyaW5n
LCBGaWxlQW5hbHl6ZXJGYWN0b3J5Pg0KKyAgICAgICAgRklMRV9OQU1FUyA9IG5ldyBIYXNoTWFw
PFN0cmluZywgRmlsZUFuYWx5emVyRmFjdG9yeT4oKTsNCisNCisgICAgLyoqIE1hcCBmcm9tIGZp
bGUgZXh0ZW5zaW9ucyB0byBhbmFseXplciBmYWN0b3JpZXMuICovDQorICAgIHByaXZhdGUgc3Rh
dGljIGZpbmFsIE1hcDxTdHJpbmcsIEZpbGVBbmFseXplckZhY3Rvcnk+DQorICAgICAgICBleHQg
PSBuZXcgSGFzaE1hcDxTdHJpbmcsIEZpbGVBbmFseXplckZhY3Rvcnk+KCk7DQorDQorICAgIC8v
IEBUT0RPOiBoYXZlIGEgY29tcGFyYXRvcg0KKyAgICAvKiogTWFwIGZyb20gbWFnaWMgc3RyaW5n
cyB0byBhbmFseXplciBmYWN0b3JpZXMuICovDQorICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFNv
cnRlZE1hcDxTdHJpbmcsIEZpbGVBbmFseXplckZhY3Rvcnk+DQorICAgICAgICBtYWdpY3MgPSBu
ZXcgVHJlZU1hcDxTdHJpbmcsIEZpbGVBbmFseXplckZhY3Rvcnk+KCk7DQorDQorICAgIC8qKg0K
KyAgICAgKiBMaXN0IG9mIG1hdGNoZXIgb2JqZWN0cyB3aGljaCBjYW4gYmUgdXNlZCB0byBkZXRl
cm1pbmUgd2hpY2ggYW5hbHl6ZXINCisgICAgICogZmFjdG9yeSB0byB1c2UuDQorICAgICAqLw0K
KyAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMaXN0PEZpbGVBbmFseXplckZhY3RvcnkuTWF0Y2hl
cj4NCisgICAgICAgIG1hdGNoZXJzID0gbmV3IEFycmF5TGlzdDxGaWxlQW5hbHl6ZXJGYWN0b3J5
Lk1hdGNoZXI+KCk7DQorDQorICAgIC8qKiBMaXN0IG9mIGFsbCByZWdpc3RlcmVkIHtAY29kZSBG
aWxlQW5hbHl6ZXJGYWN0b3J5fSBpbnN0YW5jZXMuICovDQorICAgIHByaXZhdGUgc3RhdGljIGZp
bmFsIExpc3Q8RmlsZUFuYWx5emVyRmFjdG9yeT4NCisgICAgICAgIGZhY3RvcmllcyA9IG5ldyBB
cnJheUxpc3Q8RmlsZUFuYWx5emVyRmFjdG9yeT4oKTsNCisNCisgICAgLyoNCisgICAgICogSWYg
eW91IHdyaXRlIHlvdXIgb3duIGFuYWx5emVyIHBsZWFzZSByZWdpc3RlciBpdCBoZXJlDQorICAg
ICAqLw0KKyAgICBzdGF0aWMgew0KKyAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeVtdIGFuYWx5
emVycyA9IHsNCisgICAgICAgICAgICBERUZBVUxUX0FOQUxZWkVSX0ZBQ1RPUlksDQorICAgICAg
ICAgICAgbmV3IElnbm9yYW50QW5hbHl6ZXJGYWN0b3J5KCksDQorICAgICAgICAgICAgbmV3IEJa
aXAyQW5hbHl6ZXJGYWN0b3J5KCksDQorICAgICAgICAgICAgbmV3IFhNTEFuYWx5emVyRmFjdG9y
eSgpLA0KKyAgICAgICAgICAgIG5ldyBUcm9mZkFuYWx5emVyRmFjdG9yeSgpLA0KKyAgICAgICAg
ICAgIG5ldyBFTEZBbmFseXplckZhY3RvcnkoKSwNCisgICAgICAgICAgICBuZXcgSmF2YUNsYXNz
QW5hbHl6ZXJGYWN0b3J5KCksDQorICAgICAgICAgICAgbmV3IEltYWdlQW5hbHl6ZXJGYWN0b3J5
KCksDQorICAgICAgICAgICAgSmFyQW5hbHl6ZXJGYWN0b3J5LkRFRkFVTFRfSU5TVEFOQ0UsDQor
ICAgICAgICAgICAgWmlwQW5hbHl6ZXJGYWN0b3J5LkRFRkFVTFRfSU5TVEFOQ0UsDQorICAgICAg
ICAgICAgbmV3IFRhckFuYWx5emVyRmFjdG9yeSgpLA0KKyAgICAgICAgICAgIG5ldyBDQW5hbHl6
ZXJGYWN0b3J5KCksDQorICAgICAgICAgICAgbmV3IEN4eEFuYWx5emVyRmFjdG9yeSgpLA0KKyAg
ICAgICAgICAgIG5ldyBTaEFuYWx5emVyRmFjdG9yeSgpLA0KKyAgICAgICAgICAgIFBsYWluQW5h
bHl6ZXJGYWN0b3J5LkRFRkFVTFRfSU5TVEFOQ0UsDQorICAgICAgICAgICAgbmV3IEdaSVBBbmFs
eXplckZhY3RvcnkoKSwNCisgICAgICAgICAgICBuZXcgSmF2YUFuYWx5emVyRmFjdG9yeSgpLA0K
KyAgICAgICAgICAgIG5ldyBMaXNwQW5hbHl6ZXJGYWN0b3J5KCksDQorICAgICAgICAgICAgbmV3
IFRjbEFuYWx5emVyRmFjdG9yeSgpLA0KKyAgICAgICAgICAgIG5ldyBTUUxBbmFseXplckZhY3Rv
cnkoKSwNCisgICAgICAgICAgICBuZXcgRm9ydHJhbkFuYWx5emVyRmFjdG9yeSgpDQorICAgICAg
ICB9Ow0KKw0KKyAgICAgICAgZm9yIChGaWxlQW5hbHl6ZXJGYWN0b3J5IGFuYWx5emVyIDogYW5h
bHl6ZXJzKSB7DQorICAgICAgICAgICAgcmVnaXN0ZXJBbmFseXplcihhbmFseXplcik7DQorICAg
ICAgICB9DQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAqIFJlZ2lzdGVyIGEge0Bjb2RlIEZp
bGVBbmFseXplckZhY3Rvcnl9IGluc3RhbmNlLg0KKyAgICAgKi8NCisgICAgcHJpdmF0ZSBzdGF0
aWMgdm9pZCByZWdpc3RlckFuYWx5emVyKEZpbGVBbmFseXplckZhY3RvcnkgZmFjdG9yeSkgew0K
KyAgICAgICAgZm9yIChTdHJpbmcgbmFtZSA6IGZhY3RvcnkuZ2V0RmlsZU5hbWVzKCkpIHsNCisg
ICAgICAgICAgICBGaWxlQW5hbHl6ZXJGYWN0b3J5IG9sZCA9IEZJTEVfTkFNRVMucHV0KG5hbWUs
IGZhY3RvcnkpOw0KKyAgICAgICAgICAgIGFzc2VydCBvbGQgPT0gbnVsbCA6DQorICAgICAgICAg
ICAgICAgICJuYW1lICciICsgbmFtZSArICInIHVzZWQgaW4gbXVsdGlwbGUgYW5hbHl6ZXJzIjsN
CisgICAgICAgIH0NCisgICAgICAgIGZvciAoU3RyaW5nIHN1ZmZpeCA6IGZhY3RvcnkuZ2V0U3Vm
Zml4ZXMoKSkgew0KKyAgICAgICAgICAgIEZpbGVBbmFseXplckZhY3Rvcnkgb2xkID0gZXh0LnB1
dChzdWZmaXgsIGZhY3RvcnkpOw0KKyAgICAgICAgICAgIGFzc2VydCBvbGQgPT0gbnVsbCA6DQor
ICAgICAgICAgICAgInN1ZmZpeCAnIiArIHN1ZmZpeCArICInIHVzZWQgaW4gbXVsdGlwbGUgYW5h
bHl6ZXJzIjsNCisgICAgICAgIH0NCisgICAgICAgIGZvciAoU3RyaW5nIG1hZ2ljIDogZmFjdG9y
eS5nZXRNYWdpY1N0cmluZ3MoKSkgew0KKyAgICAgICAgICAgIEZpbGVBbmFseXplckZhY3Rvcnkg
b2xkID0gbWFnaWNzLnB1dChtYWdpYywgZmFjdG9yeSk7DQorICAgICAgICAgICAgYXNzZXJ0IG9s
ZCA9PSBudWxsIDoNCisgICAgICAgICAgICAgICAgIm1hZ2ljICciICsgbWFnaWMgKyAiJyB1c2Vk
IGluIG11bHRpcGxlIGFuYWx5emVycyI7DQorICAgICAgICB9DQorICAgICAgICBtYXRjaGVycy5h
ZGRBbGwoZmFjdG9yeS5nZXRNYXRjaGVycygpKTsNCisgICAgICAgIGZhY3Rvcmllcy5hZGQoZmFj
dG9yeSk7DQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAqICBJbnN0cnVjdCB0aGUgQW5hbHl6
ZXJHdXJ1IHRvIHVzZSBhIGdpdmVuIGFuYWx5emVyIGZvciBhIGdpdmVuDQorICAgICAqICBmaWxl
IGV4dGVuc2lvbi4NCisgICAgICogIEBwYXJhbSBleHRlbnNpb24gdGhlIGZpbGUtZXh0ZW5zaW9u
IHRvIGFkZA0KKyAgICAgKiAgQHBhcmFtIGZhY3RvcnkgICBhIGZhY3Rvcnkgd2hpY2ggY3JlYXRl
cw0KKyAgICAgKiAgICAgICAgICAgICAgICAgICB0aGUgYW5hbHl6ZXIgdG8gdXNlIGZvciB0aGUg
Z2l2ZW4gZXh0ZW5zaW9uDQorICAgICAqICAgICAgICAgICAgICAgICAgKGlmIHlvdSBwYXNzIG51
bGwgYXMgdGhlIGFuYWx5emVyLCB5b3Ugd2lsbCBkaXNhYmxlDQorICAgICAqICAgICAgICAgICAg
ICAgICAgIHRoZSBhbmFseXplciB1c2VkIGZvciB0aGF0IGV4dGVuc2lvbikNCisgICAgICovDQor
ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBhZGRFeHRlbnNpb24oU3RyaW5nIGV4dGVuc2lvbiwNCisg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWxlQW5hbHl6ZXJGYWN0b3J5IGZh
Y3RvcnkpIHsNCisgICAgICAgIGlmIChmYWN0b3J5ID09IG51bGwpIHsNCisgICAgICAgICAgICBl
eHQucmVtb3ZlKGV4dGVuc2lvbik7DQorICAgICAgICB9IGVsc2Ugew0KKyAgICAgICAgICAgIGV4
dC5wdXQoZXh0ZW5zaW9uLCBmYWN0b3J5KTsNCisgICAgICAgIH0NCisgICAgfQ0KKw0KKyAgICAv
KioNCisgICAgICogR2V0IHRoZSBkZWZhdWx0IEFuYWx5emVyLg0KKyAgICAgKi8NCisgICAgcHVi
bGljIHN0YXRpYyBGaWxlQW5hbHl6ZXIgZ2V0QW5hbHl6ZXIoKSB7DQorICAgICAgICByZXR1cm4g
REVGQVVMVF9BTkFMWVpFUl9GQUNUT1JZLmdldEFuYWx5emVyKCk7DQorICAgIH0NCisNCisgICAg
LyoqDQorICAgICAqIEdldCBhbiBhbmFseXplciBzdWl0ZWQgdG8gYW5hbHl6ZSBhIGZpbGUuIFRo
aXMgZnVuY3Rpb24gd2lsbCByZXVzZQ0KKyAgICAgKiBhbmFseXplcnMgc2luY2UgdGhleSBhcmUg
Y29zdGx5Lg0KKyAgICAgKiANCisgICAgICogQHBhcmFtIGluIElucHV0IHN0cmVhbSBjb250YWlu
aW5nIGRhdGEgdG8gYmUgYW5hbHl6ZWQNCisgICAgICogQHBhcmFtIGZpbGUgTmFtZSBvZiB0aGUg
ZmlsZSB0byBiZSBhbmFseXplZA0KKyAgICAgKiBAcmV0dXJuIEFuIGFuYWx5emVyIHN1aXRlZCBm
b3IgdGhhdCBmaWxlIGNvbnRlbnQNCisgICAgICogQHRocm93cyBqYXZhLmlvLklPRXhjZXB0aW9u
IElmIGFuIGVycm9yIG9jY3VycyB3aGlsZSBhY2Nlc3NpbmcgdGhlDQorICAgICAqICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBkYXRhIGluIHRoZSBpbnB1dCBzdHJlYW0uDQorICAgICAqLw0K
KyAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFseXplciBnZXRBbmFseXplcihJbnB1dFN0cmVhbSBp
biwgU3RyaW5nIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorICAgICAgICBGaWxlQW5hbHl6
ZXJGYWN0b3J5IGZhY3RvcnkgPSBmaW5kKGluLCBmaWxlKTsNCisgICAgICAgIGlmIChmYWN0b3J5
ID09IG51bGwpIHsNCisgICAgICAgICAgICByZXR1cm4gZ2V0QW5hbHl6ZXIoKTsNCisgICAgICAg
IH0NCisgICAgICAgIHJldHVybiBmYWN0b3J5LmdldEFuYWx5emVyKCk7DQorICAgIH0NCisNCisg
ICAgLyoqDQorICAgICAqIENyZWF0ZSBhIEx1Y2VuZSBkb2N1bWVudCBhbmQgZmlsbCBpbiB0aGUg
cmVxdWlyZWQgZmllbGRzDQorICAgICAqIEBwYXJhbSBmaWxlIFRoZSBmaWxlIHRvIGluZGV4DQor
ICAgICAqIEBwYXJhbSBpbiBUaGUgZGF0YSB0byBnZW5lcmF0ZSB0aGUgaW5kZXggZm9yDQorICAg
ICAqIEBwYXJhbSBwYXRoIFdoZXJlIHRoZSBmaWxlIGlzIGxvY2F0ZWQgKGZyb20gc291cmNlIHJv
b3QpDQorICAgICAqIEByZXR1cm4gVGhlIEx1Y2VuZSBkb2N1bWVudCB0byBhZGQgdG8gdGhlIGlu
ZGV4IGRhdGFiYXNlDQorICAgICAqIEB0aHJvd3MgamF2YS5pby5JT0V4Y2VwdGlvbiBJZiBhbiBl
eGNlcHRpb24gb2NjdXJzIHdoaWxlIGNvbGxlY3RpbmcgdGhlDQorICAgICAqICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBkYXRhcw0KKyAgICAgKi8NCisgICAgcHVibGljIERvY3VtZW50IGdl
dERvY3VtZW50KEZpbGUgZmlsZSwgSW5wdXRTdHJlYW0gaW4sIFN0cmluZyBwYXRoLA0KKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgRmlsZUFuYWx5emVyIGZhKSB0aHJvd3MgSU9FeGNl
cHRpb24gew0KKyAgICAgICAgRG9jdW1lbnQgZG9jID0gbmV3IERvY3VtZW50KCk7DQorICAgICAg
ICBTdHJpbmcgZGF0ZSA9IERhdGVUb29scy50aW1lVG9TdHJpbmcoZmlsZS5sYXN0TW9kaWZpZWQo
KSwgRGF0ZVRvb2xzLlJlc29sdXRpb24uTUlMTElTRUNPTkQpOw0KKyAgICAgICAgZG9jLmFkZChu
ZXcgRmllbGQoInUiLCBVdGlsLnVpZChwYXRoLCBkYXRlKSwgRmllbGQuU3RvcmUuWUVTLCBGaWVs
ZC5JbmRleC5OT1RfQU5BTFlaRUQpKTsNCisgICAgICAgIGRvYy5hZGQobmV3IEZpZWxkKCJmdWxs
cGF0aCIsIGZpbGUuZ2V0QWJzb2x1dGVQYXRoKCksIEZpZWxkLlN0b3JlLk5PLCBGaWVsZC5JbmRl
eC5OT1RfQU5BTFlaRUQpKTsNCisNCisgICAgICAgIHRyeSB7DQorICAgICAgICAgICAgSGlzdG9y
eVJlYWRlciBociA9IEhpc3RvcnlHdXJ1LmdldEluc3RhbmNlKCkuZ2V0SGlzdG9yeVJlYWRlcihm
aWxlKTsNCisgICAgICAgICAgICBpZiAoaHIgIT0gbnVsbCkgew0KKyAgICAgICAgICAgICAgICBk
b2MuYWRkKG5ldyBGaWVsZCgiaGlzdCIsIGhyKSk7DQorICAgICAgICAgICAgICAgIC8vIGRhdGUg
PSBoci5nZXRMYXN0Q29tbWVudERhdGUoKSAvL1JGRQ0KKyAgICAgICAgICAgIH0NCisgICAgICAg
IH0gY2F0Y2ggKEhpc3RvcnlFeGNlcHRpb24gZSkgew0KKyAgICAgICAgICAgIE9wZW5Hcm9rTG9n
Z2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAiQW4gZXJyb3Igb2NjdXJyZWQgd2hp
bGUgcmVhZGluZyBoaXN0b3J5OiAiLCBlKTsNCisgICAgICAgIH0NCisgICAgICAgIGRvYy5hZGQo
bmV3IEZpZWxkKCJkYXRlIiwgZGF0ZSwgRmllbGQuU3RvcmUuWUVTLCBGaWVsZC5JbmRleC5OT1Rf
QU5BTFlaRUQpKTsNCisgICAgICAgIGlmIChwYXRoICE9IG51bGwpIHsNCisgICAgICAgICAgICBk
b2MuYWRkKG5ldyBGaWVsZCgicGF0aCIsIHBhdGgsIEZpZWxkLlN0b3JlLllFUywgRmllbGQuSW5k
ZXguQU5BTFlaRUQpKTsNCisgICAgICAgICAgICBQcm9qZWN0IHByb2plY3QgPSBQcm9qZWN0Lmdl
dFByb2plY3QocGF0aCk7DQorICAgICAgICAgICAgaWYgKHByb2plY3QgIT0gbnVsbCkgew0KKyAg
ICAgICAgICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicHJvamVjdCIsIHByb2plY3QuZ2V0UGF0
aCgpLCBGaWVsZC5TdG9yZS5ZRVMsIEZpZWxkLkluZGV4LkFOQUxZWkVEKSk7DQorICAgICAgICAg
ICAgfQ0KKyAgICAgICAgfQ0KKw0KKyAgICAgICAgaWYgKGZhICE9IG51bGwpIHsNCisgICAgICAg
ICAgICBHZW5yZSBnID0gZmEuZ2V0R2VucmUoKTsNCisgICAgICAgICAgICBpZiAoZyA9PSBHZW5y
ZS5QTEFJTikgew0KKyAgICAgICAgICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgidCIsICJwIiwg
RmllbGQuU3RvcmUuWUVTLCBGaWVsZC5JbmRleC5OT1RfQU5BTFlaRUQpKTsNCisgICAgICAgICAg
ICB9IGVsc2UgaWYgKGcgPT0gR2VucmUuWFJFRkFCTEUpIHsNCisgICAgICAgICAgICAgICAgZG9j
LmFkZChuZXcgRmllbGQoInQiLCAieCIsIEZpZWxkLlN0b3JlLllFUywgRmllbGQuSW5kZXguTk9U
X0FOQUxZWkVEKSk7DQorICAgICAgICAgICAgfSBlbHNlIGlmIChnID09IEdlbnJlLkhUTUwpIHsN
CisgICAgICAgICAgICAgICAgZG9jLmFkZChuZXcgRmllbGQoInQiLCAiaCIsIEZpZWxkLlN0b3Jl
LllFUywgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVEKSk7DQorICAgICAgICAgICAgfQ0KKyAgICAg
ICAgICAgIGZhLmFuYWx5emUoZG9jLCBpbik7DQorICAgICAgICB9DQorDQorICAgICAgICByZXR1
cm4gZG9jOw0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBHZXQgdGhlIGNvbnRlbnQgdHlw
ZSBmb3IgYSBuYW1lZCBmaWxlLg0KKyAgICAgKg0KKyAgICAgKiBAcGFyYW0gaW4gVGhlIGlucHV0
IHN0cmVhbSB3ZSB3YW50IHRvIGdldCB0aGUgY29udGVudCB0eXBlIGZvciAoaWYNCisgICAgICog
ICAgICAgICAgIHdlIGNhbm5vdCBkZXRlcm1pbmUgdGhlIGNvbnRlbnQgdHlwZSBieSB0aGUgZmls
ZW5hbWUpDQorICAgICAqIEBwYXJhbSBmaWxlIFRoZSBuYW1lIG9mIHRoZSBmaWxlDQorICAgICAq
IEByZXR1cm4gVGhlIGNvbnRlbnRUeXBlIHN1aXRhYmxlIGZvciBwcmludGluZyB0byByZXNwb25z
ZS5zZXRDb250ZW50VHlwZSgpIG9yIG51bGwNCisgICAgICogICAgICAgICBpZiB0aGUgZmFjdG9y
eSB3YXMgbm90IGZvdW5kDQorICAgICAqIEB0aHJvd3MgamF2YS5pby5JT0V4Y2VwdGlvbiBJZiBh
biBlcnJvciBvY2N1cnMgd2hpbGUgYWNjZXNzaW5nIHRoZSBpbnB1dA0KKyAgICAgKiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLg0KKyAgICAgKi8NCisgICAgcHVibGljIHN0YXRp
YyBTdHJpbmcgZ2V0Q29udGVudFR5cGUoSW5wdXRTdHJlYW0gaW4sIFN0cmluZyBmaWxlKSB0aHJv
d3MgSU9FeGNlcHRpb24gew0KKyAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5ID0g
ZmluZChpbiwgZmlsZSk7DQorICAgICAgICBTdHJpbmcgdHlwZSA9IG51bGw7DQorICAgICAgICBp
ZiAoZmFjdG9yeSAhPSBudWxsKSB7DQorICAgICAgICAgICAgdHlwZSA9IGZhY3RvcnkuZ2V0Q29u
dGVudFR5cGUoKTsNCisgICAgICAgIH0NCisgICAgICAgIHJldHVybiB0eXBlOw0KKyAgICB9DQor
DQorICAgIC8qKg0KKyAgICAgKiBXcml0ZSBhIGJyb3dzYWJsZSB2ZXJzaW9uIG9mIHRoZSBmaWxl
DQorICAgICAqDQorICAgICAqIEBwYXJhbSBmYWN0b3J5IFRoZSBhbmFseXplciBmYWN0b3J5IGZv
ciB0aGlzIGZpbGV0eXBlDQorICAgICAqIEBwYXJhbSBpbiBUaGUgaW5wdXQgc3RyZWFtIGNvbnRh
aW5pbmcgdGhlIGRhdGENCisgICAgICogQHBhcmFtIG91dCBXaGVyZSB0byB3cml0ZSB0aGUgcmVz
dWx0DQorICAgICAqIEBwYXJhbSBhbm5vdGF0aW9uIEFubm90YXRpb24gaW5mb3JtYXRpb24gZm9y
IHRoZSBmaWxlDQorICAgICAqIEBwYXJhbSBwcm9qZWN0IFByb2plY3QgdGhlIGZpbGUgYmVsb25n
cyB0bw0KKyAgICAgKiBAdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24gSWYgYW4gZXJyb3Igb2Nj
dXJzIHdoaWxlIGNyZWF0aW5nIHRoZQ0KKyAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgb3V0cHV0DQorICAgICAqLw0KKyAgICBwdWJsaWMgc3RhdGljIHZvaWQgd3JpdGVYcmVmKEZp
bGVBbmFseXplckZhY3RvcnkgZmFjdG9yeSwgUmVhZGVyIGluLA0KKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFdyaXRlciBvdXQsIEFubm90YXRpb24gYW5ub3RhdGlvbiwgUHJvamVj
dCBwcm9qZWN0KQ0KKyAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uDQorICAgIHsNCisgICAgICAg
IFJlYWRlciBpbnB1dCA9IGluOw0KKyAgICAgICAgaWYgKGZhY3RvcnkuZ2V0R2VucmUoKSA9PSBH
ZW5yZS5QTEFJTikgew0KKyAgICAgICAgICAgIC8vIFRoaXMgaXMgc29tZSBraW5kIG9mIHRleHQg
ZmlsZSwgc28gd2UgbmVlZCB0byBleHBhbmQgdGFicyB0bw0KKyAgICAgICAgICAgIC8vIHNwYWNl
cyB0byBtYXRjaCB0aGUgcHJvamVjdCdzIHRhYiBzZXR0aW5ncy4NCisgICAgICAgICAgICBpbnB1
dCA9IEV4cGFuZFRhYnNSZWFkZXIud3JhcChpbiwgcHJvamVjdCk7DQorICAgICAgICB9DQorICAg
ICAgICBmYWN0b3J5LndyaXRlWHJlZihpbnB1dCwgb3V0LCBhbm5vdGF0aW9uLCBwcm9qZWN0KTsN
CisgICAgfQ0KKw0KKyAgICAvKioNCisgICAgICogR2V0IHRoZSBnZW5yZSBvZiBhIGZpbGUNCisg
ICAgICoNCisgICAgICogQHBhcmFtIGZpbGUgVGhlIGZpbGUgdG8gaW5wZWN0DQorICAgICAqIEBy
ZXR1cm4gVGhlIGdlbnJlIHN1aXRhYmxlIHRvIGRlY2lkZSBob3cgdG8gZGlzcGxheSB0aGUgZmls
ZQ0KKyAgICAgKi8NCisgICAgcHVibGljIHN0YXRpYyBHZW5yZSBnZXRHZW5yZShTdHJpbmcgZmls
ZSkgew0KKyAgICAgICAgcmV0dXJuIGdldEdlbnJlKGZpbmQoZmlsZSkpOw0KKyAgICB9DQorDQor
ICAgIC8qKg0KKyAgICAgKiBHZXQgdGhlIGdlbnJlIG9mIGEgYnVsayBvZiBkYXRhDQorICAgICAq
DQorICAgICAqIEBwYXJhbSBpbiBBIHN0cmVhbSBjb250YWluaW5nIHRoZSBkYXRhDQorICAgICAq
IEByZXR1cm4gVGhlIGdlbnJlIHN1aXRhYmxlIHRvIGRlY2lkZSBob3cgdG8gZGlzcGxheSB0aGUg
ZmlsZQ0KKyAgICAgKiBAdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24gSWYgYW4gZXJyb3Igb2Nj
dXJzIHdoaWxlIGdldHRpbmcgdGhlIGNvbnRlbnQNCisgICAgICovDQorICAgIHB1YmxpYyBzdGF0
aWMgR2VucmUgZ2V0R2VucmUoSW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQor
ICAgICAgICByZXR1cm4gZ2V0R2VucmUoZmluZChpbikpOw0KKyAgICB9DQorDQorICAgIC8qKg0K
KyAgICAgKiBHZXQgdGhlIGdlbnJlIGZvciBhIG5hbWVkIGNsYXNzICh0aGlzIGlzIG1vc3QgbGlr
ZWx5IGFuIGFuYWx5emVyKQ0KKyAgICAgKiBAcGFyYW0gZmFjdG9yeSB0aGUgYW5hbHl6ZXIgZmFj
dG9yeSB0byBnZXQgdGhlIGdlbnJlIGZvcg0KKyAgICAgKiBAcmV0dXJuIFRoZSBnZW5yZSBvZiB0
aGlzIGNsYXNzIChudWxsIGlmIG5vdCBmb3VuZCkNCisgICAgICovDQorICAgIHB1YmxpYyBzdGF0
aWMgR2VucmUgZ2V0R2VucmUoRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5KSB7DQorICAgICAg
ICBpZiAoZmFjdG9yeSAhPSBudWxsKSB7DQorICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkuZ2V0
R2VucmUoKTsNCisgICAgICAgIH0NCisgICAgICAgIHJldHVybiBudWxsOw0KKyAgICB9DQorDQor
ICAgIC8qKg0KKyAgICAgKiBGaW5kIGEge0Bjb2RlIEZpbGVBbmFseXplckZhY3Rvcnl9IHdpdGgg
dGhlIHNwZWNpZmllZCBjbGFzcyBuYW1lLiBJZiBvbmUNCisgICAgICogZG9lc24ndCBleGlzdCwg
Y3JlYXRlIG9uZSBhbmQgcmVnaXN0ZXIgaXQuDQorICAgICAqDQorICAgICAqIEBwYXJhbSBmYWN0
b3J5Q2xhc3NOYW1lIG5hbWUgb2YgdGhlIGZhY3RvcnkgY2xhc3MNCisgICAgICogQHJldHVybiBh
IGZpbGUgYW5hbHl6ZXIgZmFjdG9yeQ0KKyAgICAgKg0KKyAgICAgKiBAdGhyb3dzIENsYXNzTm90
Rm91bmRFeGNlcHRpb24gaWYgdGhlcmUgaXMgbm8gY2xhc3Mgd2l0aCB0aGF0IG5hbWUNCisgICAg
ICogQHRocm93cyBDbGFzc0Nhc3RFeGNlcHRpb24gaWYgdGhlIGNsYXNzIGlzIG5vdCBhIHN1YmNs
YXNzIG9mIHtAY29kZQ0KKyAgICAgKiBGaWxlQW5hbHl6ZXJGYWN0b3J5fQ0KKyAgICAgKiBAdGhy
b3dzIElsbGVnYWxBY2Nlc3NFeGNlcHRpb24gaWYgdGhlIGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBh
Y2Nlc3NlZA0KKyAgICAgKiBAdGhyb3dzIEluc3RhbnRpYXRpb25FeGNlcHRpb24gaWYgdGhlIGNs
YXNzIGNhbm5vdCBiZSBpbnN0YW50aWF0ZWQNCisgICAgICovDQorICAgIHB1YmxpYyBzdGF0aWMg
RmlsZUFuYWx5emVyRmFjdG9yeSBmaW5kRmFjdG9yeShTdHJpbmcgZmFjdG9yeUNsYXNzTmFtZSkN
CisgICAgICAgIHRocm93cyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uLCBJbGxlZ2FsQWNjZXNzRXhj
ZXB0aW9uLA0KKyAgICAgICAgICAgICAgIEluc3RhbnRpYXRpb25FeGNlcHRpb24NCisgICAgew0K
KyAgICAgICAgcmV0dXJuIGZpbmRGYWN0b3J5KENsYXNzLmZvck5hbWUoZmFjdG9yeUNsYXNzTmFt
ZSkpOw0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBGaW5kIGEge0Bjb2RlIEZpbGVBbmFs
eXplckZhY3Rvcnl9IHdoaWNoIGlzIGFuIGluc3RhbmNlIG9mIHRoZSBzcGVjaWZpZWQNCisgICAg
ICogY2xhc3MuIElmIG9uZSBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgb25lIGFuZCByZWdpc3RlciBp
dC4NCisgICAgICoNCisgICAgICogQHBhcmFtIGZhY3RvcnlDbGFzcyB0aGUgZmFjdG9yeSBjbGFz
cw0KKyAgICAgKiBAcmV0dXJuIGEgZmlsZSBhbmFseXplciBmYWN0b3J5DQorICAgICAqDQorICAg
ICAqIEB0aHJvd3MgQ2xhc3NDYXN0RXhjZXB0aW9uIGlmIHRoZSBjbGFzcyBpcyBub3QgYSBzdWJj
bGFzcyBvZiB7QGNvZGUNCisgICAgICogRmlsZUFuYWx5emVyRmFjdG9yeX0NCisgICAgICogQHRo
cm93cyBJbGxlZ2FsQWNjZXNzRXhjZXB0aW9uIGlmIHRoZSBjb25zdHJ1Y3RvciBjYW5ub3QgYmUg
YWNjZXNzZWQNCisgICAgICogQHRocm93cyBJbnN0YW50aWF0aW9uRXhjZXB0aW9uIGlmIHRoZSBj
bGFzcyBjYW5ub3QgYmUgaW5zdGFudGlhdGVkDQorICAgICAqLw0KKyAgICBwcml2YXRlIHN0YXRp
YyBGaWxlQW5hbHl6ZXJGYWN0b3J5IGZpbmRGYWN0b3J5KENsYXNzIGZhY3RvcnlDbGFzcykNCisg
ICAgICAgIHRocm93cyBJbnN0YW50aWF0aW9uRXhjZXB0aW9uLCBJbGxlZ2FsQWNjZXNzRXhjZXB0
aW9uDQorICAgIHsNCisgICAgICAgIGZvciAoRmlsZUFuYWx5emVyRmFjdG9yeSBmIDogZmFjdG9y
aWVzKSB7DQorICAgICAgICAgICAgaWYgKGYuZ2V0Q2xhc3MoKSA9PSBmYWN0b3J5Q2xhc3MpIHsN
CisgICAgICAgICAgICAgICAgcmV0dXJuIGY7DQorICAgICAgICAgICAgfQ0KKyAgICAgICAgfQ0K
KyAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmID0NCisgICAgICAgICAgICAoRmlsZUFuYWx5
emVyRmFjdG9yeSkgZmFjdG9yeUNsYXNzLm5ld0luc3RhbmNlKCk7DQorICAgICAgICByZWdpc3Rl
ckFuYWx5emVyKGYpOw0KKyAgICAgICAgcmV0dXJuIGY7DQorICAgIH0NCisNCisgICAgLyoqDQor
ICAgICAqIEZpbmRzIGEgc3VpdGFibGUgYW5hbHlzZXIgY2xhc3MgZm9yIGZpbGUgbmFtZS4gSWYg
dGhlIGFuYWx5emVyIGNhbm5vdA0KKyAgICAgKiBiZSBkZXRlcm1pbmVkIGJ5IHRoZSBmaWxlIGV4
dGVuc2lvbiwgdHJ5IHRvIGxvb2sgYXQgdGhlIGRhdGEgaW4gdGhlDQorICAgICAqIElucHV0U3Ry
ZWFtIHRvIGZpbmQgYSBzdWl0YWJsZSBhbmFseXplci4NCisgICAgICoNCisgICAgICogVXNlIGlm
IHlvdSBqdXN0IHdhbnQgdG8gZmluZCBmaWxlIHR5cGUuDQorICAgICAqDQorICAgICAqDQorICAg
ICAqIEBwYXJhbSBpbiBUaGUgaW5wdXQgc3RyZWFtIGNvbnRhaW5pbmcgdGhlIGRhdGENCisgICAg
ICogQHBhcmFtIGZpbGUgVGhlIGZpbGUgbmFtZSB0byBnZXQgdGhlIGFuYWx5emVyIGZvcg0KKyAg
ICAgKiBAcmV0dXJuIHRoZSBhbmFseXplciBmYWN0b3J5IHRvIHVzZQ0KKyAgICAgKiBAdGhyb3dz
IGphdmEuaW8uSU9FeGNlcHRpb24gSWYgYSBwcm9ibGVtIG9jY3VycyB3aGlsZSByZWFkaW5nIHRo
ZSBkYXRhDQorICAgICAqLw0KKyAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFseXplckZhY3Rvcnkg
ZmluZChJbnB1dFN0cmVhbSBpbiwgU3RyaW5nIGZpbGUpDQorICAgICAgICB0aHJvd3MgSU9FeGNl
cHRpb24NCisgICAgew0KKyAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5ID0gZmlu
ZChmaWxlKTsNCisgICAgICAgIGlmIChmYWN0b3J5ICE9IG51bGwpIHsNCisgICAgICAgICAgICBy
ZXR1cm4gZmFjdG9yeTsNCisgICAgICAgIH0NCisgICAgICAgIHJldHVybiBmaW5kKGluKTsNCisg
ICAgfQ0KKw0KKyAgICAvKioNCisgICAgICogRmluZHMgYSBzdWl0YWJsZSBhbmFseXNlciBjbGFz
cyBmb3IgZmlsZSBuYW1lLg0KKyAgICAgKg0KKyAgICAgKiBAcGFyYW0gZmlsZSBUaGUgZmlsZSBu
YW1lIHRvIGdldCB0aGUgYW5hbHl6ZXIgZm9yDQorICAgICAqIEByZXR1cm4gdGhlIGFuYWx5emVy
IGZhY3RvcnkgdG8gdXNlDQorICAgICAqLw0KKyAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFseXpl
ckZhY3RvcnkgZmluZChTdHJpbmcgZmlsZSkgew0KKyAgICAgICAgU3RyaW5nIHBhdGggPSBmaWxl
Ow0KKyAgICAgICAgaW50IGkgPSAwOw0KKyAgICAgICAgaWYgKCgoaSA9IHBhdGgubGFzdEluZGV4
T2YoJy8nKSkgPiAwIHx8IChpID0gcGF0aC5sYXN0SW5kZXhPZignXFwnKSkgPiAwKSANCisgICAg
ICAgICAgICAmJiAoaSArIDEgPCBwYXRoLmxlbmd0aCgpKSkgew0KKyAgICAgICAgICAgIHBhdGgg
PSBwYXRoLnN1YnN0cmluZyhpICsgMSk7DQorICAgICAgICB9DQorICAgICAgICBpbnQgZG90cG9z
ID0gcGF0aC5sYXN0SW5kZXhPZignLicpOw0KKyAgICAgICAgaWYgKGRvdHBvcyA+PSAwKSB7DQor
ICAgICAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5ID0NCisgICAgICAgICAgICAg
ICAgZXh0LmdldChwYXRoLnN1YnN0cmluZyhkb3Rwb3MgKyAxKS50b1VwcGVyQ2FzZShMb2NhbGUu
VVMpKTsNCisgICAgICAgICAgICBpZiAoZmFjdG9yeSAhPSBudWxsKSB7DQorICAgICAgICAgICAg
ICAgIHJldHVybiBmYWN0b3J5Ow0KKyAgICAgICAgICAgIH0NCisgICAgICAgIH0NCisgICAgICAg
IC8vIGZpbGUgZG9lc24ndCBoYXZlIGFueSBvZiB0aGUgZXh0ZW5zaW9ucyB3ZSBrbm93LCB0cnkg
ZnVsbCBtYXRjaA0KKyAgICAgICAgcmV0dXJuIEZJTEVfTkFNRVMuZ2V0KHBhdGgudG9VcHBlckNh
c2UoTG9jYWxlLlVTKSk7DQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAqIEZpbmRzIGEgc3Vp
dGFibGUgYW5hbHlzZXIgY2xhc3MgZm9yIHRoZSBkYXRhIGluIHRoaXMgc3RyZWFtDQorICAgICAq
DQorICAgICAqIEBwYXJhbSBpbiBUaGUgc3RyZWFtIGNvbnRhaW5pbmcgdGhlIGRhdGEgdG8gYW5h
bHl6ZQ0KKyAgICAgKiBAcmV0dXJuIHRoZSBhbmFseXplciBmYWN0b3J5IHRvIHVzZQ0KKyAgICAg
KiBAdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24gaWYgYW4gZXJyb3Igb2NjdXJzIHdoaWxlIHJl
YWRpbmcgZGF0YSBmcm9tDQorICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUg
c3RyZWFtDQorICAgICAqLw0KKyAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFseXplckZhY3Rvcnkg
ZmluZChJbnB1dFN0cmVhbSBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisgICAgICAgIGluLm1h
cmsoOCk7DQorICAgICAgICBieXRlW10gY29udGVudCA9IG5ldyBieXRlWzhdOw0KKyAgICAgICAg
aW50IGxlbiA9IGluLnJlYWQoY29udGVudCk7DQorICAgICAgICBpbi5yZXNldCgpOw0KKyAgICAg
ICAgaWYgKGxlbiA8IDQpIHsNCisgICAgICAgICAgICByZXR1cm4gbnVsbDsNCisgICAgICAgIH0N
CisNCisgICAgICAgIEZpbGVBbmFseXplckZhY3RvcnkgZmFjdG9yeSA9IGZpbmQoY29udGVudCk7
DQorICAgICAgICBpZiAoZmFjdG9yeSAhPSBudWxsKSB7DQorICAgICAgICAgICAgcmV0dXJuIGZh
Y3Rvcnk7DQorICAgICAgICB9DQorDQorICAgICAgICBmb3IgKEZpbGVBbmFseXplckZhY3Rvcnku
TWF0Y2hlciBtYXRjaGVyIDogbWF0Y2hlcnMpIHsNCisgICAgICAgICAgICBGaWxlQW5hbHl6ZXJG
YWN0b3J5IGZhYyA9IG1hdGNoZXIuaXNNYWdpYyhjb250ZW50LCBpbik7DQorICAgICAgICAgICAg
aWYgKGZhYyAhPSBudWxsKSB7DQorICAgICAgICAgICAgICAgIHJldHVybiBmYWM7DQorICAgICAg
ICAgICAgfQ0KKyAgICAgICAgfQ0KKw0KKyAgICAgICAgcmV0dXJuIG51bGw7DQorICAgIH0NCisN
CisgICAgLyoqDQorICAgICAqIEZpbmRzIGEgc3VpdGFibGUgYW5hbHlzZXIgY2xhc3MgZm9yIGEg
bWFnaWMgc2lnbmF0dXJlDQorICAgICAqDQorICAgICAqIEBwYXJhbSBzaWduYXR1cmUgdGhlIG1h
Z2ljIHNpZ25hdHVyZSBsb29rIHVwDQorICAgICAqIEByZXR1cm4gdGhlIGFuYWx5emVyIGZhY3Rv
cnkgdG8gdXNlDQorICAgICAqLw0KKyAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFseXplckZhY3Rv
cnkgZmluZChieXRlW10gc2lnbmF0dXJlKSB7DQorICAgICAgICBjaGFyW10gY2hhcnMgPSBuZXcg
Y2hhcltzaWduYXR1cmUubGVuZ3RoID4gOCA/IDggOiBzaWduYXR1cmUubGVuZ3RoXTsNCisgICAg
ICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHsNCisgICAgICAgICAg
ICBjaGFyc1tpXSA9IChjaGFyKSAoMHhGRiAmIHNpZ25hdHVyZVtpXSk7DQorICAgICAgICB9DQor
ICAgICAgICByZXR1cm4gZmluZE1hZ2ljKG5ldyBTdHJpbmcoY2hhcnMpKTsNCisgICAgfQ0KKw0K
KyAgICAvKioNCisgICAgICogR2V0IGFuIGFuYWx5emVyIGJ5IGxvb2tpbmcgdXAgdGhlICJtYWdp
YyBzaWduYXR1cmUiDQorICAgICAqIEBwYXJhbSBzaWduYXR1cmUgdGhlIHNpZ25hdHVyZSB0byBs
b29rIHVwDQorICAgICAqIEByZXR1cm4gdGhlIGFuYWx5emVyIGZhY3RvcnkgdG8gaGFuZGxlIGRh
dGEgd2l0aCB0aGlzIHNpZ25hdHVyZQ0KKyAgICAgKi8NCisgICAgcHVibGljIHN0YXRpYyBGaWxl
QW5hbHl6ZXJGYWN0b3J5IGZpbmRNYWdpYyhTdHJpbmcgc2lnbmF0dXJlKSB7DQorICAgICAgICBG
aWxlQW5hbHl6ZXJGYWN0b3J5IGEgPSBtYWdpY3MuZ2V0KHNpZ25hdHVyZSk7DQorICAgICAgICBp
ZiAoYSA9PSBudWxsKSB7DQorICAgICAgICAgICAgU3RyaW5nIHNpZ1dpdGhvdXRCT00gPSBzdHJp
cEJPTShzaWduYXR1cmUpOw0KKyAgICAgICAgICAgIGZvciAoTWFwLkVudHJ5PFN0cmluZywgRmls
ZUFuYWx5emVyRmFjdG9yeT4gZW50cnkgOg0KKyAgICAgICAgICAgICAgICAgICAgIG1hZ2ljcy5l
bnRyeVNldCgpKSB7DQorICAgICAgICAgICAgICAgIGlmIChzaWduYXR1cmUuc3RhcnRzV2l0aChl
bnRyeS5nZXRLZXkoKSkpIHsNCisgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5nZXRW
YWx1ZSgpOw0KKyAgICAgICAgICAgICAgICB9DQorICAgICAgICAgICAgICAgIC8vIFNlZSBpZiB0
ZXh0IGZpbGVzIGhhdmUgdGhlIG1hZ2ljIHNlcXVlbmNlIGlmIHdlIHJlbW92ZSB0aGUNCisgICAg
ICAgICAgICAgICAgLy8gYnl0ZS1vcmRlciBtYXJrZXINCisgICAgICAgICAgICAgICAgaWYgKHNp
Z1dpdGhvdXRCT00gIT0gbnVsbCAmJg0KKyAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5Lmdl
dFZhbHVlKCkuZ2V0R2VucmUoKSA9PSBHZW5yZS5QTEFJTiAmJg0KKyAgICAgICAgICAgICAgICAg
ICAgICAgIHNpZ1dpdGhvdXRCT00uc3RhcnRzV2l0aChlbnRyeS5nZXRLZXkoKSkpIHsNCisgICAg
ICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5nZXRWYWx1ZSgpOw0KKyAgICAgICAgICAgICAg
ICB9DQorICAgICAgICAgICAgfQ0KKyAgICAgICAgfQ0KKyAgICAgICAgcmV0dXJuIGE7DQorICAg
IH0NCisNCisgICAgLyoqIEJ5dGUtb3JkZXIgbWFya2Vycy4gKi8NCisgICAgcHJpdmF0ZSBzdGF0
aWMgZmluYWwgU3RyaW5nW10gQk9NUyA9IHsNCisgICAgICAgIG5ldyBTdHJpbmcobmV3IGNoYXJb
XSB7MHhFRiwgMHhCQiwgMHhCRn0pLCAvLyBVVEYtOCBCT00NCisgICAgICAgIG5ldyBTdHJpbmco
bmV3IGNoYXJbXSB7MHhGRSwgMHhGRn0pLCAgICAgICAvLyBVVEYtMTZCRSBCT00NCisgICAgICAg
IG5ldyBTdHJpbmcobmV3IGNoYXJbXSB7MHhGRiwgMHhGRX0pLCAgICAgICAvLyBVVEYtMTZMRSBC
T00NCisgICAgfTsNCisNCisgICAgLyoqDQorICAgICAqIFN0cmlwIGF3YXkgdGhlIGJ5dGUtb3Jk
ZXIgbWFya2VyIGZyb20gdGhlIHN0cmluZywgaWYgaXQgaGFzIG9uZS4NCisgICAgICoNCisgICAg
ICogQHBhcmFtIHN0ciB0aGUgc3RyaW5nIHRvIHJlbW92ZSB0aGUgQk9NIGZyb20NCisgICAgICog
QHJldHVybiBhIHN0cmluZyB3aXRob3V0IHRoZSBieXRlLW9yZGVyIG1hcmtlciwgb3IgPGNvZGU+
bnVsbDwvY29kZT4gaWYNCisgICAgICogdGhlIHN0cmluZyBkb2Vzbid0IHN0YXJ0IHdpdGggYSBC
T00NCisgICAgICovDQorICAgIHByaXZhdGUgc3RhdGljIFN0cmluZyBzdHJpcEJPTShTdHJpbmcg
c3RyKSB7DQorICAgICAgICBmb3IgKFN0cmluZyBib20gOiBCT01TKSB7DQorICAgICAgICAgICAg
aWYgKHN0ci5zdGFydHNXaXRoKGJvbSkpIHsNCisgICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5z
dWJzdHJpbmcoYm9tLmxlbmd0aCgpKTsNCisgICAgICAgICAgICB9DQorICAgICAgICB9DQorICAg
ICAgICByZXR1cm4gbnVsbDsNCisgICAgfQ0KK30NCmRpZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDc2
M2U2MmM2YzQzMyBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL1RleHRBbmFs
eXplci5qYXZhDQotLS0gL2Rldi9udWxsCVRodSBKYW4gMDEgMDA6MDA6MDAgMTk3MCArMDAwMA0K
KysrIGIvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9UZXh0QW5hbHl6ZXIu
amF2YQlXZWQgTWFyIDAzIDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC0wLDAgKzEsNDYgQEANCitw
YWNrYWdlIG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpczsNCisNCitpbXBvcnQgamF2
YS5pby5JT0V4Y2VwdGlvbjsNCitpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsNCitpbXBvcnQg
amF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsNCitpbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFy
c2V0Ow0KKw0KK2ltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5Eb2N1bWVudDsNCisN
CitwdWJsaWMgYWJzdHJhY3QgY2xhc3MgVGV4dEFuYWx5emVyIGV4dGVuZHMgRmlsZUFuYWx5emVy
IHsNCisJcHVibGljIFRleHRBbmFseXplcihGaWxlQW5hbHl6ZXJGYWN0b3J5IGZhY3RvcnkpIHsN
CisJCXN1cGVyKGZhY3RvcnkpOw0KKwl9DQorDQorICAgIHB1YmxpYyBmaW5hbCB2b2lkIGFuYWx5
emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbSBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisg
ICAgCVN0cmluZyBjaGFyc2V0ID0gbnVsbDsNCisgICAgCQ0KKyAgICAJaW4ubWFyaygzKTsNCisg
ICAgCQ0KKyAgICAJYnl0ZVtdIGhlYWQgPSBuZXcgYnl0ZVszXTsNCisgICAgCWludCBiciA9IGlu
LnJlYWQoaGVhZCwgMCwgMyk7DQorDQorICAgIAlpZiAoYnIgPj0gMikgew0KKyAgICAJCWlmICgo
aGVhZFswXSA9PSAoYnl0ZSkweEZFICYmIGhlYWRbMV0gPT0gKGJ5dGUpMHhGRikgfHwgKGhlYWRb
MF0gPT0gKGJ5dGUpMHhGRiAmJiAoYnl0ZSloZWFkWzFdID09IChieXRlKTB4RkUpKSB7DQorICAg
IAkJCWNoYXJzZXQgPSAiVVRGMTYiOw0KKyAgICAJCQlpbi5yZXNldCgpOwkNCisgICAgCQl9DQor
ICAgIAl9DQorICAgIAlpZiAoYnIgPj0gMykgew0KKyAgICAJCWlmIChoZWFkWzBdID09IChieXRl
KTB4RUYgJiYgaGVhZFsxXSA9PSAoYnl0ZSkweEJCICYmIGhlYWRbMl0gPT0gKGJ5dGUpMHhCRikg
ew0KKyAgICAJCQkvKiBJbnB1dFN0cmVhbVJlYWRlciBkb2VzIG5vdCBwcm9wZXJseSBkaXNjYXJk
IEJPTSBvbiBVVEY4IHN0cmVhbXMsDQorICAgIAkJCSAqIHNvIGRvbid0IHJlc2V0IHRoZSBzdHJl
YW0uICovIA0KKyAgICAJCQljaGFyc2V0ID0gIlVURjgiOw0KKyAgICAJCX0NCisgICAgCX0NCisg
ICAgCQ0KKyAgICAJaWYgKGNoYXJzZXQgPT0gbnVsbCkgew0KKyAgICAJCWluLnJlc2V0KCk7DQor
ICAgIAkJY2hhcnNldCA9IENoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCk7DQorICAgIAl9
DQorICAgIAkNCisgICAgICAgIGFuYWx5emUoZG9jLCBuZXcgSW5wdXRTdHJlYW1SZWFkZXIoaW4s
IGNoYXJzZXQpKTsNCisgICAgfQ0KKyAgICANCisJcHJvdGVjdGVkIGFic3RyYWN0IHZvaWQgYW5h
bHl6ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtUmVhZGVyIHJlYWRlcikgdGhyb3dzIElPRXhj
ZXB0aW9uOw0KK30NCmRpZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDc2M2U2MmM2YzQzMyBzcmMvb3Jn
L29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2MvQ0FuYWx5emVyLmphdmENCi0tLSBhL3Ny
Yy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvYy9DQW5hbHl6ZXIuamF2YQlUdWUg
TWFyIDAyIDE2OjU1OjQ5IDIwMTAgKzAxMDANCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Bl
bmdyb2svYW5hbHlzaXMvYy9DQW5hbHl6ZXIuamF2YQlXZWQgTWFyIDAzIDE2OjQxOjA4IDIwMTAg
LTA1MDANCkBAIC0yNSw5ICsyNSwxMSBAQA0KIA0KIGltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9u
Ow0KIGltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOw0KK2ltcG9ydCBqYXZhLmlvLklucHV0U3Ry
ZWFtUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLlJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5TdHJp
bmdSZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uV3JpdGVyOw0KKw0KIGltcG9ydCBvcmcuYXBhY2hl
Lmx1Y2VuZS5hbmFseXNpcy5Ub2tlblN0cmVhbTsNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUu
ZG9jdW1lbnQuRG9jdW1lbnQ7DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZp
ZWxkOw0KQEAgLTU0LDcgKzU2LDcgQEANCiAgICAgICAgIHhyZWYgPSBuZXcgQ1hyZWYoZHVtbXkp
Ow0KICAgICB9DQogDQotICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1
dFN0cmVhbSBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisgICAgcHVibGljIHZvaWQgYW5hbHl6
ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtUmVhZGVyIGluKSB0aHJvd3MgSU9FeGNlcHRpb24g
ew0KICAgICAgICAgc3VwZXIuYW5hbHl6ZShkb2MsIGluKTsNCiAgICAgICAgIGRvYy5hZGQobmV3
IEZpZWxkKCJyZWZzIiwgZHVtbXkpKTsNCiAgICAgfSAgICANCmRpZmYgLXIgNzk0MDJlNzZiYTVh
IC1yIDc2M2U2MmM2YzQzMyBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2Mv
Q3h4QW5hbHl6ZXIuamF2YQ0KLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFs
eXNpcy9jL0N4eEFuYWx5emVyLmphdmEJVHVlIE1hciAwMiAxNjo1NTo0OSAyMDEwICswMTAwDQor
KysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2MvQ3h4QW5hbHl6ZXIu
amF2YQlXZWQgTWFyIDAzIDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC0yNSw5ICsyNSwxMSBAQA0K
IA0KIGltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOw0KIGltcG9ydCBqYXZhLmlvLklucHV0U3Ry
ZWFtOw0KK2ltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlv
LlJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7DQogaW1wb3J0IGphdmEuaW8u
V3JpdGVyOw0KKw0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5Ub2tlblN0cmVh
bTsNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7DQogaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KQEAgLTUxLDcgKzUzLDcgQEANCiAg
ICAgICAgIHhyZWYgPSBuZXcgQ3h4WHJlZihkdW1teSk7DQogICAgIH0NCiANCi0gICAgcHVibGlj
IHZvaWQgYW5hbHl6ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtIGluKSB0aHJvd3MgSU9FeGNl
cHRpb24gew0KKyAgICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJl
YW1SZWFkZXIgaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgICBzdXBlci5hbmFseXpl
KGRvYywgaW4pOw0KICAgICAgICAgZG9jLmFkZChuZXcgRmllbGQoInJlZnMiLCBkdW1teSkpOw0K
ICAgICB9ICAgIA0KZGlmZiAtciA3OTQwMmU3NmJhNWEgLXIgNzYzZTYyYzZjNDMzIHNyYy9vcmcv
b3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvZm9ydHJhbi9Gb3J0cmFuQW5hbHl6ZXIuamF2
YQ0KLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9mb3J0cmFuL0Zv
cnRyYW5BbmFseXplci5qYXZhCVR1ZSBNYXIgMDIgMTY6NTU6NDkgMjAxMCArMDEwMA0KKysrIGIv
c3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9mb3J0cmFuL0ZvcnRyYW5BbmFs
eXplci5qYXZhCVdlZCBNYXIgMDMgMTY6NDE6MDggMjAxMCAtMDUwMA0KQEAgLTI1LDkgKzI1LDEx
IEBADQogDQogaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247DQogaW1wb3J0IGphdmEuaW8uSW5w
dXRTdHJlYW07DQoraW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7DQogaW1wb3J0IGph
dmEuaW8uUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLlN0cmluZ1JlYWRlcjsNCiBpbXBvcnQgamF2
YS5pby5Xcml0ZXI7DQorDQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5c2lzLlRva2Vu
U3RyZWFtOw0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5Eb2N1bWVudDsNCiBp
bXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRmllbGQ7DQpAQCAtNTEsNyArNTMsNyBA
QA0KICAgICB9DQogDQogICAgIEBPdmVycmlkZQ0KLSAgICBwdWJsaWMgdm9pZCBhbmFseXplKERv
Y3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorICAgIHB1
YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRlciBpbikgdGhy
b3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIHN1cGVyLmFuYWx5emUoZG9jLCBpbik7DQogICAg
ICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicmVmcyIsIGR1bW15KSk7DQogICAgIH0NCmRpZmYgLXIg
Nzk0MDJlNzZiYTVhIC1yIDc2M2U2MmM2YzQzMyBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9r
L2FuYWx5c2lzL2phdmEvSmF2YUFuYWx5emVyLmphdmENCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFy
aXMvb3Blbmdyb2svYW5hbHlzaXMvamF2YS9KYXZhQW5hbHl6ZXIuamF2YQlUdWUgTWFyIDAyIDE2
OjU1OjQ5IDIwMTAgKzAxMDANCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5h
bHlzaXMvamF2YS9KYXZhQW5hbHl6ZXIuamF2YQlXZWQgTWFyIDAzIDE2OjQxOjA4IDIwMTAgLTA1
MDANCkBAIC0yNSw5ICsyNSwxMSBAQA0KIA0KIGltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOw0K
IGltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOw0KK2ltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFt
UmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLlJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5TdHJpbmdS
ZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uV3JpdGVyOw0KKw0KIGltcG9ydCBvcmcuYXBhY2hlLmx1
Y2VuZS5hbmFseXNpcy5Ub2tlblN0cmVhbTsNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9j
dW1lbnQuRG9jdW1lbnQ7DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxk
Ow0KQEAgLTUzLDcgKzU1LDcgQEANCiAgICAgICAgIHhyZWYgPSBuZXcgSmF2YVhyZWYoZHVtbXkp
Ow0KICAgICB9DQogDQotICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1
dFN0cmVhbSBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisgICAgcHVibGljIHZvaWQgYW5hbHl6
ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtUmVhZGVyIGluKSB0aHJvd3MgSU9FeGNlcHRpb24g
ew0KICAgICAgICAgc3VwZXIuYW5hbHl6ZShkb2MsIGluKTsNCiAgICAgICAgIGRvYy5hZGQobmV3
IEZpZWxkKCJyZWZzIiwgZHVtbXkpKTsNCiAgICAgfSAgICANCmRpZmYgLXIgNzk0MDJlNzZiYTVh
IC1yIDc2M2U2MmM2YzQzMyBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2xp
c3AvTGlzcEFuYWx5emVyLmphdmENCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2sv
YW5hbHlzaXMvbGlzcC9MaXNwQW5hbHl6ZXIuamF2YQlUdWUgTWFyIDAyIDE2OjU1OjQ5IDIwMTAg
KzAxMDANCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvbGlzcC9M
aXNwQW5hbHl6ZXIuamF2YQlXZWQgTWFyIDAzIDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC0yNSw5
ICsyNSwxMSBAQA0KIA0KIGltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOw0KIGltcG9ydCBqYXZh
LmlvLklucHV0U3RyZWFtOw0KK2ltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtUmVhZGVyOw0KIGlt
cG9ydCBqYXZhLmlvLlJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7DQogaW1w
b3J0IGphdmEuaW8uV3JpdGVyOw0KKw0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNp
cy5Ub2tlblN0cmVhbTsNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1l
bnQ7DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KQEAgLTQ4LDcg
KzUwLDcgQEANCiAgICAgICAgIHhyZWYgPSBuZXcgTGlzcFhyZWYoZHVtbXkpOw0KICAgICB9DQog
DQotICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbSBpbikg
dGhyb3dzIElPRXhjZXB0aW9uIHsNCisgICAgcHVibGljIHZvaWQgYW5hbHl6ZShEb2N1bWVudCBk
b2MsIElucHV0U3RyZWFtUmVhZGVyIGluKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICAg
c3VwZXIuYW5hbHl6ZShkb2MsIGluKTsNCiAgICAgICAgIGRvYy5hZGQobmV3IEZpZWxkKCJyZWZz
IiwgZHVtbXkpKTsNCiAgICAgfQ0KZGlmZiAtciA3OTQwMmU3NmJhNWEgLXIgNzYzZTYyYzZjNDMz
IHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvcGxhaW4vUGxhaW5BbmFseXpl
ci5qYXZhDQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL3BsYWlu
L1BsYWluQW5hbHl6ZXIuamF2YQlUdWUgTWFyIDAyIDE2OjU1OjQ5IDIwMTAgKzAxMDANCisrKyBi
L3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvcGxhaW4vUGxhaW5BbmFseXpl
ci5qYXZhCVdlZCBNYXIgMDMgMTY6NDE6MDggMjAxMCAtMDUwMA0KQEAgLTM0LDkgKzM0LDkgQEAN
CiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRmllbGQ7DQogaW1wb3J0IG9yZy5v
cGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5EZWZpbml0aW9uczsNCiBpbXBvcnQgb3JnLm9w
ZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLkV4cGFuZFRhYnNSZWFkZXI7DQotaW1wb3J0IG9y
Zy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5GaWxlQW5hbHl6ZXI7DQogaW1wb3J0IG9y
Zy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5GaWxlQW5hbHl6ZXJGYWN0b3J5Ow0KIGlt
cG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMuSGFzaDJUb2tlblN0cmVhbTsN
CitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLlRleHRBbmFseXplcjsN
CiBpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmNvbmZpZ3VyYXRpb24uUHJvamVjdDsN
CiBpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuQW5ub3RhdGlvbjsNCiAN
CkBAIC00Niw3ICs0Niw3IEBADQogICoNCiAgKiBAYXV0aG9yIENoYW5kYW4NCiAgKi8NCi1wdWJs
aWMgY2xhc3MgUGxhaW5BbmFseXplciBleHRlbmRzIEZpbGVBbmFseXplciB7DQorcHVibGljIGNs
YXNzIFBsYWluQW5hbHl6ZXIgZXh0ZW5kcyBUZXh0QW5hbHl6ZXIgew0KIA0KICAgICBwcm90ZWN0
ZWQgY2hhcltdIGNvbnRlbnQ7DQogICAgIHByb3RlY3RlZCBpbnQgbGVuOw0KQEAgLTY3LDkgKzY3
LDcgQEANCiAgICAgfQ0KIA0KICAgICBAT3ZlcnJpZGUNCi0gICAgcHVibGljIHZvaWQgYW5hbHl6
ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtIGluKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KLSAg
ICAgICAgUmVhZGVyIGluUmVhZGVyID0NCi0gICAgICAgICAgICAgICAgRXhwYW5kVGFic1JlYWRl
ci53cmFwKG5ldyBJbnB1dFN0cmVhbVJlYWRlcihpbiksIHByb2plY3QpOw0KKyAgICBwdWJsaWMg
dm9pZCBhbmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW1SZWFkZXIgaW5SZWFkZXIpIHRo
cm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgICBsZW4gPSAwOw0KICAgICAgICAgZG8gew0KICAg
ICAgICAgICAgIGludCByYnl0ZXMgPSBpblJlYWRlci5yZWFkKGNvbnRlbnQsIGxlbiwgY29udGVu
dC5sZW5ndGggLSBsZW4pOw0KZGlmZiAtciA3OTQwMmU3NmJhNWEgLXIgNzYzZTYyYzZjNDMzIHNy
Yy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvcGxhaW4vWE1MQW5hbHl6ZXIuamF2
YQ0KLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9wbGFpbi9YTUxB
bmFseXplci5qYXZhCVR1ZSBNYXIgMDIgMTY6NTU6NDkgMjAxMCArMDEwMA0KKysrIGIvc3JjL29y
Zy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9wbGFpbi9YTUxBbmFseXplci5qYXZhCVdl
ZCBNYXIgMDMgMTY6NDE6MDggMjAxMCAtMDUwMA0KQEAgLTI5LDExICsyOSwxMiBAQA0KIGltcG9y
dCBqYXZhLmlvLlJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7DQogaW1wb3J0
IGphdmEuaW8uV3JpdGVyOw0KKw0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5U
b2tlblN0cmVhbTsNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7
DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KLWltcG9ydCBvcmcu
b3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMuRmlsZUFuYWx5emVyOw0KIGltcG9ydCBvcmcu
b3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMuRmlsZUFuYWx5emVyRmFjdG9yeTsNCitpbXBv
cnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLlRleHRBbmFseXplcjsNCiBpbXBv
cnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmNvbmZpZ3VyYXRpb24uUHJvamVjdDsNCiBpbXBv
cnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuQW5ub3RhdGlvbjsNCiANCkBAIC00
Myw3ICs0NCw3IEBADQogICoNCiAgKiBAYXV0aG9yIENoYW5kYW4NCiAgKi8NCi1wdWJsaWMgY2xh
c3MgWE1MQW5hbHl6ZXIgZXh0ZW5kcyBGaWxlQW5hbHl6ZXIgew0KK3B1YmxpYyBjbGFzcyBYTUxB
bmFseXplciBleHRlbmRzIFRleHRBbmFseXplciB7DQogICAgIA0KICAgICBwcml2YXRlIGNoYXJb
XSBjb250ZW50Ow0KICAgICBwcml2YXRlIGludCBsZW47DQpAQCAtNjMsMTEgKzY0LDEwIEBADQog
ICAgIH0NCiAgICAgDQogICAgIEBPdmVycmlkZQ0KLSAgICBwdWJsaWMgdm9pZCBhbmFseXplKERv
Y3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQotICAgICAg
ICBJbnB1dFN0cmVhbVJlYWRlciBpblJlYWRlciA9IG5ldyBJbnB1dFN0cmVhbVJlYWRlcihpbik7
DQorICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRl
ciBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIGxlbiA9IDA7DQogICAgICAgICBk
b3sNCi0gICAgICAgICAgICBpbnQgcmJ5dGVzID0gaW5SZWFkZXIucmVhZChjb250ZW50LCBsZW4s
IGNvbnRlbnQubGVuZ3RoIC0gbGVuKTsNCisgICAgICAgICAgICBpbnQgcmJ5dGVzID0gaW4ucmVh
ZChjb250ZW50LCBsZW4sIGNvbnRlbnQubGVuZ3RoIC0gbGVuKTsNCiAgICAgICAgICAgICBpZihy
Ynl0ZXMgPiAwICkgew0KICAgICAgICAgICAgICAgICBpZihyYnl0ZXMgPT0gKGNvbnRlbnQubGVu
Z3RoIC0gbGVuKSkgew0KICAgICAgICAgICAgICAgICAgICAgY2hhcltdIGNvbnRlbnQyID0gbmV3
IGNoYXJbY29udGVudC5sZW5ndGggKiAyXTsNCmRpZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDc2M2U2
MmM2YzQzMyBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL3NoL1NoQW5hbHl6
ZXIuamF2YQ0KLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9zaC9T
aEFuYWx5emVyLmphdmEJVHVlIE1hciAwMiAxNjo1NTo0OSAyMDEwICswMTAwDQorKysgYi9zcmMv
b3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL3NoL1NoQW5hbHl6ZXIuamF2YQlXZWQg
TWFyIDAzIDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC0yNSw5ICsyNSwxMSBAQA0KIA0KIGltcG9y
dCBqYXZhLmlvLklPRXhjZXB0aW9uOw0KIGltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOw0KK2lt
cG9ydCBqYXZhLmlvLklucHV0U3RyZWFtUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLlJlYWRlcjsN
CiBpbXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uV3JpdGVyOw0K
Kw0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5Ub2tlblN0cmVhbTsNCiBpbXBv
cnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7DQogaW1wb3J0IG9yZy5hcGFj
aGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KQEAgLTU0LDcgKzU2LDcgQEANCiAgICAgICAgIHhy
ZWYgPSBuZXcgU2hYcmVmKGR1bW15KTsNCiAgICAgfQ0KIA0KLSAgICBwdWJsaWMgdm9pZCBhbmFs
eXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQor
ICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRlciBp
bikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIHN1cGVyLmFuYWx5emUoZG9jLCBpbik7
DQogICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicmVmcyIsIGR1bW15KSk7DQogICAgIH0gICAg
DQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAtciA3NjNlNjJjNmM0MzMgc3JjL29yZy9vcGVuc29sYXJp
cy9vcGVuZ3Jvay9hbmFseXNpcy90Y2wvVGNsQW5hbHl6ZXIuamF2YQ0KLS0tIGEvc3JjL29yZy9v
cGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy90Y2wvVGNsQW5hbHl6ZXIuamF2YQlUdWUgTWFy
IDAyIDE2OjU1OjQ5IDIwMTAgKzAxMDANCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdy
b2svYW5hbHlzaXMvdGNsL1RjbEFuYWx5emVyLmphdmEJV2VkIE1hciAwMyAxNjo0MTowOCAyMDEw
IC0wNTAwDQpAQCAtMjUsOSArMjUsMTEgQEANCiANCiBpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv
bjsNCiBpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsNCitpbXBvcnQgamF2YS5pby5JbnB1dFN0
cmVhbVJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uU3Ry
aW5nUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5l
LmRvY3VtZW50LkRvY3VtZW50Ow0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5G
aWVsZDsNCkBAIC00OCw3ICs1MCw3IEBADQogICAgICAgICB4cmVmID0gbmV3IFRjbFhyZWYoZHVt
bXkpOw0KICAgICB9DQogDQotICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJ
bnB1dFN0cmVhbSBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisgICAgcHVibGljIHZvaWQgYW5h
bHl6ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtUmVhZGVyIGluKSB0aHJvd3MgSU9FeGNlcHRp
b24gew0KICAgICAgICAgc3VwZXIuYW5hbHl6ZShkb2MsIGluKTsNCiAgICAgICAgIGRvYy5hZGQo
bmV3IEZpZWxkKCJyZWZzIiwgZHVtbXkpKTsNCiAgICAgfQ0KZGlmZiAtciA3OTQwMmU3NmJhNWEg
LXIgNzYzZTYyYzZjNDMzIHRlc3Qvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL0Fu
YWx5emVyR3VydVRlc3QuamF2YQ0KLS0tIGEvdGVzdC9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2sv
YW5hbHlzaXMvQW5hbHl6ZXJHdXJ1VGVzdC5qYXZhCVR1ZSBNYXIgMDIgMTY6NTU6NDkgMjAxMCAr
MDEwMA0KKysrIGIvdGVzdC9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvQW5hbHl6
ZXJHdXJ1VGVzdC5qYXZhCVdlZCBNYXIgMDMgMTY6NDE6MDggMjAxMCAtMDUwMA0KQEAgLTQ4LDYg
KzQ4LDE3IEBADQogICAgIH0NCiANCiAgICAgQFRlc3QNCisgICAgcHVibGljIHZvaWQgdGVzdFVU
RjhCeXRlT3JkZXJNYXJrUGxhaW5GaWxlKCkgdGhyb3dzIEV4Y2VwdGlvbiB7DQorICAgICAgICBi
eXRlW10gYnl0ZXMgPSB7IChieXRlKSAweEVGLCAoYnl0ZSkgMHhCQiwgKGJ5dGUpIDB4QkYsIC8v
IFVURi04IEJPTQ0KKyAgICAgICAgICAgICAgICAgICAgICAgJ2gnLCAnZScsICdsJywgJ2wnLCAn
ZScsICcgJywNCisgICAgICAgICAgICAgICAgICAgICAgICd3JywgJ28nLCAncicsICdsJywgJ2Qn
fTsNCisgICAgICAgIA0KKyAgICAgICAgQnl0ZUFycmF5SW5wdXRTdHJlYW0gaW4gPSBuZXcgQnl0
ZUFycmF5SW5wdXRTdHJlYW0oYnl0ZXMpOw0KKyAgICAgICAgRmlsZUFuYWx5emVyIGZhID0gQW5h
bHl6ZXJHdXJ1LmdldEFuYWx5emVyKGluLCAiL2R1bW15L2ZpbGUiKTsNCisgICAgICAgIGFzc2Vy
dFNhbWUoUGxhaW5BbmFseXplci5jbGFzcywgZmEuZ2V0Q2xhc3MoKSk7DQorICAgIH0NCisNCisg
ICAgQFRlc3QNCiAgICAgcHVibGljIHZvaWQgYWRkRXh0ZW5zaW9uKCkgdGhyb3dzIEV4Y2VwdGlv
biB7DQogICAgICAgICAvLyBzaG91bGQgbm90IGZpbmQgYW5hbHl6ZXIgZm9yIHRoaXMgdW5saWtl
bHkgZXh0ZW5zaW9uDQogICAgICAgICBhc3NlcnROdWxsKEFuYWx5emVyR3VydS5maW5kKCJmaWxl
LnVubGlrZWx5X2V4dGVuc2lvbiIpKTsNCmRpZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDc2M2U2MmM2
YzQzMyB0ZXN0L29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9UZXh0QW5hemx5emVy
VGVzdC5qYXZhDQotLS0gL2Rldi9udWxsCVRodSBKYW4gMDEgMDA6MDA6MDAgMTk3MCArMDAwMA0K
KysrIGIvdGVzdC9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvVGV4dEFuYXpseXpl
clRlc3QuamF2YQlXZWQgTWFyIDAzIDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC0wLDAgKzEsMTAw
IEBADQorcGFja2FnZSBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXM7DQorDQoraW1w
b3J0IGphdmEuaW8uQnVmZmVyZWRSZWFkZXI7DQoraW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5SW5w
dXRTdHJlYW07DQoraW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247DQoraW1wb3J0IGphdmEuaW8u
SW5wdXRTdHJlYW07DQoraW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7DQoraW1wb3J0
IGphdmEubmlvLkJ5dGVCdWZmZXI7DQoraW1wb3J0IGphdmEubmlvLmNoYXJzZXQuQ2hhcnNldDsN
CisNCitpbXBvcnQganVuaXQuZnJhbWV3b3JrLkFzc2VydDsNCisNCitpbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7DQoraW1wb3J0IG9yZy5qdW5pdC5UZXN0Ow0KKw0K
K3B1YmxpYyBjbGFzcyBUZXh0QW5hemx5emVyVGVzdCB7DQorCXByaXZhdGUgU3RyaW5nIGRlZmF1
bHRFbmNvZGluZyA9IG5ldyBJbnB1dFN0cmVhbVJlYWRlcihuZXcgQnl0ZUFycmF5SW5wdXRTdHJl
YW0obmV3IGJ5dGVbMF0pKS5nZXRFbmNvZGluZygpOw0KKwlwcml2YXRlIFN0cmluZyBlbmNvZGlu
ZzsNCisJcHJpdmF0ZSBTdHJpbmcgY29udGVudHM7DQorCQ0KKwlAVGVzdA0KKwlwdWJsaWMgdm9p
ZCBkZWZhdWx0RW5jb2RpbmcoKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KKwkJbmV3IFRlc3RhYmxl
VGV4dEFuYWx5emVyKCkuYW5hbHl6ZShuZXcgRG9jdW1lbnQoKSwNCisJCQkJbmV3IEJ5dGVBcnJh
eUlucHV0U3RyZWFtKCJoZWxsbyIuZ2V0Qnl0ZXMoKSkpOw0KKwkJDQorCQlBc3NlcnQuYXNzZXJ0
RXF1YWxzKGRlZmF1bHRFbmNvZGluZywgZW5jb2RpbmcpOw0KKwkJDQorCQlBc3NlcnQuYXNzZXJ0
RXF1YWxzKCJoZWxsbyIsIGNvbnRlbnRzKTsNCisJfQ0KKwkNCisJQFRlc3QNCisJcHVibGljIHZv
aWQgcmVzZXRzU3RyZWFtT25TaG9ydElucHV0KCkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisJCW5l
dyBUZXN0YWJsZVRleHRBbmFseXplcigpLmFuYWx5emUobmV3IERvY3VtZW50KCksDQorCQkJCW5l
dyBCeXRlQXJyYXlJbnB1dFN0cmVhbSgiaGkiLmdldEJ5dGVzKCkpKTsNCisJCQ0KKwkJQXNzZXJ0
LmFzc2VydEVxdWFscyhkZWZhdWx0RW5jb2RpbmcsIGVuY29kaW5nKTsNCisJCQ0KKwkJQXNzZXJ0
LmFzc2VydEVxdWFscygiaGkiLCBjb250ZW50cyk7DQorCX0NCisJDQorCUBUZXN0DQorCXB1Ymxp
YyB2b2lkIHV0ZjhXaXRoQk9NKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisJCWJ5dGVbXSBidWZm
ZXIgPSBuZXcgYnl0ZVtdIHsoYnl0ZSkgMjM5LCAoYnl0ZSkgMTg3LCAoYnl0ZSkgMTkxLCAnaCcs
ICdlJywgJ2wnLCAnbCcsICdvJ307DQorCQluZXcgVGVzdGFibGVUZXh0QW5hbHl6ZXIoKS5hbmFs
eXplKG5ldyBEb2N1bWVudCgpLA0KKwkJCQluZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0oYnVmZmVy
KSk7DQorCQkNCisJCUFzc2VydC5hc3NlcnRFcXVhbHMoImhlbGxvIiwgY29udGVudHMpOw0KKwkJ
QXNzZXJ0LmFzc2VydEVxdWFscygiVVRGOCIsIGVuY29kaW5nKTsNCisJfQ0KKwkNCisJQFRlc3QN
CisJcHVibGljIHZvaWQgdXRmMTZXaXRoQk9NKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisJCWZp
bmFsIEJ5dGVCdWZmZXIgdXRmMTZzdHIgPSBDaGFyc2V0LmZvck5hbWUoIlVURi0xNiIpLmVuY29k
ZSgiaGVsbG8iKTsNCisJCWJ5dGVbXSBieXRlcyA9IG5ldyBieXRlW3V0ZjE2c3RyLnJlbWFpbmlu
ZygpXTsNCisJCXV0ZjE2c3RyLmdldChieXRlcywgMCwgYnl0ZXMubGVuZ3RoKTsNCisJCQ0KKwkJ
bmV3IFRlc3RhYmxlVGV4dEFuYWx5emVyKCkuYW5hbHl6ZShuZXcgRG9jdW1lbnQoKSwNCisJCQkJ
bmV3IEJ5dGVBcnJheUlucHV0U3RyZWFtKGJ5dGVzKSk7DQorCQkNCisJCUFzc2VydC5hc3NlcnRF
cXVhbHMoIlVURi0xNiIsIGVuY29kaW5nKTsNCisJCQ0KKwkJQXNzZXJ0LmFzc2VydEVxdWFscygi
aGVsbG8iLCBjb250ZW50cyk7DQorCX0NCisJDQorCUBUZXN0DQorCXB1YmxpYyB2b2lkIHV0ZjE2
V2l0aEJPTUFsdGVybmF0ZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorCQlmaW5hbCBCeXRlQnVm
ZmVyIHV0ZjE2c3RyID0gQ2hhcnNldC5mb3JOYW1lKCJVVEYtMTYiKS5lbmNvZGUoImhlbGxvIik7
DQorCQlieXRlW10gYnl0ZXMgPSBuZXcgYnl0ZVt1dGYxNnN0ci5yZW1haW5pbmcoKV07DQorCQl1
dGYxNnN0ci5nZXQoYnl0ZXMsIDAsIGJ5dGVzLmxlbmd0aCk7DQorCQkNCisJCWZvciAoaW50IGk9
MDsgaTxieXRlcy5sZW5ndGg7IGkrPTIpIHsNCisJCQlieXRlIGIgPSBieXRlc1tpXTsNCisJCQli
eXRlc1tpXSA9IGJ5dGVzW2krMV07DQorCQkJYnl0ZXNbaSsxXSA9IGI7DQorCQl9DQorCQkNCisJ
CW5ldyBUZXN0YWJsZVRleHRBbmFseXplcigpLmFuYWx5emUobmV3IERvY3VtZW50KCksDQorCQkJ
CW5ldyBCeXRlQXJyYXlJbnB1dFN0cmVhbShieXRlcykpOw0KKwkJDQorCQlBc3NlcnQuYXNzZXJ0
RXF1YWxzKCJVVEYtMTYiLCBlbmNvZGluZyk7DQorCQkNCisJCUFzc2VydC5hc3NlcnRFcXVhbHMo
ImhlbGxvIiwgY29udGVudHMpOw0KKwl9DQorCQ0KKwlwdWJsaWMgY2xhc3MgVGVzdGFibGVUZXh0
QW5hbHl6ZXIgZXh0ZW5kcyBUZXh0QW5hbHl6ZXIgew0KKwkJcHVibGljIFRlc3RhYmxlVGV4dEFu
YWx5emVyKCkgew0KKwkJCXN1cGVyKG51bGwpOw0KKwkJfQ0KKwkJDQorCQlAT3ZlcnJpZGUNCisJ
CXByb3RlY3RlZCB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRlciBy
KSB0aHJvd3MgSU9FeGNlcHRpb24gew0KKwkJCWVuY29kaW5nID0gci5nZXRFbmNvZGluZygpOw0K
Kw0KKwkJCWNoYXJbXSBidWYgPSBuZXcgY2hhclsxMDI0XTsNCisJCQlpbnQgYnIgPSByLnJlYWQo
YnVmKTsNCisJCQkNCisJCQljb250ZW50cyA9IG5ldyBTdHJpbmcoYnVmLCAwLCBicik7DQorCQl9
DQorCX0NCit9DQo=
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
              isurl="0"
          >
            <attachid>3767</attachid>
            <date>2010-03-04 15:53:00 +0000</date>
            <delta_ts>2010-03-09 16:40:23 +0000</delta_ts>
            <desc>Updated patch that corrects a few mistakes</desc>
            <filename>patch</filename>
            <type>text/plain</type>
            <size>60407</size>
            <attacher>chris.eldredge</attacher>
            
              <data encoding="base64">Y29tcGFyaW5nIHdpdGggc3NoOi8vYW5vbkBoZy5vcGVuc29sYXJpcy5vcmcvaGcvb3Blbmdyb2sv
dHJ1bmsNCnNlYXJjaGluZyBmb3IgY2hhbmdlcw0KY2hhbmdlc2V0OiAgIDk1Mjo3NjNlNjJjNmM0
MzMNCnVzZXI6ICAgICAgICBDaHJpcyBFbGRyZWRnZSA8Y2VsZHJlZGdlQGZvb2wuY29tPg0KZGF0
ZTogICAgICAgIFdlZCBNYXIgMDMgMTY6NDE6MDggMjAxMCAtMDUwMA0Kc3VtbWFyeTogICAgIE1h
a2UgdGV4dCBiYXNlZCBwYXJzZXJzIFVURiBCT00gYXdhcmUuDQoNCmRpZmYgLXIgNzk0MDJlNzZi
YTVhIC1yIDc2M2U2MmM2YzQzMyBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lz
L0FuYWx5emVyR3VydS5qYXZhDQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2Fu
YWx5c2lzL0FuYWx5emVyR3VydS5qYXZhCVR1ZSBNYXIgMDIgMTY6NTU6NDkgMjAxMCArMDEwMA0K
KysrIGIvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9BbmFseXplckd1cnUu
amF2YQlXZWQgTWFyIDAzIDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC00NDIsNiArNDQyLDEyIEBA
DQogICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICB9DQogDQorICAgICAgICBTdHJp
bmcgY29udGVudE5vQk9NU3RyID0gc3RyaXBCT00obmV3IFN0cmluZyhjb250ZW50LCAwLCBsZW4p
KTsNCisgICAgICAgIGJ5dGVbXSBjb250ZW50Tm9CT00gPSBudWxsOw0KKyAgICAgICAgaWYgKGNv
bnRlbnROb0JPTVN0ciAhPSBudWxsKSB7DQorICAgICAgICAJY29udGVudE5vQk9NID0gY29udGVu
dE5vQk9NU3RyLmdldEJ5dGVzKCk7DQorICAgICAgICB9DQorICAgICAgICANCiAgICAgICAgIEZp
bGVBbmFseXplckZhY3RvcnkgZmFjdG9yeSA9IGZpbmQoY29udGVudCk7DQogICAgICAgICBpZiAo
ZmFjdG9yeSAhPSBudWxsKSB7DQogICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7DQpAQCAtNDQ5
LDYgKzQ1NSw5IEBADQogDQogICAgICAgICBmb3IgKEZpbGVBbmFseXplckZhY3RvcnkuTWF0Y2hl
ciBtYXRjaGVyIDogbWF0Y2hlcnMpIHsNCiAgICAgICAgICAgICBGaWxlQW5hbHl6ZXJGYWN0b3J5
IGZhYyA9IG1hdGNoZXIuaXNNYWdpYyhjb250ZW50LCBpbik7DQorICAgICAgICAgICAgaWYgKGZh
YyA9PSBudWxsICYmIGNvbnRlbnROb0JPTSAhPSBudWxsKSB7DQorICAgICAgICAgICAgCWZhYyA9
IG1hdGNoZXIuaXNNYWdpYyhjb250ZW50Tm9CT00sIGluKTsNCisgICAgICAgICAgICB9DQogICAg
ICAgICAgICAgaWYgKGZhYyAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgIHJldHVybiBmYWM7
DQogICAgICAgICAgICAgfQ0KZGlmZiAtciA3OTQwMmU3NmJhNWEgLXIgNzYzZTYyYzZjNDMzIHNy
Yy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvQW5hbHl6ZXJHdXJ1LmphdmEub3Jp
Zw0KLS0tIC9kZXYvbnVsbAlUaHUgSmFuIDAxIDAwOjAwOjAwIDE5NzAgKzAwMDANCisrKyBiL3Ny
Yy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvQW5hbHl6ZXJHdXJ1LmphdmEub3Jp
ZwlXZWQgTWFyIDAzIDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC0wLDAgKzEsNTIyIEBADQorLyoN
CisgKiBDRERMIEhFQURFUiBTVEFSVA0KKyAqDQorICogVGhlIGNvbnRlbnRzIG9mIHRoaXMgZmls
ZSBhcmUgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlDQorICogQ29tbW9uIERldmVsb3BtZW50
IGFuZCBEaXN0cmlidXRpb24gTGljZW5zZSAodGhlICJMaWNlbnNlIikuDQorICogWW91IG1heSBu
b3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0K
KyAqDQorICogU2VlIExJQ0VOU0UudHh0IGluY2x1ZGVkIGluIHRoaXMgZGlzdHJpYnV0aW9uIGZv
ciB0aGUgc3BlY2lmaWMNCisgKiBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxp
bWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKyAqDQorICogV2hlbiBkaXN0cmlidXRpbmcg
Q292ZXJlZCBDb2RlLCBpbmNsdWRlIHRoaXMgQ0RETCBIRUFERVIgaW4gZWFjaA0KKyAqIGZpbGUg
YW5kIGluY2x1ZGUgdGhlIExpY2Vuc2UgZmlsZSBhdCBMSUNFTlNFLnR4dC4NCisgKiBJZiBhcHBs
aWNhYmxlLCBhZGQgdGhlIGZvbGxvd2luZyBiZWxvdyB0aGlzIENEREwgSEVBREVSLCB3aXRoIHRo
ZQ0KKyAqIGZpZWxkcyBlbmNsb3NlZCBieSBicmFja2V0cyAiW10iIHJlcGxhY2VkIHdpdGggeW91
ciBvd24gaWRlbnRpZnlpbmcNCisgKiBpbmZvcm1hdGlvbjogUG9ydGlvbnMgQ29weXJpZ2h0IFt5
eXl5XSBbbmFtZSBvZiBjb3B5cmlnaHQgb3duZXJdDQorICoNCisgKiBDRERMIEhFQURFUiBFTkQN
CisgKi8NCisNCisvKg0KKyAqIENvcHlyaWdodCAyMDA5IFN1biBNaWNyb3N5c3RlbXMsIEluYy4g
IEFsbCByaWdodHMgcmVzZXJ2ZWQuDQorICogVXNlIGlzIHN1YmplY3QgdG8gbGljZW5zZSB0ZXJt
cy4NCisgKi8NCitwYWNrYWdlIG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpczsNCisN
CitpbXBvcnQgamF2YS5pby5GaWxlOw0KK2ltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOw0KK2lt
cG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOw0KK2ltcG9ydCBqYXZhLmlvLlJlYWRlcjsNCitpbXBv
cnQgamF2YS5pby5Xcml0ZXI7DQoraW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7DQoraW1wb3J0
IGphdmEudXRpbC5IYXNoTWFwOw0KK2ltcG9ydCBqYXZhLnV0aWwuTGlzdDsNCitpbXBvcnQgamF2
YS51dGlsLkxvY2FsZTsNCitpbXBvcnQgamF2YS51dGlsLk1hcDsNCitpbXBvcnQgamF2YS51dGls
LlNvcnRlZE1hcDsNCitpbXBvcnQgamF2YS51dGlsLlRyZWVNYXA7DQoraW1wb3J0IGphdmEudXRp
bC5sb2dnaW5nLkxldmVsOw0KK2ltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5EYXRl
VG9vbHM7DQoraW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KK2lt
cG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5GaWVsZDsNCitpbXBvcnQgb3JnLm9wZW5z
b2xhcmlzLm9wZW5ncm9rLk9wZW5Hcm9rTG9nZ2VyOw0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMu
b3Blbmdyb2suYW5hbHlzaXMuRmlsZUFuYWx5emVyLkdlbnJlOw0KK2ltcG9ydCBvcmcub3BlbnNv
bGFyaXMub3Blbmdyb2suYW5hbHlzaXMuYXJjaGl2ZS5CWmlwMkFuYWx5emVyRmFjdG9yeTsNCitp
bXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmFyY2hpdmUuR1pJUEFuYWx5
emVyRmFjdG9yeTsNCitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmFy
Y2hpdmUuVGFyQW5hbHl6ZXJGYWN0b3J5Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdy
b2suYW5hbHlzaXMuYXJjaGl2ZS5aaXBBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVu
c29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5jLkNBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9y
Zy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5jLkN4eEFuYWx5emVyRmFjdG9yeTsNCitp
bXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmRhdGEuSWdub3JhbnRBbmFs
eXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5k
YXRhLkltYWdlQW5hbHl6ZXJGYWN0b3J5Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdy
b2suYW5hbHlzaXMuZG9jdW1lbnQuVHJvZmZBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5v
cGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5leGVjdXRhYmxlcy5FTEZBbmFseXplckZhY3Rv
cnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5leGVjdXRhYmxl
cy5KYXJBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5h
bmFseXNpcy5leGVjdXRhYmxlcy5KYXZhQ2xhc3NBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9y
Zy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5mb3J0cmFuLkZvcnRyYW5BbmFseXplckZh
Y3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5qYXZhLkph
dmFBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFs
eXNpcy5saXNwLkxpc3BBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5v
cGVuZ3Jvay5hbmFseXNpcy5wbGFpbi5QbGFpbkFuYWx5emVyRmFjdG9yeTsNCitpbXBvcnQgb3Jn
Lm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLnBsYWluLlhNTEFuYWx5emVyRmFjdG9yeTsN
CitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLnNoLlNoQW5hbHl6ZXJG
YWN0b3J5Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMuc3FsLlNR
TEFuYWx5emVyRmFjdG9yeTsNCitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5
c2lzLnRjbC5UY2xBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVu
Z3Jvay5jb25maWd1cmF0aW9uLlByb2plY3Q7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVu
Z3Jvay5oaXN0b3J5LkFubm90YXRpb247DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jv
ay5oaXN0b3J5Lkhpc3RvcnlFeGNlcHRpb247DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVu
Z3Jvay5oaXN0b3J5Lkhpc3RvcnlHdXJ1Ow0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdy
b2suaGlzdG9yeS5IaXN0b3J5UmVhZGVyOw0KK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdy
b2sud2ViLlV0aWw7DQorDQorLyoqDQorICogTWFuYWdlcyBhbmQgcG9ydmlkZXMgQW5hbHl6ZXJz
IGFzIG5lZWRlZC4gUGxlYXNlIHNlZQ0KKyAqIDxhIGhyZWY9Imh0dHA6Ly93d3cub3BlbnNvbGFy
aXMub3JnL29zL3Byb2plY3Qvb3Blbmdyb2svbWFudWFsL2ludGVybmFscy8iPg0KKyAqIHRoaXM8
L2E+IHBhZ2UgZm9yIGEgZ3JlYXQgZGVzY3JpcHRpb24gb2YgdGhlIHB1cnBvc2Ugb2YgdGhlIEFu
YWx5emVyR3VydS4NCisgKg0KKyAqIENyZWF0ZWQgb24gU2VwdGVtYmVyIDIyLCAyMDA1DQorICog
QGF1dGhvciBDaGFuZGFuDQorICovDQorcHVibGljIGNsYXNzIEFuYWx5emVyR3VydSB7DQorDQor
ICAgIC8qKiBUaGUgZGVmYXVsdCB7QGNvZGUgRmlsZUFuYWx5emVyRmFjdG9yeX0gaW5zdGFuY2Uu
ICovDQorICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIEZpbGVBbmFseXplckZhY3RvcnkNCisgICAg
ICAgIERFRkFVTFRfQU5BTFlaRVJfRkFDVE9SWSA9IG5ldyBGaWxlQW5hbHl6ZXJGYWN0b3J5KCk7
DQorDQorICAgIC8qKiBNYXAgZnJvbSBmaWxlIG5hbWVzIHRvIGFuYWx5emVyIGZhY3Rvcmllcy4g
Ki8NCisgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTWFwPFN0cmluZywgRmlsZUFuYWx5emVyRmFj
dG9yeT4NCisgICAgICAgIEZJTEVfTkFNRVMgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIEZpbGVBbmFs
eXplckZhY3Rvcnk+KCk7DQorDQorICAgIC8qKiBNYXAgZnJvbSBmaWxlIGV4dGVuc2lvbnMgdG8g
YW5hbHl6ZXIgZmFjdG9yaWVzLiAqLw0KKyAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBNYXA8U3Ry
aW5nLCBGaWxlQW5hbHl6ZXJGYWN0b3J5Pg0KKyAgICAgICAgZXh0ID0gbmV3IEhhc2hNYXA8U3Ry
aW5nLCBGaWxlQW5hbHl6ZXJGYWN0b3J5PigpOw0KKw0KKyAgICAvLyBAVE9ETzogaGF2ZSBhIGNv
bXBhcmF0b3INCisgICAgLyoqIE1hcCBmcm9tIG1hZ2ljIHN0cmluZ3MgdG8gYW5hbHl6ZXIgZmFj
dG9yaWVzLiAqLw0KKyAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTb3J0ZWRNYXA8U3RyaW5nLCBG
aWxlQW5hbHl6ZXJGYWN0b3J5Pg0KKyAgICAgICAgbWFnaWNzID0gbmV3IFRyZWVNYXA8U3RyaW5n
LCBGaWxlQW5hbHl6ZXJGYWN0b3J5PigpOw0KKw0KKyAgICAvKioNCisgICAgICogTGlzdCBvZiBt
YXRjaGVyIG9iamVjdHMgd2hpY2ggY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIGFuYWx5
emVyDQorICAgICAqIGZhY3RvcnkgdG8gdXNlLg0KKyAgICAgKi8NCisgICAgcHJpdmF0ZSBzdGF0
aWMgZmluYWwgTGlzdDxGaWxlQW5hbHl6ZXJGYWN0b3J5Lk1hdGNoZXI+DQorICAgICAgICBtYXRj
aGVycyA9IG5ldyBBcnJheUxpc3Q8RmlsZUFuYWx5emVyRmFjdG9yeS5NYXRjaGVyPigpOw0KKw0K
KyAgICAvKiogTGlzdCBvZiBhbGwgcmVnaXN0ZXJlZCB7QGNvZGUgRmlsZUFuYWx5emVyRmFjdG9y
eX0gaW5zdGFuY2VzLiAqLw0KKyAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMaXN0PEZpbGVBbmFs
eXplckZhY3Rvcnk+DQorICAgICAgICBmYWN0b3JpZXMgPSBuZXcgQXJyYXlMaXN0PEZpbGVBbmFs
eXplckZhY3Rvcnk+KCk7DQorDQorICAgIC8qDQorICAgICAqIElmIHlvdSB3cml0ZSB5b3VyIG93
biBhbmFseXplciBwbGVhc2UgcmVnaXN0ZXIgaXQgaGVyZQ0KKyAgICAgKi8NCisgICAgc3RhdGlj
IHsNCisgICAgICAgIEZpbGVBbmFseXplckZhY3RvcnlbXSBhbmFseXplcnMgPSB7DQorICAgICAg
ICAgICAgREVGQVVMVF9BTkFMWVpFUl9GQUNUT1JZLA0KKyAgICAgICAgICAgIG5ldyBJZ25vcmFu
dEFuYWx5emVyRmFjdG9yeSgpLA0KKyAgICAgICAgICAgIG5ldyBCWmlwMkFuYWx5emVyRmFjdG9y
eSgpLA0KKyAgICAgICAgICAgIG5ldyBYTUxBbmFseXplckZhY3RvcnkoKSwNCisgICAgICAgICAg
ICBuZXcgVHJvZmZBbmFseXplckZhY3RvcnkoKSwNCisgICAgICAgICAgICBuZXcgRUxGQW5hbHl6
ZXJGYWN0b3J5KCksDQorICAgICAgICAgICAgbmV3IEphdmFDbGFzc0FuYWx5emVyRmFjdG9yeSgp
LA0KKyAgICAgICAgICAgIG5ldyBJbWFnZUFuYWx5emVyRmFjdG9yeSgpLA0KKyAgICAgICAgICAg
IEphckFuYWx5emVyRmFjdG9yeS5ERUZBVUxUX0lOU1RBTkNFLA0KKyAgICAgICAgICAgIFppcEFu
YWx5emVyRmFjdG9yeS5ERUZBVUxUX0lOU1RBTkNFLA0KKyAgICAgICAgICAgIG5ldyBUYXJBbmFs
eXplckZhY3RvcnkoKSwNCisgICAgICAgICAgICBuZXcgQ0FuYWx5emVyRmFjdG9yeSgpLA0KKyAg
ICAgICAgICAgIG5ldyBDeHhBbmFseXplckZhY3RvcnkoKSwNCisgICAgICAgICAgICBuZXcgU2hB
bmFseXplckZhY3RvcnkoKSwNCisgICAgICAgICAgICBQbGFpbkFuYWx5emVyRmFjdG9yeS5ERUZB
VUxUX0lOU1RBTkNFLA0KKyAgICAgICAgICAgIG5ldyBHWklQQW5hbHl6ZXJGYWN0b3J5KCksDQor
ICAgICAgICAgICAgbmV3IEphdmFBbmFseXplckZhY3RvcnkoKSwNCisgICAgICAgICAgICBuZXcg
TGlzcEFuYWx5emVyRmFjdG9yeSgpLA0KKyAgICAgICAgICAgIG5ldyBUY2xBbmFseXplckZhY3Rv
cnkoKSwNCisgICAgICAgICAgICBuZXcgU1FMQW5hbHl6ZXJGYWN0b3J5KCksDQorICAgICAgICAg
ICAgbmV3IEZvcnRyYW5BbmFseXplckZhY3RvcnkoKQ0KKyAgICAgICAgfTsNCisNCisgICAgICAg
IGZvciAoRmlsZUFuYWx5emVyRmFjdG9yeSBhbmFseXplciA6IGFuYWx5emVycykgew0KKyAgICAg
ICAgICAgIHJlZ2lzdGVyQW5hbHl6ZXIoYW5hbHl6ZXIpOw0KKyAgICAgICAgfQ0KKyAgICB9DQor
DQorICAgIC8qKg0KKyAgICAgKiBSZWdpc3RlciBhIHtAY29kZSBGaWxlQW5hbHl6ZXJGYWN0b3J5
fSBpbnN0YW5jZS4NCisgICAgICovDQorICAgIHByaXZhdGUgc3RhdGljIHZvaWQgcmVnaXN0ZXJB
bmFseXplcihGaWxlQW5hbHl6ZXJGYWN0b3J5IGZhY3RvcnkpIHsNCisgICAgICAgIGZvciAoU3Ry
aW5nIG5hbWUgOiBmYWN0b3J5LmdldEZpbGVOYW1lcygpKSB7DQorICAgICAgICAgICAgRmlsZUFu
YWx5emVyRmFjdG9yeSBvbGQgPSBGSUxFX05BTUVTLnB1dChuYW1lLCBmYWN0b3J5KTsNCisgICAg
ICAgICAgICBhc3NlcnQgb2xkID09IG51bGwgOg0KKyAgICAgICAgICAgICAgICAibmFtZSAnIiAr
IG5hbWUgKyAiJyB1c2VkIGluIG11bHRpcGxlIGFuYWx5emVycyI7DQorICAgICAgICB9DQorICAg
ICAgICBmb3IgKFN0cmluZyBzdWZmaXggOiBmYWN0b3J5LmdldFN1ZmZpeGVzKCkpIHsNCisgICAg
ICAgICAgICBGaWxlQW5hbHl6ZXJGYWN0b3J5IG9sZCA9IGV4dC5wdXQoc3VmZml4LCBmYWN0b3J5
KTsNCisgICAgICAgICAgICBhc3NlcnQgb2xkID09IG51bGwgOg0KKyAgICAgICAgICAgICJzdWZm
aXggJyIgKyBzdWZmaXggKyAiJyB1c2VkIGluIG11bHRpcGxlIGFuYWx5emVycyI7DQorICAgICAg
ICB9DQorICAgICAgICBmb3IgKFN0cmluZyBtYWdpYyA6IGZhY3RvcnkuZ2V0TWFnaWNTdHJpbmdz
KCkpIHsNCisgICAgICAgICAgICBGaWxlQW5hbHl6ZXJGYWN0b3J5IG9sZCA9IG1hZ2ljcy5wdXQo
bWFnaWMsIGZhY3RvcnkpOw0KKyAgICAgICAgICAgIGFzc2VydCBvbGQgPT0gbnVsbCA6DQorICAg
ICAgICAgICAgICAgICJtYWdpYyAnIiArIG1hZ2ljICsgIicgdXNlZCBpbiBtdWx0aXBsZSBhbmFs
eXplcnMiOw0KKyAgICAgICAgfQ0KKyAgICAgICAgbWF0Y2hlcnMuYWRkQWxsKGZhY3RvcnkuZ2V0
TWF0Y2hlcnMoKSk7DQorICAgICAgICBmYWN0b3JpZXMuYWRkKGZhY3RvcnkpOw0KKyAgICB9DQor
DQorICAgIC8qKg0KKyAgICAgKiAgSW5zdHJ1Y3QgdGhlIEFuYWx5emVyR3VydSB0byB1c2UgYSBn
aXZlbiBhbmFseXplciBmb3IgYSBnaXZlbg0KKyAgICAgKiAgZmlsZSBleHRlbnNpb24uDQorICAg
ICAqICBAcGFyYW0gZXh0ZW5zaW9uIHRoZSBmaWxlLWV4dGVuc2lvbiB0byBhZGQNCisgICAgICog
IEBwYXJhbSBmYWN0b3J5ICAgYSBmYWN0b3J5IHdoaWNoIGNyZWF0ZXMNCisgICAgICogICAgICAg
ICAgICAgICAgICAgdGhlIGFuYWx5emVyIHRvIHVzZSBmb3IgdGhlIGdpdmVuIGV4dGVuc2lvbg0K
KyAgICAgKiAgICAgICAgICAgICAgICAgIChpZiB5b3UgcGFzcyBudWxsIGFzIHRoZSBhbmFseXpl
ciwgeW91IHdpbGwgZGlzYWJsZQ0KKyAgICAgKiAgICAgICAgICAgICAgICAgICB0aGUgYW5hbHl6
ZXIgdXNlZCBmb3IgdGhhdCBleHRlbnNpb24pDQorICAgICAqLw0KKyAgICBwdWJsaWMgc3RhdGlj
IHZvaWQgYWRkRXh0ZW5zaW9uKFN0cmluZyBleHRlbnNpb24sDQorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5KSB7DQorICAgICAg
ICBpZiAoZmFjdG9yeSA9PSBudWxsKSB7DQorICAgICAgICAgICAgZXh0LnJlbW92ZShleHRlbnNp
b24pOw0KKyAgICAgICAgfSBlbHNlIHsNCisgICAgICAgICAgICBleHQucHV0KGV4dGVuc2lvbiwg
ZmFjdG9yeSk7DQorICAgICAgICB9DQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAqIEdldCB0
aGUgZGVmYXVsdCBBbmFseXplci4NCisgICAgICovDQorICAgIHB1YmxpYyBzdGF0aWMgRmlsZUFu
YWx5emVyIGdldEFuYWx5emVyKCkgew0KKyAgICAgICAgcmV0dXJuIERFRkFVTFRfQU5BTFlaRVJf
RkFDVE9SWS5nZXRBbmFseXplcigpOw0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBHZXQg
YW4gYW5hbHl6ZXIgc3VpdGVkIHRvIGFuYWx5emUgYSBmaWxlLiBUaGlzIGZ1bmN0aW9uIHdpbGwg
cmV1c2UNCisgICAgICogYW5hbHl6ZXJzIHNpbmNlIHRoZXkgYXJlIGNvc3RseS4NCisgICAgICog
DQorICAgICAqIEBwYXJhbSBpbiBJbnB1dCBzdHJlYW0gY29udGFpbmluZyBkYXRhIHRvIGJlIGFu
YWx5emVkDQorICAgICAqIEBwYXJhbSBmaWxlIE5hbWUgb2YgdGhlIGZpbGUgdG8gYmUgYW5hbHl6
ZWQNCisgICAgICogQHJldHVybiBBbiBhbmFseXplciBzdWl0ZWQgZm9yIHRoYXQgZmlsZSBjb250
ZW50DQorICAgICAqIEB0aHJvd3MgamF2YS5pby5JT0V4Y2VwdGlvbiBJZiBhbiBlcnJvciBvY2N1
cnMgd2hpbGUgYWNjZXNzaW5nIHRoZQ0KKyAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZGF0YSBpbiB0aGUgaW5wdXQgc3RyZWFtLg0KKyAgICAgKi8NCisgICAgcHVibGljIHN0YXRp
YyBGaWxlQW5hbHl6ZXIgZ2V0QW5hbHl6ZXIoSW5wdXRTdHJlYW0gaW4sIFN0cmluZyBmaWxlKSB0
aHJvd3MgSU9FeGNlcHRpb24gew0KKyAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5
ID0gZmluZChpbiwgZmlsZSk7DQorICAgICAgICBpZiAoZmFjdG9yeSA9PSBudWxsKSB7DQorICAg
ICAgICAgICAgcmV0dXJuIGdldEFuYWx5emVyKCk7DQorICAgICAgICB9DQorICAgICAgICByZXR1
cm4gZmFjdG9yeS5nZXRBbmFseXplcigpOw0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBD
cmVhdGUgYSBMdWNlbmUgZG9jdW1lbnQgYW5kIGZpbGwgaW4gdGhlIHJlcXVpcmVkIGZpZWxkcw0K
KyAgICAgKiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB0byBpbmRleA0KKyAgICAgKiBAcGFyYW0gaW4g
VGhlIGRhdGEgdG8gZ2VuZXJhdGUgdGhlIGluZGV4IGZvcg0KKyAgICAgKiBAcGFyYW0gcGF0aCBX
aGVyZSB0aGUgZmlsZSBpcyBsb2NhdGVkIChmcm9tIHNvdXJjZSByb290KQ0KKyAgICAgKiBAcmV0
dXJuIFRoZSBMdWNlbmUgZG9jdW1lbnQgdG8gYWRkIHRvIHRoZSBpbmRleCBkYXRhYmFzZQ0KKyAg
ICAgKiBAdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24gSWYgYW4gZXhjZXB0aW9uIG9jY3VycyB3
aGlsZSBjb2xsZWN0aW5nIHRoZQ0KKyAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ZGF0YXMNCisgICAgICovDQorICAgIHB1YmxpYyBEb2N1bWVudCBnZXREb2N1bWVudChGaWxlIGZp
bGUsIElucHV0U3RyZWFtIGluLCBTdHJpbmcgcGF0aCwNCisgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIEZpbGVBbmFseXplciBmYSkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisgICAgICAg
IERvY3VtZW50IGRvYyA9IG5ldyBEb2N1bWVudCgpOw0KKyAgICAgICAgU3RyaW5nIGRhdGUgPSBE
YXRlVG9vbHMudGltZVRvU3RyaW5nKGZpbGUubGFzdE1vZGlmaWVkKCksIERhdGVUb29scy5SZXNv
bHV0aW9uLk1JTExJU0VDT05EKTsNCisgICAgICAgIGRvYy5hZGQobmV3IEZpZWxkKCJ1IiwgVXRp
bC51aWQocGF0aCwgZGF0ZSksIEZpZWxkLlN0b3JlLllFUywgRmllbGQuSW5kZXguTk9UX0FOQUxZ
WkVEKSk7DQorICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgiZnVsbHBhdGgiLCBmaWxlLmdldEFi
c29sdXRlUGF0aCgpLCBGaWVsZC5TdG9yZS5OTywgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVEKSk7
DQorDQorICAgICAgICB0cnkgew0KKyAgICAgICAgICAgIEhpc3RvcnlSZWFkZXIgaHIgPSBIaXN0
b3J5R3VydS5nZXRJbnN0YW5jZSgpLmdldEhpc3RvcnlSZWFkZXIoZmlsZSk7DQorICAgICAgICAg
ICAgaWYgKGhyICE9IG51bGwpIHsNCisgICAgICAgICAgICAgICAgZG9jLmFkZChuZXcgRmllbGQo
Imhpc3QiLCBocikpOw0KKyAgICAgICAgICAgICAgICAvLyBkYXRlID0gaHIuZ2V0TGFzdENvbW1l
bnREYXRlKCkgLy9SRkUNCisgICAgICAgICAgICB9DQorICAgICAgICB9IGNhdGNoIChIaXN0b3J5
RXhjZXB0aW9uIGUpIHsNCisgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5s
b2coTGV2ZWwuV0FSTklORywgIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlYWRpbmcgaGlzdG9y
eTogIiwgZSk7DQorICAgICAgICB9DQorICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgiZGF0ZSIs
IGRhdGUsIEZpZWxkLlN0b3JlLllFUywgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVEKSk7DQorICAg
ICAgICBpZiAocGF0aCAhPSBudWxsKSB7DQorICAgICAgICAgICAgZG9jLmFkZChuZXcgRmllbGQo
InBhdGgiLCBwYXRoLCBGaWVsZC5TdG9yZS5ZRVMsIEZpZWxkLkluZGV4LkFOQUxZWkVEKSk7DQor
ICAgICAgICAgICAgUHJvamVjdCBwcm9qZWN0ID0gUHJvamVjdC5nZXRQcm9qZWN0KHBhdGgpOw0K
KyAgICAgICAgICAgIGlmIChwcm9qZWN0ICE9IG51bGwpIHsNCisgICAgICAgICAgICAgICAgZG9j
LmFkZChuZXcgRmllbGQoInByb2plY3QiLCBwcm9qZWN0LmdldFBhdGgoKSwgRmllbGQuU3RvcmUu
WUVTLCBGaWVsZC5JbmRleC5BTkFMWVpFRCkpOw0KKyAgICAgICAgICAgIH0NCisgICAgICAgIH0N
CisNCisgICAgICAgIGlmIChmYSAhPSBudWxsKSB7DQorICAgICAgICAgICAgR2VucmUgZyA9IGZh
LmdldEdlbnJlKCk7DQorICAgICAgICAgICAgaWYgKGcgPT0gR2VucmUuUExBSU4pIHsNCisgICAg
ICAgICAgICAgICAgZG9jLmFkZChuZXcgRmllbGQoInQiLCAicCIsIEZpZWxkLlN0b3JlLllFUywg
RmllbGQuSW5kZXguTk9UX0FOQUxZWkVEKSk7DQorICAgICAgICAgICAgfSBlbHNlIGlmIChnID09
IEdlbnJlLlhSRUZBQkxFKSB7DQorICAgICAgICAgICAgICAgIGRvYy5hZGQobmV3IEZpZWxkKCJ0
IiwgIngiLCBGaWVsZC5TdG9yZS5ZRVMsIEZpZWxkLkluZGV4Lk5PVF9BTkFMWVpFRCkpOw0KKyAg
ICAgICAgICAgIH0gZWxzZSBpZiAoZyA9PSBHZW5yZS5IVE1MKSB7DQorICAgICAgICAgICAgICAg
IGRvYy5hZGQobmV3IEZpZWxkKCJ0IiwgImgiLCBGaWVsZC5TdG9yZS5ZRVMsIEZpZWxkLkluZGV4
Lk5PVF9BTkFMWVpFRCkpOw0KKyAgICAgICAgICAgIH0NCisgICAgICAgICAgICBmYS5hbmFseXpl
KGRvYywgaW4pOw0KKyAgICAgICAgfQ0KKw0KKyAgICAgICAgcmV0dXJuIGRvYzsNCisgICAgfQ0K
Kw0KKyAgICAvKioNCisgICAgICogR2V0IHRoZSBjb250ZW50IHR5cGUgZm9yIGEgbmFtZWQgZmls
ZS4NCisgICAgICoNCisgICAgICogQHBhcmFtIGluIFRoZSBpbnB1dCBzdHJlYW0gd2Ugd2FudCB0
byBnZXQgdGhlIGNvbnRlbnQgdHlwZSBmb3IgKGlmDQorICAgICAqICAgICAgICAgICB3ZSBjYW5u
b3QgZGV0ZXJtaW5lIHRoZSBjb250ZW50IHR5cGUgYnkgdGhlIGZpbGVuYW1lKQ0KKyAgICAgKiBA
cGFyYW0gZmlsZSBUaGUgbmFtZSBvZiB0aGUgZmlsZQ0KKyAgICAgKiBAcmV0dXJuIFRoZSBjb250
ZW50VHlwZSBzdWl0YWJsZSBmb3IgcHJpbnRpbmcgdG8gcmVzcG9uc2Uuc2V0Q29udGVudFR5cGUo
KSBvciBudWxsDQorICAgICAqICAgICAgICAgaWYgdGhlIGZhY3Rvcnkgd2FzIG5vdCBmb3VuZA0K
KyAgICAgKiBAdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24gSWYgYW4gZXJyb3Igb2NjdXJzIHdo
aWxlIGFjY2Vzc2luZyB0aGUgaW5wdXQNCisgICAgICogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cmVhbS4NCisgICAgICovDQorICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldENvbnRl
bnRUeXBlKElucHV0U3RyZWFtIGluLCBTdHJpbmcgZmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uIHsN
CisgICAgICAgIEZpbGVBbmFseXplckZhY3RvcnkgZmFjdG9yeSA9IGZpbmQoaW4sIGZpbGUpOw0K
KyAgICAgICAgU3RyaW5nIHR5cGUgPSBudWxsOw0KKyAgICAgICAgaWYgKGZhY3RvcnkgIT0gbnVs
bCkgew0KKyAgICAgICAgICAgIHR5cGUgPSBmYWN0b3J5LmdldENvbnRlbnRUeXBlKCk7DQorICAg
ICAgICB9DQorICAgICAgICByZXR1cm4gdHlwZTsNCisgICAgfQ0KKw0KKyAgICAvKioNCisgICAg
ICogV3JpdGUgYSBicm93c2FibGUgdmVyc2lvbiBvZiB0aGUgZmlsZQ0KKyAgICAgKg0KKyAgICAg
KiBAcGFyYW0gZmFjdG9yeSBUaGUgYW5hbHl6ZXIgZmFjdG9yeSBmb3IgdGhpcyBmaWxldHlwZQ0K
KyAgICAgKiBAcGFyYW0gaW4gVGhlIGlucHV0IHN0cmVhbSBjb250YWluaW5nIHRoZSBkYXRhDQor
ICAgICAqIEBwYXJhbSBvdXQgV2hlcmUgdG8gd3JpdGUgdGhlIHJlc3VsdA0KKyAgICAgKiBAcGFy
YW0gYW5ub3RhdGlvbiBBbm5vdGF0aW9uIGluZm9ybWF0aW9uIGZvciB0aGUgZmlsZQ0KKyAgICAg
KiBAcGFyYW0gcHJvamVjdCBQcm9qZWN0IHRoZSBmaWxlIGJlbG9uZ3MgdG8NCisgICAgICogQHRo
cm93cyBqYXZhLmlvLklPRXhjZXB0aW9uIElmIGFuIGVycm9yIG9jY3VycyB3aGlsZSBjcmVhdGlu
ZyB0aGUNCisgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dA0KKyAgICAg
Ki8NCisgICAgcHVibGljIHN0YXRpYyB2b2lkIHdyaXRlWHJlZihGaWxlQW5hbHl6ZXJGYWN0b3J5
IGZhY3RvcnksIFJlYWRlciBpbiwNCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBX
cml0ZXIgb3V0LCBBbm5vdGF0aW9uIGFubm90YXRpb24sIFByb2plY3QgcHJvamVjdCkNCisgICAg
ICAgIHRocm93cyBJT0V4Y2VwdGlvbg0KKyAgICB7DQorICAgICAgICBSZWFkZXIgaW5wdXQgPSBp
bjsNCisgICAgICAgIGlmIChmYWN0b3J5LmdldEdlbnJlKCkgPT0gR2VucmUuUExBSU4pIHsNCisg
ICAgICAgICAgICAvLyBUaGlzIGlzIHNvbWUga2luZCBvZiB0ZXh0IGZpbGUsIHNvIHdlIG5lZWQg
dG8gZXhwYW5kIHRhYnMgdG8NCisgICAgICAgICAgICAvLyBzcGFjZXMgdG8gbWF0Y2ggdGhlIHBy
b2plY3QncyB0YWIgc2V0dGluZ3MuDQorICAgICAgICAgICAgaW5wdXQgPSBFeHBhbmRUYWJzUmVh
ZGVyLndyYXAoaW4sIHByb2plY3QpOw0KKyAgICAgICAgfQ0KKyAgICAgICAgZmFjdG9yeS53cml0
ZVhyZWYoaW5wdXQsIG91dCwgYW5ub3RhdGlvbiwgcHJvamVjdCk7DQorICAgIH0NCisNCisgICAg
LyoqDQorICAgICAqIEdldCB0aGUgZ2VucmUgb2YgYSBmaWxlDQorICAgICAqDQorICAgICAqIEBw
YXJhbSBmaWxlIFRoZSBmaWxlIHRvIGlucGVjdA0KKyAgICAgKiBAcmV0dXJuIFRoZSBnZW5yZSBz
dWl0YWJsZSB0byBkZWNpZGUgaG93IHRvIGRpc3BsYXkgdGhlIGZpbGUNCisgICAgICovDQorICAg
IHB1YmxpYyBzdGF0aWMgR2VucmUgZ2V0R2VucmUoU3RyaW5nIGZpbGUpIHsNCisgICAgICAgIHJl
dHVybiBnZXRHZW5yZShmaW5kKGZpbGUpKTsNCisgICAgfQ0KKw0KKyAgICAvKioNCisgICAgICog
R2V0IHRoZSBnZW5yZSBvZiBhIGJ1bGsgb2YgZGF0YQ0KKyAgICAgKg0KKyAgICAgKiBAcGFyYW0g
aW4gQSBzdHJlYW0gY29udGFpbmluZyB0aGUgZGF0YQ0KKyAgICAgKiBAcmV0dXJuIFRoZSBnZW5y
ZSBzdWl0YWJsZSB0byBkZWNpZGUgaG93IHRvIGRpc3BsYXkgdGhlIGZpbGUNCisgICAgICogQHRo
cm93cyBqYXZhLmlvLklPRXhjZXB0aW9uIElmIGFuIGVycm9yIG9jY3VycyB3aGlsZSBnZXR0aW5n
IHRoZSBjb250ZW50DQorICAgICAqLw0KKyAgICBwdWJsaWMgc3RhdGljIEdlbnJlIGdldEdlbnJl
KElucHV0U3RyZWFtIGluKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KKyAgICAgICAgcmV0dXJuIGdl
dEdlbnJlKGZpbmQoaW4pKTsNCisgICAgfQ0KKw0KKyAgICAvKioNCisgICAgICogR2V0IHRoZSBn
ZW5yZSBmb3IgYSBuYW1lZCBjbGFzcyAodGhpcyBpcyBtb3N0IGxpa2VseSBhbiBhbmFseXplcikN
CisgICAgICogQHBhcmFtIGZhY3RvcnkgdGhlIGFuYWx5emVyIGZhY3RvcnkgdG8gZ2V0IHRoZSBn
ZW5yZSBmb3INCisgICAgICogQHJldHVybiBUaGUgZ2VucmUgb2YgdGhpcyBjbGFzcyAobnVsbCBp
ZiBub3QgZm91bmQpDQorICAgICAqLw0KKyAgICBwdWJsaWMgc3RhdGljIEdlbnJlIGdldEdlbnJl
KEZpbGVBbmFseXplckZhY3RvcnkgZmFjdG9yeSkgew0KKyAgICAgICAgaWYgKGZhY3RvcnkgIT0g
bnVsbCkgew0KKyAgICAgICAgICAgIHJldHVybiBmYWN0b3J5LmdldEdlbnJlKCk7DQorICAgICAg
ICB9DQorICAgICAgICByZXR1cm4gbnVsbDsNCisgICAgfQ0KKw0KKyAgICAvKioNCisgICAgICog
RmluZCBhIHtAY29kZSBGaWxlQW5hbHl6ZXJGYWN0b3J5fSB3aXRoIHRoZSBzcGVjaWZpZWQgY2xh
c3MgbmFtZS4gSWYgb25lDQorICAgICAqIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBvbmUgYW5kIHJl
Z2lzdGVyIGl0Lg0KKyAgICAgKg0KKyAgICAgKiBAcGFyYW0gZmFjdG9yeUNsYXNzTmFtZSBuYW1l
IG9mIHRoZSBmYWN0b3J5IGNsYXNzDQorICAgICAqIEByZXR1cm4gYSBmaWxlIGFuYWx5emVyIGZh
Y3RvcnkNCisgICAgICoNCisgICAgICogQHRocm93cyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGlm
IHRoZXJlIGlzIG5vIGNsYXNzIHdpdGggdGhhdCBuYW1lDQorICAgICAqIEB0aHJvd3MgQ2xhc3ND
YXN0RXhjZXB0aW9uIGlmIHRoZSBjbGFzcyBpcyBub3QgYSBzdWJjbGFzcyBvZiB7QGNvZGUNCisg
ICAgICogRmlsZUFuYWx5emVyRmFjdG9yeX0NCisgICAgICogQHRocm93cyBJbGxlZ2FsQWNjZXNz
RXhjZXB0aW9uIGlmIHRoZSBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgYWNjZXNzZWQNCisgICAgICog
QHRocm93cyBJbnN0YW50aWF0aW9uRXhjZXB0aW9uIGlmIHRoZSBjbGFzcyBjYW5ub3QgYmUgaW5z
dGFudGlhdGVkDQorICAgICAqLw0KKyAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFseXplckZhY3Rv
cnkgZmluZEZhY3RvcnkoU3RyaW5nIGZhY3RvcnlDbGFzc05hbWUpDQorICAgICAgICB0aHJvd3Mg
Q2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiwgSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbiwNCisgICAgICAg
ICAgICAgICBJbnN0YW50aWF0aW9uRXhjZXB0aW9uDQorICAgIHsNCisgICAgICAgIHJldHVybiBm
aW5kRmFjdG9yeShDbGFzcy5mb3JOYW1lKGZhY3RvcnlDbGFzc05hbWUpKTsNCisgICAgfQ0KKw0K
KyAgICAvKioNCisgICAgICogRmluZCBhIHtAY29kZSBGaWxlQW5hbHl6ZXJGYWN0b3J5fSB3aGlj
aCBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgc3BlY2lmaWVkDQorICAgICAqIGNsYXNzLiBJZiBvbmUg
ZG9lc24ndCBleGlzdCwgY3JlYXRlIG9uZSBhbmQgcmVnaXN0ZXIgaXQuDQorICAgICAqDQorICAg
ICAqIEBwYXJhbSBmYWN0b3J5Q2xhc3MgdGhlIGZhY3RvcnkgY2xhc3MNCisgICAgICogQHJldHVy
biBhIGZpbGUgYW5hbHl6ZXIgZmFjdG9yeQ0KKyAgICAgKg0KKyAgICAgKiBAdGhyb3dzIENsYXNz
Q2FzdEV4Y2VwdGlvbiBpZiB0aGUgY2xhc3MgaXMgbm90IGEgc3ViY2xhc3Mgb2Yge0Bjb2RlDQor
ICAgICAqIEZpbGVBbmFseXplckZhY3Rvcnl9DQorICAgICAqIEB0aHJvd3MgSWxsZWdhbEFjY2Vz
c0V4Y2VwdGlvbiBpZiB0aGUgY29uc3RydWN0b3IgY2Fubm90IGJlIGFjY2Vzc2VkDQorICAgICAq
IEB0aHJvd3MgSW5zdGFudGlhdGlvbkV4Y2VwdGlvbiBpZiB0aGUgY2xhc3MgY2Fubm90IGJlIGlu
c3RhbnRpYXRlZA0KKyAgICAgKi8NCisgICAgcHJpdmF0ZSBzdGF0aWMgRmlsZUFuYWx5emVyRmFj
dG9yeSBmaW5kRmFjdG9yeShDbGFzcyBmYWN0b3J5Q2xhc3MpDQorICAgICAgICB0aHJvd3MgSW5z
dGFudGlhdGlvbkV4Y2VwdGlvbiwgSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbg0KKyAgICB7DQorICAg
ICAgICBmb3IgKEZpbGVBbmFseXplckZhY3RvcnkgZiA6IGZhY3Rvcmllcykgew0KKyAgICAgICAg
ICAgIGlmIChmLmdldENsYXNzKCkgPT0gZmFjdG9yeUNsYXNzKSB7DQorICAgICAgICAgICAgICAg
IHJldHVybiBmOw0KKyAgICAgICAgICAgIH0NCisgICAgICAgIH0NCisgICAgICAgIEZpbGVBbmFs
eXplckZhY3RvcnkgZiA9DQorICAgICAgICAgICAgKEZpbGVBbmFseXplckZhY3RvcnkpIGZhY3Rv
cnlDbGFzcy5uZXdJbnN0YW5jZSgpOw0KKyAgICAgICAgcmVnaXN0ZXJBbmFseXplcihmKTsNCisg
ICAgICAgIHJldHVybiBmOw0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBGaW5kcyBhIHN1
aXRhYmxlIGFuYWx5c2VyIGNsYXNzIGZvciBmaWxlIG5hbWUuIElmIHRoZSBhbmFseXplciBjYW5u
b3QNCisgICAgICogYmUgZGV0ZXJtaW5lZCBieSB0aGUgZmlsZSBleHRlbnNpb24sIHRyeSB0byBs
b29rIGF0IHRoZSBkYXRhIGluIHRoZQ0KKyAgICAgKiBJbnB1dFN0cmVhbSB0byBmaW5kIGEgc3Vp
dGFibGUgYW5hbHl6ZXIuDQorICAgICAqDQorICAgICAqIFVzZSBpZiB5b3UganVzdCB3YW50IHRv
IGZpbmQgZmlsZSB0eXBlLg0KKyAgICAgKg0KKyAgICAgKg0KKyAgICAgKiBAcGFyYW0gaW4gVGhl
IGlucHV0IHN0cmVhbSBjb250YWluaW5nIHRoZSBkYXRhDQorICAgICAqIEBwYXJhbSBmaWxlIFRo
ZSBmaWxlIG5hbWUgdG8gZ2V0IHRoZSBhbmFseXplciBmb3INCisgICAgICogQHJldHVybiB0aGUg
YW5hbHl6ZXIgZmFjdG9yeSB0byB1c2UNCisgICAgICogQHRocm93cyBqYXZhLmlvLklPRXhjZXB0
aW9uIElmIGEgcHJvYmxlbSBvY2N1cnMgd2hpbGUgcmVhZGluZyB0aGUgZGF0YQ0KKyAgICAgKi8N
CisgICAgcHVibGljIHN0YXRpYyBGaWxlQW5hbHl6ZXJGYWN0b3J5IGZpbmQoSW5wdXRTdHJlYW0g
aW4sIFN0cmluZyBmaWxlKQ0KKyAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uDQorICAgIHsNCisg
ICAgICAgIEZpbGVBbmFseXplckZhY3RvcnkgZmFjdG9yeSA9IGZpbmQoZmlsZSk7DQorICAgICAg
ICBpZiAoZmFjdG9yeSAhPSBudWxsKSB7DQorICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7DQor
ICAgICAgICB9DQorICAgICAgICByZXR1cm4gZmluZChpbik7DQorICAgIH0NCisNCisgICAgLyoq
DQorICAgICAqIEZpbmRzIGEgc3VpdGFibGUgYW5hbHlzZXIgY2xhc3MgZm9yIGZpbGUgbmFtZS4N
CisgICAgICoNCisgICAgICogQHBhcmFtIGZpbGUgVGhlIGZpbGUgbmFtZSB0byBnZXQgdGhlIGFu
YWx5emVyIGZvcg0KKyAgICAgKiBAcmV0dXJuIHRoZSBhbmFseXplciBmYWN0b3J5IHRvIHVzZQ0K
KyAgICAgKi8NCisgICAgcHVibGljIHN0YXRpYyBGaWxlQW5hbHl6ZXJGYWN0b3J5IGZpbmQoU3Ry
aW5nIGZpbGUpIHsNCisgICAgICAgIFN0cmluZyBwYXRoID0gZmlsZTsNCisgICAgICAgIGludCBp
ID0gMDsNCisgICAgICAgIGlmICgoKGkgPSBwYXRoLmxhc3RJbmRleE9mKCcvJykpID4gMCB8fCAo
aSA9IHBhdGgubGFzdEluZGV4T2YoJ1xcJykpID4gMCkgDQorICAgICAgICAgICAgJiYgKGkgKyAx
IDwgcGF0aC5sZW5ndGgoKSkpIHsNCisgICAgICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmco
aSArIDEpOw0KKyAgICAgICAgfQ0KKyAgICAgICAgaW50IGRvdHBvcyA9IHBhdGgubGFzdEluZGV4
T2YoJy4nKTsNCisgICAgICAgIGlmIChkb3Rwb3MgPj0gMCkgew0KKyAgICAgICAgICAgIEZpbGVB
bmFseXplckZhY3RvcnkgZmFjdG9yeSA9DQorICAgICAgICAgICAgICAgIGV4dC5nZXQocGF0aC5z
dWJzdHJpbmcoZG90cG9zICsgMSkudG9VcHBlckNhc2UoTG9jYWxlLlVTKSk7DQorICAgICAgICAg
ICAgaWYgKGZhY3RvcnkgIT0gbnVsbCkgew0KKyAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9y
eTsNCisgICAgICAgICAgICB9DQorICAgICAgICB9DQorICAgICAgICAvLyBmaWxlIGRvZXNuJ3Qg
aGF2ZSBhbnkgb2YgdGhlIGV4dGVuc2lvbnMgd2Uga25vdywgdHJ5IGZ1bGwgbWF0Y2gNCisgICAg
ICAgIHJldHVybiBGSUxFX05BTUVTLmdldChwYXRoLnRvVXBwZXJDYXNlKExvY2FsZS5VUykpOw0K
KyAgICB9DQorDQorICAgIC8qKg0KKyAgICAgKiBGaW5kcyBhIHN1aXRhYmxlIGFuYWx5c2VyIGNs
YXNzIGZvciB0aGUgZGF0YSBpbiB0aGlzIHN0cmVhbQ0KKyAgICAgKg0KKyAgICAgKiBAcGFyYW0g
aW4gVGhlIHN0cmVhbSBjb250YWluaW5nIHRoZSBkYXRhIHRvIGFuYWx5emUNCisgICAgICogQHJl
dHVybiB0aGUgYW5hbHl6ZXIgZmFjdG9yeSB0byB1c2UNCisgICAgICogQHRocm93cyBqYXZhLmlv
LklPRXhjZXB0aW9uIGlmIGFuIGVycm9yIG9jY3VycyB3aGlsZSByZWFkaW5nIGRhdGEgZnJvbQ0K
KyAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHN0cmVhbQ0KKyAgICAgKi8N
CisgICAgcHVibGljIHN0YXRpYyBGaWxlQW5hbHl6ZXJGYWN0b3J5IGZpbmQoSW5wdXRTdHJlYW0g
aW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorICAgICAgICBpbi5tYXJrKDgpOw0KKyAgICAgICAg
Ynl0ZVtdIGNvbnRlbnQgPSBuZXcgYnl0ZVs4XTsNCisgICAgICAgIGludCBsZW4gPSBpbi5yZWFk
KGNvbnRlbnQpOw0KKyAgICAgICAgaW4ucmVzZXQoKTsNCisgICAgICAgIGlmIChsZW4gPCA0KSB7
DQorICAgICAgICAgICAgcmV0dXJuIG51bGw7DQorICAgICAgICB9DQorDQorICAgICAgICBGaWxl
QW5hbHl6ZXJGYWN0b3J5IGZhY3RvcnkgPSBmaW5kKGNvbnRlbnQpOw0KKyAgICAgICAgaWYgKGZh
Y3RvcnkgIT0gbnVsbCkgew0KKyAgICAgICAgICAgIHJldHVybiBmYWN0b3J5Ow0KKyAgICAgICAg
fQ0KKw0KKyAgICAgICAgZm9yIChGaWxlQW5hbHl6ZXJGYWN0b3J5Lk1hdGNoZXIgbWF0Y2hlciA6
IG1hdGNoZXJzKSB7DQorICAgICAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWMgPSBtYXRj
aGVyLmlzTWFnaWMoY29udGVudCwgaW4pOw0KKyAgICAgICAgICAgIGlmIChmYWMgIT0gbnVsbCkg
ew0KKyAgICAgICAgICAgICAgICByZXR1cm4gZmFjOw0KKyAgICAgICAgICAgIH0NCisgICAgICAg
IH0NCisNCisgICAgICAgIHJldHVybiBudWxsOw0KKyAgICB9DQorDQorICAgIC8qKg0KKyAgICAg
KiBGaW5kcyBhIHN1aXRhYmxlIGFuYWx5c2VyIGNsYXNzIGZvciBhIG1hZ2ljIHNpZ25hdHVyZQ0K
KyAgICAgKg0KKyAgICAgKiBAcGFyYW0gc2lnbmF0dXJlIHRoZSBtYWdpYyBzaWduYXR1cmUgbG9v
ayB1cA0KKyAgICAgKiBAcmV0dXJuIHRoZSBhbmFseXplciBmYWN0b3J5IHRvIHVzZQ0KKyAgICAg
Ki8NCisgICAgcHVibGljIHN0YXRpYyBGaWxlQW5hbHl6ZXJGYWN0b3J5IGZpbmQoYnl0ZVtdIHNp
Z25hdHVyZSkgew0KKyAgICAgICAgY2hhcltdIGNoYXJzID0gbmV3IGNoYXJbc2lnbmF0dXJlLmxl
bmd0aCA+IDggPyA4IDogc2lnbmF0dXJlLmxlbmd0aF07DQorICAgICAgICBmb3IgKGludCBpID0g
MDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7DQorICAgICAgICAgICAgY2hhcnNbaV0gPSAoY2hh
cikgKDB4RkYgJiBzaWduYXR1cmVbaV0pOw0KKyAgICAgICAgfQ0KKyAgICAgICAgcmV0dXJuIGZp
bmRNYWdpYyhuZXcgU3RyaW5nKGNoYXJzKSk7DQorICAgIH0NCisNCisgICAgLyoqDQorICAgICAq
IEdldCBhbiBhbmFseXplciBieSBsb29raW5nIHVwIHRoZSAibWFnaWMgc2lnbmF0dXJlIg0KKyAg
ICAgKiBAcGFyYW0gc2lnbmF0dXJlIHRoZSBzaWduYXR1cmUgdG8gbG9vayB1cA0KKyAgICAgKiBA
cmV0dXJuIHRoZSBhbmFseXplciBmYWN0b3J5IHRvIGhhbmRsZSBkYXRhIHdpdGggdGhpcyBzaWdu
YXR1cmUNCisgICAgICovDQorICAgIHB1YmxpYyBzdGF0aWMgRmlsZUFuYWx5emVyRmFjdG9yeSBm
aW5kTWFnaWMoU3RyaW5nIHNpZ25hdHVyZSkgew0KKyAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9y
eSBhID0gbWFnaWNzLmdldChzaWduYXR1cmUpOw0KKyAgICAgICAgaWYgKGEgPT0gbnVsbCkgew0K
KyAgICAgICAgICAgIFN0cmluZyBzaWdXaXRob3V0Qk9NID0gc3RyaXBCT00oc2lnbmF0dXJlKTsN
CisgICAgICAgICAgICBmb3IgKE1hcC5FbnRyeTxTdHJpbmcsIEZpbGVBbmFseXplckZhY3Rvcnk+
IGVudHJ5IDoNCisgICAgICAgICAgICAgICAgICAgICBtYWdpY3MuZW50cnlTZXQoKSkgew0KKyAg
ICAgICAgICAgICAgICBpZiAoc2lnbmF0dXJlLnN0YXJ0c1dpdGgoZW50cnkuZ2V0S2V5KCkpKSB7
DQorICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50cnkuZ2V0VmFsdWUoKTsNCisgICAgICAg
ICAgICAgICAgfQ0KKyAgICAgICAgICAgICAgICAvLyBTZWUgaWYgdGV4dCBmaWxlcyBoYXZlIHRo
ZSBtYWdpYyBzZXF1ZW5jZSBpZiB3ZSByZW1vdmUgdGhlDQorICAgICAgICAgICAgICAgIC8vIGJ5
dGUtb3JkZXIgbWFya2VyDQorICAgICAgICAgICAgICAgIGlmIChzaWdXaXRob3V0Qk9NICE9IG51
bGwgJiYNCisgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeS5nZXRWYWx1ZSgpLmdldEdlbnJl
KCkgPT0gR2VucmUuUExBSU4gJiYNCisgICAgICAgICAgICAgICAgICAgICAgICBzaWdXaXRob3V0
Qk9NLnN0YXJ0c1dpdGgoZW50cnkuZ2V0S2V5KCkpKSB7DQorICAgICAgICAgICAgICAgICAgICBy
ZXR1cm4gZW50cnkuZ2V0VmFsdWUoKTsNCisgICAgICAgICAgICAgICAgfQ0KKyAgICAgICAgICAg
IH0NCisgICAgICAgIH0NCisgICAgICAgIHJldHVybiBhOw0KKyAgICB9DQorDQorICAgIC8qKiBC
eXRlLW9yZGVyIG1hcmtlcnMuICovDQorICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZ1td
IEJPTVMgPSB7DQorICAgICAgICBuZXcgU3RyaW5nKG5ldyBjaGFyW10gezB4RUYsIDB4QkIsIDB4
QkZ9KSwgLy8gVVRGLTggQk9NDQorICAgICAgICBuZXcgU3RyaW5nKG5ldyBjaGFyW10gezB4RkUs
IDB4RkZ9KSwgICAgICAgLy8gVVRGLTE2QkUgQk9NDQorICAgICAgICBuZXcgU3RyaW5nKG5ldyBj
aGFyW10gezB4RkYsIDB4RkV9KSwgICAgICAgLy8gVVRGLTE2TEUgQk9NDQorICAgIH07DQorDQor
ICAgIC8qKg0KKyAgICAgKiBTdHJpcCBhd2F5IHRoZSBieXRlLW9yZGVyIG1hcmtlciBmcm9tIHRo
ZSBzdHJpbmcsIGlmIGl0IGhhcyBvbmUuDQorICAgICAqDQorICAgICAqIEBwYXJhbSBzdHIgdGhl
IHN0cmluZyB0byByZW1vdmUgdGhlIEJPTSBmcm9tDQorICAgICAqIEByZXR1cm4gYSBzdHJpbmcg
d2l0aG91dCB0aGUgYnl0ZS1vcmRlciBtYXJrZXIsIG9yIDxjb2RlPm51bGw8L2NvZGU+IGlmDQor
ICAgICAqIHRoZSBzdHJpbmcgZG9lc24ndCBzdGFydCB3aXRoIGEgQk9NDQorICAgICAqLw0KKyAg
ICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgc3RyaXBCT00oU3RyaW5nIHN0cikgew0KKyAgICAgICAg
Zm9yIChTdHJpbmcgYm9tIDogQk9NUykgew0KKyAgICAgICAgICAgIGlmIChzdHIuc3RhcnRzV2l0
aChib20pKSB7DQorICAgICAgICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKGJvbS5sZW5n
dGgoKSk7DQorICAgICAgICAgICAgfQ0KKyAgICAgICAgfQ0KKyAgICAgICAgcmV0dXJuIG51bGw7
DQorICAgIH0NCit9DQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAtciA3NjNlNjJjNmM0MzMgc3JjL29y
Zy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9UZXh0QW5hbHl6ZXIuamF2YQ0KLS0tIC9k
ZXYvbnVsbAlUaHUgSmFuIDAxIDAwOjAwOjAwIDE5NzAgKzAwMDANCisrKyBiL3NyYy9vcmcvb3Bl
bnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvVGV4dEFuYWx5emVyLmphdmEJV2VkIE1hciAwMyAx
Njo0MTowOCAyMDEwIC0wNTAwDQpAQCAtMCwwICsxLDQ2IEBADQorcGFja2FnZSBvcmcub3BlbnNv
bGFyaXMub3Blbmdyb2suYW5hbHlzaXM7DQorDQoraW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247
DQoraW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07DQoraW1wb3J0IGphdmEuaW8uSW5wdXRTdHJl
YW1SZWFkZXI7DQoraW1wb3J0IGphdmEubmlvLmNoYXJzZXQuQ2hhcnNldDsNCisNCitpbXBvcnQg
b3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7DQorDQorcHVibGljIGFic3RyYWN0
IGNsYXNzIFRleHRBbmFseXplciBleHRlbmRzIEZpbGVBbmFseXplciB7DQorCXB1YmxpYyBUZXh0
QW5hbHl6ZXIoRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5KSB7DQorCQlzdXBlcihmYWN0b3J5
KTsNCisJfQ0KKw0KKyAgICBwdWJsaWMgZmluYWwgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywg
SW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorICAgIAlTdHJpbmcgY2hhcnNl
dCA9IG51bGw7DQorICAgIAkNCisgICAgCWluLm1hcmsoMyk7DQorICAgIAkNCisgICAgCWJ5dGVb
XSBoZWFkID0gbmV3IGJ5dGVbM107DQorICAgIAlpbnQgYnIgPSBpbi5yZWFkKGhlYWQsIDAsIDMp
Ow0KKw0KKyAgICAJaWYgKGJyID49IDIpIHsNCisgICAgCQlpZiAoKGhlYWRbMF0gPT0gKGJ5dGUp
MHhGRSAmJiBoZWFkWzFdID09IChieXRlKTB4RkYpIHx8IChoZWFkWzBdID09IChieXRlKTB4RkYg
JiYgKGJ5dGUpaGVhZFsxXSA9PSAoYnl0ZSkweEZFKSkgew0KKyAgICAJCQljaGFyc2V0ID0gIlVU
RjE2IjsNCisgICAgCQkJaW4ucmVzZXQoKTsJDQorICAgIAkJfQ0KKyAgICAJfQ0KKyAgICAJaWYg
KGJyID49IDMpIHsNCisgICAgCQlpZiAoaGVhZFswXSA9PSAoYnl0ZSkweEVGICYmIGhlYWRbMV0g
PT0gKGJ5dGUpMHhCQiAmJiBoZWFkWzJdID09IChieXRlKTB4QkYpIHsNCisgICAgCQkJLyogSW5w
dXRTdHJlYW1SZWFkZXIgZG9lcyBub3QgcHJvcGVybHkgZGlzY2FyZCBCT00gb24gVVRGOCBzdHJl
YW1zLA0KKyAgICAJCQkgKiBzbyBkb24ndCByZXNldCB0aGUgc3RyZWFtLiAqLyANCisgICAgCQkJ
Y2hhcnNldCA9ICJVVEY4IjsNCisgICAgCQl9DQorICAgIAl9DQorICAgIAkNCisgICAgCWlmIChj
aGFyc2V0ID09IG51bGwpIHsNCisgICAgCQlpbi5yZXNldCgpOw0KKyAgICAJCWNoYXJzZXQgPSBD
aGFyc2V0LmRlZmF1bHRDaGFyc2V0KCkubmFtZSgpOw0KKyAgICAJfQ0KKyAgICAJDQorICAgICAg
ICBhbmFseXplKGRvYywgbmV3IElucHV0U3RyZWFtUmVhZGVyKGluLCBjaGFyc2V0KSk7DQorICAg
IH0NCisgICAgDQorCXByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9j
LCBJbnB1dFN0cmVhbVJlYWRlciByZWFkZXIpIHRocm93cyBJT0V4Y2VwdGlvbjsNCit9DQpkaWZm
IC1yIDc5NDAyZTc2YmE1YSAtciA3NjNlNjJjNmM0MzMgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVu
Z3Jvay9hbmFseXNpcy9jL0NBbmFseXplci5qYXZhDQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlz
L29wZW5ncm9rL2FuYWx5c2lzL2MvQ0FuYWx5emVyLmphdmEJVHVlIE1hciAwMiAxNjo1NTo0OSAy
MDEwICswMTAwDQorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2Mv
Q0FuYWx5emVyLmphdmEJV2VkIE1hciAwMyAxNjo0MTowOCAyMDEwIC0wNTAwDQpAQCAtMjUsOSAr
MjUsMTEgQEANCiANCiBpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsNCiBpbXBvcnQgamF2YS5p
by5JbnB1dFN0cmVhbTsNCitpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsNCiBpbXBv
cnQgamF2YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uU3RyaW5nUmVhZGVyOw0KIGltcG9y
dCBqYXZhLmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMu
VG9rZW5TdHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50
Ow0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5GaWVsZDsNCkBAIC01NCw3ICs1
Niw3IEBADQogICAgICAgICB4cmVmID0gbmV3IENYcmVmKGR1bW15KTsNCiAgICAgfQ0KIA0KLSAg
ICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRocm93
cyBJT0V4Y2VwdGlvbiB7DQorICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJ
bnB1dFN0cmVhbVJlYWRlciBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIHN1cGVy
LmFuYWx5emUoZG9jLCBpbik7DQogICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicmVmcyIsIGR1
bW15KSk7DQogICAgIH0gICAgDQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAtciA3NjNlNjJjNmM0MzMg
c3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9jL0N4eEFuYWx5emVyLmphdmEN
Ci0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvYy9DeHhBbmFseXpl
ci5qYXZhCVR1ZSBNYXIgMDIgMTY6NTU6NDkgMjAxMCArMDEwMA0KKysrIGIvc3JjL29yZy9vcGVu
c29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9jL0N4eEFuYWx5emVyLmphdmEJV2VkIE1hciAwMyAx
Njo0MTowOCAyMDEwIC0wNTAwDQpAQCAtMjUsOSArMjUsMTEgQEANCiANCiBpbXBvcnQgamF2YS5p
by5JT0V4Y2VwdGlvbjsNCiBpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsNCitpbXBvcnQgamF2
YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5SZWFkZXI7DQogaW1wb3J0
IGphdmEuaW8uU3RyaW5nUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLldyaXRlcjsNCisNCiBpbXBv
cnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07DQogaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2Vu
ZS5kb2N1bWVudC5GaWVsZDsNCkBAIC01MSw3ICs1Myw3IEBADQogICAgICAgICB4cmVmID0gbmV3
IEN4eFhyZWYoZHVtbXkpOw0KICAgICB9DQogDQotICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9j
dW1lbnQgZG9jLCBJbnB1dFN0cmVhbSBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisgICAgcHVi
bGljIHZvaWQgYW5hbHl6ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtUmVhZGVyIGluKSB0aHJv
d3MgSU9FeGNlcHRpb24gew0KICAgICAgICAgc3VwZXIuYW5hbHl6ZShkb2MsIGluKTsNCiAgICAg
ICAgIGRvYy5hZGQobmV3IEZpZWxkKCJyZWZzIiwgZHVtbXkpKTsNCiAgICAgfSAgICANCmRpZmYg
LXIgNzk0MDJlNzZiYTVhIC1yIDc2M2U2MmM2YzQzMyBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5n
cm9rL2FuYWx5c2lzL2ZvcnRyYW4vRm9ydHJhbkFuYWx5emVyLmphdmENCi0tLSBhL3NyYy9vcmcv
b3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvZm9ydHJhbi9Gb3J0cmFuQW5hbHl6ZXIuamF2
YQlUdWUgTWFyIDAyIDE2OjU1OjQ5IDIwMTAgKzAxMDANCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFy
aXMvb3Blbmdyb2svYW5hbHlzaXMvZm9ydHJhbi9Gb3J0cmFuQW5hbHl6ZXIuamF2YQlXZWQgTWFy
IDAzIDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC0yNSw5ICsyNSwxMSBAQA0KIA0KIGltcG9ydCBq
YXZhLmlvLklPRXhjZXB0aW9uOw0KIGltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOw0KK2ltcG9y
dCBqYXZhLmlvLklucHV0U3RyZWFtUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLlJlYWRlcjsNCiBp
bXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uV3JpdGVyOw0KKw0K
IGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5Ub2tlblN0cmVhbTsNCiBpbXBvcnQg
b3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7DQogaW1wb3J0IG9yZy5hcGFjaGUu
bHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KQEAgLTUxLDcgKzUzLDcgQEANCiAgICAgfQ0KIA0KICAg
ICBAT3ZlcnJpZGUNCi0gICAgcHVibGljIHZvaWQgYW5hbHl6ZShEb2N1bWVudCBkb2MsIElucHV0
U3RyZWFtIGluKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KKyAgICBwdWJsaWMgdm9pZCBhbmFseXpl
KERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW1SZWFkZXIgaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7
DQogICAgICAgICBzdXBlci5hbmFseXplKGRvYywgaW4pOw0KICAgICAgICAgZG9jLmFkZChuZXcg
RmllbGQoInJlZnMiLCBkdW1teSkpOw0KICAgICB9DQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAtciA3
NjNlNjJjNmM0MzMgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9qYXZhL0ph
dmFBbmFseXplci5qYXZhDQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5
c2lzL2phdmEvSmF2YUFuYWx5emVyLmphdmEJVHVlIE1hciAwMiAxNjo1NTo0OSAyMDEwICswMTAw
DQorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2phdmEvSmF2YUFu
YWx5emVyLmphdmEJV2VkIE1hciAwMyAxNjo0MTowOCAyMDEwIC0wNTAwDQpAQCAtMjUsOSArMjUs
MTEgQEANCiANCiBpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsNCiBpbXBvcnQgamF2YS5pby5J
bnB1dFN0cmVhbTsNCitpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsNCiBpbXBvcnQg
amF2YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uU3RyaW5nUmVhZGVyOw0KIGltcG9ydCBq
YXZhLmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuVG9r
ZW5TdHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0K
IGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5GaWVsZDsNCkBAIC01Myw3ICs1NSw3
IEBADQogICAgICAgICB4cmVmID0gbmV3IEphdmFYcmVmKGR1bW15KTsNCiAgICAgfQ0KIA0KLSAg
ICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRocm93
cyBJT0V4Y2VwdGlvbiB7DQorICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJ
bnB1dFN0cmVhbVJlYWRlciBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIHN1cGVy
LmFuYWx5emUoZG9jLCBpbik7DQogICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicmVmcyIsIGR1
bW15KSk7DQogICAgIH0gICAgDQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAtciA3NjNlNjJjNmM0MzMg
c3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9saXNwL0xpc3BBbmFseXplci5q
YXZhDQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2xpc3AvTGlz
cEFuYWx5emVyLmphdmEJVHVlIE1hciAwMiAxNjo1NTo0OSAyMDEwICswMTAwDQorKysgYi9zcmMv
b3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2xpc3AvTGlzcEFuYWx5emVyLmphdmEJ
V2VkIE1hciAwMyAxNjo0MTowOCAyMDEwIC0wNTAwDQpAQCAtMjUsOSArMjUsMTEgQEANCiANCiBp
bXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsNCiBpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsN
CitpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5SZWFk
ZXI7DQogaW1wb3J0IGphdmEuaW8uU3RyaW5nUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLldyaXRl
cjsNCisNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07DQog
aW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KIGltcG9ydCBvcmcu
YXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5GaWVsZDsNCkBAIC00OCw3ICs1MCw3IEBADQogICAgICAg
ICB4cmVmID0gbmV3IExpc3BYcmVmKGR1bW15KTsNCiAgICAgfQ0KIA0KLSAgICBwdWJsaWMgdm9p
ZCBhbmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlv
biB7DQorICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJl
YWRlciBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIHN1cGVyLmFuYWx5emUoZG9j
LCBpbik7DQogICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicmVmcyIsIGR1bW15KSk7DQogICAg
IH0NCmRpZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDc2M2U2MmM2YzQzMyBzcmMvb3JnL29wZW5zb2xh
cmlzL29wZW5ncm9rL2FuYWx5c2lzL3BsYWluL1BsYWluQW5hbHl6ZXIuamF2YQ0KLS0tIGEvc3Jj
L29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9wbGFpbi9QbGFpbkFuYWx5emVyLmph
dmEJVHVlIE1hciAwMiAxNjo1NTo0OSAyMDEwICswMTAwDQorKysgYi9zcmMvb3JnL29wZW5zb2xh
cmlzL29wZW5ncm9rL2FuYWx5c2lzL3BsYWluL1BsYWluQW5hbHl6ZXIuamF2YQlXZWQgTWFyIDAz
IDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC0zNCw5ICszNCw5IEBADQogaW1wb3J0IG9yZy5hcGFj
aGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KIGltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdy
b2suYW5hbHlzaXMuRGVmaW5pdGlvbnM7DQogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jv
ay5hbmFseXNpcy5FeHBhbmRUYWJzUmVhZGVyOw0KLWltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Bl
bmdyb2suYW5hbHlzaXMuRmlsZUFuYWx5emVyOw0KIGltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Bl
bmdyb2suYW5hbHlzaXMuRmlsZUFuYWx5emVyRmFjdG9yeTsNCiBpbXBvcnQgb3JnLm9wZW5zb2xh
cmlzLm9wZW5ncm9rLmFuYWx5c2lzLkhhc2gyVG9rZW5TdHJlYW07DQoraW1wb3J0IG9yZy5vcGVu
c29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5UZXh0QW5hbHl6ZXI7DQogaW1wb3J0IG9yZy5vcGVu
c29sYXJpcy5vcGVuZ3Jvay5jb25maWd1cmF0aW9uLlByb2plY3Q7DQogaW1wb3J0IG9yZy5vcGVu
c29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5LkFubm90YXRpb247DQogDQpAQCAtNDYsNyArNDYsNyBA
QA0KICAqDQogICogQGF1dGhvciBDaGFuZGFuDQogICovDQotcHVibGljIGNsYXNzIFBsYWluQW5h
bHl6ZXIgZXh0ZW5kcyBGaWxlQW5hbHl6ZXIgew0KK3B1YmxpYyBjbGFzcyBQbGFpbkFuYWx5emVy
IGV4dGVuZHMgVGV4dEFuYWx5emVyIHsNCiANCiAgICAgcHJvdGVjdGVkIGNoYXJbXSBjb250ZW50
Ow0KICAgICBwcm90ZWN0ZWQgaW50IGxlbjsNCkBAIC02Nyw5ICs2Nyw3IEBADQogICAgIH0NCiAN
CiAgICAgQE92ZXJyaWRlDQotICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJ
bnB1dFN0cmVhbSBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCi0gICAgICAgIFJlYWRlciBpblJl
YWRlciA9DQotICAgICAgICAgICAgICAgIEV4cGFuZFRhYnNSZWFkZXIud3JhcChuZXcgSW5wdXRT
dHJlYW1SZWFkZXIoaW4pLCBwcm9qZWN0KTsNCisgICAgcHVibGljIHZvaWQgYW5hbHl6ZShEb2N1
bWVudCBkb2MsIElucHV0U3RyZWFtUmVhZGVyIGluUmVhZGVyKSB0aHJvd3MgSU9FeGNlcHRpb24g
ew0KICAgICAgICAgbGVuID0gMDsNCiAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICBpbnQgcmJ5
dGVzID0gaW5SZWFkZXIucmVhZChjb250ZW50LCBsZW4sIGNvbnRlbnQubGVuZ3RoIC0gbGVuKTsN
CmRpZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDc2M2U2MmM2YzQzMyBzcmMvb3JnL29wZW5zb2xhcmlz
L29wZW5ncm9rL2FuYWx5c2lzL3BsYWluL1hNTEFuYWx5emVyLmphdmENCi0tLSBhL3NyYy9vcmcv
b3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvcGxhaW4vWE1MQW5hbHl6ZXIuamF2YQlUdWUg
TWFyIDAyIDE2OjU1OjQ5IDIwMTAgKzAxMDANCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Bl
bmdyb2svYW5hbHlzaXMvcGxhaW4vWE1MQW5hbHl6ZXIuamF2YQlXZWQgTWFyIDAzIDE2OjQxOjA4
IDIwMTAgLTA1MDANCkBAIC0yOSwxMSArMjksMTIgQEANCiBpbXBvcnQgamF2YS5pby5SZWFkZXI7
DQogaW1wb3J0IGphdmEuaW8uU3RyaW5nUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLldyaXRlcjsN
CisNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07DQogaW1w
b3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KIGltcG9ydCBvcmcuYXBh
Y2hlLmx1Y2VuZS5kb2N1bWVudC5GaWVsZDsNCi1pbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5n
cm9rLmFuYWx5c2lzLkZpbGVBbmFseXplcjsNCiBpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5n
cm9rLmFuYWx5c2lzLkZpbGVBbmFseXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJp
cy5vcGVuZ3Jvay5hbmFseXNpcy5UZXh0QW5hbHl6ZXI7DQogaW1wb3J0IG9yZy5vcGVuc29sYXJp
cy5vcGVuZ3Jvay5jb25maWd1cmF0aW9uLlByb2plY3Q7DQogaW1wb3J0IG9yZy5vcGVuc29sYXJp
cy5vcGVuZ3Jvay5oaXN0b3J5LkFubm90YXRpb247DQogDQpAQCAtNDMsNyArNDQsNyBAQA0KICAq
DQogICogQGF1dGhvciBDaGFuZGFuDQogICovDQotcHVibGljIGNsYXNzIFhNTEFuYWx5emVyIGV4
dGVuZHMgRmlsZUFuYWx5emVyIHsNCitwdWJsaWMgY2xhc3MgWE1MQW5hbHl6ZXIgZXh0ZW5kcyBU
ZXh0QW5hbHl6ZXIgew0KICAgICANCiAgICAgcHJpdmF0ZSBjaGFyW10gY29udGVudDsNCiAgICAg
cHJpdmF0ZSBpbnQgbGVuOw0KQEAgLTYzLDExICs2NCwxMCBAQA0KICAgICB9DQogICAgIA0KICAg
ICBAT3ZlcnJpZGUNCi0gICAgcHVibGljIHZvaWQgYW5hbHl6ZShEb2N1bWVudCBkb2MsIElucHV0
U3RyZWFtIGluKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KLSAgICAgICAgSW5wdXRTdHJlYW1SZWFk
ZXIgaW5SZWFkZXIgPSBuZXcgSW5wdXRTdHJlYW1SZWFkZXIoaW4pOw0KKyAgICBwdWJsaWMgdm9p
ZCBhbmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW1SZWFkZXIgaW4pIHRocm93cyBJT0V4
Y2VwdGlvbiB7DQogICAgICAgICBsZW4gPSAwOw0KICAgICAgICAgZG97DQotICAgICAgICAgICAg
aW50IHJieXRlcyA9IGluUmVhZGVyLnJlYWQoY29udGVudCwgbGVuLCBjb250ZW50Lmxlbmd0aCAt
IGxlbik7DQorICAgICAgICAgICAgaW50IHJieXRlcyA9IGluLnJlYWQoY29udGVudCwgbGVuLCBj
b250ZW50Lmxlbmd0aCAtIGxlbik7DQogICAgICAgICAgICAgaWYocmJ5dGVzID4gMCApIHsNCiAg
ICAgICAgICAgICAgICAgaWYocmJ5dGVzID09IChjb250ZW50Lmxlbmd0aCAtIGxlbikpIHsNCiAg
ICAgICAgICAgICAgICAgICAgIGNoYXJbXSBjb250ZW50MiA9IG5ldyBjaGFyW2NvbnRlbnQubGVu
Z3RoICogMl07DQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAtciA3NjNlNjJjNmM0MzMgc3JjL29yZy9v
cGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9zaC9TaEFuYWx5emVyLmphdmENCi0tLSBhL3Ny
Yy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvc2gvU2hBbmFseXplci5qYXZhCVR1
ZSBNYXIgMDIgMTY6NTU6NDkgMjAxMCArMDEwMA0KKysrIGIvc3JjL29yZy9vcGVuc29sYXJpcy9v
cGVuZ3Jvay9hbmFseXNpcy9zaC9TaEFuYWx5emVyLmphdmEJV2VkIE1hciAwMyAxNjo0MTowOCAy
MDEwIC0wNTAwDQpAQCAtMjUsOSArMjUsMTEgQEANCiANCiBpbXBvcnQgamF2YS5pby5JT0V4Y2Vw
dGlvbjsNCiBpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsNCitpbXBvcnQgamF2YS5pby5JbnB1
dFN0cmVhbVJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8u
U3RyaW5nUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVj
ZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVu
dC5GaWVsZDsNCkBAIC01NCw3ICs1Niw3IEBADQogICAgICAgICB4cmVmID0gbmV3IFNoWHJlZihk
dW1teSk7DQogICAgIH0NCiANCi0gICAgcHVibGljIHZvaWQgYW5hbHl6ZShEb2N1bWVudCBkb2Ms
IElucHV0U3RyZWFtIGluKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KKyAgICBwdWJsaWMgdm9pZCBh
bmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW1SZWFkZXIgaW4pIHRocm93cyBJT0V4Y2Vw
dGlvbiB7DQogICAgICAgICBzdXBlci5hbmFseXplKGRvYywgaW4pOw0KICAgICAgICAgZG9jLmFk
ZChuZXcgRmllbGQoInJlZnMiLCBkdW1teSkpOw0KICAgICB9ICAgIA0KZGlmZiAtciA3OTQwMmU3
NmJhNWEgLXIgNzYzZTYyYzZjNDMzIHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlz
aXMvdGNsL1RjbEFuYWx5emVyLmphdmENCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdy
b2svYW5hbHlzaXMvdGNsL1RjbEFuYWx5emVyLmphdmEJVHVlIE1hciAwMiAxNjo1NTo0OSAyMDEw
ICswMTAwDQorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL3RjbC9U
Y2xBbmFseXplci5qYXZhCVdlZCBNYXIgMDMgMTY6NDE6MDggMjAxMCAtMDUwMA0KQEAgLTI1LDkg
KzI1LDExIEBADQogDQogaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247DQogaW1wb3J0IGphdmEu
aW8uSW5wdXRTdHJlYW07DQoraW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7DQogaW1w
b3J0IGphdmEuaW8uUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLlN0cmluZ1JlYWRlcjsNCiBpbXBv
cnQgamF2YS5pby5Xcml0ZXI7DQorDQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5c2lz
LlRva2VuU3RyZWFtOw0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5Eb2N1bWVu
dDsNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRmllbGQ7DQpAQCAtNDgsNyAr
NTAsNyBAQA0KICAgICAgICAgeHJlZiA9IG5ldyBUY2xYcmVmKGR1bW15KTsNCiAgICAgfQ0KIA0K
LSAgICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRo
cm93cyBJT0V4Y2VwdGlvbiB7DQorICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9j
LCBJbnB1dFN0cmVhbVJlYWRlciBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIHN1
cGVyLmFuYWx5emUoZG9jLCBpbik7DQogICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicmVmcyIs
IGR1bW15KSk7DQogICAgIH0NCmRpZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDc2M2U2MmM2YzQzMyB0
ZXN0L29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9BbmFseXplckd1cnVUZXN0Lmph
dmENCi0tLSBhL3Rlc3Qvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL0FuYWx5emVy
R3VydVRlc3QuamF2YQlUdWUgTWFyIDAyIDE2OjU1OjQ5IDIwMTAgKzAxMDANCisrKyBiL3Rlc3Qv
b3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL0FuYWx5emVyR3VydVRlc3QuamF2YQlX
ZWQgTWFyIDAzIDE2OjQxOjA4IDIwMTAgLTA1MDANCkBAIC00OCw2ICs0OCwxNyBAQA0KICAgICB9
DQogDQogICAgIEBUZXN0DQorICAgIHB1YmxpYyB2b2lkIHRlc3RVVEY4Qnl0ZU9yZGVyTWFya1Bs
YWluRmlsZSgpIHRocm93cyBFeGNlcHRpb24gew0KKyAgICAgICAgYnl0ZVtdIGJ5dGVzID0geyAo
Ynl0ZSkgMHhFRiwgKGJ5dGUpIDB4QkIsIChieXRlKSAweEJGLCAvLyBVVEYtOCBCT00NCisgICAg
ICAgICAgICAgICAgICAgICAgICdoJywgJ2UnLCAnbCcsICdsJywgJ2UnLCAnICcsDQorICAgICAg
ICAgICAgICAgICAgICAgICAndycsICdvJywgJ3InLCAnbCcsICdkJ307DQorICAgICAgICANCisg
ICAgICAgIEJ5dGVBcnJheUlucHV0U3RyZWFtIGluID0gbmV3IEJ5dGVBcnJheUlucHV0U3RyZWFt
KGJ5dGVzKTsNCisgICAgICAgIEZpbGVBbmFseXplciBmYSA9IEFuYWx5emVyR3VydS5nZXRBbmFs
eXplcihpbiwgIi9kdW1teS9maWxlIik7DQorICAgICAgICBhc3NlcnRTYW1lKFBsYWluQW5hbHl6
ZXIuY2xhc3MsIGZhLmdldENsYXNzKCkpOw0KKyAgICB9DQorDQorICAgIEBUZXN0DQogICAgIHB1
YmxpYyB2b2lkIGFkZEV4dGVuc2lvbigpIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICAgLy8g
c2hvdWxkIG5vdCBmaW5kIGFuYWx5emVyIGZvciB0aGlzIHVubGlrZWx5IGV4dGVuc2lvbg0KICAg
ICAgICAgYXNzZXJ0TnVsbChBbmFseXplckd1cnUuZmluZCgiZmlsZS51bmxpa2VseV9leHRlbnNp
b24iKSk7DQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAtciA3NjNlNjJjNmM0MzMgdGVzdC9vcmcvb3Bl
bnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvVGV4dEFuYXpseXplclRlc3QuamF2YQ0KLS0tIC9k
ZXYvbnVsbAlUaHUgSmFuIDAxIDAwOjAwOjAwIDE5NzAgKzAwMDANCisrKyBiL3Rlc3Qvb3JnL29w
ZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL1RleHRBbmF6bHl6ZXJUZXN0LmphdmEJV2VkIE1h
ciAwMyAxNjo0MTowOCAyMDEwIC0wNTAwDQpAQCAtMCwwICsxLDEwMCBAQA0KK3BhY2thZ2Ugb3Jn
Lm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzOw0KKw0KK2ltcG9ydCBqYXZhLmlvLkJ1ZmZl
cmVkUmVhZGVyOw0KK2ltcG9ydCBqYXZhLmlvLkJ5dGVBcnJheUlucHV0U3RyZWFtOw0KK2ltcG9y
dCBqYXZhLmlvLklPRXhjZXB0aW9uOw0KK2ltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOw0KK2lt
cG9ydCBqYXZhLmlvLklucHV0U3RyZWFtUmVhZGVyOw0KK2ltcG9ydCBqYXZhLm5pby5CeXRlQnVm
ZmVyOw0KK2ltcG9ydCBqYXZhLm5pby5jaGFyc2V0LkNoYXJzZXQ7DQorDQoraW1wb3J0IGp1bml0
LmZyYW1ld29yay5Bc3NlcnQ7DQorDQoraW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50
LkRvY3VtZW50Ow0KK2ltcG9ydCBvcmcuanVuaXQuVGVzdDsNCisNCitwdWJsaWMgY2xhc3MgVGV4
dEFuYXpseXplclRlc3Qgew0KKwlwcml2YXRlIFN0cmluZyBkZWZhdWx0RW5jb2RpbmcgPSBuZXcg
SW5wdXRTdHJlYW1SZWFkZXIobmV3IEJ5dGVBcnJheUlucHV0U3RyZWFtKG5ldyBieXRlWzBdKSku
Z2V0RW5jb2RpbmcoKTsNCisJcHJpdmF0ZSBTdHJpbmcgZW5jb2Rpbmc7DQorCXByaXZhdGUgU3Ry
aW5nIGNvbnRlbnRzOw0KKwkNCisJQFRlc3QNCisJcHVibGljIHZvaWQgZGVmYXVsdEVuY29kaW5n
KCkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisJCW5ldyBUZXN0YWJsZVRleHRBbmFseXplcigpLmFu
YWx5emUobmV3IERvY3VtZW50KCksDQorCQkJCW5ldyBCeXRlQXJyYXlJbnB1dFN0cmVhbSgiaGVs
bG8iLmdldEJ5dGVzKCkpKTsNCisJCQ0KKwkJQXNzZXJ0LmFzc2VydEVxdWFscyhkZWZhdWx0RW5j
b2RpbmcsIGVuY29kaW5nKTsNCisJCQ0KKwkJQXNzZXJ0LmFzc2VydEVxdWFscygiaGVsbG8iLCBj
b250ZW50cyk7DQorCX0NCisJDQorCUBUZXN0DQorCXB1YmxpYyB2b2lkIHJlc2V0c1N0cmVhbU9u
U2hvcnRJbnB1dCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorCQluZXcgVGVzdGFibGVUZXh0QW5h
bHl6ZXIoKS5hbmFseXplKG5ldyBEb2N1bWVudCgpLA0KKwkJCQluZXcgQnl0ZUFycmF5SW5wdXRT
dHJlYW0oImhpIi5nZXRCeXRlcygpKSk7DQorCQkNCisJCUFzc2VydC5hc3NlcnRFcXVhbHMoZGVm
YXVsdEVuY29kaW5nLCBlbmNvZGluZyk7DQorCQkNCisJCUFzc2VydC5hc3NlcnRFcXVhbHMoImhp
IiwgY29udGVudHMpOw0KKwl9DQorCQ0KKwlAVGVzdA0KKwlwdWJsaWMgdm9pZCB1dGY4V2l0aEJP
TSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorCQlieXRlW10gYnVmZmVyID0gbmV3IGJ5dGVbXSB7
KGJ5dGUpIDIzOSwgKGJ5dGUpIDE4NywgKGJ5dGUpIDE5MSwgJ2gnLCAnZScsICdsJywgJ2wnLCAn
byd9Ow0KKwkJbmV3IFRlc3RhYmxlVGV4dEFuYWx5emVyKCkuYW5hbHl6ZShuZXcgRG9jdW1lbnQo
KSwNCisJCQkJbmV3IEJ5dGVBcnJheUlucHV0U3RyZWFtKGJ1ZmZlcikpOw0KKwkJDQorCQlBc3Nl
cnQuYXNzZXJ0RXF1YWxzKCJoZWxsbyIsIGNvbnRlbnRzKTsNCisJCUFzc2VydC5hc3NlcnRFcXVh
bHMoIlVURjgiLCBlbmNvZGluZyk7DQorCX0NCisJDQorCUBUZXN0DQorCXB1YmxpYyB2b2lkIHV0
ZjE2V2l0aEJPTSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorCQlmaW5hbCBCeXRlQnVmZmVyIHV0
ZjE2c3RyID0gQ2hhcnNldC5mb3JOYW1lKCJVVEYtMTYiKS5lbmNvZGUoImhlbGxvIik7DQorCQli
eXRlW10gYnl0ZXMgPSBuZXcgYnl0ZVt1dGYxNnN0ci5yZW1haW5pbmcoKV07DQorCQl1dGYxNnN0
ci5nZXQoYnl0ZXMsIDAsIGJ5dGVzLmxlbmd0aCk7DQorCQkNCisJCW5ldyBUZXN0YWJsZVRleHRB
bmFseXplcigpLmFuYWx5emUobmV3IERvY3VtZW50KCksDQorCQkJCW5ldyBCeXRlQXJyYXlJbnB1
dFN0cmVhbShieXRlcykpOw0KKwkJDQorCQlBc3NlcnQuYXNzZXJ0RXF1YWxzKCJVVEYtMTYiLCBl
bmNvZGluZyk7DQorCQkNCisJCUFzc2VydC5hc3NlcnRFcXVhbHMoImhlbGxvIiwgY29udGVudHMp
Ow0KKwl9DQorCQ0KKwlAVGVzdA0KKwlwdWJsaWMgdm9pZCB1dGYxNldpdGhCT01BbHRlcm5hdGUo
KSB0aHJvd3MgSU9FeGNlcHRpb24gew0KKwkJZmluYWwgQnl0ZUJ1ZmZlciB1dGYxNnN0ciA9IENo
YXJzZXQuZm9yTmFtZSgiVVRGLTE2IikuZW5jb2RlKCJoZWxsbyIpOw0KKwkJYnl0ZVtdIGJ5dGVz
ID0gbmV3IGJ5dGVbdXRmMTZzdHIucmVtYWluaW5nKCldOw0KKwkJdXRmMTZzdHIuZ2V0KGJ5dGVz
LCAwLCBieXRlcy5sZW5ndGgpOw0KKwkJDQorCQlmb3IgKGludCBpPTA7IGk8Ynl0ZXMubGVuZ3Ro
OyBpKz0yKSB7DQorCQkJYnl0ZSBiID0gYnl0ZXNbaV07DQorCQkJYnl0ZXNbaV0gPSBieXRlc1tp
KzFdOw0KKwkJCWJ5dGVzW2krMV0gPSBiOw0KKwkJfQ0KKwkJDQorCQluZXcgVGVzdGFibGVUZXh0
QW5hbHl6ZXIoKS5hbmFseXplKG5ldyBEb2N1bWVudCgpLA0KKwkJCQluZXcgQnl0ZUFycmF5SW5w
dXRTdHJlYW0oYnl0ZXMpKTsNCisJCQ0KKwkJQXNzZXJ0LmFzc2VydEVxdWFscygiVVRGLTE2Iiwg
ZW5jb2RpbmcpOw0KKwkJDQorCQlBc3NlcnQuYXNzZXJ0RXF1YWxzKCJoZWxsbyIsIGNvbnRlbnRz
KTsNCisJfQ0KKwkNCisJcHVibGljIGNsYXNzIFRlc3RhYmxlVGV4dEFuYWx5emVyIGV4dGVuZHMg
VGV4dEFuYWx5emVyIHsNCisJCXB1YmxpYyBUZXN0YWJsZVRleHRBbmFseXplcigpIHsNCisJCQlz
dXBlcihudWxsKTsNCisJCX0NCisJCQ0KKwkJQE92ZXJyaWRlDQorCQlwcm90ZWN0ZWQgdm9pZCBh
bmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW1SZWFkZXIgcikgdGhyb3dzIElPRXhjZXB0
aW9uIHsNCisJCQllbmNvZGluZyA9IHIuZ2V0RW5jb2RpbmcoKTsNCisNCisJCQljaGFyW10gYnVm
ID0gbmV3IGNoYXJbMTAyNF07DQorCQkJaW50IGJyID0gci5yZWFkKGJ1Zik7DQorCQkJDQorCQkJ
Y29udGVudHMgPSBuZXcgU3RyaW5nKGJ1ZiwgMCwgYnIpOw0KKwkJfQ0KKwl9DQorfQ0KDQpjaGFu
Z2VzZXQ6ICAgOTUzOjAzMzM3ZjU5NDdlNg0KdXNlcjogICAgICAgIENocmlzIEVsZHJlZGdlIDxj
ZWxkcmVkZ2VAZm9vbC5jb20+DQpkYXRlOiAgICAgICAgV2VkIE1hciAwMyAxNzowOTozMyAyMDEw
IC0wNTAwDQpzdW1tYXJ5OiAgICAgUmVtb3ZlIHN0dXBpZCBmaWxlLg0KDQpkaWZmIC1yIDc2M2U2
MmM2YzQzMyAtciAwMzMzN2Y1OTQ3ZTYgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFs
eXNpcy9BbmFseXplckd1cnUuamF2YS5vcmlnDQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29w
ZW5ncm9rL2FuYWx5c2lzL0FuYWx5emVyR3VydS5qYXZhLm9yaWcJV2VkIE1hciAwMyAxNjo0MTow
OCAyMDEwIC0wNTAwDQorKysgL2Rldi9udWxsCVRodSBKYW4gMDEgMDA6MDA6MDAgMTk3MCArMDAw
MA0KQEAgLTEsNTIyICswLDAgQEANCi0vKg0KLSAqIENEREwgSEVBREVSIFNUQVJUDQotICoNCi0g
KiBUaGUgY29udGVudHMgb2YgdGhpcyBmaWxlIGFyZSBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0
aGUNCi0gKiBDb21tb24gRGV2ZWxvcG1lbnQgYW5kIERpc3RyaWJ1dGlvbiBMaWNlbnNlICh0aGUg
IkxpY2Vuc2UiKS4NCi0gKiBZb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w
bGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQotICoNCi0gKiBTZWUgTElDRU5TRS50eHQgaW5jbHVk
ZWQgaW4gdGhpcyBkaXN0cmlidXRpb24gZm9yIHRoZSBzcGVjaWZpYw0KLSAqIGxhbmd1YWdlIGdv
dmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQot
ICoNCi0gKiBXaGVuIGRpc3RyaWJ1dGluZyBDb3ZlcmVkIENvZGUsIGluY2x1ZGUgdGhpcyBDRERM
IEhFQURFUiBpbiBlYWNoDQotICogZmlsZSBhbmQgaW5jbHVkZSB0aGUgTGljZW5zZSBmaWxlIGF0
IExJQ0VOU0UudHh0Lg0KLSAqIElmIGFwcGxpY2FibGUsIGFkZCB0aGUgZm9sbG93aW5nIGJlbG93
IHRoaXMgQ0RETCBIRUFERVIsIHdpdGggdGhlDQotICogZmllbGRzIGVuY2xvc2VkIGJ5IGJyYWNr
ZXRzICJbXSIgcmVwbGFjZWQgd2l0aCB5b3VyIG93biBpZGVudGlmeWluZw0KLSAqIGluZm9ybWF0
aW9uOiBQb3J0aW9ucyBDb3B5cmlnaHQgW3l5eXldIFtuYW1lIG9mIGNvcHlyaWdodCBvd25lcl0N
Ci0gKg0KLSAqIENEREwgSEVBREVSIEVORA0KLSAqLw0KLQ0KLS8qDQotICogQ29weXJpZ2h0IDIw
MDkgU3VuIE1pY3Jvc3lzdGVtcywgSW5jLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4NCi0gKiBVc2Ug
aXMgc3ViamVjdCB0byBsaWNlbnNlIHRlcm1zLg0KLSAqLw0KLXBhY2thZ2Ugb3JnLm9wZW5zb2xh
cmlzLm9wZW5ncm9rLmFuYWx5c2lzOw0KLQ0KLWltcG9ydCBqYXZhLmlvLkZpbGU7DQotaW1wb3J0
IGphdmEuaW8uSU9FeGNlcHRpb247DQotaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07DQotaW1w
b3J0IGphdmEuaW8uUmVhZGVyOw0KLWltcG9ydCBqYXZhLmlvLldyaXRlcjsNCi1pbXBvcnQgamF2
YS51dGlsLkFycmF5TGlzdDsNCi1pbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7DQotaW1wb3J0IGph
dmEudXRpbC5MaXN0Ow0KLWltcG9ydCBqYXZhLnV0aWwuTG9jYWxlOw0KLWltcG9ydCBqYXZhLnV0
aWwuTWFwOw0KLWltcG9ydCBqYXZhLnV0aWwuU29ydGVkTWFwOw0KLWltcG9ydCBqYXZhLnV0aWwu
VHJlZU1hcDsNCi1pbXBvcnQgamF2YS51dGlsLmxvZ2dpbmcuTGV2ZWw7DQotaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLmRvY3VtZW50LkRhdGVUb29sczsNCi1pbXBvcnQgb3JnLmFwYWNoZS5sdWNl
bmUuZG9jdW1lbnQuRG9jdW1lbnQ7DQotaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50
LkZpZWxkOw0KLWltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suT3Blbkdyb2tMb2dnZXI7
DQotaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5GaWxlQW5hbHl6ZXIu
R2VucmU7DQotaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5hcmNoaXZl
LkJaaXAyQW5hbHl6ZXJGYWN0b3J5Ow0KLWltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2su
YW5hbHlzaXMuYXJjaGl2ZS5HWklQQW5hbHl6ZXJGYWN0b3J5Ow0KLWltcG9ydCBvcmcub3BlbnNv
bGFyaXMub3Blbmdyb2suYW5hbHlzaXMuYXJjaGl2ZS5UYXJBbmFseXplckZhY3Rvcnk7DQotaW1w
b3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5hcmNoaXZlLlppcEFuYWx5emVy
RmFjdG9yeTsNCi1pbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmMuQ0Fu
YWx5emVyRmFjdG9yeTsNCi1pbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lz
LmMuQ3h4QW5hbHl6ZXJGYWN0b3J5Ow0KLWltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2su
YW5hbHlzaXMuZGF0YS5JZ25vcmFudEFuYWx5emVyRmFjdG9yeTsNCi1pbXBvcnQgb3JnLm9wZW5z
b2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmRhdGEuSW1hZ2VBbmFseXplckZhY3Rvcnk7DQotaW1w
b3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5kb2N1bWVudC5Ucm9mZkFuYWx5
emVyRmFjdG9yeTsNCi1pbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmV4
ZWN1dGFibGVzLkVMRkFuYWx5emVyRmFjdG9yeTsNCi1pbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9w
ZW5ncm9rLmFuYWx5c2lzLmV4ZWN1dGFibGVzLkphckFuYWx5emVyRmFjdG9yeTsNCi1pbXBvcnQg
b3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmV4ZWN1dGFibGVzLkphdmFDbGFzc0Fu
YWx5emVyRmFjdG9yeTsNCi1pbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lz
LmZvcnRyYW4uRm9ydHJhbkFuYWx5emVyRmFjdG9yeTsNCi1pbXBvcnQgb3JnLm9wZW5zb2xhcmlz
Lm9wZW5ncm9rLmFuYWx5c2lzLmphdmEuSmF2YUFuYWx5emVyRmFjdG9yeTsNCi1pbXBvcnQgb3Jn
Lm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLmxpc3AuTGlzcEFuYWx5emVyRmFjdG9yeTsN
Ci1pbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLnBsYWluLlBsYWluQW5h
bHl6ZXJGYWN0b3J5Ow0KLWltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMu
cGxhaW4uWE1MQW5hbHl6ZXJGYWN0b3J5Ow0KLWltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdy
b2suYW5hbHlzaXMuc2guU2hBbmFseXplckZhY3Rvcnk7DQotaW1wb3J0IG9yZy5vcGVuc29sYXJp
cy5vcGVuZ3Jvay5hbmFseXNpcy5zcWwuU1FMQW5hbHl6ZXJGYWN0b3J5Ow0KLWltcG9ydCBvcmcu
b3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMudGNsLlRjbEFuYWx5emVyRmFjdG9yeTsNCi1p
bXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmNvbmZpZ3VyYXRpb24uUHJvamVjdDsNCi1p
bXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuQW5ub3RhdGlvbjsNCi1pbXBv
cnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuSGlzdG9yeUV4Y2VwdGlvbjsNCi1p
bXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuSGlzdG9yeUd1cnU7DQotaW1w
b3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5Lkhpc3RvcnlSZWFkZXI7DQotaW1w
b3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay53ZWIuVXRpbDsNCi0NCi0vKioNCi0gKiBNYW5h
Z2VzIGFuZCBwb3J2aWRlcyBBbmFseXplcnMgYXMgbmVlZGVkLiBQbGVhc2Ugc2VlDQotICogPGEg
aHJlZj0iaHR0cDovL3d3dy5vcGVuc29sYXJpcy5vcmcvb3MvcHJvamVjdC9vcGVuZ3Jvay9tYW51
YWwvaW50ZXJuYWxzLyI+DQotICogdGhpczwvYT4gcGFnZSBmb3IgYSBncmVhdCBkZXNjcmlwdGlv
biBvZiB0aGUgcHVycG9zZSBvZiB0aGUgQW5hbHl6ZXJHdXJ1Lg0KLSAqDQotICogQ3JlYXRlZCBv
biBTZXB0ZW1iZXIgMjIsIDIwMDUNCi0gKiBAYXV0aG9yIENoYW5kYW4NCi0gKi8NCi1wdWJsaWMg
Y2xhc3MgQW5hbHl6ZXJHdXJ1IHsNCi0NCi0gICAgLyoqIFRoZSBkZWZhdWx0IHtAY29kZSBGaWxl
QW5hbHl6ZXJGYWN0b3J5fSBpbnN0YW5jZS4gKi8NCi0gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg
RmlsZUFuYWx5emVyRmFjdG9yeQ0KLSAgICAgICAgREVGQVVMVF9BTkFMWVpFUl9GQUNUT1JZID0g
bmV3IEZpbGVBbmFseXplckZhY3RvcnkoKTsNCi0NCi0gICAgLyoqIE1hcCBmcm9tIGZpbGUgbmFt
ZXMgdG8gYW5hbHl6ZXIgZmFjdG9yaWVzLiAqLw0KLSAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBN
YXA8U3RyaW5nLCBGaWxlQW5hbHl6ZXJGYWN0b3J5Pg0KLSAgICAgICAgRklMRV9OQU1FUyA9IG5l
dyBIYXNoTWFwPFN0cmluZywgRmlsZUFuYWx5emVyRmFjdG9yeT4oKTsNCi0NCi0gICAgLyoqIE1h
cCBmcm9tIGZpbGUgZXh0ZW5zaW9ucyB0byBhbmFseXplciBmYWN0b3JpZXMuICovDQotICAgIHBy
aXZhdGUgc3RhdGljIGZpbmFsIE1hcDxTdHJpbmcsIEZpbGVBbmFseXplckZhY3Rvcnk+DQotICAg
ICAgICBleHQgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIEZpbGVBbmFseXplckZhY3Rvcnk+KCk7DQot
DQotICAgIC8vIEBUT0RPOiBoYXZlIGEgY29tcGFyYXRvcg0KLSAgICAvKiogTWFwIGZyb20gbWFn
aWMgc3RyaW5ncyB0byBhbmFseXplciBmYWN0b3JpZXMuICovDQotICAgIHByaXZhdGUgc3RhdGlj
IGZpbmFsIFNvcnRlZE1hcDxTdHJpbmcsIEZpbGVBbmFseXplckZhY3Rvcnk+DQotICAgICAgICBt
YWdpY3MgPSBuZXcgVHJlZU1hcDxTdHJpbmcsIEZpbGVBbmFseXplckZhY3Rvcnk+KCk7DQotDQot
ICAgIC8qKg0KLSAgICAgKiBMaXN0IG9mIG1hdGNoZXIgb2JqZWN0cyB3aGljaCBjYW4gYmUgdXNl
ZCB0byBkZXRlcm1pbmUgd2hpY2ggYW5hbHl6ZXINCi0gICAgICogZmFjdG9yeSB0byB1c2UuDQot
ICAgICAqLw0KLSAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMaXN0PEZpbGVBbmFseXplckZhY3Rv
cnkuTWF0Y2hlcj4NCi0gICAgICAgIG1hdGNoZXJzID0gbmV3IEFycmF5TGlzdDxGaWxlQW5hbHl6
ZXJGYWN0b3J5Lk1hdGNoZXI+KCk7DQotDQotICAgIC8qKiBMaXN0IG9mIGFsbCByZWdpc3RlcmVk
IHtAY29kZSBGaWxlQW5hbHl6ZXJGYWN0b3J5fSBpbnN0YW5jZXMuICovDQotICAgIHByaXZhdGUg
c3RhdGljIGZpbmFsIExpc3Q8RmlsZUFuYWx5emVyRmFjdG9yeT4NCi0gICAgICAgIGZhY3Rvcmll
cyA9IG5ldyBBcnJheUxpc3Q8RmlsZUFuYWx5emVyRmFjdG9yeT4oKTsNCi0NCi0gICAgLyoNCi0g
ICAgICogSWYgeW91IHdyaXRlIHlvdXIgb3duIGFuYWx5emVyIHBsZWFzZSByZWdpc3RlciBpdCBo
ZXJlDQotICAgICAqLw0KLSAgICBzdGF0aWMgew0KLSAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9y
eVtdIGFuYWx5emVycyA9IHsNCi0gICAgICAgICAgICBERUZBVUxUX0FOQUxZWkVSX0ZBQ1RPUlks
DQotICAgICAgICAgICAgbmV3IElnbm9yYW50QW5hbHl6ZXJGYWN0b3J5KCksDQotICAgICAgICAg
ICAgbmV3IEJaaXAyQW5hbHl6ZXJGYWN0b3J5KCksDQotICAgICAgICAgICAgbmV3IFhNTEFuYWx5
emVyRmFjdG9yeSgpLA0KLSAgICAgICAgICAgIG5ldyBUcm9mZkFuYWx5emVyRmFjdG9yeSgpLA0K
LSAgICAgICAgICAgIG5ldyBFTEZBbmFseXplckZhY3RvcnkoKSwNCi0gICAgICAgICAgICBuZXcg
SmF2YUNsYXNzQW5hbHl6ZXJGYWN0b3J5KCksDQotICAgICAgICAgICAgbmV3IEltYWdlQW5hbHl6
ZXJGYWN0b3J5KCksDQotICAgICAgICAgICAgSmFyQW5hbHl6ZXJGYWN0b3J5LkRFRkFVTFRfSU5T
VEFOQ0UsDQotICAgICAgICAgICAgWmlwQW5hbHl6ZXJGYWN0b3J5LkRFRkFVTFRfSU5TVEFOQ0Us
DQotICAgICAgICAgICAgbmV3IFRhckFuYWx5emVyRmFjdG9yeSgpLA0KLSAgICAgICAgICAgIG5l
dyBDQW5hbHl6ZXJGYWN0b3J5KCksDQotICAgICAgICAgICAgbmV3IEN4eEFuYWx5emVyRmFjdG9y
eSgpLA0KLSAgICAgICAgICAgIG5ldyBTaEFuYWx5emVyRmFjdG9yeSgpLA0KLSAgICAgICAgICAg
IFBsYWluQW5hbHl6ZXJGYWN0b3J5LkRFRkFVTFRfSU5TVEFOQ0UsDQotICAgICAgICAgICAgbmV3
IEdaSVBBbmFseXplckZhY3RvcnkoKSwNCi0gICAgICAgICAgICBuZXcgSmF2YUFuYWx5emVyRmFj
dG9yeSgpLA0KLSAgICAgICAgICAgIG5ldyBMaXNwQW5hbHl6ZXJGYWN0b3J5KCksDQotICAgICAg
ICAgICAgbmV3IFRjbEFuYWx5emVyRmFjdG9yeSgpLA0KLSAgICAgICAgICAgIG5ldyBTUUxBbmFs
eXplckZhY3RvcnkoKSwNCi0gICAgICAgICAgICBuZXcgRm9ydHJhbkFuYWx5emVyRmFjdG9yeSgp
DQotICAgICAgICB9Ow0KLQ0KLSAgICAgICAgZm9yIChGaWxlQW5hbHl6ZXJGYWN0b3J5IGFuYWx5
emVyIDogYW5hbHl6ZXJzKSB7DQotICAgICAgICAgICAgcmVnaXN0ZXJBbmFseXplcihhbmFseXpl
cik7DQotICAgICAgICB9DQotICAgIH0NCi0NCi0gICAgLyoqDQotICAgICAqIFJlZ2lzdGVyIGEg
e0Bjb2RlIEZpbGVBbmFseXplckZhY3Rvcnl9IGluc3RhbmNlLg0KLSAgICAgKi8NCi0gICAgcHJp
dmF0ZSBzdGF0aWMgdm9pZCByZWdpc3RlckFuYWx5emVyKEZpbGVBbmFseXplckZhY3RvcnkgZmFj
dG9yeSkgew0KLSAgICAgICAgZm9yIChTdHJpbmcgbmFtZSA6IGZhY3RvcnkuZ2V0RmlsZU5hbWVz
KCkpIHsNCi0gICAgICAgICAgICBGaWxlQW5hbHl6ZXJGYWN0b3J5IG9sZCA9IEZJTEVfTkFNRVMu
cHV0KG5hbWUsIGZhY3RvcnkpOw0KLSAgICAgICAgICAgIGFzc2VydCBvbGQgPT0gbnVsbCA6DQot
ICAgICAgICAgICAgICAgICJuYW1lICciICsgbmFtZSArICInIHVzZWQgaW4gbXVsdGlwbGUgYW5h
bHl6ZXJzIjsNCi0gICAgICAgIH0NCi0gICAgICAgIGZvciAoU3RyaW5nIHN1ZmZpeCA6IGZhY3Rv
cnkuZ2V0U3VmZml4ZXMoKSkgew0KLSAgICAgICAgICAgIEZpbGVBbmFseXplckZhY3Rvcnkgb2xk
ID0gZXh0LnB1dChzdWZmaXgsIGZhY3RvcnkpOw0KLSAgICAgICAgICAgIGFzc2VydCBvbGQgPT0g
bnVsbCA6DQotICAgICAgICAgICAgInN1ZmZpeCAnIiArIHN1ZmZpeCArICInIHVzZWQgaW4gbXVs
dGlwbGUgYW5hbHl6ZXJzIjsNCi0gICAgICAgIH0NCi0gICAgICAgIGZvciAoU3RyaW5nIG1hZ2lj
IDogZmFjdG9yeS5nZXRNYWdpY1N0cmluZ3MoKSkgew0KLSAgICAgICAgICAgIEZpbGVBbmFseXpl
ckZhY3Rvcnkgb2xkID0gbWFnaWNzLnB1dChtYWdpYywgZmFjdG9yeSk7DQotICAgICAgICAgICAg
YXNzZXJ0IG9sZCA9PSBudWxsIDoNCi0gICAgICAgICAgICAgICAgIm1hZ2ljICciICsgbWFnaWMg
KyAiJyB1c2VkIGluIG11bHRpcGxlIGFuYWx5emVycyI7DQotICAgICAgICB9DQotICAgICAgICBt
YXRjaGVycy5hZGRBbGwoZmFjdG9yeS5nZXRNYXRjaGVycygpKTsNCi0gICAgICAgIGZhY3Rvcmll
cy5hZGQoZmFjdG9yeSk7DQotICAgIH0NCi0NCi0gICAgLyoqDQotICAgICAqICBJbnN0cnVjdCB0
aGUgQW5hbHl6ZXJHdXJ1IHRvIHVzZSBhIGdpdmVuIGFuYWx5emVyIGZvciBhIGdpdmVuDQotICAg
ICAqICBmaWxlIGV4dGVuc2lvbi4NCi0gICAgICogIEBwYXJhbSBleHRlbnNpb24gdGhlIGZpbGUt
ZXh0ZW5zaW9uIHRvIGFkZA0KLSAgICAgKiAgQHBhcmFtIGZhY3RvcnkgICBhIGZhY3Rvcnkgd2hp
Y2ggY3JlYXRlcw0KLSAgICAgKiAgICAgICAgICAgICAgICAgICB0aGUgYW5hbHl6ZXIgdG8gdXNl
IGZvciB0aGUgZ2l2ZW4gZXh0ZW5zaW9uDQotICAgICAqICAgICAgICAgICAgICAgICAgKGlmIHlv
dSBwYXNzIG51bGwgYXMgdGhlIGFuYWx5emVyLCB5b3Ugd2lsbCBkaXNhYmxlDQotICAgICAqICAg
ICAgICAgICAgICAgICAgIHRoZSBhbmFseXplciB1c2VkIGZvciB0aGF0IGV4dGVuc2lvbikNCi0g
ICAgICovDQotICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBhZGRFeHRlbnNpb24oU3RyaW5nIGV4dGVu
c2lvbiwNCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWxlQW5hbHl6ZXJG
YWN0b3J5IGZhY3RvcnkpIHsNCi0gICAgICAgIGlmIChmYWN0b3J5ID09IG51bGwpIHsNCi0gICAg
ICAgICAgICBleHQucmVtb3ZlKGV4dGVuc2lvbik7DQotICAgICAgICB9IGVsc2Ugew0KLSAgICAg
ICAgICAgIGV4dC5wdXQoZXh0ZW5zaW9uLCBmYWN0b3J5KTsNCi0gICAgICAgIH0NCi0gICAgfQ0K
LQ0KLSAgICAvKioNCi0gICAgICogR2V0IHRoZSBkZWZhdWx0IEFuYWx5emVyLg0KLSAgICAgKi8N
Ci0gICAgcHVibGljIHN0YXRpYyBGaWxlQW5hbHl6ZXIgZ2V0QW5hbHl6ZXIoKSB7DQotICAgICAg
ICByZXR1cm4gREVGQVVMVF9BTkFMWVpFUl9GQUNUT1JZLmdldEFuYWx5emVyKCk7DQotICAgIH0N
Ci0NCi0gICAgLyoqDQotICAgICAqIEdldCBhbiBhbmFseXplciBzdWl0ZWQgdG8gYW5hbHl6ZSBh
IGZpbGUuIFRoaXMgZnVuY3Rpb24gd2lsbCByZXVzZQ0KLSAgICAgKiBhbmFseXplcnMgc2luY2Ug
dGhleSBhcmUgY29zdGx5Lg0KLSAgICAgKiANCi0gICAgICogQHBhcmFtIGluIElucHV0IHN0cmVh
bSBjb250YWluaW5nIGRhdGEgdG8gYmUgYW5hbHl6ZWQNCi0gICAgICogQHBhcmFtIGZpbGUgTmFt
ZSBvZiB0aGUgZmlsZSB0byBiZSBhbmFseXplZA0KLSAgICAgKiBAcmV0dXJuIEFuIGFuYWx5emVy
IHN1aXRlZCBmb3IgdGhhdCBmaWxlIGNvbnRlbnQNCi0gICAgICogQHRocm93cyBqYXZhLmlvLklP
RXhjZXB0aW9uIElmIGFuIGVycm9yIG9jY3VycyB3aGlsZSBhY2Nlc3NpbmcgdGhlDQotICAgICAq
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhIGluIHRoZSBpbnB1dCBzdHJlYW0uDQot
ICAgICAqLw0KLSAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFseXplciBnZXRBbmFseXplcihJbnB1
dFN0cmVhbSBpbiwgU3RyaW5nIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQotICAgICAgICBG
aWxlQW5hbHl6ZXJGYWN0b3J5IGZhY3RvcnkgPSBmaW5kKGluLCBmaWxlKTsNCi0gICAgICAgIGlm
IChmYWN0b3J5ID09IG51bGwpIHsNCi0gICAgICAgICAgICByZXR1cm4gZ2V0QW5hbHl6ZXIoKTsN
Ci0gICAgICAgIH0NCi0gICAgICAgIHJldHVybiBmYWN0b3J5LmdldEFuYWx5emVyKCk7DQotICAg
IH0NCi0NCi0gICAgLyoqDQotICAgICAqIENyZWF0ZSBhIEx1Y2VuZSBkb2N1bWVudCBhbmQgZmls
bCBpbiB0aGUgcmVxdWlyZWQgZmllbGRzDQotICAgICAqIEBwYXJhbSBmaWxlIFRoZSBmaWxlIHRv
IGluZGV4DQotICAgICAqIEBwYXJhbSBpbiBUaGUgZGF0YSB0byBnZW5lcmF0ZSB0aGUgaW5kZXgg
Zm9yDQotICAgICAqIEBwYXJhbSBwYXRoIFdoZXJlIHRoZSBmaWxlIGlzIGxvY2F0ZWQgKGZyb20g
c291cmNlIHJvb3QpDQotICAgICAqIEByZXR1cm4gVGhlIEx1Y2VuZSBkb2N1bWVudCB0byBhZGQg
dG8gdGhlIGluZGV4IGRhdGFiYXNlDQotICAgICAqIEB0aHJvd3MgamF2YS5pby5JT0V4Y2VwdGlv
biBJZiBhbiBleGNlcHRpb24gb2NjdXJzIHdoaWxlIGNvbGxlY3RpbmcgdGhlDQotICAgICAqICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhcw0KLSAgICAgKi8NCi0gICAgcHVibGljIERv
Y3VtZW50IGdldERvY3VtZW50KEZpbGUgZmlsZSwgSW5wdXRTdHJlYW0gaW4sIFN0cmluZyBwYXRo
LA0KLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmlsZUFuYWx5emVyIGZhKSB0aHJv
d3MgSU9FeGNlcHRpb24gew0KLSAgICAgICAgRG9jdW1lbnQgZG9jID0gbmV3IERvY3VtZW50KCk7
DQotICAgICAgICBTdHJpbmcgZGF0ZSA9IERhdGVUb29scy50aW1lVG9TdHJpbmcoZmlsZS5sYXN0
TW9kaWZpZWQoKSwgRGF0ZVRvb2xzLlJlc29sdXRpb24uTUlMTElTRUNPTkQpOw0KLSAgICAgICAg
ZG9jLmFkZChuZXcgRmllbGQoInUiLCBVdGlsLnVpZChwYXRoLCBkYXRlKSwgRmllbGQuU3RvcmUu
WUVTLCBGaWVsZC5JbmRleC5OT1RfQU5BTFlaRUQpKTsNCi0gICAgICAgIGRvYy5hZGQobmV3IEZp
ZWxkKCJmdWxscGF0aCIsIGZpbGUuZ2V0QWJzb2x1dGVQYXRoKCksIEZpZWxkLlN0b3JlLk5PLCBG
aWVsZC5JbmRleC5OT1RfQU5BTFlaRUQpKTsNCi0NCi0gICAgICAgIHRyeSB7DQotICAgICAgICAg
ICAgSGlzdG9yeVJlYWRlciBociA9IEhpc3RvcnlHdXJ1LmdldEluc3RhbmNlKCkuZ2V0SGlzdG9y
eVJlYWRlcihmaWxlKTsNCi0gICAgICAgICAgICBpZiAoaHIgIT0gbnVsbCkgew0KLSAgICAgICAg
ICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgiaGlzdCIsIGhyKSk7DQotICAgICAgICAgICAgICAg
IC8vIGRhdGUgPSBoci5nZXRMYXN0Q29tbWVudERhdGUoKSAvL1JGRQ0KLSAgICAgICAgICAgIH0N
Ci0gICAgICAgIH0gY2F0Y2ggKEhpc3RvcnlFeGNlcHRpb24gZSkgew0KLSAgICAgICAgICAgIE9w
ZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAiQW4gZXJyb3Igb2Nj
dXJyZWQgd2hpbGUgcmVhZGluZyBoaXN0b3J5OiAiLCBlKTsNCi0gICAgICAgIH0NCi0gICAgICAg
IGRvYy5hZGQobmV3IEZpZWxkKCJkYXRlIiwgZGF0ZSwgRmllbGQuU3RvcmUuWUVTLCBGaWVsZC5J
bmRleC5OT1RfQU5BTFlaRUQpKTsNCi0gICAgICAgIGlmIChwYXRoICE9IG51bGwpIHsNCi0gICAg
ICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicGF0aCIsIHBhdGgsIEZpZWxkLlN0b3JlLllFUywg
RmllbGQuSW5kZXguQU5BTFlaRUQpKTsNCi0gICAgICAgICAgICBQcm9qZWN0IHByb2plY3QgPSBQ
cm9qZWN0LmdldFByb2plY3QocGF0aCk7DQotICAgICAgICAgICAgaWYgKHByb2plY3QgIT0gbnVs
bCkgew0KLSAgICAgICAgICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicHJvamVjdCIsIHByb2pl
Y3QuZ2V0UGF0aCgpLCBGaWVsZC5TdG9yZS5ZRVMsIEZpZWxkLkluZGV4LkFOQUxZWkVEKSk7DQot
ICAgICAgICAgICAgfQ0KLSAgICAgICAgfQ0KLQ0KLSAgICAgICAgaWYgKGZhICE9IG51bGwpIHsN
Ci0gICAgICAgICAgICBHZW5yZSBnID0gZmEuZ2V0R2VucmUoKTsNCi0gICAgICAgICAgICBpZiAo
ZyA9PSBHZW5yZS5QTEFJTikgew0KLSAgICAgICAgICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgi
dCIsICJwIiwgRmllbGQuU3RvcmUuWUVTLCBGaWVsZC5JbmRleC5OT1RfQU5BTFlaRUQpKTsNCi0g
ICAgICAgICAgICB9IGVsc2UgaWYgKGcgPT0gR2VucmUuWFJFRkFCTEUpIHsNCi0gICAgICAgICAg
ICAgICAgZG9jLmFkZChuZXcgRmllbGQoInQiLCAieCIsIEZpZWxkLlN0b3JlLllFUywgRmllbGQu
SW5kZXguTk9UX0FOQUxZWkVEKSk7DQotICAgICAgICAgICAgfSBlbHNlIGlmIChnID09IEdlbnJl
LkhUTUwpIHsNCi0gICAgICAgICAgICAgICAgZG9jLmFkZChuZXcgRmllbGQoInQiLCAiaCIsIEZp
ZWxkLlN0b3JlLllFUywgRmllbGQuSW5kZXguTk9UX0FOQUxZWkVEKSk7DQotICAgICAgICAgICAg
fQ0KLSAgICAgICAgICAgIGZhLmFuYWx5emUoZG9jLCBpbik7DQotICAgICAgICB9DQotDQotICAg
ICAgICByZXR1cm4gZG9jOw0KLSAgICB9DQotDQotICAgIC8qKg0KLSAgICAgKiBHZXQgdGhlIGNv
bnRlbnQgdHlwZSBmb3IgYSBuYW1lZCBmaWxlLg0KLSAgICAgKg0KLSAgICAgKiBAcGFyYW0gaW4g
VGhlIGlucHV0IHN0cmVhbSB3ZSB3YW50IHRvIGdldCB0aGUgY29udGVudCB0eXBlIGZvciAoaWYN
Ci0gICAgICogICAgICAgICAgIHdlIGNhbm5vdCBkZXRlcm1pbmUgdGhlIGNvbnRlbnQgdHlwZSBi
eSB0aGUgZmlsZW5hbWUpDQotICAgICAqIEBwYXJhbSBmaWxlIFRoZSBuYW1lIG9mIHRoZSBmaWxl
DQotICAgICAqIEByZXR1cm4gVGhlIGNvbnRlbnRUeXBlIHN1aXRhYmxlIGZvciBwcmludGluZyB0
byByZXNwb25zZS5zZXRDb250ZW50VHlwZSgpIG9yIG51bGwNCi0gICAgICogICAgICAgICBpZiB0
aGUgZmFjdG9yeSB3YXMgbm90IGZvdW5kDQotICAgICAqIEB0aHJvd3MgamF2YS5pby5JT0V4Y2Vw
dGlvbiBJZiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgYWNjZXNzaW5nIHRoZSBpbnB1dA0KLSAgICAg
KiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLg0KLSAgICAgKi8NCi0gICAgcHVi
bGljIHN0YXRpYyBTdHJpbmcgZ2V0Q29udGVudFR5cGUoSW5wdXRTdHJlYW0gaW4sIFN0cmluZyBm
aWxlKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KLSAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBm
YWN0b3J5ID0gZmluZChpbiwgZmlsZSk7DQotICAgICAgICBTdHJpbmcgdHlwZSA9IG51bGw7DQot
ICAgICAgICBpZiAoZmFjdG9yeSAhPSBudWxsKSB7DQotICAgICAgICAgICAgdHlwZSA9IGZhY3Rv
cnkuZ2V0Q29udGVudFR5cGUoKTsNCi0gICAgICAgIH0NCi0gICAgICAgIHJldHVybiB0eXBlOw0K
LSAgICB9DQotDQotICAgIC8qKg0KLSAgICAgKiBXcml0ZSBhIGJyb3dzYWJsZSB2ZXJzaW9uIG9m
IHRoZSBmaWxlDQotICAgICAqDQotICAgICAqIEBwYXJhbSBmYWN0b3J5IFRoZSBhbmFseXplciBm
YWN0b3J5IGZvciB0aGlzIGZpbGV0eXBlDQotICAgICAqIEBwYXJhbSBpbiBUaGUgaW5wdXQgc3Ry
ZWFtIGNvbnRhaW5pbmcgdGhlIGRhdGENCi0gICAgICogQHBhcmFtIG91dCBXaGVyZSB0byB3cml0
ZSB0aGUgcmVzdWx0DQotICAgICAqIEBwYXJhbSBhbm5vdGF0aW9uIEFubm90YXRpb24gaW5mb3Jt
YXRpb24gZm9yIHRoZSBmaWxlDQotICAgICAqIEBwYXJhbSBwcm9qZWN0IFByb2plY3QgdGhlIGZp
bGUgYmVsb25ncyB0bw0KLSAgICAgKiBAdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24gSWYgYW4g
ZXJyb3Igb2NjdXJzIHdoaWxlIGNyZWF0aW5nIHRoZQ0KLSAgICAgKiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgb3V0cHV0DQotICAgICAqLw0KLSAgICBwdWJsaWMgc3RhdGljIHZvaWQgd3Jp
dGVYcmVmKEZpbGVBbmFseXplckZhY3RvcnkgZmFjdG9yeSwgUmVhZGVyIGluLA0KLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlciBvdXQsIEFubm90YXRpb24gYW5ub3RhdGlv
biwgUHJvamVjdCBwcm9qZWN0KQ0KLSAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uDQotICAgIHsN
Ci0gICAgICAgIFJlYWRlciBpbnB1dCA9IGluOw0KLSAgICAgICAgaWYgKGZhY3RvcnkuZ2V0R2Vu
cmUoKSA9PSBHZW5yZS5QTEFJTikgew0KLSAgICAgICAgICAgIC8vIFRoaXMgaXMgc29tZSBraW5k
IG9mIHRleHQgZmlsZSwgc28gd2UgbmVlZCB0byBleHBhbmQgdGFicyB0bw0KLSAgICAgICAgICAg
IC8vIHNwYWNlcyB0byBtYXRjaCB0aGUgcHJvamVjdCdzIHRhYiBzZXR0aW5ncy4NCi0gICAgICAg
ICAgICBpbnB1dCA9IEV4cGFuZFRhYnNSZWFkZXIud3JhcChpbiwgcHJvamVjdCk7DQotICAgICAg
ICB9DQotICAgICAgICBmYWN0b3J5LndyaXRlWHJlZihpbnB1dCwgb3V0LCBhbm5vdGF0aW9uLCBw
cm9qZWN0KTsNCi0gICAgfQ0KLQ0KLSAgICAvKioNCi0gICAgICogR2V0IHRoZSBnZW5yZSBvZiBh
IGZpbGUNCi0gICAgICoNCi0gICAgICogQHBhcmFtIGZpbGUgVGhlIGZpbGUgdG8gaW5wZWN0DQot
ICAgICAqIEByZXR1cm4gVGhlIGdlbnJlIHN1aXRhYmxlIHRvIGRlY2lkZSBob3cgdG8gZGlzcGxh
eSB0aGUgZmlsZQ0KLSAgICAgKi8NCi0gICAgcHVibGljIHN0YXRpYyBHZW5yZSBnZXRHZW5yZShT
dHJpbmcgZmlsZSkgew0KLSAgICAgICAgcmV0dXJuIGdldEdlbnJlKGZpbmQoZmlsZSkpOw0KLSAg
ICB9DQotDQotICAgIC8qKg0KLSAgICAgKiBHZXQgdGhlIGdlbnJlIG9mIGEgYnVsayBvZiBkYXRh
DQotICAgICAqDQotICAgICAqIEBwYXJhbSBpbiBBIHN0cmVhbSBjb250YWluaW5nIHRoZSBkYXRh
DQotICAgICAqIEByZXR1cm4gVGhlIGdlbnJlIHN1aXRhYmxlIHRvIGRlY2lkZSBob3cgdG8gZGlz
cGxheSB0aGUgZmlsZQ0KLSAgICAgKiBAdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24gSWYgYW4g
ZXJyb3Igb2NjdXJzIHdoaWxlIGdldHRpbmcgdGhlIGNvbnRlbnQNCi0gICAgICovDQotICAgIHB1
YmxpYyBzdGF0aWMgR2VucmUgZ2V0R2VucmUoSW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2Vw
dGlvbiB7DQotICAgICAgICByZXR1cm4gZ2V0R2VucmUoZmluZChpbikpOw0KLSAgICB9DQotDQot
ICAgIC8qKg0KLSAgICAgKiBHZXQgdGhlIGdlbnJlIGZvciBhIG5hbWVkIGNsYXNzICh0aGlzIGlz
IG1vc3QgbGlrZWx5IGFuIGFuYWx5emVyKQ0KLSAgICAgKiBAcGFyYW0gZmFjdG9yeSB0aGUgYW5h
bHl6ZXIgZmFjdG9yeSB0byBnZXQgdGhlIGdlbnJlIGZvcg0KLSAgICAgKiBAcmV0dXJuIFRoZSBn
ZW5yZSBvZiB0aGlzIGNsYXNzIChudWxsIGlmIG5vdCBmb3VuZCkNCi0gICAgICovDQotICAgIHB1
YmxpYyBzdGF0aWMgR2VucmUgZ2V0R2VucmUoRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5KSB7
DQotICAgICAgICBpZiAoZmFjdG9yeSAhPSBudWxsKSB7DQotICAgICAgICAgICAgcmV0dXJuIGZh
Y3RvcnkuZ2V0R2VucmUoKTsNCi0gICAgICAgIH0NCi0gICAgICAgIHJldHVybiBudWxsOw0KLSAg
ICB9DQotDQotICAgIC8qKg0KLSAgICAgKiBGaW5kIGEge0Bjb2RlIEZpbGVBbmFseXplckZhY3Rv
cnl9IHdpdGggdGhlIHNwZWNpZmllZCBjbGFzcyBuYW1lLiBJZiBvbmUNCi0gICAgICogZG9lc24n
dCBleGlzdCwgY3JlYXRlIG9uZSBhbmQgcmVnaXN0ZXIgaXQuDQotICAgICAqDQotICAgICAqIEBw
YXJhbSBmYWN0b3J5Q2xhc3NOYW1lIG5hbWUgb2YgdGhlIGZhY3RvcnkgY2xhc3MNCi0gICAgICog
QHJldHVybiBhIGZpbGUgYW5hbHl6ZXIgZmFjdG9yeQ0KLSAgICAgKg0KLSAgICAgKiBAdGhyb3dz
IENsYXNzTm90Rm91bmRFeGNlcHRpb24gaWYgdGhlcmUgaXMgbm8gY2xhc3Mgd2l0aCB0aGF0IG5h
bWUNCi0gICAgICogQHRocm93cyBDbGFzc0Nhc3RFeGNlcHRpb24gaWYgdGhlIGNsYXNzIGlzIG5v
dCBhIHN1YmNsYXNzIG9mIHtAY29kZQ0KLSAgICAgKiBGaWxlQW5hbHl6ZXJGYWN0b3J5fQ0KLSAg
ICAgKiBAdGhyb3dzIElsbGVnYWxBY2Nlc3NFeGNlcHRpb24gaWYgdGhlIGNvbnN0cnVjdG9yIGNh
bm5vdCBiZSBhY2Nlc3NlZA0KLSAgICAgKiBAdGhyb3dzIEluc3RhbnRpYXRpb25FeGNlcHRpb24g
aWYgdGhlIGNsYXNzIGNhbm5vdCBiZSBpbnN0YW50aWF0ZWQNCi0gICAgICovDQotICAgIHB1Ymxp
YyBzdGF0aWMgRmlsZUFuYWx5emVyRmFjdG9yeSBmaW5kRmFjdG9yeShTdHJpbmcgZmFjdG9yeUNs
YXNzTmFtZSkNCi0gICAgICAgIHRocm93cyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uLCBJbGxlZ2Fs
QWNjZXNzRXhjZXB0aW9uLA0KLSAgICAgICAgICAgICAgIEluc3RhbnRpYXRpb25FeGNlcHRpb24N
Ci0gICAgew0KLSAgICAgICAgcmV0dXJuIGZpbmRGYWN0b3J5KENsYXNzLmZvck5hbWUoZmFjdG9y
eUNsYXNzTmFtZSkpOw0KLSAgICB9DQotDQotICAgIC8qKg0KLSAgICAgKiBGaW5kIGEge0Bjb2Rl
IEZpbGVBbmFseXplckZhY3Rvcnl9IHdoaWNoIGlzIGFuIGluc3RhbmNlIG9mIHRoZSBzcGVjaWZp
ZWQNCi0gICAgICogY2xhc3MuIElmIG9uZSBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgb25lIGFuZCBy
ZWdpc3RlciBpdC4NCi0gICAgICoNCi0gICAgICogQHBhcmFtIGZhY3RvcnlDbGFzcyB0aGUgZmFj
dG9yeSBjbGFzcw0KLSAgICAgKiBAcmV0dXJuIGEgZmlsZSBhbmFseXplciBmYWN0b3J5DQotICAg
ICAqDQotICAgICAqIEB0aHJvd3MgQ2xhc3NDYXN0RXhjZXB0aW9uIGlmIHRoZSBjbGFzcyBpcyBu
b3QgYSBzdWJjbGFzcyBvZiB7QGNvZGUNCi0gICAgICogRmlsZUFuYWx5emVyRmFjdG9yeX0NCi0g
ICAgICogQHRocm93cyBJbGxlZ2FsQWNjZXNzRXhjZXB0aW9uIGlmIHRoZSBjb25zdHJ1Y3RvciBj
YW5ub3QgYmUgYWNjZXNzZWQNCi0gICAgICogQHRocm93cyBJbnN0YW50aWF0aW9uRXhjZXB0aW9u
IGlmIHRoZSBjbGFzcyBjYW5ub3QgYmUgaW5zdGFudGlhdGVkDQotICAgICAqLw0KLSAgICBwcml2
YXRlIHN0YXRpYyBGaWxlQW5hbHl6ZXJGYWN0b3J5IGZpbmRGYWN0b3J5KENsYXNzIGZhY3RvcnlD
bGFzcykNCi0gICAgICAgIHRocm93cyBJbnN0YW50aWF0aW9uRXhjZXB0aW9uLCBJbGxlZ2FsQWNj
ZXNzRXhjZXB0aW9uDQotICAgIHsNCi0gICAgICAgIGZvciAoRmlsZUFuYWx5emVyRmFjdG9yeSBm
IDogZmFjdG9yaWVzKSB7DQotICAgICAgICAgICAgaWYgKGYuZ2V0Q2xhc3MoKSA9PSBmYWN0b3J5
Q2xhc3MpIHsNCi0gICAgICAgICAgICAgICAgcmV0dXJuIGY7DQotICAgICAgICAgICAgfQ0KLSAg
ICAgICAgfQ0KLSAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmID0NCi0gICAgICAgICAgICAo
RmlsZUFuYWx5emVyRmFjdG9yeSkgZmFjdG9yeUNsYXNzLm5ld0luc3RhbmNlKCk7DQotICAgICAg
ICByZWdpc3RlckFuYWx5emVyKGYpOw0KLSAgICAgICAgcmV0dXJuIGY7DQotICAgIH0NCi0NCi0g
ICAgLyoqDQotICAgICAqIEZpbmRzIGEgc3VpdGFibGUgYW5hbHlzZXIgY2xhc3MgZm9yIGZpbGUg
bmFtZS4gSWYgdGhlIGFuYWx5emVyIGNhbm5vdA0KLSAgICAgKiBiZSBkZXRlcm1pbmVkIGJ5IHRo
ZSBmaWxlIGV4dGVuc2lvbiwgdHJ5IHRvIGxvb2sgYXQgdGhlIGRhdGEgaW4gdGhlDQotICAgICAq
IElucHV0U3RyZWFtIHRvIGZpbmQgYSBzdWl0YWJsZSBhbmFseXplci4NCi0gICAgICoNCi0gICAg
ICogVXNlIGlmIHlvdSBqdXN0IHdhbnQgdG8gZmluZCBmaWxlIHR5cGUuDQotICAgICAqDQotICAg
ICAqDQotICAgICAqIEBwYXJhbSBpbiBUaGUgaW5wdXQgc3RyZWFtIGNvbnRhaW5pbmcgdGhlIGRh
dGENCi0gICAgICogQHBhcmFtIGZpbGUgVGhlIGZpbGUgbmFtZSB0byBnZXQgdGhlIGFuYWx5emVy
IGZvcg0KLSAgICAgKiBAcmV0dXJuIHRoZSBhbmFseXplciBmYWN0b3J5IHRvIHVzZQ0KLSAgICAg
KiBAdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24gSWYgYSBwcm9ibGVtIG9jY3VycyB3aGlsZSBy
ZWFkaW5nIHRoZSBkYXRhDQotICAgICAqLw0KLSAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFseXpl
ckZhY3RvcnkgZmluZChJbnB1dFN0cmVhbSBpbiwgU3RyaW5nIGZpbGUpDQotICAgICAgICB0aHJv
d3MgSU9FeGNlcHRpb24NCi0gICAgew0KLSAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0
b3J5ID0gZmluZChmaWxlKTsNCi0gICAgICAgIGlmIChmYWN0b3J5ICE9IG51bGwpIHsNCi0gICAg
ICAgICAgICByZXR1cm4gZmFjdG9yeTsNCi0gICAgICAgIH0NCi0gICAgICAgIHJldHVybiBmaW5k
KGluKTsNCi0gICAgfQ0KLQ0KLSAgICAvKioNCi0gICAgICogRmluZHMgYSBzdWl0YWJsZSBhbmFs
eXNlciBjbGFzcyBmb3IgZmlsZSBuYW1lLg0KLSAgICAgKg0KLSAgICAgKiBAcGFyYW0gZmlsZSBU
aGUgZmlsZSBuYW1lIHRvIGdldCB0aGUgYW5hbHl6ZXIgZm9yDQotICAgICAqIEByZXR1cm4gdGhl
IGFuYWx5emVyIGZhY3RvcnkgdG8gdXNlDQotICAgICAqLw0KLSAgICBwdWJsaWMgc3RhdGljIEZp
bGVBbmFseXplckZhY3RvcnkgZmluZChTdHJpbmcgZmlsZSkgew0KLSAgICAgICAgU3RyaW5nIHBh
dGggPSBmaWxlOw0KLSAgICAgICAgaW50IGkgPSAwOw0KLSAgICAgICAgaWYgKCgoaSA9IHBhdGgu
bGFzdEluZGV4T2YoJy8nKSkgPiAwIHx8IChpID0gcGF0aC5sYXN0SW5kZXhPZignXFwnKSkgPiAw
KSANCi0gICAgICAgICAgICAmJiAoaSArIDEgPCBwYXRoLmxlbmd0aCgpKSkgew0KLSAgICAgICAg
ICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZyhpICsgMSk7DQotICAgICAgICB9DQotICAgICAgICBp
bnQgZG90cG9zID0gcGF0aC5sYXN0SW5kZXhPZignLicpOw0KLSAgICAgICAgaWYgKGRvdHBvcyA+
PSAwKSB7DQotICAgICAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5ID0NCi0gICAg
ICAgICAgICAgICAgZXh0LmdldChwYXRoLnN1YnN0cmluZyhkb3Rwb3MgKyAxKS50b1VwcGVyQ2Fz
ZShMb2NhbGUuVVMpKTsNCi0gICAgICAgICAgICBpZiAoZmFjdG9yeSAhPSBudWxsKSB7DQotICAg
ICAgICAgICAgICAgIHJldHVybiBmYWN0b3J5Ow0KLSAgICAgICAgICAgIH0NCi0gICAgICAgIH0N
Ci0gICAgICAgIC8vIGZpbGUgZG9lc24ndCBoYXZlIGFueSBvZiB0aGUgZXh0ZW5zaW9ucyB3ZSBr
bm93LCB0cnkgZnVsbCBtYXRjaA0KLSAgICAgICAgcmV0dXJuIEZJTEVfTkFNRVMuZ2V0KHBhdGgu
dG9VcHBlckNhc2UoTG9jYWxlLlVTKSk7DQotICAgIH0NCi0NCi0gICAgLyoqDQotICAgICAqIEZp
bmRzIGEgc3VpdGFibGUgYW5hbHlzZXIgY2xhc3MgZm9yIHRoZSBkYXRhIGluIHRoaXMgc3RyZWFt
DQotICAgICAqDQotICAgICAqIEBwYXJhbSBpbiBUaGUgc3RyZWFtIGNvbnRhaW5pbmcgdGhlIGRh
dGEgdG8gYW5hbHl6ZQ0KLSAgICAgKiBAcmV0dXJuIHRoZSBhbmFseXplciBmYWN0b3J5IHRvIHVz
ZQ0KLSAgICAgKiBAdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24gaWYgYW4gZXJyb3Igb2NjdXJz
IHdoaWxlIHJlYWRpbmcgZGF0YSBmcm9tDQotICAgICAqICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB0aGUgc3RyZWFtDQotICAgICAqLw0KLSAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFseXpl
ckZhY3RvcnkgZmluZChJbnB1dFN0cmVhbSBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCi0gICAg
ICAgIGluLm1hcmsoOCk7DQotICAgICAgICBieXRlW10gY29udGVudCA9IG5ldyBieXRlWzhdOw0K
LSAgICAgICAgaW50IGxlbiA9IGluLnJlYWQoY29udGVudCk7DQotICAgICAgICBpbi5yZXNldCgp
Ow0KLSAgICAgICAgaWYgKGxlbiA8IDQpIHsNCi0gICAgICAgICAgICByZXR1cm4gbnVsbDsNCi0g
ICAgICAgIH0NCi0NCi0gICAgICAgIEZpbGVBbmFseXplckZhY3RvcnkgZmFjdG9yeSA9IGZpbmQo
Y29udGVudCk7DQotICAgICAgICBpZiAoZmFjdG9yeSAhPSBudWxsKSB7DQotICAgICAgICAgICAg
cmV0dXJuIGZhY3Rvcnk7DQotICAgICAgICB9DQotDQotICAgICAgICBmb3IgKEZpbGVBbmFseXpl
ckZhY3RvcnkuTWF0Y2hlciBtYXRjaGVyIDogbWF0Y2hlcnMpIHsNCi0gICAgICAgICAgICBGaWxl
QW5hbHl6ZXJGYWN0b3J5IGZhYyA9IG1hdGNoZXIuaXNNYWdpYyhjb250ZW50LCBpbik7DQotICAg
ICAgICAgICAgaWYgKGZhYyAhPSBudWxsKSB7DQotICAgICAgICAgICAgICAgIHJldHVybiBmYWM7
DQotICAgICAgICAgICAgfQ0KLSAgICAgICAgfQ0KLQ0KLSAgICAgICAgcmV0dXJuIG51bGw7DQot
ICAgIH0NCi0NCi0gICAgLyoqDQotICAgICAqIEZpbmRzIGEgc3VpdGFibGUgYW5hbHlzZXIgY2xh
c3MgZm9yIGEgbWFnaWMgc2lnbmF0dXJlDQotICAgICAqDQotICAgICAqIEBwYXJhbSBzaWduYXR1
cmUgdGhlIG1hZ2ljIHNpZ25hdHVyZSBsb29rIHVwDQotICAgICAqIEByZXR1cm4gdGhlIGFuYWx5
emVyIGZhY3RvcnkgdG8gdXNlDQotICAgICAqLw0KLSAgICBwdWJsaWMgc3RhdGljIEZpbGVBbmFs
eXplckZhY3RvcnkgZmluZChieXRlW10gc2lnbmF0dXJlKSB7DQotICAgICAgICBjaGFyW10gY2hh
cnMgPSBuZXcgY2hhcltzaWduYXR1cmUubGVuZ3RoID4gOCA/IDggOiBzaWduYXR1cmUubGVuZ3Ro
XTsNCi0gICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHsNCi0g
ICAgICAgICAgICBjaGFyc1tpXSA9IChjaGFyKSAoMHhGRiAmIHNpZ25hdHVyZVtpXSk7DQotICAg
ICAgICB9DQotICAgICAgICByZXR1cm4gZmluZE1hZ2ljKG5ldyBTdHJpbmcoY2hhcnMpKTsNCi0g
ICAgfQ0KLQ0KLSAgICAvKioNCi0gICAgICogR2V0IGFuIGFuYWx5emVyIGJ5IGxvb2tpbmcgdXAg
dGhlICJtYWdpYyBzaWduYXR1cmUiDQotICAgICAqIEBwYXJhbSBzaWduYXR1cmUgdGhlIHNpZ25h
dHVyZSB0byBsb29rIHVwDQotICAgICAqIEByZXR1cm4gdGhlIGFuYWx5emVyIGZhY3RvcnkgdG8g
aGFuZGxlIGRhdGEgd2l0aCB0aGlzIHNpZ25hdHVyZQ0KLSAgICAgKi8NCi0gICAgcHVibGljIHN0
YXRpYyBGaWxlQW5hbHl6ZXJGYWN0b3J5IGZpbmRNYWdpYyhTdHJpbmcgc2lnbmF0dXJlKSB7DQot
ICAgICAgICBGaWxlQW5hbHl6ZXJGYWN0b3J5IGEgPSBtYWdpY3MuZ2V0KHNpZ25hdHVyZSk7DQot
ICAgICAgICBpZiAoYSA9PSBudWxsKSB7DQotICAgICAgICAgICAgU3RyaW5nIHNpZ1dpdGhvdXRC
T00gPSBzdHJpcEJPTShzaWduYXR1cmUpOw0KLSAgICAgICAgICAgIGZvciAoTWFwLkVudHJ5PFN0
cmluZywgRmlsZUFuYWx5emVyRmFjdG9yeT4gZW50cnkgOg0KLSAgICAgICAgICAgICAgICAgICAg
IG1hZ2ljcy5lbnRyeVNldCgpKSB7DQotICAgICAgICAgICAgICAgIGlmIChzaWduYXR1cmUuc3Rh
cnRzV2l0aChlbnRyeS5nZXRLZXkoKSkpIHsNCi0gICAgICAgICAgICAgICAgICAgIHJldHVybiBl
bnRyeS5nZXRWYWx1ZSgpOw0KLSAgICAgICAgICAgICAgICB9DQotICAgICAgICAgICAgICAgIC8v
IFNlZSBpZiB0ZXh0IGZpbGVzIGhhdmUgdGhlIG1hZ2ljIHNlcXVlbmNlIGlmIHdlIHJlbW92ZSB0
aGUNCi0gICAgICAgICAgICAgICAgLy8gYnl0ZS1vcmRlciBtYXJrZXINCi0gICAgICAgICAgICAg
ICAgaWYgKHNpZ1dpdGhvdXRCT00gIT0gbnVsbCAmJg0KLSAgICAgICAgICAgICAgICAgICAgICAg
IGVudHJ5LmdldFZhbHVlKCkuZ2V0R2VucmUoKSA9PSBHZW5yZS5QTEFJTiAmJg0KLSAgICAgICAg
ICAgICAgICAgICAgICAgIHNpZ1dpdGhvdXRCT00uc3RhcnRzV2l0aChlbnRyeS5nZXRLZXkoKSkp
IHsNCi0gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5nZXRWYWx1ZSgpOw0KLSAgICAg
ICAgICAgICAgICB9DQotICAgICAgICAgICAgfQ0KLSAgICAgICAgfQ0KLSAgICAgICAgcmV0dXJu
IGE7DQotICAgIH0NCi0NCi0gICAgLyoqIEJ5dGUtb3JkZXIgbWFya2Vycy4gKi8NCi0gICAgcHJp
dmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nW10gQk9NUyA9IHsNCi0gICAgICAgIG5ldyBTdHJpbmco
bmV3IGNoYXJbXSB7MHhFRiwgMHhCQiwgMHhCRn0pLCAvLyBVVEYtOCBCT00NCi0gICAgICAgIG5l
dyBTdHJpbmcobmV3IGNoYXJbXSB7MHhGRSwgMHhGRn0pLCAgICAgICAvLyBVVEYtMTZCRSBCT00N
Ci0gICAgICAgIG5ldyBTdHJpbmcobmV3IGNoYXJbXSB7MHhGRiwgMHhGRX0pLCAgICAgICAvLyBV
VEYtMTZMRSBCT00NCi0gICAgfTsNCi0NCi0gICAgLyoqDQotICAgICAqIFN0cmlwIGF3YXkgdGhl
IGJ5dGUtb3JkZXIgbWFya2VyIGZyb20gdGhlIHN0cmluZywgaWYgaXQgaGFzIG9uZS4NCi0gICAg
ICoNCi0gICAgICogQHBhcmFtIHN0ciB0aGUgc3RyaW5nIHRvIHJlbW92ZSB0aGUgQk9NIGZyb20N
Ci0gICAgICogQHJldHVybiBhIHN0cmluZyB3aXRob3V0IHRoZSBieXRlLW9yZGVyIG1hcmtlciwg
b3IgPGNvZGU+bnVsbDwvY29kZT4gaWYNCi0gICAgICogdGhlIHN0cmluZyBkb2Vzbid0IHN0YXJ0
IHdpdGggYSBCT00NCi0gICAgICovDQotICAgIHByaXZhdGUgc3RhdGljIFN0cmluZyBzdHJpcEJP
TShTdHJpbmcgc3RyKSB7DQotICAgICAgICBmb3IgKFN0cmluZyBib20gOiBCT01TKSB7DQotICAg
ICAgICAgICAgaWYgKHN0ci5zdGFydHNXaXRoKGJvbSkpIHsNCi0gICAgICAgICAgICAgICAgcmV0
dXJuIHN0ci5zdWJzdHJpbmcoYm9tLmxlbmd0aCgpKTsNCi0gICAgICAgICAgICB9DQotICAgICAg
ICB9DQotICAgICAgICByZXR1cm4gbnVsbDsNCi0gICAgfQ0KLX0NCg0KY2hhbmdlc2V0OiAgIDk1
NDo0OGVmZjBiZTRmOTkNCnRhZzogICAgICAgICB0aXANCnVzZXI6ICAgICAgICBDaHJpcyBFbGRy
ZWRnZSA8Y2VsZHJlZGdlQGZvb2wuY29tPg0KZGF0ZTogICAgICAgIFdlZCBNYXIgMDMgMTc6MjE6
NTEgMjAxMCAtMDUwMA0Kc3VtbWFyeTogICAgIFJlc3RvcmUgYWNjaWRlbnRhbCByZW1vdmFsIG9m
IGRlY29yYXRvci4NCg0KZGlmZiAtciAwMzMzN2Y1OTQ3ZTYgLXIgNDhlZmYwYmU0Zjk5IHNyYy9v
cmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvcGxhaW4vUGxhaW5BbmFseXplci5qYXZh
DQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL3BsYWluL1BsYWlu
QW5hbHl6ZXIuamF2YQlXZWQgTWFyIDAzIDE3OjA5OjMzIDIwMTAgLTA1MDANCisrKyBiL3NyYy9v
cmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvcGxhaW4vUGxhaW5BbmFseXplci5qYXZh
CVdlZCBNYXIgMDMgMTc6MjE6NTEgMjAxMCAtMDUwMA0KQEAgLTY3LDcgKzY3LDEwIEBADQogICAg
IH0NCiANCiAgICAgQE92ZXJyaWRlDQotICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQg
ZG9jLCBJbnB1dFN0cmVhbVJlYWRlciBpblJlYWRlcikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisg
ICAgcHVibGljIHZvaWQgYW5hbHl6ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtUmVhZGVyIGlu
KSB0aHJvd3MgSU9FeGNlcHRpb24gew0KKyAgICAJUmVhZGVyIGluUmVhZGVyID0NCisgICAgCQlF
eHBhbmRUYWJzUmVhZGVyLndyYXAoaW4sIHByb2plY3QpOw0KKyAgICAJDQogICAgICAgICBsZW4g
PSAwOw0KICAgICAgICAgZG8gew0KICAgICAgICAgICAgIGludCByYnl0ZXMgPSBpblJlYWRlci5y
ZWFkKGNvbnRlbnQsIGxlbiwgY29udGVudC5sZW5ndGggLSBsZW4pOw0KDQo=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
              isurl="0"
          >
            <attachid>3784</attachid>
            <date>2010-03-09 16:40:00 +0000</date>
            <delta_ts>2010-03-09 16:40:23 +0000</delta_ts>
            <desc>updated patch as one changeset</desc>
            <filename>patch</filename>
            <type>text/plain</type>
            <size>16731</size>
            <attacher>chris.eldredge</attacher>
            
              <data encoding="base64">ZGlmZiAtciA3OTQwMmU3NmJhNWEgLXIgNDhlZmYwYmU0Zjk5IHNyYy9vcmcvb3BlbnNvbGFyaXMv
b3Blbmdyb2svYW5hbHlzaXMvQW5hbHl6ZXJHdXJ1LmphdmENCi0tLSBhL3NyYy9vcmcvb3BlbnNv
bGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvQW5hbHl6ZXJHdXJ1LmphdmEJVHVlIE1hciAwMiAxNjo1
NTo0OSAyMDEwICswMTAwDQorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5
c2lzL0FuYWx5emVyR3VydS5qYXZhCVdlZCBNYXIgMDMgMTc6MjE6NTEgMjAxMCAtMDUwMA0KQEAg
LTQ0Miw2ICs0NDIsMTIgQEANCiAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgIH0N
CiANCisgICAgICAgIFN0cmluZyBjb250ZW50Tm9CT01TdHIgPSBzdHJpcEJPTShuZXcgU3RyaW5n
KGNvbnRlbnQsIDAsIGxlbikpOw0KKyAgICAgICAgYnl0ZVtdIGNvbnRlbnROb0JPTSA9IG51bGw7
DQorICAgICAgICBpZiAoY29udGVudE5vQk9NU3RyICE9IG51bGwpIHsNCisgICAgICAgIAljb250
ZW50Tm9CT00gPSBjb250ZW50Tm9CT01TdHIuZ2V0Qnl0ZXMoKTsNCisgICAgICAgIH0NCisgICAg
ICAgIA0KICAgICAgICAgRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5ID0gZmluZChjb250ZW50
KTsNCiAgICAgICAgIGlmIChmYWN0b3J5ICE9IG51bGwpIHsNCiAgICAgICAgICAgICByZXR1cm4g
ZmFjdG9yeTsNCkBAIC00NDksNiArNDU1LDkgQEANCiANCiAgICAgICAgIGZvciAoRmlsZUFuYWx5
emVyRmFjdG9yeS5NYXRjaGVyIG1hdGNoZXIgOiBtYXRjaGVycykgew0KICAgICAgICAgICAgIEZp
bGVBbmFseXplckZhY3RvcnkgZmFjID0gbWF0Y2hlci5pc01hZ2ljKGNvbnRlbnQsIGluKTsNCisg
ICAgICAgICAgICBpZiAoZmFjID09IG51bGwgJiYgY29udGVudE5vQk9NICE9IG51bGwpIHsNCisg
ICAgICAgICAgICAJZmFjID0gbWF0Y2hlci5pc01hZ2ljKGNvbnRlbnROb0JPTSwgaW4pOw0KKyAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgICBpZiAoZmFjICE9IG51bGwpIHsNCiAgICAgICAgICAg
ICAgICAgcmV0dXJuIGZhYzsNCiAgICAgICAgICAgICB9DQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAt
ciA0OGVmZjBiZTRmOTkgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9UZXh0
QW5hbHl6ZXIuamF2YQ0KLS0tIC9kZXYvbnVsbAlUaHUgSmFuIDAxIDAwOjAwOjAwIDE5NzAgKzAw
MDANCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvVGV4dEFuYWx5
emVyLmphdmEJV2VkIE1hciAwMyAxNzoyMTo1MSAyMDEwIC0wNTAwDQpAQCAtMCwwICsxLDQ2IEBA
DQorcGFja2FnZSBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXM7DQorDQoraW1wb3J0
IGphdmEuaW8uSU9FeGNlcHRpb247DQoraW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07DQoraW1w
b3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7DQoraW1wb3J0IGphdmEubmlvLmNoYXJzZXQu
Q2hhcnNldDsNCisNCitpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7
DQorDQorcHVibGljIGFic3RyYWN0IGNsYXNzIFRleHRBbmFseXplciBleHRlbmRzIEZpbGVBbmFs
eXplciB7DQorCXB1YmxpYyBUZXh0QW5hbHl6ZXIoRmlsZUFuYWx5emVyRmFjdG9yeSBmYWN0b3J5
KSB7DQorCQlzdXBlcihmYWN0b3J5KTsNCisJfQ0KKw0KKyAgICBwdWJsaWMgZmluYWwgdm9pZCBh
bmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7
DQorICAgIAlTdHJpbmcgY2hhcnNldCA9IG51bGw7DQorICAgIAkNCisgICAgCWluLm1hcmsoMyk7
DQorICAgIAkNCisgICAgCWJ5dGVbXSBoZWFkID0gbmV3IGJ5dGVbM107DQorICAgIAlpbnQgYnIg
PSBpbi5yZWFkKGhlYWQsIDAsIDMpOw0KKw0KKyAgICAJaWYgKGJyID49IDIpIHsNCisgICAgCQlp
ZiAoKGhlYWRbMF0gPT0gKGJ5dGUpMHhGRSAmJiBoZWFkWzFdID09IChieXRlKTB4RkYpIHx8ICho
ZWFkWzBdID09IChieXRlKTB4RkYgJiYgKGJ5dGUpaGVhZFsxXSA9PSAoYnl0ZSkweEZFKSkgew0K
KyAgICAJCQljaGFyc2V0ID0gIlVURjE2IjsNCisgICAgCQkJaW4ucmVzZXQoKTsJDQorICAgIAkJ
fQ0KKyAgICAJfQ0KKyAgICAJaWYgKGJyID49IDMpIHsNCisgICAgCQlpZiAoaGVhZFswXSA9PSAo
Ynl0ZSkweEVGICYmIGhlYWRbMV0gPT0gKGJ5dGUpMHhCQiAmJiBoZWFkWzJdID09IChieXRlKTB4
QkYpIHsNCisgICAgCQkJLyogSW5wdXRTdHJlYW1SZWFkZXIgZG9lcyBub3QgcHJvcGVybHkgZGlz
Y2FyZCBCT00gb24gVVRGOCBzdHJlYW1zLA0KKyAgICAJCQkgKiBzbyBkb24ndCByZXNldCB0aGUg
c3RyZWFtLiAqLyANCisgICAgCQkJY2hhcnNldCA9ICJVVEY4IjsNCisgICAgCQl9DQorICAgIAl9
DQorICAgIAkNCisgICAgCWlmIChjaGFyc2V0ID09IG51bGwpIHsNCisgICAgCQlpbi5yZXNldCgp
Ow0KKyAgICAJCWNoYXJzZXQgPSBDaGFyc2V0LmRlZmF1bHRDaGFyc2V0KCkubmFtZSgpOw0KKyAg
ICAJfQ0KKyAgICAJDQorICAgICAgICBhbmFseXplKGRvYywgbmV3IElucHV0U3RyZWFtUmVhZGVy
KGluLCBjaGFyc2V0KSk7DQorICAgIH0NCisgICAgDQorCXByb3RlY3RlZCBhYnN0cmFjdCB2b2lk
IGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRlciByZWFkZXIpIHRocm93cyBJ
T0V4Y2VwdGlvbjsNCit9DQpkaWZmIC1yIDc5NDAyZTc2YmE1YSAtciA0OGVmZjBiZTRmOTkgc3Jj
L29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9jL0NBbmFseXplci5qYXZhDQotLS0g
YS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2MvQ0FuYWx5emVyLmphdmEJ
VHVlIE1hciAwMiAxNjo1NTo0OSAyMDEwICswMTAwDQorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlz
L29wZW5ncm9rL2FuYWx5c2lzL2MvQ0FuYWx5emVyLmphdmEJV2VkIE1hciAwMyAxNzoyMTo1MSAy
MDEwIC0wNTAwDQpAQCAtMjUsOSArMjUsMTEgQEANCiANCiBpbXBvcnQgamF2YS5pby5JT0V4Y2Vw
dGlvbjsNCiBpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsNCitpbXBvcnQgamF2YS5pby5JbnB1
dFN0cmVhbVJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8u
U3RyaW5nUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVj
ZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVu
dC5GaWVsZDsNCkBAIC01NCw3ICs1Niw3IEBADQogICAgICAgICB4cmVmID0gbmV3IENYcmVmKGR1
bW15KTsNCiAgICAgfQ0KIA0KLSAgICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywg
SW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorICAgIHB1YmxpYyB2b2lkIGFu
YWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRlciBpbikgdGhyb3dzIElPRXhjZXB0
aW9uIHsNCiAgICAgICAgIHN1cGVyLmFuYWx5emUoZG9jLCBpbik7DQogICAgICAgICBkb2MuYWRk
KG5ldyBGaWVsZCgicmVmcyIsIGR1bW15KSk7DQogICAgIH0gICAgDQpkaWZmIC1yIDc5NDAyZTc2
YmE1YSAtciA0OGVmZjBiZTRmOTkgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNp
cy9jL0N4eEFuYWx5emVyLmphdmENCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2sv
YW5hbHlzaXMvYy9DeHhBbmFseXplci5qYXZhCVR1ZSBNYXIgMDIgMTY6NTU6NDkgMjAxMCArMDEw
MA0KKysrIGIvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9jL0N4eEFuYWx5
emVyLmphdmEJV2VkIE1hciAwMyAxNzoyMTo1MSAyMDEwIC0wNTAwDQpAQCAtMjUsOSArMjUsMTEg
QEANCiANCiBpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsNCiBpbXBvcnQgamF2YS5pby5JbnB1
dFN0cmVhbTsNCitpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsNCiBpbXBvcnQgamF2
YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uU3RyaW5nUmVhZGVyOw0KIGltcG9ydCBqYXZh
LmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5T
dHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KIGlt
cG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5GaWVsZDsNCkBAIC01MSw3ICs1Myw3IEBA
DQogICAgICAgICB4cmVmID0gbmV3IEN4eFhyZWYoZHVtbXkpOw0KICAgICB9DQogDQotICAgIHB1
YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbSBpbikgdGhyb3dzIElP
RXhjZXB0aW9uIHsNCisgICAgcHVibGljIHZvaWQgYW5hbHl6ZShEb2N1bWVudCBkb2MsIElucHV0
U3RyZWFtUmVhZGVyIGluKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICAgc3VwZXIuYW5h
bHl6ZShkb2MsIGluKTsNCiAgICAgICAgIGRvYy5hZGQobmV3IEZpZWxkKCJyZWZzIiwgZHVtbXkp
KTsNCiAgICAgfSAgICANCmRpZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDQ4ZWZmMGJlNGY5OSBzcmMv
b3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2ZvcnRyYW4vRm9ydHJhbkFuYWx5emVy
LmphdmENCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvZm9ydHJh
bi9Gb3J0cmFuQW5hbHl6ZXIuamF2YQlUdWUgTWFyIDAyIDE2OjU1OjQ5IDIwMTAgKzAxMDANCisr
KyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvZm9ydHJhbi9Gb3J0cmFu
QW5hbHl6ZXIuamF2YQlXZWQgTWFyIDAzIDE3OjIxOjUxIDIwMTAgLTA1MDANCkBAIC0yNSw5ICsy
NSwxMSBAQA0KIA0KIGltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOw0KIGltcG9ydCBqYXZhLmlv
LklucHV0U3RyZWFtOw0KK2ltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtUmVhZGVyOw0KIGltcG9y
dCBqYXZhLmlvLlJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7DQogaW1wb3J0
IGphdmEuaW8uV3JpdGVyOw0KKw0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5U
b2tlblN0cmVhbTsNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7
DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KQEAgLTUxLDcgKzUz
LDcgQEANCiAgICAgfQ0KIA0KICAgICBAT3ZlcnJpZGUNCi0gICAgcHVibGljIHZvaWQgYW5hbHl6
ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtIGluKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KKyAg
ICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW1SZWFkZXIgaW4p
IHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgICBzdXBlci5hbmFseXplKGRvYywgaW4pOw0K
ICAgICAgICAgZG9jLmFkZChuZXcgRmllbGQoInJlZnMiLCBkdW1teSkpOw0KICAgICB9DQpkaWZm
IC1yIDc5NDAyZTc2YmE1YSAtciA0OGVmZjBiZTRmOTkgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVu
Z3Jvay9hbmFseXNpcy9qYXZhL0phdmFBbmFseXplci5qYXZhDQotLS0gYS9zcmMvb3JnL29wZW5z
b2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2phdmEvSmF2YUFuYWx5emVyLmphdmEJVHVlIE1hciAw
MiAxNjo1NTo0OSAyMDEwICswMTAwDQorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9r
L2FuYWx5c2lzL2phdmEvSmF2YUFuYWx5emVyLmphdmEJV2VkIE1hciAwMyAxNzoyMTo1MSAyMDEw
IC0wNTAwDQpAQCAtMjUsOSArMjUsMTEgQEANCiANCiBpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv
bjsNCiBpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsNCitpbXBvcnQgamF2YS5pby5JbnB1dFN0
cmVhbVJlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uU3Ry
aW5nUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5l
LmRvY3VtZW50LkRvY3VtZW50Ow0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5G
aWVsZDsNCkBAIC01Myw3ICs1NSw3IEBADQogICAgICAgICB4cmVmID0gbmV3IEphdmFYcmVmKGR1
bW15KTsNCiAgICAgfQ0KIA0KLSAgICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywg
SW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorICAgIHB1YmxpYyB2b2lkIGFu
YWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRlciBpbikgdGhyb3dzIElPRXhjZXB0
aW9uIHsNCiAgICAgICAgIHN1cGVyLmFuYWx5emUoZG9jLCBpbik7DQogICAgICAgICBkb2MuYWRk
KG5ldyBGaWVsZCgicmVmcyIsIGR1bW15KSk7DQogICAgIH0gICAgDQpkaWZmIC1yIDc5NDAyZTc2
YmE1YSAtciA0OGVmZjBiZTRmOTkgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNp
cy9saXNwL0xpc3BBbmFseXplci5qYXZhDQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5n
cm9rL2FuYWx5c2lzL2xpc3AvTGlzcEFuYWx5emVyLmphdmEJVHVlIE1hciAwMiAxNjo1NTo0OSAy
MDEwICswMTAwDQorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL2xp
c3AvTGlzcEFuYWx5emVyLmphdmEJV2VkIE1hciAwMyAxNzoyMTo1MSAyMDEwIC0wNTAwDQpAQCAt
MjUsOSArMjUsMTEgQEANCiANCiBpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsNCiBpbXBvcnQg
amF2YS5pby5JbnB1dFN0cmVhbTsNCitpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsN
CiBpbXBvcnQgamF2YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uU3RyaW5nUmVhZGVyOw0K
IGltcG9ydCBqYXZhLmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5h
bHlzaXMuVG9rZW5TdHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRv
Y3VtZW50Ow0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5GaWVsZDsNCkBAIC00
OCw3ICs1MCw3IEBADQogICAgICAgICB4cmVmID0gbmV3IExpc3BYcmVmKGR1bW15KTsNCiAgICAg
fQ0KIA0KLSAgICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW0g
aW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQorICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1l
bnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRlciBpbikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAg
ICAgIHN1cGVyLmFuYWx5emUoZG9jLCBpbik7DQogICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgi
cmVmcyIsIGR1bW15KSk7DQogICAgIH0NCmRpZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDQ4ZWZmMGJl
NGY5OSBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL3BsYWluL1BsYWluQW5h
bHl6ZXIuamF2YQ0KLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9w
bGFpbi9QbGFpbkFuYWx5emVyLmphdmEJVHVlIE1hciAwMiAxNjo1NTo0OSAyMDEwICswMTAwDQor
KysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL3BsYWluL1BsYWluQW5h
bHl6ZXIuamF2YQlXZWQgTWFyIDAzIDE3OjIxOjUxIDIwMTAgLTA1MDANCkBAIC0zNCw5ICszNCw5
IEBADQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KIGltcG9ydCBv
cmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMuRGVmaW5pdGlvbnM7DQogaW1wb3J0IG9y
Zy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5FeHBhbmRUYWJzUmVhZGVyOw0KLWltcG9y
dCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMuRmlsZUFuYWx5emVyOw0KIGltcG9y
dCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suYW5hbHlzaXMuRmlsZUFuYWx5emVyRmFjdG9yeTsN
CiBpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLkhhc2gyVG9rZW5TdHJl
YW07DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5UZXh0QW5hbHl6
ZXI7DQogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5jb25maWd1cmF0aW9uLlByb2pl
Y3Q7DQogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5LkFubm90YXRpb247
DQogDQpAQCAtNDYsNyArNDYsNyBAQA0KICAqDQogICogQGF1dGhvciBDaGFuZGFuDQogICovDQot
cHVibGljIGNsYXNzIFBsYWluQW5hbHl6ZXIgZXh0ZW5kcyBGaWxlQW5hbHl6ZXIgew0KK3B1Ymxp
YyBjbGFzcyBQbGFpbkFuYWx5emVyIGV4dGVuZHMgVGV4dEFuYWx5emVyIHsNCiANCiAgICAgcHJv
dGVjdGVkIGNoYXJbXSBjb250ZW50Ow0KICAgICBwcm90ZWN0ZWQgaW50IGxlbjsNCkBAIC02Nyw5
ICs2NywxMCBAQA0KICAgICB9DQogDQogICAgIEBPdmVycmlkZQ0KLSAgICBwdWJsaWMgdm9pZCBh
bmFseXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7
DQotICAgICAgICBSZWFkZXIgaW5SZWFkZXIgPQ0KLSAgICAgICAgICAgICAgICBFeHBhbmRUYWJz
UmVhZGVyLndyYXAobmV3IElucHV0U3RyZWFtUmVhZGVyKGluKSwgcHJvamVjdCk7DQorICAgIHB1
YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRlciBpbikgdGhy
b3dzIElPRXhjZXB0aW9uIHsNCisgICAgCVJlYWRlciBpblJlYWRlciA9DQorICAgIAkJRXhwYW5k
VGFic1JlYWRlci53cmFwKGluLCBwcm9qZWN0KTsNCisgICAgCQ0KICAgICAgICAgbGVuID0gMDsN
CiAgICAgICAgIGRvIHsNCiAgICAgICAgICAgICBpbnQgcmJ5dGVzID0gaW5SZWFkZXIucmVhZChj
b250ZW50LCBsZW4sIGNvbnRlbnQubGVuZ3RoIC0gbGVuKTsNCmRpZmYgLXIgNzk0MDJlNzZiYTVh
IC1yIDQ4ZWZmMGJlNGY5OSBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL3Bs
YWluL1hNTEFuYWx5emVyLmphdmENCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2sv
YW5hbHlzaXMvcGxhaW4vWE1MQW5hbHl6ZXIuamF2YQlUdWUgTWFyIDAyIDE2OjU1OjQ5IDIwMTAg
KzAxMDANCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvcGxhaW4v
WE1MQW5hbHl6ZXIuamF2YQlXZWQgTWFyIDAzIDE3OjIxOjUxIDIwMTAgLTA1MDANCkBAIC0yOSwx
MSArMjksMTIgQEANCiBpbXBvcnQgamF2YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uU3Ry
aW5nUmVhZGVyOw0KIGltcG9ydCBqYXZhLmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuYW5hbHlzaXMuVG9rZW5TdHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5l
LmRvY3VtZW50LkRvY3VtZW50Ow0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5G
aWVsZDsNCi1pbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLkZpbGVBbmFs
eXplcjsNCiBpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFuYWx5c2lzLkZpbGVBbmFs
eXplckZhY3Rvcnk7DQoraW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5hbmFseXNpcy5U
ZXh0QW5hbHl6ZXI7DQogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5jb25maWd1cmF0
aW9uLlByb2plY3Q7DQogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5LkFu
bm90YXRpb247DQogDQpAQCAtNDMsNyArNDQsNyBAQA0KICAqDQogICogQGF1dGhvciBDaGFuZGFu
DQogICovDQotcHVibGljIGNsYXNzIFhNTEFuYWx5emVyIGV4dGVuZHMgRmlsZUFuYWx5emVyIHsN
CitwdWJsaWMgY2xhc3MgWE1MQW5hbHl6ZXIgZXh0ZW5kcyBUZXh0QW5hbHl6ZXIgew0KICAgICAN
CiAgICAgcHJpdmF0ZSBjaGFyW10gY29udGVudDsNCiAgICAgcHJpdmF0ZSBpbnQgbGVuOw0KQEAg
LTYzLDExICs2NCwxMCBAQA0KICAgICB9DQogICAgIA0KICAgICBAT3ZlcnJpZGUNCi0gICAgcHVi
bGljIHZvaWQgYW5hbHl6ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtIGluKSB0aHJvd3MgSU9F
eGNlcHRpb24gew0KLSAgICAgICAgSW5wdXRTdHJlYW1SZWFkZXIgaW5SZWFkZXIgPSBuZXcgSW5w
dXRTdHJlYW1SZWFkZXIoaW4pOw0KKyAgICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRv
YywgSW5wdXRTdHJlYW1SZWFkZXIgaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgICBs
ZW4gPSAwOw0KICAgICAgICAgZG97DQotICAgICAgICAgICAgaW50IHJieXRlcyA9IGluUmVhZGVy
LnJlYWQoY29udGVudCwgbGVuLCBjb250ZW50Lmxlbmd0aCAtIGxlbik7DQorICAgICAgICAgICAg
aW50IHJieXRlcyA9IGluLnJlYWQoY29udGVudCwgbGVuLCBjb250ZW50Lmxlbmd0aCAtIGxlbik7
DQogICAgICAgICAgICAgaWYocmJ5dGVzID4gMCApIHsNCiAgICAgICAgICAgICAgICAgaWYocmJ5
dGVzID09IChjb250ZW50Lmxlbmd0aCAtIGxlbikpIHsNCiAgICAgICAgICAgICAgICAgICAgIGNo
YXJbXSBjb250ZW50MiA9IG5ldyBjaGFyW2NvbnRlbnQubGVuZ3RoICogMl07DQpkaWZmIC1yIDc5
NDAyZTc2YmE1YSAtciA0OGVmZjBiZTRmOTkgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9h
bmFseXNpcy9zaC9TaEFuYWx5emVyLmphdmENCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Bl
bmdyb2svYW5hbHlzaXMvc2gvU2hBbmFseXplci5qYXZhCVR1ZSBNYXIgMDIgMTY6NTU6NDkgMjAx
MCArMDEwMA0KKysrIGIvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9zaC9T
aEFuYWx5emVyLmphdmEJV2VkIE1hciAwMyAxNzoyMTo1MSAyMDEwIC0wNTAwDQpAQCAtMjUsOSAr
MjUsMTEgQEANCiANCiBpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsNCiBpbXBvcnQgamF2YS5p
by5JbnB1dFN0cmVhbTsNCitpbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsNCiBpbXBv
cnQgamF2YS5pby5SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uU3RyaW5nUmVhZGVyOw0KIGltcG9y
dCBqYXZhLmlvLldyaXRlcjsNCisNCiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMu
VG9rZW5TdHJlYW07DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50
Ow0KIGltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5GaWVsZDsNCkBAIC01NCw3ICs1
Niw3IEBADQogICAgICAgICB4cmVmID0gbmV3IFNoWHJlZihkdW1teSk7DQogICAgIH0NCiANCi0g
ICAgcHVibGljIHZvaWQgYW5hbHl6ZShEb2N1bWVudCBkb2MsIElucHV0U3RyZWFtIGluKSB0aHJv
d3MgSU9FeGNlcHRpb24gew0KKyAgICBwdWJsaWMgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywg
SW5wdXRTdHJlYW1SZWFkZXIgaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgICBzdXBl
ci5hbmFseXplKGRvYywgaW4pOw0KICAgICAgICAgZG9jLmFkZChuZXcgRmllbGQoInJlZnMiLCBk
dW1teSkpOw0KICAgICB9ICAgIA0KZGlmZiAtciA3OTQwMmU3NmJhNWEgLXIgNDhlZmYwYmU0Zjk5
IHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvdGNsL1RjbEFuYWx5emVyLmph
dmENCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvdGNsL1RjbEFu
YWx5emVyLmphdmEJVHVlIE1hciAwMiAxNjo1NTo0OSAyMDEwICswMTAwDQorKysgYi9zcmMvb3Jn
L29wZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL3RjbC9UY2xBbmFseXplci5qYXZhCVdlZCBN
YXIgMDMgMTc6MjE6NTEgMjAxMCAtMDUwMA0KQEAgLTI1LDkgKzI1LDExIEBADQogDQogaW1wb3J0
IGphdmEuaW8uSU9FeGNlcHRpb247DQogaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07DQoraW1w
b3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7DQogaW1wb3J0IGphdmEuaW8uUmVhZGVyOw0K
IGltcG9ydCBqYXZhLmlvLlN0cmluZ1JlYWRlcjsNCiBpbXBvcnQgamF2YS5pby5Xcml0ZXI7DQor
DQogaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5c2lzLlRva2VuU3RyZWFtOw0KIGltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5Eb2N1bWVudDsNCiBpbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuZG9jdW1lbnQuRmllbGQ7DQpAQCAtNDgsNyArNTAsNyBAQA0KICAgICAgICAgeHJl
ZiA9IG5ldyBUY2xYcmVmKGR1bW15KTsNCiAgICAgfQ0KIA0KLSAgICBwdWJsaWMgdm9pZCBhbmFs
eXplKERvY3VtZW50IGRvYywgSW5wdXRTdHJlYW0gaW4pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQor
ICAgIHB1YmxpYyB2b2lkIGFuYWx5emUoRG9jdW1lbnQgZG9jLCBJbnB1dFN0cmVhbVJlYWRlciBp
bikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgIHN1cGVyLmFuYWx5emUoZG9jLCBpbik7
DQogICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgicmVmcyIsIGR1bW15KSk7DQogICAgIH0NCmRp
ZmYgLXIgNzk0MDJlNzZiYTVhIC1yIDQ4ZWZmMGJlNGY5OSB0ZXN0L29yZy9vcGVuc29sYXJpcy9v
cGVuZ3Jvay9hbmFseXNpcy9BbmFseXplckd1cnVUZXN0LmphdmENCi0tLSBhL3Rlc3Qvb3JnL29w
ZW5zb2xhcmlzL29wZW5ncm9rL2FuYWx5c2lzL0FuYWx5emVyR3VydVRlc3QuamF2YQlUdWUgTWFy
IDAyIDE2OjU1OjQ5IDIwMTAgKzAxMDANCisrKyBiL3Rlc3Qvb3JnL29wZW5zb2xhcmlzL29wZW5n
cm9rL2FuYWx5c2lzL0FuYWx5emVyR3VydVRlc3QuamF2YQlXZWQgTWFyIDAzIDE3OjIxOjUxIDIw
MTAgLTA1MDANCkBAIC00OCw2ICs0OCwxNyBAQA0KICAgICB9DQogDQogICAgIEBUZXN0DQorICAg
IHB1YmxpYyB2b2lkIHRlc3RVVEY4Qnl0ZU9yZGVyTWFya1BsYWluRmlsZSgpIHRocm93cyBFeGNl
cHRpb24gew0KKyAgICAgICAgYnl0ZVtdIGJ5dGVzID0geyAoYnl0ZSkgMHhFRiwgKGJ5dGUpIDB4
QkIsIChieXRlKSAweEJGLCAvLyBVVEYtOCBCT00NCisgICAgICAgICAgICAgICAgICAgICAgICdo
JywgJ2UnLCAnbCcsICdsJywgJ2UnLCAnICcsDQorICAgICAgICAgICAgICAgICAgICAgICAndycs
ICdvJywgJ3InLCAnbCcsICdkJ307DQorICAgICAgICANCisgICAgICAgIEJ5dGVBcnJheUlucHV0
U3RyZWFtIGluID0gbmV3IEJ5dGVBcnJheUlucHV0U3RyZWFtKGJ5dGVzKTsNCisgICAgICAgIEZp
bGVBbmFseXplciBmYSA9IEFuYWx5emVyR3VydS5nZXRBbmFseXplcihpbiwgIi9kdW1teS9maWxl
Iik7DQorICAgICAgICBhc3NlcnRTYW1lKFBsYWluQW5hbHl6ZXIuY2xhc3MsIGZhLmdldENsYXNz
KCkpOw0KKyAgICB9DQorDQorICAgIEBUZXN0DQogICAgIHB1YmxpYyB2b2lkIGFkZEV4dGVuc2lv
bigpIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICAgLy8gc2hvdWxkIG5vdCBmaW5kIGFuYWx5
emVyIGZvciB0aGlzIHVubGlrZWx5IGV4dGVuc2lvbg0KICAgICAgICAgYXNzZXJ0TnVsbChBbmFs
eXplckd1cnUuZmluZCgiZmlsZS51bmxpa2VseV9leHRlbnNpb24iKSk7DQpkaWZmIC1yIDc5NDAy
ZTc2YmE1YSAtciA0OGVmZjBiZTRmOTkgdGVzdC9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5h
bHlzaXMvVGV4dEFuYXpseXplclRlc3QuamF2YQ0KLS0tIC9kZXYvbnVsbAlUaHUgSmFuIDAxIDAw
OjAwOjAwIDE5NzAgKzAwMDANCisrKyBiL3Rlc3Qvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2Fu
YWx5c2lzL1RleHRBbmF6bHl6ZXJUZXN0LmphdmEJV2VkIE1hciAwMyAxNzoyMTo1MSAyMDEwIC0w
NTAwDQpAQCAtMCwwICsxLDEwMCBAQA0KK3BhY2thZ2Ugb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9r
LmFuYWx5c2lzOw0KKw0KK2ltcG9ydCBqYXZhLmlvLkJ1ZmZlcmVkUmVhZGVyOw0KK2ltcG9ydCBq
YXZhLmlvLkJ5dGVBcnJheUlucHV0U3RyZWFtOw0KK2ltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9u
Ow0KK2ltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOw0KK2ltcG9ydCBqYXZhLmlvLklucHV0U3Ry
ZWFtUmVhZGVyOw0KK2ltcG9ydCBqYXZhLm5pby5CeXRlQnVmZmVyOw0KK2ltcG9ydCBqYXZhLm5p
by5jaGFyc2V0LkNoYXJzZXQ7DQorDQoraW1wb3J0IGp1bml0LmZyYW1ld29yay5Bc3NlcnQ7DQor
DQoraW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KK2ltcG9ydCBv
cmcuanVuaXQuVGVzdDsNCisNCitwdWJsaWMgY2xhc3MgVGV4dEFuYXpseXplclRlc3Qgew0KKwlw
cml2YXRlIFN0cmluZyBkZWZhdWx0RW5jb2RpbmcgPSBuZXcgSW5wdXRTdHJlYW1SZWFkZXIobmV3
IEJ5dGVBcnJheUlucHV0U3RyZWFtKG5ldyBieXRlWzBdKSkuZ2V0RW5jb2RpbmcoKTsNCisJcHJp
dmF0ZSBTdHJpbmcgZW5jb2Rpbmc7DQorCXByaXZhdGUgU3RyaW5nIGNvbnRlbnRzOw0KKwkNCisJ
QFRlc3QNCisJcHVibGljIHZvaWQgZGVmYXVsdEVuY29kaW5nKCkgdGhyb3dzIElPRXhjZXB0aW9u
IHsNCisJCW5ldyBUZXN0YWJsZVRleHRBbmFseXplcigpLmFuYWx5emUobmV3IERvY3VtZW50KCks
DQorCQkJCW5ldyBCeXRlQXJyYXlJbnB1dFN0cmVhbSgiaGVsbG8iLmdldEJ5dGVzKCkpKTsNCisJ
CQ0KKwkJQXNzZXJ0LmFzc2VydEVxdWFscyhkZWZhdWx0RW5jb2RpbmcsIGVuY29kaW5nKTsNCisJ
CQ0KKwkJQXNzZXJ0LmFzc2VydEVxdWFscygiaGVsbG8iLCBjb250ZW50cyk7DQorCX0NCisJDQor
CUBUZXN0DQorCXB1YmxpYyB2b2lkIHJlc2V0c1N0cmVhbU9uU2hvcnRJbnB1dCgpIHRocm93cyBJ
T0V4Y2VwdGlvbiB7DQorCQluZXcgVGVzdGFibGVUZXh0QW5hbHl6ZXIoKS5hbmFseXplKG5ldyBE
b2N1bWVudCgpLA0KKwkJCQluZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0oImhpIi5nZXRCeXRlcygp
KSk7DQorCQkNCisJCUFzc2VydC5hc3NlcnRFcXVhbHMoZGVmYXVsdEVuY29kaW5nLCBlbmNvZGlu
Zyk7DQorCQkNCisJCUFzc2VydC5hc3NlcnRFcXVhbHMoImhpIiwgY29udGVudHMpOw0KKwl9DQor
CQ0KKwlAVGVzdA0KKwlwdWJsaWMgdm9pZCB1dGY4V2l0aEJPTSgpIHRocm93cyBJT0V4Y2VwdGlv
biB7DQorCQlieXRlW10gYnVmZmVyID0gbmV3IGJ5dGVbXSB7KGJ5dGUpIDIzOSwgKGJ5dGUpIDE4
NywgKGJ5dGUpIDE5MSwgJ2gnLCAnZScsICdsJywgJ2wnLCAnbyd9Ow0KKwkJbmV3IFRlc3RhYmxl
VGV4dEFuYWx5emVyKCkuYW5hbHl6ZShuZXcgRG9jdW1lbnQoKSwNCisJCQkJbmV3IEJ5dGVBcnJh
eUlucHV0U3RyZWFtKGJ1ZmZlcikpOw0KKwkJDQorCQlBc3NlcnQuYXNzZXJ0RXF1YWxzKCJoZWxs
byIsIGNvbnRlbnRzKTsNCisJCUFzc2VydC5hc3NlcnRFcXVhbHMoIlVURjgiLCBlbmNvZGluZyk7
DQorCX0NCisJDQorCUBUZXN0DQorCXB1YmxpYyB2b2lkIHV0ZjE2V2l0aEJPTSgpIHRocm93cyBJ
T0V4Y2VwdGlvbiB7DQorCQlmaW5hbCBCeXRlQnVmZmVyIHV0ZjE2c3RyID0gQ2hhcnNldC5mb3JO
YW1lKCJVVEYtMTYiKS5lbmNvZGUoImhlbGxvIik7DQorCQlieXRlW10gYnl0ZXMgPSBuZXcgYnl0
ZVt1dGYxNnN0ci5yZW1haW5pbmcoKV07DQorCQl1dGYxNnN0ci5nZXQoYnl0ZXMsIDAsIGJ5dGVz
Lmxlbmd0aCk7DQorCQkNCisJCW5ldyBUZXN0YWJsZVRleHRBbmFseXplcigpLmFuYWx5emUobmV3
IERvY3VtZW50KCksDQorCQkJCW5ldyBCeXRlQXJyYXlJbnB1dFN0cmVhbShieXRlcykpOw0KKwkJ
DQorCQlBc3NlcnQuYXNzZXJ0RXF1YWxzKCJVVEYtMTYiLCBlbmNvZGluZyk7DQorCQkNCisJCUFz
c2VydC5hc3NlcnRFcXVhbHMoImhlbGxvIiwgY29udGVudHMpOw0KKwl9DQorCQ0KKwlAVGVzdA0K
KwlwdWJsaWMgdm9pZCB1dGYxNldpdGhCT01BbHRlcm5hdGUoKSB0aHJvd3MgSU9FeGNlcHRpb24g
ew0KKwkJZmluYWwgQnl0ZUJ1ZmZlciB1dGYxNnN0ciA9IENoYXJzZXQuZm9yTmFtZSgiVVRGLTE2
IikuZW5jb2RlKCJoZWxsbyIpOw0KKwkJYnl0ZVtdIGJ5dGVzID0gbmV3IGJ5dGVbdXRmMTZzdHIu
cmVtYWluaW5nKCldOw0KKwkJdXRmMTZzdHIuZ2V0KGJ5dGVzLCAwLCBieXRlcy5sZW5ndGgpOw0K
KwkJDQorCQlmb3IgKGludCBpPTA7IGk8Ynl0ZXMubGVuZ3RoOyBpKz0yKSB7DQorCQkJYnl0ZSBi
ID0gYnl0ZXNbaV07DQorCQkJYnl0ZXNbaV0gPSBieXRlc1tpKzFdOw0KKwkJCWJ5dGVzW2krMV0g
PSBiOw0KKwkJfQ0KKwkJDQorCQluZXcgVGVzdGFibGVUZXh0QW5hbHl6ZXIoKS5hbmFseXplKG5l
dyBEb2N1bWVudCgpLA0KKwkJCQluZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0oYnl0ZXMpKTsNCisJ
CQ0KKwkJQXNzZXJ0LmFzc2VydEVxdWFscygiVVRGLTE2IiwgZW5jb2RpbmcpOw0KKwkJDQorCQlB
c3NlcnQuYXNzZXJ0RXF1YWxzKCJoZWxsbyIsIGNvbnRlbnRzKTsNCisJfQ0KKwkNCisJcHVibGlj
IGNsYXNzIFRlc3RhYmxlVGV4dEFuYWx5emVyIGV4dGVuZHMgVGV4dEFuYWx5emVyIHsNCisJCXB1
YmxpYyBUZXN0YWJsZVRleHRBbmFseXplcigpIHsNCisJCQlzdXBlcihudWxsKTsNCisJCX0NCisJ
CQ0KKwkJQE92ZXJyaWRlDQorCQlwcm90ZWN0ZWQgdm9pZCBhbmFseXplKERvY3VtZW50IGRvYywg
SW5wdXRTdHJlYW1SZWFkZXIgcikgdGhyb3dzIElPRXhjZXB0aW9uIHsNCisJCQllbmNvZGluZyA9
IHIuZ2V0RW5jb2RpbmcoKTsNCisNCisJCQljaGFyW10gYnVmID0gbmV3IGNoYXJbMTAyNF07DQor
CQkJaW50IGJyID0gci5yZWFkKGJ1Zik7DQorCQkJDQorCQkJY29udGVudHMgPSBuZXcgU3RyaW5n
KGJ1ZiwgMCwgYnIpOw0KKwkJfQ0KKwl9DQorfQ0K
</data>

          </attachment>
      

    </bug>

</bugzilla>