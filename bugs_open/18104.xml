<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "http://defect.opensolaris.org/bz/bugzilla.dtd">

<bugzilla version="3.6.5"
          urlbase="http://defect.opensolaris.org/bz/"
          
          maintainer="website-admin@opensolaris.org"
>

    <bug>
          <bug_id>18104</bug_id>
          
          <creation_ts>2011-03-31 05:17:00 +0000</creation_ts>
          <short_desc>RFE: Indexer should pass CLI cmds to use to webapp</short_desc>
          <delta_ts>2011-03-31 05:21:04 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Development</classification>
          <product>opengrok</product>
          <component>webapp</component>
          <version>unspecified</version>
          <rep_platform>ANY/Generic</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jens Elkner">jel+osolbugs</reporter>
          <assigned_to name="Lubos Kosco">Lubos.Kosco</assigned_to>
          <cc>opengrok-dev</cc>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>82101</commentid>
            <who name="Jens Elkner">jel+osolbugs</who>
            <bug_when>2011-03-31 05:17:22 +0000</bug_when>
            <thetext>Right now it is possible to specify the CLI cmds to use to access repository contents, however this information gets not passed to the webapp and thus history/annotations might be not available via web even so the information is already in the DB.

The attached patch takes this into account, makes ScmChecker obsolete, some
other small enhancements wrt. source code readability/lang usage and introduces 2 new CLI options:
-K ... list all repository pathes
-k repositoryPath ... clean the cache for the given repositories

The second attachment is an example script, how we currently use the indexer:
opengrok -c ~/gf/src/opengrok.rc -v -p deploy</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>82102</commentid>
              <attachid>4505</attachid>
            <who name="Jens Elkner">jel+osolbugs</who>
            <bug_when>2011-03-31 05:19:08 +0000</bug_when>
            <thetext>Created attachment 4505
CLI client config pass + misc enhancements</thetext>
          </long_desc>
          <long_desc isprivate="0">
            <commentid>82103</commentid>
              <attachid>4506</attachid>
            <who name="Jens Elkner">jel+osolbugs</who>
            <bug_when>2011-03-31 05:21:04 +0000</bug_when>
            <thetext>Created attachment 4506
example indexer script (may help to understand the issue)</thetext>
          </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
              isurl="0"
          >
            <attachid>4505</attachid>
            <date>2011-03-31 05:19:00 +0000</date>
            <delta_ts>2011-03-31 05:19:08 +0000</delta_ts>
            <desc>CLI client config pass + misc enhancements</desc>
            <filename>cliwebapp.patch</filename>
            <type>text/plain</type>
            <size>129773</size>
            <attacher>jel+osolbugs</attacher>
            
              <data encoding="base64">ZGlmZiAtciBiZmU4MjhjYmNjODQgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNp
cy9DdGFncy5qYXZhCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svYW5hbHlzaXMv
Q3RhZ3MuamF2YQlTYXQgRmViIDI2IDE5OjE2OjU4IDIwMTEgKzAxMDAKKysrIGIvc3JjL29yZy9v
cGVuc29sYXJpcy9vcGVuZ3Jvay9hbmFseXNpcy9DdGFncy5qYXZhCVRodSBNYXIgMzEgMDY6NTk6
MTcgMjAxMSArMDIwMApAQCAtMjI5LDcgKzIzMCw3IEBACiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZm9yIChTdHJpbmcgbmFtZSA6IG5hbWVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGlmIChuYW1lLmxlbmd0aCgpPjApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIC8vbG9nLmZpbmUoIlBhcmFtIERlZiA9ICIrIHN0cmluZyk7Ci0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBkZWZzLmFkZFRhZyhJbnRlZ2VyLnZhbHVlT2YobG51bSksIG5hbWUudHJp
bSgpLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmcy5hZGRUYWcoSW50ZWdlci5w
YXJzZUludChsbnVtKSwgbmFtZS50cmltKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAiYXJndW1lbnQiLCBkZWYudHJpbSgpICsgc2lnbmF0dXJlLnRyaW0oKSk7CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgfQpkaWZmIC1yIGJmZTgyOGNiY2M4NCBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9r
L2FuYWx5c2lzL2FyY2hpdmUvQlppcDJBbmFseXplci5qYXZhCi0tLSBhL3NyYy9vcmcvb3BlbnNv
bGFyaXMvb3Blbmdyb2svYW5hbHlzaXMvYXJjaGl2ZS9CWmlwMkFuYWx5emVyLmphdmEJU2F0IEZl
YiAyNiAxOToxNjo1OCAyMDExICswMTAwCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdy
b2svYW5hbHlzaXMvYXJjaGl2ZS9CWmlwMkFuYWx5emVyLmphdmEJVGh1IE1hciAzMSAwNjo1OTox
NyAyMDExICswMjAwCkBAIC0zNCw3ICszNCw2IEBACiBpbXBvcnQgb3JnLmFwYWNoZS50b29scy5i
emlwMi5DQlppcDJJbnB1dFN0cmVhbTsKIGltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2su
YW5hbHlzaXMuQW5hbHl6ZXJHdXJ1OwogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5h
bmFseXNpcy5GaWxlQW5hbHl6ZXI7Ci1pbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmFu
YWx5c2lzLkZpbGVBbmFseXplci5HZW5yZTsKIGltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdy
b2suYW5hbHlzaXMuRmlsZUFuYWx5emVyRmFjdG9yeTsKIAogLyoqCmRpZmYgLXIgYmZlODI4Y2Jj
Yzg0IHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svY29uZmlndXJhdGlvbi9Db25maWd1cmF0
aW9uLmphdmEKLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9jb25maWd1cmF0aW9u
L0NvbmZpZ3VyYXRpb24uamF2YQlTYXQgRmViIDI2IDE5OjE2OjU4IDIwMTEgKzAxMDAKKysrIGIv
c3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9jb25maWd1cmF0aW9uL0NvbmZpZ3VyYXRpb24u
amF2YQlUaHUgTWFyIDMxIDA2OjU5OjE3IDIwMTEgKzAyMDAKQEAgLTM1LDkgKzM1LDEyIEBACiBp
bXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsKIGltcG9ydCBqYXZhLmlvLk91dHB1dFN0cmVhbTsK
IGltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OworaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u
czsKIGltcG9ydCBqYXZhLnV0aWwuRGF0ZTsKK2ltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKIGlt
cG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKIGltcG9ydCBqYXZhLnV0aWwuTGlzdDsKK2ltcG9ydCBq
YXZhLnV0aWwuTWFwOwogaW1wb3J0IGphdmEudXRpbC5TZXQ7CiBpbXBvcnQgb3JnLm9wZW5zb2xh
cmlzLm9wZW5ncm9rLmhpc3RvcnkuUmVwb3NpdG9yeUluZm87CiBpbXBvcnQgb3JnLm9wZW5zb2xh
cmlzLm9wZW5ncm9rLmluZGV4LkZpbHRlcjsKQEAgLTk0LDE2ICs5NywxNyBAQAogICAgIHByaXZh
dGUgaW50IGNhY2hlUGFnZXM7CiAgICAgcHJpdmF0ZSBTdHJpbmcgZGF0YWJhc2VEcml2ZXI7CiAg
ICAgcHJpdmF0ZSBTdHJpbmcgZGF0YWJhc2VVcmw7Ci0gICAgcHJpdmF0ZSBJbnRlZ2VyIHNjYW5u
aW5nRGVwdGg7CisgICAgcHJpdmF0ZSBpbnQgc2Nhbm5pbmdEZXB0aDsKICAgICBwcml2YXRlIFNl
dDxTdHJpbmc+IGFsbG93ZWRTeW1saW5rczsKICAgICBwcml2YXRlIGJvb2xlYW4gb2JmdXNjYXRp
bmdFTWFpbEFkZHJlc3NlczsKICAgICBwcml2YXRlIGJvb2xlYW4gY2hhdHR5U3RhdHVzUGFnZTsK
KyAgICBwcml2YXRlIE1hcDxTdHJpbmcsU3RyaW5nPiBjbWRzOwogCi0gICAgcHVibGljIEludGVn
ZXIgZ2V0U2Nhbm5pbmdEZXB0aCgpIHsKKyAgICBwdWJsaWMgaW50IGdldFNjYW5uaW5nRGVwdGgo
KSB7CiAgICAgICAgIHJldHVybiBzY2FubmluZ0RlcHRoOwogICAgIH0KIAotICAgIHB1YmxpYyB2
b2lkIHNldFNjYW5uaW5nRGVwdGgoSW50ZWdlciBzY2FubmluZ0RlcHRoKSB7CisgICAgcHVibGlj
IHZvaWQgc2V0U2Nhbm5pbmdEZXB0aChpbnQgc2Nhbm5pbmdEZXB0aCkgewogICAgICAgICB0aGlz
LnNjYW5uaW5nRGVwdGggPSBzY2FubmluZ0RlcHRoOwogICAgIH0KIApAQCAtMTQxLDggKzE0NSwz
MSBAQAogICAgICAgICBzZXRDYWNoZVBhZ2VzKDUpOwogICAgICAgICBzZXRTY2FubmluZ0RlcHRo
KDMpOyAvLyBkZWZhdWx0IGRlcHRoIG9mIHNjYW5uaW5nIGZvciByZXBvc2l0b3JpZXMKICAgICAg
ICAgc2V0QWxsb3dlZFN5bWxpbmtzKG5ldyBIYXNoU2V0PFN0cmluZz4oKSk7CisgICAgICAgIGNt
ZHMgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFN0cmluZz4oKTsKICAgICB9CiAKKyAgICBwdWJsaWMg
U3RyaW5nIGdldFJlcG9DbWQoU3RyaW5nIGNsYXp6TmFtZSkgeworICAgIAlyZXR1cm4gY21kcy5n
ZXQoY2xhenpOYW1lKTsKKyAgICB9CisgICAgcHVibGljIFN0cmluZyBzZXRSZXBvQ21kKFN0cmlu
ZyBjbGF6ek5hbWUsIFN0cmluZyBjbWQpIHsKKyAgICAJaWYgKGNsYXp6TmFtZSA9PSBudWxsKSB7
CisgICAgCQlyZXR1cm4gbnVsbDsKKyAgICAJfQorICAgIAlpZiAoY21kID09IG51bGwgfHwgY21k
Lmxlbmd0aCgpID09IDApIHsKKyAgICAJCXJldHVybiBjbWRzLnJlbW92ZShjbGF6ek5hbWUpOwor
ICAgIAl9CisgICAgCXJldHVybiBjbWRzLnB1dChjbGF6ek5hbWUsIGNtZCk7CisgICAgfQorCisg
ICAgLy8ganVzdCB0byBzYXRpc2Z5IGJlYW4vZGV8ZW5jb2RlciBzdHVmZgorICAgIHB1YmxpYyBN
YXA8U3RyaW5nLCBTdHJpbmc+IGdldENtZHMoKSB7CisgICAgCXJldHVybiBDb2xsZWN0aW9ucy51
bm1vZGlmaWFibGVNYXAoY21kcyk7CisgICAgfQorICAgIHB1YmxpYyB2b2lkIHNldENtZHMoTWFw
PFN0cmluZywgU3RyaW5nPiBjbWRzKSB7CisgICAgCXRoaXMuY21kcy5jbGVhcigpOworICAgIAl0
aGlzLmNtZHMucHV0QWxsKGNtZHMpOworICAgIH0KKyAgICAKICAgICBwdWJsaWMgU3RyaW5nIGdl
dEN0YWdzKCkgewogICAgICAgICByZXR1cm4gY3RhZ3M7CiAgICAgfQpkaWZmIC1yIGJmZTgyOGNi
Y2M4NCBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2NvbmZpZ3VyYXRpb24vUnVudGltZUVu
dmlyb25tZW50LmphdmEKLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9jb25maWd1
cmF0aW9uL1J1bnRpbWVFbnZpcm9ubWVudC5qYXZhCVNhdCBGZWIgMjYgMTk6MTY6NTggMjAxMSAr
MDEwMAorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2NvbmZpZ3VyYXRpb24vUnVu
dGltZUVudmlyb25tZW50LmphdmEJVGh1IE1hciAzMSAwNjo1OToxNyAyMDExICswMjAwCkBAIC0y
NSw2ICsyNSw4IEBACiBpbXBvcnQgamF2YS5iZWFucy5YTUxEZWNvZGVyOwogaW1wb3J0IGphdmEu
YmVhbnMuWE1MRW5jb2RlcjsKIGltcG9ydCBqYXZhLmlvLkJ1ZmZlcmVkSW5wdXRTdHJlYW07Citp
bXBvcnQgamF2YS5pby5CeXRlQXJyYXlJbnB1dFN0cmVhbTsKK2ltcG9ydCBqYXZhLmlvLkJ5dGVB
cnJheU91dHB1dFN0cmVhbTsKIGltcG9ydCBqYXZhLmlvLkZpbGU7CiBpbXBvcnQgamF2YS5pby5G
aWxlTm90Rm91bmRFeGNlcHRpb247CiBpbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKQEAgLTM4
LDYgKzQwLDggQEAKIGltcG9ydCBqYXZhLnV0aWwuU2V0OwogaW1wb3J0IGphdmEudXRpbC5sb2dn
aW5nLkxldmVsOwogaW1wb3J0IGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlcjsKKworaW1wb3J0IG9y
Zy5hcGFjaGUuYmNlbC5nZW5lcmljLkZESVY7CiBpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5n
cm9rLk9wZW5Hcm9rTG9nZ2VyOwogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0
b3J5Lkhpc3RvcnlHdXJ1OwogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5
LlJlcG9zaXRvcnlJbmZvOwpAQCAtOTEsMTEgKzk1LDExIEBACiAgICAgICAgIH0KICAgICB9CiAK
LSAgICBwdWJsaWMgSW50ZWdlciBnZXRTY2FubmluZ0RlcHRoKCkgeworICAgIHB1YmxpYyBpbnQg
Z2V0U2Nhbm5pbmdEZXB0aCgpIHsKICAgICAgICAgcmV0dXJuIHRocmVhZENvbmZpZy5nZXQoKS5n
ZXRTY2FubmluZ0RlcHRoKCk7CiAgICAgfQogCi0gICAgcHVibGljIHZvaWQgc2V0U2Nhbm5pbmdE
ZXB0aChJbnRlZ2VyIHNjYW5uaW5nRGVwdGgpIHsKKyAgICBwdWJsaWMgdm9pZCBzZXRTY2Fubmlu
Z0RlcHRoKGludCBzY2FubmluZ0RlcHRoKSB7CiAgICAgICAgIHRocmVhZENvbmZpZy5nZXQoKS5z
ZXRTY2FubmluZ0RlcHRoKHNjYW5uaW5nRGVwdGgpOwogICAgIH0KIApAQCAtNTEwLDYgKzUxNCwy
OSBAQAogICAgIH0KIAogICAgIC8qKgorICAgICAqIEdldCB0aGUgY2xpZW50IGNvbW1hbmQgdG8g
dXNlIHRvIGFjY2VzcyB0aGUgcmVwb3NpdG9yeSBmb3IgdGhlIGdpdmVuCisgICAgICogZnVsbHkg
cXVhbGxpZmllZCBjbGFzc25hbWUuCisgICAgICogQHBhcmFtIGNsYXp6TmFtZQluYW1lIG9mIHRo
ZSB0YXJnZXRpbmcgY2xhc3MKKyAgICAgKiBAcmV0dXJuIHtAY29kZSBudWxsfSBpZiBub3QgeWV0
IHNldCwgdGhlIGNsaWVudCBjb21tYW5kIG90aGVyd2lzZS4KKyAgICAgKi8KKyAgICBwdWJsaWMg
U3RyaW5nIGdldFJlcG9DbWQoU3RyaW5nIGNsYXp6TmFtZSkgeworICAgIAlyZXR1cm4gdGhyZWFk
Q29uZmlnLmdldCgpLmdldFJlcG9DbWQoY2xhenpOYW1lKTsKKyAgICB9CisgICAgCisgICAgLyoq
CisgICAgICogU2V0IHRoZSBjbGllbnQgY29tbWFuZCB0byB1c2UgdG8gYWNjZXNzIHRoZSByZXBv
c2l0b3J5IGZvciB0aGUgZ2l2ZW4KKyAgICAgKiBmdWxseSBxdWFsbGlmaWVkIGNsYXNzbmFtZS4K
KyAgICAgKiBAcGFyYW0gY2xhenpOYW1lCW5hbWUgb2YgdGhlIHRhcmdldGluZyBjbGFzcy4gSWYg
e0Bjb2RlIG51bGx9IHRoaXMgbWV0aG9kCisgICAgICogCWRvZXMgbm90aGluZy4KKyAgICAgKiBA
cGFyYW0gY21kIHRoZSBjbGllbnQgY29tbWFuZCB0byB1c2UuIElmIHtAY29kZSBudWxsfSB0aGUg
Y29ycmVzcG9uZGluZyAKKyAgICAgKiAJZW50cnkgZm9yIHRoZSBnaXZlbiBjbGF6ek5hbWUgZ2V0
IHJlbW92ZWQuCisgICAgICogQHJldHVybiB0aGUgY2xpZW50IGNvbW1hbmQgcHJldmlvdXNseSBz
ZXQsIHdoaWNoIG1pZ2h0IGJlIHtAY29kZSBudWxsfS4KKyAgICAgKi8KKyAgICBwdWJsaWMgU3Ry
aW5nIHNldFJlcG9DbWQoU3RyaW5nIGNsYXp6TmFtZSwgU3RyaW5nIGNtZCkgeworICAgIAlyZXR1
cm4gdGhyZWFkQ29uZmlnLmdldCgpLnNldFJlcG9DbWQoY2xhenpOYW1lLCBjbWQpOworICAgIH0K
KyAgICAKKyAgICAvKioKICAgICAgKiBTZXRzIHRoZSB1c2VyIHBhZ2UgZm9yIHRoZSBoaXN0b3J5
IGxpc3RpbmcKICAgICAgKiBAcGFyYW0gdXNlclBhZ2UgdGhlIFVSTCBmcmFnbWVudCBwcmVjZWVk
aW5nIHRoZSB1c2VybmFtZSBmcm9tIGhpc3RvcnkKICAgICAgKi8KQEAgLTc3OSwxNCArODA2LDI2
IEBACiAgICAgICAgICAgICBUaHJlYWQgdCA9IG5ldyBUaHJlYWQobmV3IFJ1bm5hYmxlKCkgewog
ICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1
bigpIHsKKyAgICAgICAgICAgICAgICAgICAgQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGJvcyA9IG5l
dyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0oMTw8MTMpOwogICAgICAgICAgICAgICAgICAgICB3aGls
ZSAoIXNvY2suaXNDbG9zZWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgU29ja2V0IHMg
PSBudWxsOworICAgICAgICAgICAgICAgICAgICAgICAgQnVmZmVyZWRJbnB1dFN0cmVhbSBpbiA9
IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHMgPSBzb2NrLmFjY2VwdCgpOwotICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGxvZy5sb2coTGV2ZWwuRklORSwgIiBPcGVuR3JvazogR290IHJlcXVlc3QgZnJvbSB7MH0iLCBz
LmdldEluZXRBZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3MoKSk7Ci0gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgQnVmZmVyZWRJbnB1dFN0cmVhbSBpbiA9IG5ldyBCdWZmZXJlZElucHV0U3RyZWFt
KHMuZ2V0SW5wdXRTdHJlYW0oKSk7Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgWE1MRGVjb2RlciBkID0gbmV3IFhNTERlY29kZXIobmV3
IEJ1ZmZlcmVkSW5wdXRTdHJlYW0oaW4pKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBi
b3MucmVzZXQoKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cubG9nKExldmVsLkZJ
TkUsICJPcGVuR3JvazogR290IHJlcXVlc3QgZnJvbSB7MH0iLAorICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIAlzLmdldEluZXRBZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3MoKSk7CisgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaW4gPSBuZXcgQnVmZmVyZWRJbnB1dFN0cmVhbShzLmdldElu
cHV0U3RyZWFtKCkpOworICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBidWYgPSBu
ZXcgYnl0ZVsxMDI0XTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgbGVuOworICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgobGVuID0gaW4ucmVhZChidWYpKSAhPSAt
MSkgeworICAgICAgICAgICAgICAgICAgICAgICAgICAgIAlib3Mud3JpdGUoYnVmLCAwLCBsZW4p
OworICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBidWYgPSBib3MudG9CeXRlQXJyYXkoKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBpZiAobG9nLmlzTG9nZ2FibGUoTGV2ZWwuRklORSkpIHsKKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbG9nLmxvZyhMZXZlbC5GSU5FLCAibmV3IGNvbmZpZzoiICsgbmV3IFN0cmlu
ZyhidWYpKTsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CisgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgWE1MRGVjb2RlciBkID0gbmV3IFhNTERlY29kZXIobmV3IEJ5dGVBcnJheUlu
cHV0U3RyZWFtKGJ1ZikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdCBvYmog
PSBkLnJlYWRPYmplY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLmNsb3NlKCk7
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCkBAIC04MDAsMTIgKzgzOSwxMSBAQAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5sb2coTGV2ZWwuU0VWRVJFLCAiRXJyb3IgcGFy
c2luZyBjb25maWcgZmlsZTogIiwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFs
bHkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzICE9IG51bGwpIHsKLSAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHMuY2xvc2UoKTsKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
fSBjYXRjaCAoSU9FeGNlcHRpb24gZXgpIHsKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGxvZy5sb2coTGV2ZWwuV0FSTklORywgIkludGVycnVwdCBjbG9zaW5nIGNvbmZpZyBs
aXN0ZW5lciByZWFkZXIgc29ja2V0OiAiLCBleCk7Ci0gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIH0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsgcy5jbG9zZSgp
OyB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHsgLyogaWdub3JlICovIH0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB9CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluICE9IG51
bGwpIHsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgIAkJdHJ5IHsgaW4uY2xvc2UoKTsgfSBj
YXRjaCAoRXhjZXB0aW9uIHgpIHsgLyogaWdub3JlICovIH0KKwkJCQkJCQl9CiAgICAgICAgICAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICB9
CmRpZmYgLXIgYmZlODI4Y2JjYzg0IHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9y
eS9CYXphYXJSZXBvc2l0b3J5LmphdmEKLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jv
ay9oaXN0b3J5L0JhemFhclJlcG9zaXRvcnkuamF2YQlTYXQgRmViIDI2IDE5OjE2OjU4IDIwMTEg
KzAxMDAKKysrIGIvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L0JhemFhclJl
cG9zaXRvcnkuamF2YQlUaHUgTWFyIDMxIDA2OjU5OjE3IDIwMTEgKzAyMDAKQEAgLTQ0LDkgKzQ0
LDExIEBACiAgKi8KIHB1YmxpYyBjbGFzcyBCYXphYXJSZXBvc2l0b3J5IGV4dGVuZHMgUmVwb3Np
dG9yeSB7CiAgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0g
MUw7Ci0gICAgcHJpdmF0ZSBzdGF0aWMgU2NtQ2hlY2tlciBienJCaW5hcnkgPSBuZXcgU2NtQ2hl
Y2tlcihuZXcgU3RyaW5nW10gewotICAgICAgICBTeXN0ZW0uZ2V0UHJvcGVydHkoIm9yZy5vcGVu
c29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5LkJhemFhciIsICJienIiKSwKLSAgICAgICAgIi0taGVs
cCIgfSk7CisgICAgLyoqIFRoZSBwcm9wZXJ0eSBuYW1lIHVzZWQgdG8gb2J0YWluIHRoZSBjbGll
bnQgY29tbWFuZCBmb3IgdGhpc3JlcG9zaXRvcnkuICovCisgICAgcHVibGljIHN0YXRpYyBmaW5h
bCBTdHJpbmcgQ01EX1BST1BFUlRZX0tFWSA9IAorICAgIAkib3JnLm9wZW5zb2xhcmlzLm9wZW5n
cm9rLmhpc3RvcnkuQmF6YWFyIjsKKyAgICAvKiogVGhlIGNvbW1hbmQgdG8gdXNlIHRvIGFjY2Vz
cyB0aGUgcmVwb3NpdG9yeSBpZiBub25lIHdhcyBnaXZlbiBleHBsaWNpdGx5ICovCisgICAgcHVi
bGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ01EX0ZBTExCQUNLID0gImJ6ciI7CiAKICAgICBwdWJs
aWMgQmF6YWFyUmVwb3NpdG9yeSgpIHsKICAgICAgICAgdHlwZSA9ICJCYXphYXIiOwpAQCAtNTQs
MjIgKzU2LDE1IEBACiAgICAgfQogCiAgICAvKioKLSAgICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhl
IEJhemFhciBjb21tYW5kIHRoYXQgc2hvdWxkIGJlIHVzZWQuCi0gICAgICogCi0gICAgICogQHJl
dHVybiB0aGUgbmFtZSBvZiB0aGUgYnpyIGNvbW1hbmQgaW4gdXNlCi0gICAgICovCi0gICAgcHJp
dmF0ZSBTdHJpbmcgZ2V0Q29tbWFuZCgpIHsKLSAgICAgICAgcmV0dXJuIFN5c3RlbS5nZXRQcm9w
ZXJ0eSgib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuQmF6YWFyIiwgImJ6ciIpOwot
ICAgIH0KLSAgICAKLSAgIC8qKgogICAgICAqIEdldCBhbiBleGVjdXRvciB0byBiZSB1c2VkIGZv
ciByZXRyaWV2aW5nIHRoZSBoaXN0b3J5IGxvZyBmb3IgdGhlCiAgICAgICogbmFtZWQgZmlsZS4K
ICAgICAgKiAKICAgICAgKiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB0byByZXRyaWV2ZSBoaXN0b3J5
IGZvcgogICAgICAqIEByZXR1cm4gQW4gRXhlY3V0b3IgcmVhZHkgdG8gYmUgc3RhcnRlZAogICAg
ICAqLwotICAgIEV4ZWN1dG9yIGdldEhpc3RvcnlMb2dFeGVjdXRvcihmaW5hbCBGaWxlIGZpbGUs
IGZpbmFsIFN0cmluZyBzaW5jZVJldmlzaW9uKSB0aHJvd3MgSU9FeGNlcHRpb24geworICAgIEV4
ZWN1dG9yIGdldEhpc3RvcnlMb2dFeGVjdXRvcihmaW5hbCBGaWxlIGZpbGUsIGZpbmFsIFN0cmlu
ZyBzaW5jZVJldmlzaW9uKSAKKyAgICAJdGhyb3dzIElPRXhjZXB0aW9uIAorICAgIHsKICAgICAg
ICAgU3RyaW5nIGFicyA9IGZpbGUuZ2V0Q2Fub25pY2FsUGF0aCgpOwogICAgICAgICBTdHJpbmcg
ZmlsZW5hbWUgPSAiIjsKICAgICAgICAgaWYgKGFicy5sZW5ndGgoKSA+IGRpcmVjdG9yeU5hbWUu
bGVuZ3RoKCkpIHsKQEAgLTc3LDcgKzcyLDggQEAKICAgICAgICAgfQogICAgICAgICAKICAgICAg
ICAgTGlzdDxTdHJpbmc+IGNtZCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwotICAgICAgICBj
bWQuYWRkKGdldENvbW1hbmQoKSk7CisJCWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwg
Q01EX0ZBTExCQUNLKTsKKyAgICAgICAgY21kLmFkZCh0aGlzLmNtZCk7CiAgICAgICAgIGNtZC5h
ZGQoImxvZyIpOwogCiAgICAgICAgIGlmIChmaWxlLmlzRGlyZWN0b3J5KCkpIHsKQEAgLTk0LDE1
ICs5MCwxOCBAQAogICAgIH0gICAgCiAgICAgCiAgICAgQE92ZXJyaWRlCi0gICAgcHVibGljIElu
cHV0U3RyZWFtIGdldEhpc3RvcnlHZXQoU3RyaW5nIHBhcmVudCwgU3RyaW5nIGJhc2VuYW1lLCBT
dHJpbmcgcmV2KSB7CisgICAgcHVibGljIElucHV0U3RyZWFtIGdldEhpc3RvcnlHZXQoU3RyaW5n
IHBhcmVudCwgU3RyaW5nIGJhc2VuYW1lLCBTdHJpbmcgcmV2KSAKKyAgICB7CiAgICAgICAgIElu
cHV0U3RyZWFtIHJldCA9IG51bGw7CiAKICAgICAgICAgRmlsZSBkaXJlY3RvcnkgPSBuZXcgRmls
ZShkaXJlY3RvcnlOYW1lKTsKIAogICAgICAgICBQcm9jZXNzIHByb2Nlc3MgPSBudWxsOwogICAg
ICAgICB0cnkgewotICAgICAgICAgICAgU3RyaW5nIGZpbGVuYW1lID0gIChuZXcgRmlsZShwYXJl
bnQsIGJhc2VuYW1lKSkuZ2V0Q2Fub25pY2FsUGF0aCgpLnN1YnN0cmluZyhkaXJlY3RvcnlOYW1l
Lmxlbmd0aCgpICsgMSk7Ci0gICAgICAgICAgICBTdHJpbmcgYXJndltdID0ge2dldENvbW1hbmQo
KSwgImNhdCIsICItciIsIHJldiwgZmlsZW5hbWV9OworICAgICAgICAgICAgU3RyaW5nIGZpbGVu
YW1lID0gIChuZXcgRmlsZShwYXJlbnQsIGJhc2VuYW1lKSkuZ2V0Q2Fub25pY2FsUGF0aCgpCisg
ICAgICAgICAgICAJLnN1YnN0cmluZyhkaXJlY3RvcnlOYW1lLmxlbmd0aCgpICsgMSk7CisgICAg
CQllbnN1cmVDb21tYW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAg
ICAgICBTdHJpbmcgYXJndltdID0ge2NtZCwgImNhdCIsICItciIsIHJldiwgZmlsZW5hbWV9Owog
ICAgICAgICAgICAgcHJvY2VzcyA9IFJ1bnRpbWUuZ2V0UnVudGltZSgpLmV4ZWMoYXJndiwgbnVs
bCwgZGlyZWN0b3J5KTsKIAogICAgICAgICAgICAgQnl0ZUFycmF5T3V0cHV0U3RyZWFtIG91dCA9
IG5ldyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0oKTsKQEAgLTExOCw3ICsxMTcsOCBAQAogICAgICAg
ICAgICAgCiAgICAgICAgICAgICByZXQgPSBuZXcgQnVmZmVyZWRJbnB1dFN0cmVhbShuZXcgQnl0
ZUFycmF5SW5wdXRTdHJlYW0ob3V0LnRvQnl0ZUFycmF5KCkpKTsKICAgICAgICAgfSBjYXRjaCAo
RXhjZXB0aW9uIGV4cCkgewotICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCku
bG9nKExldmVsLlNFVkVSRSwgIkZhaWxlZCB0byBnZXQgaGlzdG9yeTogIiArIGV4cC5nZXRDbGFz
cygpLnRvU3RyaW5nKCksIGV4cCk7CisgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dn
ZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAKKyAgICAgICAgICAgIAkiRmFpbGVkIHRvIGdldCBoaXN0
b3J5OiAiICsgZXhwLmdldENsYXNzKCkudG9TdHJpbmcoKSwgZXhwKTsKICAgICAgICAgfSBmaW5h
bGx5IHsKICAgICAgICAgICAgIC8vIENsZWFuIHVwIHpvbWJpZS1wcm9jZXNzZXMuLi4KICAgICAg
ICAgICAgIGlmIChwcm9jZXNzICE9IG51bGwpIHsKQEAgLTE0OCw3ICsxNDgsOCBAQAogICAgIEBP
dmVycmlkZQogICAgIHB1YmxpYyBBbm5vdGF0aW9uIGFubm90YXRlKEZpbGUgZmlsZSwgU3RyaW5n
IHJldmlzaW9uKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICBMaXN0PFN0cmluZz4gY21k
ID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7Ci0gICAgICAgIGNtZC5hZGQoZ2V0Q29tbWFuZCgp
KTsKKwkJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVSVFlfS0VZLCBDTURfRkFMTEJBQ0spOworICAg
ICAgICBjbWQuYWRkKHRoaXMuY21kKTsKICAgICAgICAgY21kLmFkZCgiYmxhbWUiKTsKICAgICAg
ICAgY21kLmFkZCgiLS1hbGwiKTsKICAgICAgICAgY21kLmFkZCgiLS1sb25nIik7CkBAIC0xNjIs
MTMgKzE2MywxNyBAQAogICAgICAgICBpbnQgc3RhdHVzID0gZXhlYy5leGVjKCk7CiAgICAgICAg
IAogICAgICAgICBpZiAoc3RhdHVzICE9IDApIHsKLSAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2Vy
LmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAiRmFpbGVkIHRvIGdldCBhbm5vdGF0aW9u
cyBmb3I6IFwiezB9XCIgRXhpdCBjb2RlOiB7MX0iLCBuZXcgT2JqZWN0W117ZmlsZS5nZXRBYnNv
bHV0ZVBhdGgoKSwgU3RyaW5nLnZhbHVlT2Yoc3RhdHVzKX0pOworICAgICAgICAgICAgT3Blbkdy
b2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsIAorICAgICAgICAgICAgCSJG
YWlsZWQgdG8gZ2V0IGFubm90YXRpb25zIGZvcjogXCJ7MH1cIiBFeGl0IGNvZGU6IHsxfSIsIAor
ICAgICAgICAgICAgCW5ldyBPYmplY3RbXXtmaWxlLmdldEFic29sdXRlUGF0aCgpLCBTdHJpbmcu
dmFsdWVPZihzdGF0dXMpfSk7CiAgICAgICAgIH0KIAogICAgICAgICByZXR1cm4gcGFyc2VBbm5v
dGF0aW9uKGV4ZWMuZ2V0T3V0cHV0UmVhZGVyKCksIGZpbGUuZ2V0TmFtZSgpKTsKICAgICB9CiAK
LSAgICBwcm90ZWN0ZWQgQW5ub3RhdGlvbiBwYXJzZUFubm90YXRpb24oUmVhZGVyIGlucHV0LCBT
dHJpbmcgZmlsZU5hbWUpIHRocm93cyBJT0V4Y2VwdGlvbiB7CisgICAgcHJvdGVjdGVkIEFubm90
YXRpb24gcGFyc2VBbm5vdGF0aW9uKFJlYWRlciBpbnB1dCwgU3RyaW5nIGZpbGVOYW1lKSAKKyAg
ICAJdGhyb3dzIElPRXhjZXB0aW9uIAorICAgIHsKICAgICAgICAgQnVmZmVyZWRSZWFkZXIgaW4g
PSBuZXcgQnVmZmVyZWRSZWFkZXIoaW5wdXQpOwogICAgICAgICBBbm5vdGF0aW9uIHJldCA9IG5l
dyBBbm5vdGF0aW9uKGZpbGVOYW1lKTsKICAgICAgICAgU3RyaW5nIGxpbmUgPSAiIjsKQEAgLTE4
Miw3ICsxODcsOSBAQAogICAgICAgICAgICAgICAgIFN0cmluZyBhdXRob3IgPSBtYXRjaGVyLmdy
b3VwKDIpLnRyaW0oKTsKICAgICAgICAgICAgICAgICByZXQuYWRkTGluZShyZXYsIGF1dGhvciwg
dHJ1ZSk7CiAgICAgICAgICAgICB9IGVsc2UgewotICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9n
Z2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5TRVZFUkUsICJFcnJvcjogZGlkIG5vdCBmaW5kIGFu
bm90YXRpb24gaW4gbGluZSB7MH06IFt7MX1dIiwgbmV3IE9iamVjdFtde1N0cmluZy52YWx1ZU9m
KGxpbmVubyksIGxpbmV9KTsKKyAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dn
ZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAKKyAgICAgICAgICAgICAgICAJIkVycm9yOiBkaWQgbm90
IGZpbmQgYW5ub3RhdGlvbiBpbiBsaW5lIHswfTogW3sxfV0iLCAKKyAgICAgICAgICAgICAgICAJ
bmV3IE9iamVjdFtde1N0cmluZy52YWx1ZU9mKGxpbmVubyksIGxpbmV9KTsKICAgICAgICAgICAg
IH0KICAgICAgICAgfQogICAgICAgICByZXR1cm4gcmV0OwpAQCAtMTk4LDcgKzIwNSw4IEBACiAg
ICAgICAgIEZpbGUgZGlyZWN0b3J5ID0gbmV3IEZpbGUoZ2V0RGlyZWN0b3J5TmFtZSgpKTsKIAog
ICAgICAgICBMaXN0PFN0cmluZz4gY21kID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7Ci0gICAg
ICAgIGNtZC5hZGQoZ2V0Q29tbWFuZCgpKTsKKwkJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVSVFlf
S0VZLCBDTURfRkFMTEJBQ0spOworICAgICAgICBjbWQuYWRkKHRoaXMuY21kKTsKICAgICAgICAg
Y21kLmFkZCgiaW5mbyIpOwogICAgICAgICBFeGVjdXRvciBleGVjdXRvciA9IG5ldyBFeGVjdXRv
cihjbWQsIGRpcmVjdG9yeSk7CiAgICAgICAgIGlmIChleGVjdXRvci5leGVjKCkgIT0gMCkgewpA
QCAtMjA3LDcgKzIxNSw3IEBACiAKICAgICAgICAgaWYgKGV4ZWN1dG9yLmdldE91dHB1dFN0cmlu
ZygpLmluZGV4T2YoInBhcmVudCBicmFuY2g6IikgIT0gLTEpIHsKICAgICAgICAgICAgIGNtZC5j
bGVhcigpOwotICAgICAgICAgICAgY21kLmFkZChnZXRDb21tYW5kKCkpOworICAgICAgICAgICAg
Y21kLmFkZCh0aGlzLmNtZCk7CiAgICAgICAgICAgICBjbWQuYWRkKCJ1cCIpOwogICAgICAgICAg
ICAgZXhlY3V0b3IgPSBuZXcgRXhlY3V0b3IoY21kLCBkaXJlY3RvcnkpOwogICAgICAgICAgICAg
aWYgKGV4ZWN1dG9yLmV4ZWMoKSAhPSAwKSB7CkBAIC0yMzAsMTMgKzIzOCwxNyBAQAogICAgICAg
IGlmIChmaWxlLmlzRGlyZWN0b3J5KCkpIHsKICAgICAgICAgRmlsZSBmID0gbmV3IEZpbGUoZmls
ZSwgIi5ienIiKTsKICAgICAgICAgcmV0dXJuIGYuZXhpc3RzKCkgJiYgZi5pc0RpcmVjdG9yeSgp
OwotICAgICAgIH0gZWxzZSB7Ci0gICAgICAgIHJldHVybiBmYWxzZTsgfQorICAgICAgIH0KKyAg
ICAgICByZXR1cm4gZmFsc2U7CiAgICAgfQogICAgIAogICAgIEBPdmVycmlkZQogICAgIHB1Ymxp
YyBib29sZWFuIGlzV29ya2luZygpIHsKLSAgICAgICAgcmV0dXJuIGJ6ckJpbmFyeS5hdmFpbGFi
bGU7CisgICAgCWlmICh3b3JraW5nID09IG51bGwpIHsKKyAgICAJCWVuc3VyZUNvbW1hbmQoQ01E
X1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgCXdvcmtpbmcgPSBjaGVja0Nt
ZChuZXcgU3RyaW5nW117IGNtZCwgIi0taGVscCIgfSk7CisgICAgCX0KKyAgICAgICAgcmV0dXJu
IHdvcmtpbmcuYm9vbGVhblZhbHVlKCk7CiAgICAgfQogCiAgICAgQE92ZXJyaWRlCmRpZmYgLXIg
YmZlODI4Y2JjYzg0IHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9DVlNSZXBv
c2l0b3J5LmphdmEKLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L0NW
U1JlcG9zaXRvcnkuamF2YQlTYXQgRmViIDI2IDE5OjE2OjU4IDIwMTEgKzAxMDAKKysrIGIvc3Jj
L29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L0NWU1JlcG9zaXRvcnkuamF2YQlUaHUg
TWFyIDMxIDA2OjU5OjE3IDIwMTEgKzAyMDAKQEAgLTQ1LDI4ICs0NSwyNCBAQAogICovCiBwdWJs
aWMgY2xhc3MgQ1ZTUmVwb3NpdG9yeSBleHRlbmRzIFJDU1JlcG9zaXRvcnkgewogICAgIHByaXZh
dGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMOwotCi0gICAgcHJpdmF0
ZSBzdGF0aWMgU2NtQ2hlY2tlciBjdnNCaW5hcnkgPSBuZXcgU2NtQ2hlY2tlcihuZXcgU3RyaW5n
W117Ci0gICAgICAgICAgICAgICAgZ2V0Q29tbWFuZCgpLCAiLS12ZXJzaW9uIgotICAgICAgICAg
ICAgfSk7CisgICAgLyoqIFRoZSBwcm9wZXJ0eSBuYW1lIHVzZWQgdG8gb2J0YWluIHRoZSBjbGll
bnQgY29tbWFuZCBmb3IgcmVwb3NpdG9yeS4gKi8KKyAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0
cmluZyBDTURfUFJPUEVSVFlfS0VZID0gCisgICAgCSJvcmcub3BlbnNvbGFyaXMub3Blbmdyb2su
aGlzdG9yeS5jdnMiOworICAgIC8qKiBUaGUgY29tbWFuZCB0byB1c2UgdG8gYWNjZXNzIHRoZSBy
ZXBvc2l0b3J5IGlmIG5vbmUgd2FzIGdpdmVuIGV4cGxpY2l0bHkgKi8KKyAgICBwdWJsaWMgc3Rh
dGljIGZpbmFsIFN0cmluZyBDTURfRkFMTEJBQ0sgPSAiY3ZzIjsKIAogICAgIHB1YmxpYyBDVlNS
ZXBvc2l0b3J5KCkgewogICAgICAgICB0eXBlID0gIkNWUyI7CiAgICAgICAgIGRhdGVQYXR0ZXJu
ID0gInl5eXktTU0tZGQgaGg6bW06c3MiOwogICAgIH0KICAgICAKLSAgIC8qKgotICAgICAqIEdl
dCB0aGUgbmFtZSBvZiB0aGUgQ3ZzIGNvbW1hbmQgdGhhdCBzaG91bGQgYmUgdXNlZAotICAgICAq
IAotICAgICAqIEByZXR1cm4gdGhlIG5hbWUgb2YgdGhlIGN2cyBjb21tYW5kIGluIHVzZQotICAg
ICAqLwotICAgIHByaXZhdGUgc3RhdGljIFN0cmluZyBnZXRDb21tYW5kKCkgewotICAgICAgICBy
ZXR1cm4gU3lzdGVtLmdldFByb3BlcnR5KCJvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suaGlzdG9y
eS5jdnMiLCAiY3ZzIik7Ci0gICAgfQotCiAgICAgQE92ZXJyaWRlCiAgICAgcHVibGljIGJvb2xl
YW4gaXNXb3JraW5nKCkgewotICAgICAgICByZXR1cm4gY3ZzQmluYXJ5LmF2YWlsYWJsZTsKKyAg
ICAJaWYgKHdvcmtpbmcgPT0gbnVsbCkgeworICAgIAkJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVS
VFlfS0VZLCBDTURfRkFMTEJBQ0spOworICAgICAgICAJd29ya2luZyA9IGNoZWNrQ21kKG5ldyBT
dHJpbmdbXXsgY21kICwgIi0tdmVyc2lvbiIgfSk7CisgICAgCX0KKyAgICAgICAgcmV0dXJuIHdv
cmtpbmcuYm9vbGVhblZhbHVlKCk7CiAgICAgfQogCiAgICAgQE92ZXJyaWRlCkBAIC03NSw5ICs3
MSw4IEBACiAgICAgICAgICAgICAgICAgUkNTSGlzdG9yeVBhcnNlci5nZXRDVlNGaWxlKGZpbGUu
Z2V0UGFyZW50KCksIGZpbGUuZ2V0TmFtZSgpKTsKICAgICAgICAgaWYgKGN2c0ZpbGUgIT0gbnVs
bCAmJiBjdnNGaWxlLmV4aXN0cygpKSB7CiAgICAgICAgICAgICByZXR1cm4gY3ZzRmlsZTsKLSAg
ICAgICAgfSBlbHNlIHsKLSAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICB9CisgICAg
ICAgIHJldHVybiBudWxsOwogICAgIH0KIAogICAgIEBPdmVycmlkZQpAQCAtODUsOCArODAsOCBA
QAogICAgICAgIGlmIChmaWxlLmlzRGlyZWN0b3J5KCkpIHsKICAgICAgICAgRmlsZSBjdnNEaXIg
PSBuZXcgRmlsZShmaWxlLCAiQ1ZTIik7CiAgICAgICAgIHJldHVybiBjdnNEaXIuaXNEaXJlY3Rv
cnkoKTsKLSAgICAgICB9IGVsc2UgewotICAgICAgICByZXR1cm4gZmFsc2U7IH0KKyAgICAgICB9
CisgICAgICAgcmV0dXJuIGZhbHNlOwogICAgIH0KICAgICAKICAgICBAT3ZlcnJpZGUKQEAgLTk0
LDcgKzg5LDggQEAKICAgICAgICAgRmlsZSBkaXJlY3RvcnkgPSBuZXcgRmlsZShnZXREaXJlY3Rv
cnlOYW1lKCkpOwogCiAgICAgICAgIExpc3Q8U3RyaW5nPiBjbWQgPSBuZXcgQXJyYXlMaXN0PFN0
cmluZz4oKTsKLSAgICAgICAgY21kLmFkZChnZXRDb21tYW5kKCkpOworCQllbnN1cmVDb21tYW5k
KENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAgIGNtZC5hZGQodGhpcy5j
bWQpOwogICAgICAgICBjbWQuYWRkKCJ1cGRhdGUiKTsKICAgICAgICAgRXhlY3V0b3IgZXhlY3V0
b3IgPSBuZXcgRXhlY3V0b3IoY21kLCBkaXJlY3RvcnkpOwogICAgICAgICBpZiAoZXhlY3V0b3Iu
ZXhlYygpICE9IDApIHsKQEAgLTExOSw3ICsxMTUsOCBAQAogICAgICAgICB9CiAKICAgICAgICAg
TGlzdDxTdHJpbmc+IGNtZCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwotICAgICAgICBjbWQu
YWRkKGdldENvbW1hbmQoKSk7CisJCWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01E
X0ZBTExCQUNLKTsKKyAgICAgICAgY21kLmFkZCh0aGlzLmNtZCk7CiAgICAgICAgIGNtZC5hZGQo
ImxvZyIpOwogICAgICAgICBjbWQuYWRkKCItTiIpOyAvL2Rvbid0IGRpc3BsYXkgdGFncwogCkBA
IC0xMzQsMjAgKzEzMSwyNyBAQAogICAgICAgICAgICAgICAgICAgaWYgKGxpbmUhPW51bGwpIHsK
ICAgICAgICAgICAgICAgICAgICAgICAgICBicmFuY2g9bGluZS5zdWJzdHJpbmcoMSk7IH0KICAg
ICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4cCkgewotICAgICAgICAgICAgICAg
ICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgIkZhaWxl
ZCB0byBnZXQgcmV2aXNpb24gdGFnIG9mIHswfSIsIGdldERpcmVjdG9yeU5hbWUoKSArICI6ICIr
ZXhwLmdldENsYXNzKCkudG9TdHJpbmcoKSApOworICAgICAgICAgICAgICAgICAgICBPcGVuR3Jv
a0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgCisgICAgICAgICAgICAgICAg
ICAgIAkiRmFpbGVkIHRvIGdldCByZXZpc2lvbiB0YWcgb2YgezB9IiwgCisgICAgICAgICAgICAg
ICAgICAgIAlnZXREaXJlY3RvcnlOYW1lKCkgKyAiOiAiK2V4cC5nZXRDbGFzcygpLnRvU3RyaW5n
KCkgKTsKICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAg
YnIuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgfSBjYXRj
aCAoSU9FeGNlcHRpb24gZXgpewotICAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRM
b2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgIkZhaWxlZCB0byB3b3JrIHdpdGggQ1ZTL1RhZyBm
aWxlIG9mIHswfSIsIGdldERpcmVjdG9yeU5hbWUoKSArICI6ICIrZXguZ2V0Q2xhc3MoKS50b1N0
cmluZygpICk7CisgICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxv
ZyhMZXZlbC5XQVJOSU5HLCAKKyAgICAgICAgICAgICAgICAJICJGYWlsZWQgdG8gd29yayB3aXRo
IENWUy9UYWcgZmlsZSBvZiB7MH0iLCAKKyAgICAgICAgICAgICAgICAJIGdldERpcmVjdG9yeU5h
bWUoKSArICI6ICIrZXguZ2V0Q2xhc3MoKS50b1N0cmluZygpICk7CiAgICAgICAgICAgICAgICAg
fQogCiAKICAgICAgICAgICAgIH0KICAgICAgICAgICAgIGVsc2UgeyBpc0JyYW5jaD1Cb29sZWFu
LkZBTFNFOyB9CiAgICAgICAgIH0KLSAgICAgICAgaWYgKGlzQnJhbmNoLmVxdWFscyhCb29sZWFu
LlRSVUUpICYmIGJyYW5jaCE9bnVsbCAmJiAhYnJhbmNoLmlzRW1wdHkoKSkgewotICAgICAgICAg
ICAgIGNtZC5hZGQoIi1yIiticmFuY2gpOyAvL2p1c3QgZ2VuZXJhdGUgVEhJUyBicmFuY2ggaGlz
dG9yeSwgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgb3RoZXIgYnJhbmNoZXMgd2hpY2ggYXJlIG5v
dCBjaGVja2VkIG91dCAgICAgICAgICAgIAorICAgICAgICBpZiAoaXNCcmFuY2guZXF1YWxzKEJv
b2xlYW4uVFJVRSkgJiYgYnJhbmNoIT1udWxsICYmICFicmFuY2guaXNFbXB0eSgpKSAKKyAgICAg
ICAgeworICAgICAgICAJLy9qdXN0IGdlbmVyYXRlIFRISVMgYnJhbmNoIGhpc3RvcnksIHdlIGRv
bid0IGNhcmUgYWJvdXQgdGhlIG90aGVyIAorICAgICAgICAJLy8gYnJhbmNoZXMgd2hpY2ggYXJl
IG5vdCBjaGVja2VkIG91dAorICAgICAgICAgICAgY21kLmFkZCgiLXIiK2JyYW5jaCk7CiAgICAg
ICAgIH0KICAgICAgICAgCiAgICAgICAgIGlmIChmaWxlbmFtZS5sZW5ndGgoKSA+IDApIHsKQEAg
LTE1Nyw3ICsxNjEsOCBAQAogICAgIH0KIAogICAgIEBPdmVycmlkZQotICAgIHB1YmxpYyBJbnB1
dFN0cmVhbSBnZXRIaXN0b3J5R2V0KFN0cmluZyBwYXJlbnQsIFN0cmluZyBiYXNlbmFtZSwgU3Ry
aW5nIHJldikgeworICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRIaXN0b3J5R2V0KFN0cmluZyBw
YXJlbnQsIFN0cmluZyBiYXNlbmFtZSwgU3RyaW5nIHJldikKKyAgICB7CiAgICAgICAgIElucHV0
U3RyZWFtIHJldCA9IG51bGw7CiAKICAgICAgICAgUHJvY2VzcyBwcm9jZXNzID0gbnVsbDsKQEAg
LTE2OCw3ICsxNzMsOCBAQAogICAgICAgICAgICAgcmV2aXNpb24gPSByZXYuc3Vic3RyaW5nKDAs
IHJldi5pbmRleE9mKCc6JykpOwogICAgICAgICB9CiAgICAgICAgIHRyeSB7Ci0gICAgICAgICAg
ICBTdHJpbmcgYXJndltdID0ge2dldENvbW1hbmQoKSwgInVwIiwgIi1wIiwgIi1yIiwgcmV2aXNp
b24sIGJhc2VuYW1lfTsKKyAgICAJCWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01E
X0ZBTExCQUNLKTsKKyAgICAgICAgICAgIFN0cmluZyBhcmd2W10gPSB7Y21kLCAidXAiLCAiLXAi
LCAiLXIiLCByZXZpc2lvbiwgYmFzZW5hbWV9OwogICAgICAgICAgICAgcHJvY2VzcyA9IFJ1bnRp
bWUuZ2V0UnVudGltZSgpLmV4ZWMoYXJndiwgbnVsbCwgbmV3IEZpbGUocGFyZW50KSk7CiAKICAg
ICAgICAgICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBvdXQgPSBuZXcgQnl0ZUFycmF5T3V0cHV0
U3RyZWFtKCk7CkBAIC0xODQsMTMgKzE5MCwxNSBAQAogCiAgICAgICAgICAgICByZXQgPSBuZXcg
QnVmZmVyZWRJbnB1dFN0cmVhbShuZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0ob3V0LnRvQnl0ZUFy
cmF5KCkpKTsKICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4cCkgewotICAgICAgICAgICAg
T3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLlNFVkVSRSwgIkZhaWxlZCB0byBn
ZXQgaGlzdG9yeTogezB9IiwgZXhwLmdldENsYXNzKCkudG9TdHJpbmcoKSk7CisgICAgICAgICAg
ICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAKKyAgICAgICAg
ICAgIAkiRmFpbGVkIHRvIGdldCBoaXN0b3J5OiB7MH0iLCBleHAuZ2V0Q2xhc3MoKS50b1N0cmlu
ZygpKTsKICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgIGlmIChpbiAhPSBudWxsKSB7
CiAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgaW4uY2xvc2UoKTsK
ICAgICAgICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7Ci0gICAgICAgICAgICAg
ICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAiQW4g
ZXJyb3Igb2NjdXJlZCB3aGlsZSBjbG9zaW5nIHN0cmVhbSIsIGUpOworICAgICAgICAgICAgICAg
ICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgCisgICAg
ICAgICAgICAgICAgICAgIAkiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBjbG9zaW5nIHN0cmVhbSIs
IGUpOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0KICAgICAgICAgICAgIC8vIENs
ZWFuIHVwIHpvbWJpZS1wcm9jZXNzZXMuLi4KQEAgLTIyOCw3ICsyMzYsOCBAQAogICAgIEBPdmVy
cmlkZQogICAgIEFubm90YXRpb24gYW5ub3RhdGUoRmlsZSBmaWxlLCBTdHJpbmcgcmV2aXNpb24p
IHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgIEFycmF5TGlzdDxTdHJpbmc+IGNtZCA9IG5l
dyBBcnJheUxpc3Q8U3RyaW5nPigpOwotICAgICAgICBjbWQuYWRkKGdldENvbW1hbmQoKSk7CisJ
CWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAg
Y21kLmFkZCh0aGlzLmNtZCk7CiAgICAgICAgIGNtZC5hZGQoImFubm90YXRlIik7CiAgICAgICAg
IGlmIChyZXZpc2lvbiAhPSBudWxsKSB7CiAgICAgICAgICAgICBjbWQuYWRkKCItciIpOwpAQCAt
MjQwLDcgKzI0OSw5IEBACiAgICAgICAgIGludCBzdGF0dXMgPSBleGVjLmV4ZWMoKTsKIAogICAg
ICAgICBpZiAoc3RhdHVzICE9IDApIHsKLSAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExv
Z2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAiRmFpbGVkIHRvIGdldCBhbm5vdGF0aW9ucyBmb3I6
IFwiezB9XCIgRXhpdCBjb2RlOiB7MX0iLCBuZXcgT2JqZWN0W117ZmlsZS5nZXRBYnNvbHV0ZVBh
dGgoKSwgU3RyaW5nLnZhbHVlT2Yoc3RhdHVzKX0pOworICAgICAgICAgICAgT3Blbkdyb2tMb2dn
ZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsIAorICAgICAgICAgICAgCSJGYWlsZWQg
dG8gZ2V0IGFubm90YXRpb25zIGZvcjogXCJ7MH1cIiBFeGl0IGNvZGU6IHsxfSIsCisgICAgICAg
ICAgICAJbmV3IE9iamVjdFtde2ZpbGUuZ2V0QWJzb2x1dGVQYXRoKCksIFN0cmluZy52YWx1ZU9m
KHN0YXR1cyl9KTsKICAgICAgICAgfQogCiAgICAgICAgIHJldHVybiBwYXJzZUFubm90YXRpb24o
ZXhlYy5nZXRPdXRwdXRSZWFkZXIoKSwgZmlsZS5nZXROYW1lKCkpOwpAQCAtMjUwLDMxICsyNjEs
MzcgQEAKICAgICBwcml2YXRlIGZpbmFsIHN0YXRpYyBQYXR0ZXJuIEFOTk9UQVRFX1BBVFRFUk4g
PQogICAgICAgICBQYXR0ZXJuLmNvbXBpbGUoIihbXFwuXFxkXSspXFxXK1xcKChcXHcrKSIpOwog
Ci0gICAgcHJvdGVjdGVkIEFubm90YXRpb24gcGFyc2VBbm5vdGF0aW9uKFJlYWRlciBpbnB1dCwg
U3RyaW5nIGZpbGVOYW1lKSB0aHJvd3MgSU9FeGNlcHRpb24gewotICAgICAgICBCdWZmZXJlZFJl
YWRlciBpbiA9IG5ldyBCdWZmZXJlZFJlYWRlcihpbnB1dCk7Ci0gICAgICAgIEFubm90YXRpb24g
cmV0ID0gbmV3IEFubm90YXRpb24oZmlsZU5hbWUpOwotICAgICAgICBTdHJpbmcgbGluZSA9ICIi
OwotICAgICAgICBpbnQgbGluZW5vID0gMDsKLSAgICAgICAgYm9vbGVhbiBoYXNTdGFydGVkID0g
ZmFsc2U7Ci0gICAgICAgIE1hdGNoZXIgbWF0Y2hlciA9IEFOTk9UQVRFX1BBVFRFUk4ubWF0Y2hl
cihsaW5lKTsKLSAgICAgICAgd2hpbGUgKChsaW5lID0gaW4ucmVhZExpbmUoKSkgIT0gbnVsbCkg
ewotICAgICAgICAgICAgLy8gU2tpcCBoZWFkZXIKLSAgICAgICAgICAgIGlmICghaGFzU3RhcnRl
ZCAmJiAobGluZS5sZW5ndGgoKSA9PSAwIHx8ICFDaGFyYWN0ZXIuaXNEaWdpdChsaW5lLmNoYXJB
dCgwKSkpKSB7Ci0gICAgICAgICAgICAgICAgY29udGludWU7Ci0gICAgICAgICAgICB9Ci0gICAg
ICAgICAgICBoYXNTdGFydGVkID0gdHJ1ZTsKLQotICAgICAgICAgICAgLy8gU3RhcnQgcGFyc2lu
ZwotICAgICAgICAgICAgKytsaW5lbm87Ci0gICAgICAgICAgICBtYXRjaGVyLnJlc2V0KGxpbmUp
OwotICAgICAgICAgICAgaWYgKG1hdGNoZXIuZmluZCgpKSB7Ci0gICAgICAgICAgICAgICAgU3Ry
aW5nIHJldiA9IG1hdGNoZXIuZ3JvdXAoMSk7Ci0gICAgICAgICAgICAgICAgU3RyaW5nIGF1dGhv
ciA9IG1hdGNoZXIuZ3JvdXAoMikudHJpbSgpOwotICAgICAgICAgICAgICAgIHJldC5hZGRMaW5l
KHJldiwgYXV0aG9yLCB0cnVlKTsKLSAgICAgICAgICAgIH0gZWxzZSB7Ci0gICAgICAgICAgICAg
ICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLlNFVkVSRSwgIkVycm9yOiBk
aWQgbm90IGZpbmQgYW5ub3RhdGlvbiBpbiBsaW5lIHswfTogW3sxfV0iLCBuZXcgT2JqZWN0W117
U3RyaW5nLnZhbHVlT2YobGluZW5vKSwgbGluZX0pOwotICAgICAgICAgICAgfQotICAgICAgICB9
Ci0gICAgICAgIHJldHVybiByZXQ7Ci0gICAgfQorICAgIHByb3RlY3RlZCBBbm5vdGF0aW9uIHBh
cnNlQW5ub3RhdGlvbihSZWFkZXIgaW5wdXQsIFN0cmluZyBmaWxlTmFtZSkgCisJCXRocm93cyBJ
T0V4Y2VwdGlvbiAKKwl7CisJICAgIEJ1ZmZlcmVkUmVhZGVyIGluID0gbmV3IEJ1ZmZlcmVkUmVh
ZGVyKGlucHV0KTsKKwkgICAgQW5ub3RhdGlvbiByZXQgPSBuZXcgQW5ub3RhdGlvbihmaWxlTmFt
ZSk7CisJICAgIFN0cmluZyBsaW5lID0gIiI7CisJICAgIGludCBsaW5lbm8gPSAwOworCSAgICBi
b29sZWFuIGhhc1N0YXJ0ZWQgPSBmYWxzZTsKKwkgICAgTWF0Y2hlciBtYXRjaGVyID0gQU5OT1RB
VEVfUEFUVEVSTi5tYXRjaGVyKGxpbmUpOworCSAgICB3aGlsZSAoKGxpbmUgPSBpbi5yZWFkTGlu
ZSgpKSAhPSBudWxsKSB7CisJICAgICAgICAvLyBTa2lwIGhlYWRlcgorCSAgICAgICAgaWYgKCFo
YXNTdGFydGVkICYmIChsaW5lLmxlbmd0aCgpID09IDAgCisJICAgICAgICAJfHwgIUNoYXJhY3Rl
ci5pc0RpZ2l0KGxpbmUuY2hhckF0KDApKSkpIAorCSAgICAgICAgeworCSAgICAgICAgICAgIGNv
bnRpbnVlOworCSAgICAgICAgfQorCSAgICAgICAgaGFzU3RhcnRlZCA9IHRydWU7CisJCisJICAg
ICAgICAvLyBTdGFydCBwYXJzaW5nCisJICAgICAgICArK2xpbmVubzsKKwkgICAgICAgIG1hdGNo
ZXIucmVzZXQobGluZSk7CisJICAgICAgICBpZiAobWF0Y2hlci5maW5kKCkpIHsKKwkgICAgICAg
ICAgICBTdHJpbmcgcmV2ID0gbWF0Y2hlci5ncm91cCgxKTsKKwkgICAgICAgICAgICBTdHJpbmcg
YXV0aG9yID0gbWF0Y2hlci5ncm91cCgyKS50cmltKCk7CisJICAgICAgICAgICAgcmV0LmFkZExp
bmUocmV2LCBhdXRob3IsIHRydWUpOworCSAgICAgICAgfSBlbHNlIHsKKwkgICAgICAgICAgICBP
cGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAKKwkgICAgICAgICAg
ICAJIkVycm9yOiBkaWQgbm90IGZpbmQgYW5ub3RhdGlvbiBpbiBsaW5lIHswfTogW3sxfV0iLCAK
KwkgICAgICAgICAgICAJbmV3IE9iamVjdFtde1N0cmluZy52YWx1ZU9mKGxpbmVubyksIGxpbmV9
KTsKKwkgICAgICAgIH0KKwkgICAgfQorCSAgICByZXR1cm4gcmV0OworCX0KIH0KZGlmZiAtciBi
ZmU4MjhjYmNjODQgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L0NsZWFyQ2Fz
ZVJlcG9zaXRvcnkuamF2YQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2hpc3Rv
cnkvQ2xlYXJDYXNlUmVwb3NpdG9yeS5qYXZhCVNhdCBGZWIgMjYgMTk6MTY6NTggMjAxMSArMDEw
MAorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2hpc3RvcnkvQ2xlYXJDYXNlUmVw
b3NpdG9yeS5qYXZhCVRodSBNYXIgMzEgMDY6NTk6MTcgMjAxMSArMDIwMApAQCAtNDAsMjggKzQw
LDIyIEBACiAgKi8KIHB1YmxpYyBjbGFzcyBDbGVhckNhc2VSZXBvc2l0b3J5IGV4dGVuZHMgUmVw
b3NpdG9yeSB7CiAgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlE
ID0gMUw7Ci0KLSAgICBwcml2YXRlIHN0YXRpYyBTY21DaGVja2VyIGNsZWFydG9vbEJpbmFyeSA9
IG5ldyBTY21DaGVja2VyKG5ldyBTdHJpbmdbXXsKLSAgICAgICAgICAgICAgICBnZXRDb21tYW5k
KCksICItdmVyc2lvbiIKLSAgICAgICAgICAgIH0pOworICAgIC8qKiBUaGUgcHJvcGVydHkgbmFt
ZSB1c2VkIHRvIG9idGFpbiB0aGUgY2xpZW50IAorICAgICAqIGNvbW1hbmQgZm9yIHRoaXMgcmVw
b3NpdG9yeS4KKyAgICAgKi8KKyAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBDTURfUFJP
UEVSVFlfS0VZID0gCisgICAgCSJvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suaGlzdG9yeS5DbGVh
ckNhc2UiOworICAgIC8qKiBUaGUgY29tbWFuZCB0byB1c2UgdG8gYWNjZXNzIHRoZSByZXBvc2l0
b3J5IGlmIG5vbmUgd2FzIGdpdmVuIGV4cGxpY2l0bHkgKi8KKyAgICBwdWJsaWMgc3RhdGljIGZp
bmFsIFN0cmluZyBDTURfRkFMTEJBQ0sgPSAiY2xlYXJ0b29sIjsKIAogICAgIHByaXZhdGUgYm9v
bGVhbiB2ZXJib3NlOwogCiAgICAgcHVibGljIENsZWFyQ2FzZVJlcG9zaXRvcnkoKSB7CiAgICAg
ICAgIHR5cGUgPSAiQ2xlYXJDYXNlIjsKLSAgICAgICAgd29ya2luZyA9IHRydWU7CiAgICAgICAg
IGRhdGVQYXR0ZXJuID0gInl5eXlNTWRkLkhIbW1zcyI7CiAgICAgfQogCiAgICAgLyoqCi0gICAg
ICogR2V0IHRoZSBuYW1lIG9mIHRoZSBDbGVhckNhc2UgY29tbWFuZCB0aGF0IHNob3VsZCBiZSB1
c2VkCi0gICAgICogQHJldHVybiB0aGUgbmFtZSBvZiB0aGUgY2xlYXJ0b29sIGNvbW1hbmQgaW4g
dXNlCi0gICAgICovCi0gICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIGdldENvbW1hbmQoKSB7Ci0g
ICAgICAgIHJldHVybiBTeXN0ZW0uZ2V0UHJvcGVydHkoIm9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jv
ay5oaXN0b3J5LkNsZWFyQ2FzZSIsICJjbGVhcnRvb2wiKTsKLSAgICB9Ci0KLSAgICAvKioKICAg
ICAgKiBVc2UgdmVyYm9zZSBsb2cgbWVzc2FnZXMsIG9yIGp1c3QgdGhlIHN1bW1hcnkKICAgICAg
KiBAcmV0dXJuIHRydWUgaWYgdmVyYm9zZSBsb2cgbWVzc2FnZXMgYXJlIHVzZWQgZm9yIHRoaXMg
cmVwb3NpdG9yeQogICAgICAqLwpAQCAtOTIsNyArODYsOCBAQAogICAgICAgICB9CiAgICAgICAg
IAogICAgICAgICBMaXN0PFN0cmluZz4gY21kID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7Ci0g
ICAgICAgIGNtZC5hZGQoZ2V0Q29tbWFuZCgpKTsKKwkJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVS
VFlfS0VZLCBDTURfRkFMTEJBQ0spOworICAgICAgICBjbWQuYWRkKHRoaXMuY21kKTsKICAgICAg
ICAgY21kLmFkZCgibHNoaXN0b3J5Iik7CiAgICAgICAgIGlmIChmaWxlLmlzRGlyZWN0b3J5KCkp
IHsKICAgICAgICAgICAgIGNtZC5hZGQoIi1kaXIiKTsKQEAgLTEwNSwyNCArMTAwLDI4IEBACiAg
ICAgfSAgICAKIAogICAgIEBPdmVycmlkZQotICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRIaXN0
b3J5R2V0KFN0cmluZyBwYXJlbnQsIFN0cmluZyBiYXNlbmFtZSwgU3RyaW5nIHJldikgeworICAg
IHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRIaXN0b3J5R2V0KFN0cmluZyBwYXJlbnQsIFN0cmluZyBi
YXNlbmFtZSwgU3RyaW5nIHJldikKKyAgICB7CiAgICAgICAgIElucHV0U3RyZWFtIHJldCA9IG51
bGw7CiAKICAgICAgICAgRmlsZSBkaXJlY3RvcnkgPSBuZXcgRmlsZShkaXJlY3RvcnlOYW1lKTsK
IAogICAgICAgICBQcm9jZXNzIHByb2Nlc3MgPSBudWxsOwogICAgICAgICB0cnkgewotICAgICAg
ICAgICAgU3RyaW5nIGZpbGVuYW1lID0gKG5ldyBGaWxlKHBhcmVudCwgYmFzZW5hbWUpKS5nZXRD
YW5vbmljYWxQYXRoKCkuc3Vic3RyaW5nKGRpcmVjdG9yeU5hbWUubGVuZ3RoKCkgKyAxKTsKKyAg
ICAgICAgICAgIFN0cmluZyBmaWxlbmFtZSA9IChuZXcgRmlsZShwYXJlbnQsIGJhc2VuYW1lKSku
Z2V0Q2Fub25pY2FsUGF0aCgpCisgICAgICAgICAgICAJLnN1YnN0cmluZyhkaXJlY3RvcnlOYW1l
Lmxlbmd0aCgpICsgMSk7CiAgICAgICAgICAgICBmaW5hbCBGaWxlIHRtcCA9IEZpbGUuY3JlYXRl
VGVtcEZpbGUoIm9wZW5ncm9rIiwgInRtcCIpOwogICAgICAgICAgICAgU3RyaW5nIHRtcE5hbWUg
PSB0bXAuZ2V0Q2Fub25pY2FsUGF0aCgpOwogCiAgICAgICAgICAgICAvLyBjbGVhcnRvb2wgY2Fu
J3QgZ2V0IHRvIGEgcHJldmlvdXNseSBleGlzdGluZyBmaWxlCiAgICAgICAgICAgICBpZiAodG1w
LmV4aXN0cygpICYmICF0bXAuZGVsZXRlKCkpIHsKLSAgICAgICAgICAgICAgICBPcGVuR3Jva0xv
Z2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgIkZhaWxlZCB0byByZW1vdmUgdGVt
cG9yYXJ5IGZpbGUgdXNlZCBieSBoaXN0b3J5IGNhY2hlIik7CisgICAgICAgICAgICAgICAgT3Bl
bkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsIAorICAgICAgICAgICAg
ICAgIAkiRmFpbGVkIHRvIHJlbW92ZSB0ZW1wb3JhcnkgZmlsZSB1c2VkIGJ5IGhpc3RvcnkgY2Fj
aGUiKTsKICAgICAgICAgICAgIH0KIAogICAgICAgICAgICAgU3RyaW5nIGRlY29yYXRlZCA9IGZp
bGVuYW1lICsgIkBAIiArIHJldjsKLSAgICAgICAgICAgIFN0cmluZyBhcmd2W10gPSB7Z2V0Q29t
bWFuZCgpLCAiZ2V0IiwgIi10byIsIHRtcE5hbWUsIGRlY29yYXRlZH07CisgICAgCQllbnN1cmVD
b21tYW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAgICAgICBTdHJp
bmcgYXJndltdID0ge2NtZCwgImdldCIsICItdG8iLCB0bXBOYW1lLCBkZWNvcmF0ZWR9OwogICAg
ICAgICAgICAgcHJvY2VzcyA9IFJ1bnRpbWUuZ2V0UnVudGltZSgpLmV4ZWMoYXJndiwgbnVsbCwg
ZGlyZWN0b3J5KTsKIAogICAgICAgICAgICAgZHJhaW5TdHJlYW0ocHJvY2Vzcy5nZXRJbnB1dFN0
cmVhbSgpKTsKQEAgLTE0NSw3ICsxNDQsOCBAQAogICAgICAgICAgICAgICAgIH0KICAgICAgICAg
ICAgIH07CiAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBleHApIHsKLSAgICAgICAgICAgIE9w
ZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5TRVZFUkUsICJGYWlsZWQgdG8gZ2V0
IGhpc3Rvcnk6ICIgKyBleHAuZ2V0Q2xhc3MoKS50b1N0cmluZygpLCBleHApOworICAgICAgICAg
ICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLlNFVkVSRSwgCisgICAgICAg
ICAgICAJIkZhaWxlZCB0byBnZXQgaGlzdG9yeTogIiArIGV4cC5nZXRDbGFzcygpLnRvU3RyaW5n
KCksIGV4cCk7CiAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAvLyBDbGVhbiB1cCB6
b21iaWUtcHJvY2Vzc2VzLi4uCiAgICAgICAgICAgICBpZiAocHJvY2VzcyAhPSBudWxsKSB7CkBA
IC0xNzIsOCArMTcyLDEwIEBACiAgICAgICAgICAgICB0cnkgIHsKICAgICAgICAgICAgICAgICBz
a2lwcGVkID0gaW4uc2tpcCgzMjc2OEwpOwogICAgICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRp
b24gaW9lKSB7Ci0gICAgICAgICAgICAgICAgLy8gaWdub3JlZCAtIHN0cmVhbSBpc24ndCBzZWVr
YWJsZSwgYnV0IHNraXBwZWQgdmFyaWFibGUgc3RpbGwgaGFzIGNvcnJlY3QgdmFsdWUuCi0gICAg
ICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLkZJTkVTVCwg
IlN0cmVhbSBub3Qgc2Vla2FibGUiLCBpb2UpOworICAgICAgICAgICAgICAgIC8vIGlnbm9yZWQg
LSBzdHJlYW0gaXNuJ3Qgc2Vla2FibGUsIGJ1dCBza2lwcGVkIHZhcmlhYmxlIHN0aWxsIAorICAg
ICAgICAgICAgCS8vIGhhcyBjb3JyZWN0IHZhbHVlLgorICAgICAgICAgICAgICAgIE9wZW5Hcm9r
TG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5GSU5FU1QsIAorICAgICAgICAgICAgICAgIAki
U3RyZWFtIG5vdCBzZWVrYWJsZSIsIGlvZSk7CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICBp
ZiAoc2tpcHBlZCA9PSAwICYmIGluLnJlYWQoKSA9PSAtMSkgewogICAgICAgICAgICAgICAgIC8v
IE5vIGJ5dGVzIHNraXBwZWQsIGNoZWNrZWQgdGhhdCB3ZSd2ZSByZWFjaGVkIEVPRiB3aXRoIHJl
YWQoKQpAQCAtMTk0LDcgKzE5Niw4IEBACiBwdWJsaWMgQW5ub3RhdGlvbiBhbm5vdGF0ZShGaWxl
IGZpbGUsIFN0cmluZyByZXZpc2lvbikgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgQXJy
YXlMaXN0PFN0cmluZz4gYXJndiA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwogCi0gICAgICAg
IGFyZ3YuYWRkKGdldENvbW1hbmQoKSk7CisJCWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tF
WSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgYXJndi5hZGQoY21kKTsKICAgICAgICAgYXJndi5h
ZGQoImFubm90YXRlIik7CiAgICAgICAgIGFyZ3YuYWRkKCItbmhlYWRlciIpOwogICAgICAgICBh
cmd2LmFkZCgiLW91dCIpOwpAQCAtMjMyLDcgKzIzNSw4IEBACiAgICAgICAgICAgICAgICAgdHJ5
IHsKICAgICAgICAgICAgICAgICAgICAgaW4uY2xvc2UoKTsKICAgICAgICAgICAgICAgICB9IGNh
dGNoIChJT0V4Y2VwdGlvbiBleHApIHsKLSAgICAgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dn
ZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsICJBbiBlcnJvciBvY2N1cmVkIHdoaWxl
IGNsb3Npbmcgc3RyZWFtLiIsIGV4cCk7CisgICAgICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9n
Z2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAKKyAgICAgICAgICAgICAgICAgICAg
CSJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGNsb3Npbmcgc3RyZWFtLiIsIGV4cCk7CiAgICAgICAg
ICAgICAgICAgfQogICAgICAgICAgICAgfQogCkBAIC0yNzAsNyArMjc0LDggQEAKICAgICAgICAg
ICAgIEZpbGUgZGlyZWN0b3J5ID0gbmV3IEZpbGUoZ2V0RGlyZWN0b3J5TmFtZSgpKTsKIAogICAg
ICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHNuYXBzaG90IHZpZXcKLSAgICAgICAgICAg
IFN0cmluZ1tdIGFyZ3YgPSB7Z2V0Q29tbWFuZCgpLCAiY2F0Y3MifTsKKyAgICAJCWVuc3VyZUNv
bW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgICAgIFN0cmlu
Z1tdIGFyZ3YgPSB7Y21kLCAiY2F0Y3MifTsKICAgICAgICAgICAgIHByb2Nlc3MgPSBSdW50aW1l
LmdldFJ1bnRpbWUoKS5leGVjKGFyZ3YsIG51bGwsIGRpcmVjdG9yeSk7CiAgICAgICAgICAgICBp
biA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIocHJvY2Vzcy5nZXRJ
bnB1dFN0cmVhbSgpKSk7CiAgICAgICAgICAgICBib29sZWFuIHNuYXBzaG90ID0gZmFsc2U7CkBA
IC0yODUsNyArMjkwLDggQEAKICAgICAgICAgICAgIGluID0gbnVsbDsgLy8gVG8gYXZvaWQgZG91
YmxlIGNsb3NlIGluIGZpbmFsbHkgY2xhdXNlCiAgICAgICAgICAgICBpZiAoc25hcHNob3QpIHsK
ICAgICAgICAgICAgICAgICAvLyBJdCBpcyBhIHNuYXBzaG90IHZpZXcsIHdlIG5lZWQgdG8gdXBk
YXRlIGl0IG1hbnVhbGx5Ci0gICAgICAgICAgICAgICAgYXJndiA9IG5ldyBTdHJpbmdbXXtnZXRD
b21tYW5kKCksICJ1cGRhdGUiLCAiLW92ZXJ3cml0ZSIsICItZiJ9OworICAgICAgICAJCWVuc3Vy
ZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgICAgICAg
ICBhcmd2ID0gbmV3IFN0cmluZ1tde2NtZCwgInVwZGF0ZSIsICItb3ZlcndyaXRlIiwgIi1mIn07
CiAgICAgICAgICAgICAgICAgcHJvY2VzcyA9IFJ1bnRpbWUuZ2V0UnVudGltZSgpLmV4ZWMoYXJn
diwgbnVsbCwgZGlyZWN0b3J5KTsKICAgICAgICAgICAgICAgICBpbiA9IG5ldyBCdWZmZXJlZFJl
YWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIocHJvY2Vzcy5nZXRJbnB1dFN0cmVhbSgpKSk7CiAg
ICAgICAgICAgICAgICAgLy8gY29uc3VtZSBvdXRwdXQKQEAgLTMwMiw3ICszMDgsOCBAQAogICAg
ICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgIGluLmNsb3NlKCk7CiAgICAg
ICAgICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkgewotICAgICAgICAgICAgICAgICAg
ICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgIkFuIGVycm9y
IG9jY3VyZWQgd2hpbGUgY2xvc2luZyBzdHJlYW0uIiwgZSk7CisgICAgICAgICAgICAgICAgICAg
IE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAKKyAgICAgICAg
ICAgICAgICAgICAgCSJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGNsb3Npbmcgc3RyZWFtLiIsIGUp
OwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0KICAgICAgICAgICAgIGlmIChwcm9j
ZXNzICE9IG51bGwpIHsKQEAgLTMyNiw3ICszMzMsMTEgQEAKIAogICAgIEBPdmVycmlkZQogICAg
IHB1YmxpYyBib29sZWFuIGlzV29ya2luZygpIHsKLSAgICAgICAgcmV0dXJuIGNsZWFydG9vbEJp
bmFyeS5hdmFpbGFibGU7CisgICAgCWlmICh3b3JraW5nID09IG51bGwpIHsKKyAgICAJCWVuc3Vy
ZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgCXdvcmtp
bmcgPSBjaGVja0NtZChuZXcgU3RyaW5nW117IGNtZCwgIuKAk3ZlcnNpb24iIH0pOworICAgIAl9
CisgICAgICAgIHJldHVybiB3b3JraW5nLmJvb2xlYW5WYWx1ZSgpOwogICAgIH0KIAogICAgIEBP
dmVycmlkZQpAQCAtMzQ4LDcgKzM1OSw4IEBACiAgICAgICAgICAgICAgICAgICAgIH0KICAgICAg
ICAgICAgICAgICB9CiAgICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7Ci0gICAg
ICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcs
ICJDb3VsZCBub3QgZ2V0IGNhbm9uaWNhbCBwYXRoIGZvciBcIiIrZmlsZSsiXCIiLCBlKTsKKyAg
ICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklO
RywgCisgICAgICAgICAgICAgICAgCSJDb3VsZCBub3QgZ2V0IGNhbm9uaWNhbCBwYXRoIGZvciBc
IiIrZmlsZSsiXCIiLCBlKTsKICAgICAgICAgICAgIH0KICAgICAgICAgfQogICAgICAgICByZXR1
cm4gZmFsc2U7CkBAIC0zNjIsMjUgKzM3NCwzMyBAQAogICAgICAgICByZXR1cm4gVm9ic0hvbGRl
ci52b2JzOwogICAgIH0KIAorICAgIHByaXZhdGUgc3RhdGljIENsZWFyQ2FzZVJlcG9zaXRvcnkg
dGVzdFJlcG87CisKICAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmdbXSBydW5Mc3ZvYigpIHsKLSAg
ICAgICAgRXhlY3V0b3IgZXhlYyA9IG5ldyBFeGVjdXRvcihuZXcgU3RyaW5nW10ge2dldENvbW1h
bmQoKSwgImxzdm9iIiwgIi1zIn0pOwotICAgICAgICBpbnQgcmM7Ci0gICAgICAgIGlmICgocmMg
PSBleGVjLmV4ZWModHJ1ZSkpID09IDApIHsKLSAgICAgICAgICAgIFN0cmluZyBvdXRwdXQgPSBl
eGVjLmdldE91dHB1dFN0cmluZygpOwotCi0gICAgICAgICAgICBpZiAob3V0cHV0ID09IG51bGwp
IHsKLSAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwu
U0VWRVJFLCAiXCJjbGVhcnRvb2wgbHN2b2IgLXNcIiBvdXRwdXQgd2FzIG51bGwiKTsKLSAgICAg
ICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1swXTsKLSAgICAgICAgICAgIH0gZWxzZSB7Ci0g
ICAgICAgICAgICAgICAgU3RyaW5nIHNlcCA9IFN5c3RlbS5nZXRQcm9wZXJ0eSgibGluZS5zZXBh
cmF0b3IiKTsKLSAgICAgICAgICAgICAgICBTdHJpbmdbXSB2b2JzID0gb3V0cHV0LnNwbGl0KFBh
dHRlcm4ucXVvdGUoc2VwKSk7Ci0gICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9n
Z2VyKCkubG9nKExldmVsLkNPTkZJRywgIkZvdW5kIFZPQnM6IHswfSIsIEFycmF5cy5hc0xpc3Qo
dm9icykpOwotICAgICAgICAgICAgICAgIHJldHVybiB2b2JzOwotICAgICAgICAgICAgfQotICAg
ICAgICB9IGVsc2UgewotICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9n
KExldmVsLlNFVkVSRSwgIlwiY2xlYXJ0b29sIGxzdm9iIC1zXCIgcmV0dXJuZWQgbm9uLXplcm8g
c3RhdHVzOiB7MH0iLCByYyk7Ci0gICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1swXTsKLSAg
ICAgICAgfQorICAgIAlpZiAodGVzdFJlcG8gPT0gbnVsbCkgeworICAgIAkJdGVzdFJlcG8gPSBu
ZXcgQ2xlYXJDYXNlUmVwb3NpdG9yeSgpOworICAgIAl9CisJCWlmICh0ZXN0UmVwby5pc1dvcmtp
bmcoKSkgeworCSAgICAgICAgRXhlY3V0b3IgZXhlYyA9IG5ldyBFeGVjdXRvcihuZXcgU3RyaW5n
W10ge3Rlc3RSZXBvLmNtZCwgImxzdm9iIiwgIi1zIn0pOworCSAgICAgICAgaW50IHJjOworCSAg
ICAgICAgaWYgKChyYyA9IGV4ZWMuZXhlYyh0cnVlKSkgPT0gMCkgeworCSAgICAgICAgICAgIFN0
cmluZyBvdXRwdXQgPSBleGVjLmdldE91dHB1dFN0cmluZygpOworCQorCSAgICAgICAgICAgIGlm
IChvdXRwdXQgPT0gbnVsbCkgeworCSAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRM
b2dnZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAKKwkgICAgICAgICAgICAgICAgCSJcImNsZWFydG9v
bCBsc3ZvYiAtc1wiIG91dHB1dCB3YXMgbnVsbCIpOworCSAgICAgICAgICAgICAgICByZXR1cm4g
bmV3IFN0cmluZ1swXTsKKwkgICAgICAgICAgICB9CisJICAgICAgICAgICAgU3RyaW5nIHNlcCA9
IFN5c3RlbS5nZXRQcm9wZXJ0eSgibGluZS5zZXBhcmF0b3IiKTsKKwkgICAgICAgICAgICBTdHJp
bmdbXSB2b2JzID0gb3V0cHV0LnNwbGl0KFBhdHRlcm4ucXVvdGUoc2VwKSk7CisJICAgICAgICAg
ICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLkNPTkZJRywgIkZvdW5kIFZP
QnM6IHswfSIsCisJICAgICAgICAgICAgCUFycmF5cy5hc0xpc3Qodm9icykpOworCSAgICAgICAg
ICAgIHJldHVybiB2b2JzOworCSAgICAgICAgfQorCSAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0
TG9nZ2VyKCkubG9nKExldmVsLlNFVkVSRSwgCisJICAgICAgICAJIlwiY2xlYXJ0b29sIGxzdm9i
IC1zXCIgcmV0dXJuZWQgbm9uLXplcm8gc3RhdHVzOiAiICsgcmMpOworCQl9CisgICAgICAgIHJl
dHVybiBuZXcgU3RyaW5nWzBdOwogICAgIH0KIAogICAgIEBPdmVycmlkZQpkaWZmIC1yIGJmZTgy
OGNiY2M4NCBzcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2hpc3RvcnkvR2l0UmVwb3NpdG9y
eS5qYXZhCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9HaXRSZXBv
c2l0b3J5LmphdmEJU2F0IEZlYiAyNiAxOToxNjo1OCAyMDExICswMTAwCisrKyBiL3NyYy9vcmcv
b3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9HaXRSZXBvc2l0b3J5LmphdmEJVGh1IE1hciAz
MSAwNjo1OToxNyAyMDExICswMjAwCkBAIC00Niw4ICs0NiwxMyBAQAogcHVibGljIGNsYXNzIEdp
dFJlcG9zaXRvcnkgZXh0ZW5kcyBSZXBvc2l0b3J5IHsKIAogICAgIHByaXZhdGUgc3RhdGljIGZp
bmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMOwotICAgIHByaXZhdGUgc3RhdGljIFNjbUNo
ZWNrZXIgZ2l0QmluYXJ5ID0gbmV3IFNjbUNoZWNrZXIobmV3IFN0cmluZ1tdewotICAgICAgICAg
ICAgICAgIGdldENvbW1hbmQoKSwgIi0taGVscCJ9KTsKKyAgICAvKiogVGhlIHByb3BlcnR5IG5h
bWUgdXNlZCB0byBvYnRhaW4gdGhlIGNsaWVudCAKKyAgICAgKiBjb21tYW5kIGZvciB0aGlzIHJl
cG9zaXRvcnkuCisgICAgICovCisgICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ01EX1BS
T1BFUlRZX0tFWSA9IAorICAgIAkib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuZ2l0
IjsKKyAgICAvKiogVGhlIGNvbW1hbmQgdG8gdXNlIHRvIGFjY2VzcyB0aGUgcmVwb3NpdG9yeSBp
ZiBub25lIHdhcyBnaXZlbiBleHBsaWNpdGx5ICovCisgICAgcHVibGljIHN0YXRpYyBmaW5hbCBT
dHJpbmcgQ01EX0ZBTExCQUNLID0gImdpdCI7CiAKICAgICBwdWJsaWMgR2l0UmVwb3NpdG9yeSgp
IHsKICAgICAgICAgdHlwZSA9ICJnaXQiOwpAQCAtNjEsNyArNjYsOSBAQAogICAgICAqIEBwYXJh
bSBmaWxlIFRoZSBmaWxlIHRvIHJldHJpZXZlIGhpc3RvcnkgZm9yCiAgICAgICogQHJldHVybiBB
biBFeGVjdXRvciByZWFkeSB0byBiZSBzdGFydGVkCiAgICAgICovCi0gICAgRXhlY3V0b3IgZ2V0
SGlzdG9yeUxvZ0V4ZWN1dG9yKGZpbmFsIEZpbGUgZmlsZSwgU3RyaW5nIHNpbmNlUmV2aXNpb24p
IHRocm93cyBJT0V4Y2VwdGlvbiB7CisgICAgRXhlY3V0b3IgZ2V0SGlzdG9yeUxvZ0V4ZWN1dG9y
KGZpbmFsIEZpbGUgZmlsZSwgU3RyaW5nIHNpbmNlUmV2aXNpb24pIAorICAgIAl0aHJvd3MgSU9F
eGNlcHRpb24gCisgICAgewogICAgICAgICBTdHJpbmcgYWJzID0gZmlsZS5nZXRDYW5vbmljYWxQ
YXRoKCk7CiAgICAgICAgIFN0cmluZyBmaWxlbmFtZSA9ICIiOwogICAgICAgICBpZiAoYWJzLmxl
bmd0aCgpID4gZGlyZWN0b3J5TmFtZS5sZW5ndGgoKSkgewpAQCAtNjksNyArNzYsOCBAQAogICAg
ICAgICB9CiAKICAgICAgICAgTGlzdDxTdHJpbmc+IGNtZCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5n
PigpOwotICAgICAgICBjbWQuYWRkKGdldENvbW1hbmQoKSk7CisJCWVuc3VyZUNvbW1hbmQoQ01E
X1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgY21kLmFkZCh0aGlzLmNtZCk7
CiAgICAgICAgIGNtZC5hZGQoImxvZyIpOwogICAgICAgICBjbWQuYWRkKCItLW5hbWUtb25seSIp
OwogICAgICAgICBjbWQuYWRkKCItLXByZXR0eT1mdWxsZXIiKTsKQEAgLTEwMCwxNiArMTA4LDkg
QEAKICAgICAgICAgcmV0dXJuIG5ldyBJbnB1dFN0cmVhbVJlYWRlcihpbnB1dCwgIlVURi04Iik7
CiAgICAgfQogCi0gICAgLyoqCi0gICAgICogR2V0IHRoZSBuYW1lIG9mIHRoZSBHaXQgY29tbWFu
ZCB0aGF0IHNob3VsZCBiZSB1c2VkCi0gICAgICogQHJldHVybiB0aGUgbmFtZSBvZiB0aGUgaGcg
Y29tbWFuZCBpbiB1c2UKLSAgICAgKi8KLSAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgZ2V0Q29t
bWFuZCgpIHsKLSAgICAgICAgcmV0dXJuIFN5c3RlbS5nZXRQcm9wZXJ0eSgib3JnLm9wZW5zb2xh
cmlzLm9wZW5ncm9rLmhpc3RvcnkuZ2l0IiwgImdpdCIpOwotICAgIH0KLQogICAgIEBPdmVycmlk
ZQotICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRIaXN0b3J5R2V0KFN0cmluZyBwYXJlbnQsIFN0
cmluZyBiYXNlbmFtZSwgU3RyaW5nIHJldikgeworICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRI
aXN0b3J5R2V0KFN0cmluZyBwYXJlbnQsIFN0cmluZyBiYXNlbmFtZSwgU3RyaW5nIHJldikKKyAg
ICB7CiAgICAgICAgIElucHV0U3RyZWFtIHJldCA9IG51bGw7CiAKICAgICAgICAgRmlsZSBkaXJl
Y3RvcnkgPSBuZXcgRmlsZShkaXJlY3RvcnlOYW1lKTsKQEAgLTExOSw4ICsxMjAsMTAgQEAKIAog
ICAgICAgICBQcm9jZXNzIHByb2Nlc3MgPSBudWxsOwogICAgICAgICB0cnkgewotICAgICAgICAg
ICAgU3RyaW5nIGZpbGVuYW1lID0gKG5ldyBGaWxlKHBhcmVudCwgYmFzZW5hbWUpKS5nZXRDYW5v
bmljYWxQYXRoKCkuc3Vic3RyaW5nKGRpcmVjdG9yeU5hbWUubGVuZ3RoKCkgKyAxKTsKLSAgICAg
ICAgICAgIFN0cmluZyBhcmd2W10gPSB7Z2V0Q29tbWFuZCgpLCAic2hvdyIsIHJldiArICI6IiAr
IGZpbGVuYW1lfTsKKyAgICAgICAgICAgIFN0cmluZyBmaWxlbmFtZSA9IChuZXcgRmlsZShwYXJl
bnQsIGJhc2VuYW1lKSkuZ2V0Q2Fub25pY2FsUGF0aCgpCisgICAgICAgICAgICAJLnN1YnN0cmlu
ZyhkaXJlY3RvcnlOYW1lLmxlbmd0aCgpICsgMSk7CisgICAgCQllbnN1cmVDb21tYW5kKENNRF9Q
Uk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAgICAgICBTdHJpbmcgYXJndltdID0g
e2NtZCwgInNob3ciLCByZXYgKyAiOiIgKyBmaWxlbmFtZX07CiAgICAgICAgICAgICBwcm9jZXNz
ID0gUnVudGltZS5nZXRSdW50aW1lKCkuZXhlYyhhcmd2LCBudWxsLCBkaXJlY3RvcnkpOwogCiAg
ICAgICAgICAgICBJbnB1dFN0cmVhbSBpbiA9IHByb2Nlc3MuZ2V0SW5wdXRTdHJlYW0oKTsKQEAg
LTEzNCw3ICsxMzcsOCBAQAogCiAgICAgICAgICAgICByZXQgPSBuZXcgQnVmZmVyZWRJbnB1dFN0
cmVhbShuZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0ob3V0cHV0LnRvQnl0ZUFycmF5KCkpKTsKICAg
ICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4cCkgewotICAgICAgICAgICAgT3Blbkdyb2tMb2dn
ZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLlNFVkVSRSwgIkZhaWxlZCB0byBnZXQgaGlzdG9yeTog
IiArIGV4cC5nZXRDbGFzcygpLnRvU3RyaW5nKCksIGV4cCk7CisgICAgICAgICAgICBPcGVuR3Jv
a0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAKKyAgICAgICAgICAgIAkiRmFp
bGVkIHRvIGdldCBoaXN0b3J5OiAiICsgZXhwLmdldENsYXNzKCkudG9TdHJpbmcoKSwgZXhwKTsK
ICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgIC8vIENsZWFuIHVwIHpvbWJpZS1wcm9j
ZXNzZXMuLi4KICAgICAgICAgICAgIGlmIChwcm9jZXNzICE9IG51bGwpIHsKQEAgLTE2Myw3ICsx
NjcsOCBAQAogICAgIEBPdmVycmlkZQogICAgIHB1YmxpYyBBbm5vdGF0aW9uIGFubm90YXRlKEZp
bGUgZmlsZSwgU3RyaW5nIHJldmlzaW9uKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICBM
aXN0PFN0cmluZz4gY21kID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7Ci0gICAgICAgIGNtZC5h
ZGQoZ2V0Q29tbWFuZCgpKTsKKwkJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVSVFlfS0VZLCBDTURf
RkFMTEJBQ0spOworICAgICAgICBjbWQuYWRkKHRoaXMuY21kKTsKICAgICAgICAgY21kLmFkZCgi
YmxhbWUiKTsKICAgICAgICAgY21kLmFkZCgiLWwiKTsKICAgICAgICAgaWYgKHJldmlzaW9uICE9
IG51bGwpIHsKQEAgLTE3NSwxNCArMTgwLDE4IEBACiAgICAgICAgIGludCBzdGF0dXMgPSBleGVj
LmV4ZWMoKTsKIAogICAgICAgICBpZiAoc3RhdHVzICE9IDApIHsKLSAgICAgICAgICAgIE9wZW5H
cm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAiRmFpbGVkIHRvIGdldCBh
bm5vdGF0aW9ucyBmb3I6IFwiezB9XCIgRXhpdCBjb2RlOiB7MX0iLCBuZXcgT2JqZWN0W117Zmls
ZS5nZXRBYnNvbHV0ZVBhdGgoKSwgU3RyaW5nLnZhbHVlT2Yoc3RhdHVzKX0pOworICAgICAgICAg
ICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsIAorICAgICAg
ICAgICAgCSJGYWlsZWQgdG8gZ2V0IGFubm90YXRpb25zIGZvcjogXCJ7MH1cIiBFeGl0IGNvZGU6
IHsxfSIsIAorICAgICAgICAgICAgCW5ldyBPYmplY3RbXXtmaWxlLmdldEFic29sdXRlUGF0aCgp
LCBTdHJpbmcudmFsdWVPZihzdGF0dXMpfSk7CiAgICAgICAgIH0KIAogICAgICAgICByZXR1cm4g
cGFyc2VBbm5vdGF0aW9uKAogICAgICAgICAgICAgICAgIG5ld0xvZ1JlYWRlcihleGVjLmdldE91
dHB1dFN0cmVhbSgpKSwgZmlsZS5nZXROYW1lKCkpOwogICAgIH0KIAotICAgIHByb3RlY3RlZCBB
bm5vdGF0aW9uIHBhcnNlQW5ub3RhdGlvbihSZWFkZXIgaW5wdXQsIFN0cmluZyBmaWxlTmFtZSkg
dGhyb3dzIElPRXhjZXB0aW9uIHsKKyAgICBwcm90ZWN0ZWQgQW5ub3RhdGlvbiBwYXJzZUFubm90
YXRpb24oUmVhZGVyIGlucHV0LCBTdHJpbmcgZmlsZU5hbWUpIAorICAgIAl0aHJvd3MgSU9FeGNl
cHRpb24gCisgICAgewogICAgICAgICBCdWZmZXJlZFJlYWRlciBpbiA9IG5ldyBCdWZmZXJlZFJl
YWRlcihpbnB1dCk7CiAgICAgICAgIEFubm90YXRpb24gcmV0ID0gbmV3IEFubm90YXRpb24oZmls
ZU5hbWUpOwogICAgICAgICBTdHJpbmcgbGluZSA9ICIiOwpAQCAtMTk2LDcgKzIwNSw5IEBACiAg
ICAgICAgICAgICAgICAgU3RyaW5nIGF1dGhvciA9IG1hdGNoZXIuZ3JvdXAoMikudHJpbSgpOwog
ICAgICAgICAgICAgICAgIHJldC5hZGRMaW5lKHJldiwgYXV0aG9yLCB0cnVlKTsKICAgICAgICAg
ICAgIH0gZWxzZSB7Ci0gICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCku
bG9nKExldmVsLlNFVkVSRSwgIkVycm9yOiBkaWQgbm90IGZpbmQgYW5ub3RhdGlvbiBpbiBsaW5l
IHswfTogW3sxfV0gb2YgezJ9IiwgbmV3IE9iamVjdFtde1N0cmluZy52YWx1ZU9mKGxpbmVubyks
IGxpbmUsIGZpbGVOYW1lfSk7CisgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9n
Z2VyKCkubG9nKExldmVsLlNFVkVSRSwgCisgICAgICAgICAgICAgICAgCSJFcnJvcjogZGlkIG5v
dCBmaW5kIGFubm90YXRpb24gaW4gbGluZSB7MH06IFt7MX1dIG9mIHsyfSIsCisgICAgICAgICAg
ICAgICAgCW5ldyBPYmplY3RbXXtTdHJpbmcudmFsdWVPZihsaW5lbm8pLCBsaW5lLCBmaWxlTmFt
ZX0pOwogICAgICAgICAgICAgfQogICAgICAgICB9CiAgICAgICAgIHJldHVybiByZXQ7CkBAIC0y
MTEsNyArMjIyLDggQEAKICAgICBwdWJsaWMgdm9pZCB1cGRhdGUoKSB0aHJvd3MgSU9FeGNlcHRp
b24gewogICAgICAgICBGaWxlIGRpcmVjdG9yeSA9IG5ldyBGaWxlKGdldERpcmVjdG9yeU5hbWUo
KSk7CiAgICAgICAgIExpc3Q8U3RyaW5nPiBjbWQgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsK
LSAgICAgICAgY21kLmFkZChnZXRDb21tYW5kKCkpOworCQllbnN1cmVDb21tYW5kKENNRF9QUk9Q
RVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAgIGNtZC5hZGQodGhpcy5jbWQpOwogICAg
ICAgICBjbWQuYWRkKCJjb25maWciKTsKICAgICAgICAgY21kLmFkZCgiLS1saXN0Iik7CiAKQEAg
LTIyMiw3ICsyMzQsNyBAQAogCiAgICAgICAgIGlmIChleGVjdXRvci5nZXRPdXRwdXRTdHJpbmco
KS5pbmRleE9mKCJyZW1vdGUub3JpZ2luLnVybD0iKSAhPSAtMSkgewogICAgICAgICAgICAgY21k
LmNsZWFyKCk7Ci0gICAgICAgICAgICBjbWQuYWRkKGdldENvbW1hbmQoKSk7CisgICAgICAgICAg
ICBjbWQuYWRkKHRoaXMuY21kKTsKICAgICAgICAgICAgIGNtZC5hZGQoInB1bGwiKTsKICAgICAg
ICAgICAgIGNtZC5hZGQoIi1uIik7CiAgICAgICAgICAgICBjbWQuYWRkKCItcSIpOwpAQCAtMjQ2
LDE0ICsyNTgsMTcgQEAKICAgICAgICAgaWYgKGZpbGUuaXNEaXJlY3RvcnkoKSkgewogICAgICAg
ICAgICAgRmlsZSBmID0gbmV3IEZpbGUoZmlsZSwgIi5naXQiKTsKICAgICAgICAgICAgIHJldHVy
biBmLmV4aXN0cygpICYmIGYuaXNEaXJlY3RvcnkoKTsKLSAgICAgICAgfSBlbHNlIHsKLSAgICAg
ICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQorICAgICAgICByZXR1cm4gZmFsc2U7CiAg
ICAgfQogCiAgICAgQE92ZXJyaWRlCiAgICAgcHVibGljIGJvb2xlYW4gaXNXb3JraW5nKCkgewot
ICAgICAgICByZXR1cm4gZ2l0QmluYXJ5LmF2YWlsYWJsZTsKKyAgICAJaWYgKHdvcmtpbmcgPT0g
bnVsbCkgeworICAgIAkJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVSVFlfS0VZLCBDTURfRkFMTEJB
Q0spOworICAgICAgICAJd29ya2luZyA9IGNoZWNrQ21kKG5ldyBTdHJpbmdbXXsgY21kLCAiLS1o
ZWxwIiB9KTsKKyAgICAJfQorICAgICAgICByZXR1cm4gd29ya2luZy5ib29sZWFuVmFsdWUoKTsK
ICAgICB9CiAKICAgICBAT3ZlcnJpZGUKZGlmZiAtciBiZmU4MjhjYmNjODQgc3JjL29yZy9vcGVu
c29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L0hpc3RvcnlHdXJ1LmphdmEKLS0tIGEvc3JjL29yZy9v
cGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L0hpc3RvcnlHdXJ1LmphdmEJU2F0IEZlYiAyNiAx
OToxNjo1OCAyMDExICswMTAwCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlz
dG9yeS9IaXN0b3J5R3VydS5qYXZhCVRodSBNYXIgMzEgMDY6NTk6MTcgMjAxMSArMDIwMApAQCAt
MjksNyArMjksNiBAQAogaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CiBpbXBvcnQgamF2YS51
dGlsLkNvbGxlY3Rpb247CiBpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7Ci1pbXBvcnQgamF2YS51
dGlsLkl0ZXJhdG9yOwogaW1wb3J0IGphdmEudXRpbC5MaXN0OwogaW1wb3J0IGphdmEudXRpbC5N
YXA7CiBpbXBvcnQgamF2YS51dGlsLlNldDsKQEAgLTU3LDggKzU2LDkgQEAKICAgICAvKiogVGhl
IGhpc3RvcnkgY2FjaGUgdG8gdXNlICovCiAgICAgcHJpdmF0ZSBmaW5hbCBIaXN0b3J5Q2FjaGUg
aGlzdG9yeUNhY2hlOwogICAgIAotICAgIHByaXZhdGUgTWFwPFN0cmluZywgUmVwb3NpdG9yeT4g
cmVwb3NpdG9yaWVzID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBSZXBvc2l0b3J5PigpOwotICAgIHBy
aXZhdGUgZmluYWwgSW50ZWdlciBzY2FubmluZ0RlcHRoOworICAgIHByaXZhdGUgTWFwPFN0cmlu
ZywgUmVwb3NpdG9yeT4gcmVwb3NpdG9yaWVzID0gCisgICAgCW5ldyBIYXNoTWFwPFN0cmluZywg
UmVwb3NpdG9yeT4oKTsKKyAgICBwcml2YXRlIGZpbmFsIGludCBzY2FubmluZ0RlcHRoOwogCiAg
ICAgLyoqCiAgICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBIaXN0b3J5R3VydSwgYW5k
IHRyeSB0byBzZXQgdGhlIGRlZmF1bHQKQEAgLTEyMCw2ICsxMjAsNyBAQAogICAgICAqIEBwYXJh
bSByZXYgdGhlIHJldmlzaW9uIHRvIGFubm90YXRlICg8Y29kZT5udWxsPC9jb2RlPiBtZWFucyBC
QVNFKQogICAgICAqIEByZXR1cm4gZmlsZSBhbm5vdGF0aW9uLCBvciA8Y29kZT5udWxsPC9jb2Rl
PiBpZiB0aGUKICAgICAgKiA8Y29kZT5IaXN0b3J5UGFyc2VyPC9jb2RlPiBkb2VzIG5vdCBzdXBw
b3J0IGFubm90YXRpb24KKyAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uIAogICAgICAqLwogICAg
IHB1YmxpYyBBbm5vdGF0aW9uIGFubm90YXRlKEZpbGUgZmlsZSwgU3RyaW5nIHJldikgdGhyb3dz
IElPRXhjZXB0aW9uIHsKICAgICAgICAgQW5ub3RhdGlvbiByZXQgPSBudWxsOwpAQCAtMTI4LDI2
ICsxMjksMzAgQEAKICAgICAgICAgaWYgKHJlcG9zICE9IG51bGwpIHsKICAgICAgICAgICAgIHJl
dCA9IHJlcG9zLmFubm90YXRlKGZpbGUsIHJldik7CiAgICAgICAgICAgICBIaXN0b3J5IGhpc3Qg
PSBudWxsOwotICAgICAgICAgICAgYm9vbGVhbiBoPXRydWU7CiAgICAgICAgICAgICB0cnkgewog
ICAgICAgICAgICAgICAgIGhpc3QgPSByZXBvcy5nZXRIaXN0b3J5KGZpbGUpOwogICAgICAgICAg
ICAgfSBjYXRjaCAoSGlzdG9yeUV4Y2VwdGlvbiBleCkgewotICAgICAgICAgICAgICAgIExvZ2dl
ci5nZXRMb2dnZXIoSGlzdG9yeUd1cnUuY2xhc3MuZ2V0TmFtZSgpKS5sb2coTGV2ZWwuRklORVNU
LCAiQ2Fubm90IGdldCBtZXNzYWdlcyBmb3IgdG9vbHRpcDogIiwgZXgpOwotICAgICAgICAgICAg
ICAgIGg9ZmFsc2U7CisgICAgICAgICAgICAgICAgTG9nZ2VyLmdldExvZ2dlcihIaXN0b3J5R3Vy
dS5jbGFzcy5nZXROYW1lKCkpLmxvZyhMZXZlbC5GSU5FU1QsIAorICAgICAgICAgICAgICAgIAki
Q2Fubm90IGdldCBtZXNzYWdlcyBmb3IgdG9vbHRpcDogIiwgZXgpOwogICAgICAgICAgICAgfQot
ICAgICAgICAgICAgaWYgKGgpIHsKKyAgICAgICAgICAgIGlmIChoaXN0ICE9IG51bGwpIHsKICAg
ICAgICAgICAgICBTZXQ8U3RyaW5nPiByZXZzPXJldC5nZXRSZXZpc2lvbnMoKTsKLSAgICAgICAg
ICAgICBMaXN0PEhpc3RvcnlFbnRyeT4gaGVudCA9IGhpc3QuZ2V0SGlzdG9yeUVudHJpZXMoKTsK
KyAgICAgICAgICAgICAvLwkhISEgY2Fubm90IGRvIHRoaXMgYmVjYXVzZSBvZiBub3QgbWF0Y2hp
bmcgcmV2IGlkcyAoa2V5cykKKyAgICAgICAgICAgICAvLyBmaXJzdCBpcyB0aGUgbW9zdCByZWNl
bnQgb25lLCBzbyB3ZSBuZWVkIHRoZSBwb3NpdGlvbiBvZiAicmV2IiAKKyAgICAgICAgICAgICAv
LyB1bnRpbCB0aGUgZW5kIG9mIHRoZSBsaXN0CiAgICAgICAgICAgICAgLy9pZiAoaGVudC5pbmRl
eE9mKHJldik+MCkgewotICAgICAgICAgICAgIC8vIGhlbnQgPSBoZW50LnN1Ykxpc3QoaGVudC5p
bmRleE9mKHJldiksIGhlbnQuc2l6ZSgpKTsgLy8gISEhIGNhbm5vdCBkbyB0aGlzIGJlY2F1c2Ug
b2Ygbm90IG1hdGNoaW5nIHJldiBpZHMgKGtleXMpCi0gICAgICAgICAgICAgIC8vZmlyc3QgaXMg
dGhlIG1vc3QgcmVjZW50IG9uZSwgc28gd2UgbmVlZCB0aGUgcG9zaXRpb24gb2YgInJldiIgdW50
aWwgdGhlIGVuZCBvZiB0aGUgbGlzdAorICAgICAgICAgICAgIC8vCQloZW50ID0gaGVudC5zdWJM
aXN0KGhlbnQuaW5kZXhPZihyZXYpLCBoZW50LnNpemUoKSk7CiAgICAgICAgICAgICAgLy99Ci0g
ICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdCA9IGhlbnQuaXRlcmF0b3IoKTsgaXQuaGFzTmV4
dCgpOykgewotICAgICAgICAgICAgICAgIEhpc3RvcnlFbnRyeSBoZSA9IChIaXN0b3J5RW50cnkp
IGl0Lm5leHQoKTsKKyAgICAgICAgICAgICBmb3IgKEhpc3RvcnlFbnRyeSBoZSA6IGhpc3QuZ2V0
SGlzdG9yeUVudHJpZXMoKSkgewogICAgICAgICAgICAgICAgIFN0cmluZyBjbXI9aGUuZ2V0UmV2
aXNpb24oKTsKLSAgICAgICAgICAgICAgICBTdHJpbmdbXSBicmV2PWNtci5zcGxpdCgiOiIpOyAv
L1RPRE8gdGhpcyBpcyBvbmx5IGZvciBtZXJjdXJpYWwsIGZvciBvdGhlciBTQ01zIGl0IG1pZ2h0
IGFsc28gYmUgYSBwcm9ibGVtLCB3ZSBuZWVkIHRvIHJldmlzZSBob3cgd2Ugc2hvcnRlbiB0aGUg
cmV2ICMgZm9yIGFubm90YXRlCisgICAgICAgICAgICAgICAgLy9UT0RPIHRoaXMgaXMgb25seSBm
b3IgbWVyY3VyaWFsLCBmb3Igb3RoZXIgU0NNcyBpdCBtaWdodCBhbHNvIAorICAgICAgICAgICAg
ICAgIC8vIGJlIGEgcHJvYmxlbSwgd2UgbmVlZCB0byByZXZpc2UgaG93IHdlIHNob3J0ZW4gdGhl
IHJldiAjIGZvciAKKyAgICAgICAgICAgICAgICAvLyBhbm5vdGF0ZQorICAgICAgICAgICAgICAg
IFN0cmluZ1tdIGJyZXY9Y21yLnNwbGl0KCI6Iik7IAogICAgICAgICAgICAgICAgIGlmIChyZXZz
LmNvbnRhaW5zKGJyZXZbMF0pKSB7Ci0gICAgICAgICAgICAgICAgICAgIHJldC5hZGREZXNjKGJy
ZXZbMF0sICJjaGFuZ2VzZXQ6ICIraGUuZ2V0UmV2aXNpb24oKSsiXG5zdW1tYXJ5OiAiK2hlLmdl
dE1lc3NhZ2UoKSsiXG51c2VyOiAiK2hlLmdldEF1dGhvcigpKyJcbmRhdGU6ICIraGUuZ2V0RGF0
ZSgpKTsKKyAgICAgICAgICAgICAgICAgICAgcmV0LmFkZERlc2MoYnJldlswXSwgImNoYW5nZXNl
dDogIitoZS5nZXRSZXZpc2lvbigpCisgICAgICAgICAgICAgICAgICAgIAkrIlxuc3VtbWFyeTog
IitoZS5nZXRNZXNzYWdlKCkrIlxudXNlcjogIgorICAgICAgICAgICAgICAgICAgICAJK2hlLmdl
dEF1dGhvcigpKyJcbmRhdGU6ICIraGUuZ2V0RGF0ZSgpKTsKICAgICAgICAgICAgICAgICB9CiAg
ICAgICAgICAgICAgfQogICAgICAgICAgICAgfQpAQCAtMTU3LDExICsxNjIsMTMgQEAKICAgICB9
CiAKICAgICAvKioKLSAgICAgKiBHZXQgdGhlIGFwcHJvcHJpYXRlIGhpc3RvcnkgcmVhZGVyIGZv
ciB0aGUgZmlsZSBzcGVjaWZpZWQgYnkgcGFyZW50IGFuZCBiYXNlbmFtZS4KKyAgICAgKiBHZXQg
dGhlIGFwcHJvcHJpYXRlIGhpc3RvcnkgcmVhZGVyIGZvciB0aGUgZmlsZSBzcGVjaWZpZWQgYnkg
cGFyZW50IGFuZCAKKyAgICAgKiBiYXNlbmFtZS4KICAgICAgKgogICAgICAqIEBwYXJhbSBmaWxl
IFRoZSBmaWxlIHRvIGdldCB0aGUgaGlzdG9yeSByZWFkZXIgZm9yCiAgICAgICogQHRocm93cyBI
aXN0b3J5RXhjZXB0aW9uIElmIGFuIGVycm9yIG9jY3VycyB3aGlsZSBnZXR0aW5nIHRoZSBoaXN0
b3J5Ci0gICAgICogQHJldHVybiBBIEhpc3RvclJlYWRlciB0aGF0IG1heSBiZSB1c2VkIHRvIHJl
YWQgb3V0IGhpc3RvcnkgZGF0YSBmb3IgYSBuYW1lZCBmaWxlCisgICAgICogQHJldHVybiBBIEhp
c3RvclJlYWRlciB0aGF0IG1heSBiZSB1c2VkIHRvIHJlYWQgb3V0IGhpc3RvcnkgZGF0YSBmb3Ig
YQorICAgICAqICBuYW1lZCBmaWxlCiAgICAgICovCiAgICAgcHVibGljIEhpc3RvcnlSZWFkZXIg
Z2V0SGlzdG9yeVJlYWRlcihGaWxlIGZpbGUpIHRocm93cyBIaXN0b3J5RXhjZXB0aW9uIHsKICAg
ICAgICAgSGlzdG9yeSBoaXN0b3J5ID0gZ2V0SGlzdG9yeShmaWxlLCBmYWxzZSk7CkBAIC0xOTYs
OSArMjAzLDEwIEBACiAKICAgICAgICAgSGlzdG9yeSBoaXN0b3J5ID0gbnVsbDsKIAotICAgICAg
ICBpZiAocmVwb3MgIT0gbnVsbCAmJiByZXBvcy5pc1dvcmtpbmcoKSAmJiByZXBvcy5maWxlSGFz
SGlzdG9yeShmaWxlKSAmJgotICAgICAgICAgICAgICAgICghcmVwb3MuaXNSZW1vdGUoKSB8fAot
ICAgICAgICAgICAgICAgIFJ1bnRpbWVFbnZpcm9ubWVudC5nZXRJbnN0YW5jZSgpLmlzUmVtb3Rl
U2NtU3VwcG9ydGVkKCkpKSB7CisgICAgICAgIGlmIChyZXBvcyAhPSBudWxsICYmIHJlcG9zLmlz
V29ya2luZygpICYmIHJlcG9zLmZpbGVIYXNIaXN0b3J5KGZpbGUpCisgICAgICAgIAkmJiAoIXJl
cG9zLmlzUmVtb3RlKCkgfHwgUnVudGltZUVudmlyb25tZW50LmdldEluc3RhbmNlKCkKKyAgICAg
ICAgCQkuaXNSZW1vdGVTY21TdXBwb3J0ZWQoKSkpIAorICAgICAgICB7CiAgICAgICAgICAgICBp
ZiAodXNlQ2FjaGUoKSAmJiBoaXN0b3J5Q2FjaGUuc3VwcG9ydHNSZXBvc2l0b3J5KHJlcG9zKSkg
ewogICAgICAgICAgICAgICAgIGhpc3RvcnkgPSBoaXN0b3J5Q2FjaGUuZ2V0KGZpbGUsIHJlcG9z
LCB3aXRoRmlsZXMpOwogICAgICAgICAgICAgfSBlbHNlIHsKQEAgLTIxNCwxMCArMjIyLDEwIEBA
CiAgICAgICogQHBhcmFtIHBhcmVudCBUaGUgZGlyZWN0b3J5IGNvbnRhaW5pbmcgdGhlIGZpbGUK
ICAgICAgKiBAcGFyYW0gYmFzZW5hbWUgVGhlIG5hbWUgb2YgdGhlIGZpbGUKICAgICAgKiBAcGFy
YW0gcmV2IFRoZSByZXZpc2lvbiB0byBnZXQKLSAgICAgKiBAdGhyb3dzIGphdmEuaW8uSU9FeGNl
cHRpb24gSWYgYW4gZXJyb3Igb2NjdXJzIHdoaWxlIHJlYWRpbmcgb3V0IHRoZSB2ZXJzaW9uCiAg
ICAgICogQHJldHVybiBBbiBJbnB1dFN0cmVhbSBjb250YWluaW5nIHRoZSBuYW1lZCByZXZpc2lv
biBvZiB0aGUgZmlsZS4KICAgICAgKi8KLSAgICBwdWJsaWMgSW5wdXRTdHJlYW0gZ2V0UmV2aXNp
b24oU3RyaW5nIHBhcmVudCwgU3RyaW5nIGJhc2VuYW1lLCBTdHJpbmcgcmV2KSB0aHJvd3MgSU9F
eGNlcHRpb24geworICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRSZXZpc2lvbihTdHJpbmcgcGFy
ZW50LCBTdHJpbmcgYmFzZW5hbWUsIFN0cmluZyByZXYpIAorICAgIHsKICAgICAgICAgSW5wdXRT
dHJlYW0gcmV0ID0gbnVsbDsKIAogICAgICAgICBSZXBvc2l0b3J5IHJlcCA9IGdldFJlcG9zaXRv
cnkobmV3IEZpbGUocGFyZW50KSk7CkBAIC0yMzAsMjAgKzIzOCwxNyBAQAogICAgIC8qKgogICAg
ICAqIERvZXMgdGhpcyBkaXJlY3RvcnkgY29udGFpbiBmaWxlcyB3aXRoIHNvdXJjZSBjb250cm9s
IGluZm9ybWF0aW9uPwogICAgICAqIEBwYXJhbSBmaWxlIFRoZSBuYW1lIG9mIHRoZSBkaXJlY3Rv
cnkKLSAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIGZpbGVzIGluIHRoaXMgZGlyZWN0b3J5IGhh
dmUgYXNzb2NpYXRlZCByZXZpc2lvbiBoaXN0b3J5CisgICAgICogQHJldHVybiB0cnVlIGlmIHRo
ZSBmaWxlcyBpbiB0aGlzIGRpcmVjdG9yeSBoYXZlIGFzc29jaWF0ZWQgcmV2aXNpb24gCisgICAg
ICogaGlzdG9yeQogICAgICAqLwogICAgIHB1YmxpYyBib29sZWFuIGhhc0hpc3RvcnkoRmlsZSBm
aWxlKSB7CiAgICAgICAgIFJlcG9zaXRvcnkgcmVwb3MgPSBnZXRSZXBvc2l0b3J5KGZpbGUpOwog
Ci0gICAgICAgIGJvb2xlYW4gcmV0ID0gZmFsc2U7Ci0KLSAgICAgICAgaWYgKHJlcG9zICE9IG51
bGwpIHsKLSAgICAgICAgICAgIHJldCA9IHJlcG9zLmlzV29ya2luZygpICYmIHJlcG9zLmZpbGVI
YXNIaXN0b3J5KGZpbGUpOwotICAgICAgICAgICAgaWYgKCFSdW50aW1lRW52aXJvbm1lbnQuZ2V0
SW5zdGFuY2UoKS5pc1JlbW90ZVNjbVN1cHBvcnRlZCgpICYmIHJlcG9zLmlzUmVtb3RlKCkpIHsK
LSAgICAgICAgICAgICAgICByZXQgPSBmYWxzZTsKLSAgICAgICAgICAgIH0KLSAgICAgICAgfQot
ICAgICAgICByZXR1cm4gcmV0OworICAgICAgICByZXR1cm4gcmVwb3MgPT0gbnVsbAorICAgICAg
ICAJPyBmYWxzZQorICAgICAgICAJOiByZXBvcy5pc1dvcmtpbmcoKSAmJiByZXBvcy5maWxlSGFz
SGlzdG9yeShmaWxlKQorICAgICAgICAJCSYmIChSdW50aW1lRW52aXJvbm1lbnQuZ2V0SW5zdGFu
Y2UoKS5pc1JlbW90ZVNjbVN1cHBvcnRlZCgpIAorICAgICAgICAJCQl8fCAhcmVwb3MuaXNSZW1v
dGUoKSk7CiAgICAgfQogCiAgICAgLyoqCkBAIC0yNjQsOCArMjY5LDkgQEAKICAgICAgICAgcmV0
dXJuIGZhbHNlOwogICAgIH0KIAotICAgIHByaXZhdGUgdm9pZCBhZGRSZXBvc2l0b3JpZXMoRmls
ZVtdIGZpbGVzLCBMaXN0PFJlcG9zaXRvcnlJbmZvPiByZXBvcywKLSAgICAgICAgICAgIElnbm9y
ZWROYW1lcyBpZ25vcmVkTmFtZXMsIEludGVnZXIgZGVwdGgpIHsKKyAgICBwcml2YXRlIHZvaWQg
YWRkUmVwb3NpdG9yaWVzKEZpbGVbXSBmaWxlcywgQ29sbGVjdGlvbjxSZXBvc2l0b3J5SW5mbz4g
cmVwb3MsCisgICAgICAgICAgICBJZ25vcmVkTmFtZXMgaWdub3JlZE5hbWVzLCBpbnQgZGVwdGgp
IAorICAgIHsKICAgICAgICAgYWRkUmVwb3NpdG9yaWVzKGZpbGVzLCByZXBvcywgaWdub3JlZE5h
bWVzLCB0cnVlLCBkZXB0aCk7CiAgICAgfQogCkBAIC0yNzUsMjYgKzI4MSwzMCBAQAogICAgICAq
IEBwYXJhbSByZXBvcyBsaXN0IG9mIGZvdW5kIHJlcG9zCiAgICAgICogQHBhcmFtIGlnbm9yZWRO
YW1lcyB3aGF0IGZpbGVzIHRvIGlnbm9yZQogICAgICAqIEBwYXJhbSByZWN1cnNpdmVTZWFyY2gg
d2hldGhlciB0byB1c2UgcmVjdXJzaXZlIHNlYXJjaAotICAgICAqIEBwYXJhbSBkZXB0aCBjdXJy
ZW50IGRlcHRoIC0gdXNpbmcgZ2xvYmFsIHNjYW5uaW5nRGVwdGggLSBvbmUgY2FuIGxpbWl0IHRo
aXMgdG8gaW1wcm92ZSBzY2FubmluZyBwZXJmb3JtYW5jZQorICAgICAqIEBwYXJhbSBkZXB0aCBj
dXJyZW50IGRlcHRoIC0gdXNpbmcgZ2xvYmFsIHNjYW5uaW5nRGVwdGggLSBvbmUgY2FuIGxpbWl0
IAorICAgICAqIAl0aGlzIHRvIGltcHJvdmUgc2Nhbm5pbmcgcGVyZm9ybWFuY2UKICAgICAgKi8K
ICAgICBAU3VwcHJlc3NXYXJuaW5ncygiUE1ELkNvbmZ1c2luZ1Rlcm5hcnkiKQotICAgIHByaXZh
dGUgdm9pZCBhZGRSZXBvc2l0b3JpZXMoRmlsZVtdIGZpbGVzLCBMaXN0PFJlcG9zaXRvcnlJbmZv
PiByZXBvcywKLSAgICAgICAgICAgIElnbm9yZWROYW1lcyBpZ25vcmVkTmFtZXMsIGJvb2xlYW4g
cmVjdXJzaXZlU2VhcmNoLCBJbnRlZ2VyIGRlcHRoKSB7CisgICAgcHJpdmF0ZSB2b2lkIGFkZFJl
cG9zaXRvcmllcyhGaWxlW10gZmlsZXMsIENvbGxlY3Rpb248UmVwb3NpdG9yeUluZm8+IHJlcG9z
LAorICAgICAgICAgICAgSWdub3JlZE5hbWVzIGlnbm9yZWROYW1lcywgYm9vbGVhbiByZWN1cnNp
dmVTZWFyY2gsIGludCBkZXB0aCkgewogICAgICAgICBmb3IgKEZpbGUgZmlsZSA6IGZpbGVzKSB7
CiAgICAgICAgICAgICBSZXBvc2l0b3J5IHJlcG9zaXRvcnkgPSBudWxsOwogICAgICAgICAgICAg
dHJ5IHsKICAgICAgICAgICAgICAgICByZXBvc2l0b3J5ID0gUmVwb3NpdG9yeUZhY3RvcnkuZ2V0
UmVwb3NpdG9yeShmaWxlKTsKICAgICAgICAgICAgIH0gY2F0Y2ggKEluc3RhbnRpYXRpb25FeGNl
cHRpb24gaWUpIHsKLSAgICAgICAgICAgICAgICBsb2cubG9nKExldmVsLldBUk5JTkcsICJDb3Vs
ZCBub3QgY3JlYXRlIHJlcG9pdG9yeSBmb3IgJyIgKyBmaWxlICsgIicsIGNvdWxkIG5vdCBpbnN0
YW50aWF0ZSB0aGUgcmVwb3NpdG9yeS4iLCBpZSk7CisgICAgICAgICAgICAgICAgbG9nLmxvZyhM
ZXZlbC5XQVJOSU5HLCAiQ291bGQgbm90IGNyZWF0ZSByZXBvaXRvcnkgZm9yICciIAorICAgICAg
ICAgICAgICAgIAkrIGZpbGUgKyAiJywgY291bGQgbm90IGluc3RhbnRpYXRlIHRoZSByZXBvc2l0
b3J5LiIsIGllKTsKICAgICAgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBY2Nlc3NFeGNlcHRpb24g
aWFlKSB7Ci0gICAgICAgICAgICAgICAgbG9nLmxvZyhMZXZlbC5XQVJOSU5HLCAiQ291bGQgbm90
IGNyZWF0ZSByZXBvaXRvcnkgZm9yICciICsgZmlsZSArICInLCBtaXNzaW5nIGFjY2VzcyByaWdo
dHMuIiwgaWFlKTsKKyAgICAgICAgICAgICAgICBsb2cubG9nKExldmVsLldBUk5JTkcsICJDb3Vs
ZCBub3QgY3JlYXRlIHJlcG9pdG9yeSBmb3IgJyIgCisgICAgICAgICAgICAgICAgCSsgZmlsZSAr
ICInLCBtaXNzaW5nIGFjY2VzcyByaWdodHMuIiwgaWFlKTsKICAgICAgICAgICAgIH0KICAgICAg
ICAgICAgIGlmIChyZXBvc2l0b3J5ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICB0cnkgewog
ICAgICAgICAgICAgICAgICAgICBTdHJpbmcgcGF0aCA9IGZpbGUuZ2V0Q2Fub25pY2FsUGF0aCgp
OwogICAgICAgICAgICAgICAgICAgICByZXBvc2l0b3J5LnNldERpcmVjdG9yeU5hbWUocGF0aCk7
CiAgICAgICAgICAgICAgICAgICAgIGlmIChSdW50aW1lRW52aXJvbm1lbnQuZ2V0SW5zdGFuY2Uo
KS5pc1ZlcmJvc2UoKSkgewotICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyhMZXZlbC5D
T05GSUcsICJBZGRpbmcgPHswfT4gcmVwb3NpdG9yeTogPHsxfT4iLCBuZXcgT2JqZWN0W117cmVw
b3NpdG9yeS5nZXRDbGFzcygpLmdldE5hbWUoKSwgcGF0aH0pOworICAgICAgICAgICAgICAgICAg
ICAgICAgbG9nLmxvZyhMZXZlbC5DT05GSUcsICJBZGRpbmcgPHswfT4gcmVwb3NpdG9yeTogPHsx
fT4iLAorICAgICAgICAgICAgICAgICAgICAgICAgCW5ldyBPYmplY3RbXXtyZXBvc2l0b3J5Lmdl
dENsYXNzKCkuZ2V0TmFtZSgpLCBwYXRofSk7CiAgICAgICAgICAgICAgICAgICAgIH0KICAgICAg
ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIHJlcG9zLmFkZChuZXcgUmVwb3Np
dG9yeUluZm8ocmVwb3NpdG9yeSkpOwpAQCAtMzAzLDE3ICszMTMsMjEgQEAKICAgICAgICAgICAg
ICAgICAgICAgaWYgKHJlY3Vyc2l2ZVNlYXJjaCAmJiByZXBvc2l0b3J5LnN1cHBvcnRzU3ViUmVw
b3NpdG9yaWVzKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIEZpbGUgc3ViRmlsZXNbXSA9
IGZpbGUubGlzdEZpbGVzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViRmlsZXMg
PT0gbnVsbCkgewotICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5sb2coTGV2ZWwuV0FS
TklORywgIkZhaWxlZCB0byBnZXQgc3ViIGRpcmVjdG9yaWVzIGZvciAnJ3swfScnLCBjaGVjayBh
Y2Nlc3MgcGVybWlzc2lvbnMuIiwgZmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSk7Ci0gICAgICAgICAg
ICAgICAgICAgICAgICB9IGVsc2UgewotICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNl
YXJjaCBvbmx5IG9uZSBsZXZlbCBkb3duIC0gaWYgbm90OiB0b28gbXVjaCBzdGF0J2luZyBmb3Ig
aHVnZSBNZXJjdXJpYWwgcmVwb3NpdG9yaWVzCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
aWYgKGRlcHRoPD1zY2FubmluZ0RlcHRoKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIAot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFJlcG9zaXRvcmllcyhzdWJGaWxlcywgcmVw
b3MsIGlnbm9yZWROYW1lcywgZmFsc2UsIGRlcHRoKzEpOwotICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIH0KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cubG9nKExldmVsLldBUk5J
TkcsIAorICAgICAgICAgICAgICAgICAgICAgICAgICAgIAkiRmFpbGVkIHRvIGdldCBzdWIgZGly
ZWN0b3JpZXMgZm9yICciIAorICAgICAgICAgICAgICAgICAgICAgICAgICAgIAkrIGZpbGUuZ2V0
QWJzb2x1dGVQYXRoKCkgCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgCSsgIicsIGNoZWNr
IGFjY2VzcyBwZXJtaXNzaW9ucy4iKTsKKyAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBp
ZiAoZGVwdGg8PXNjYW5uaW5nRGVwdGgpIHsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAv
LyBTZWFyY2ggb25seSBvbmUgbGV2ZWwgZG93biAtIGlmIG5vdDogdG9vIG11Y2ggCisgICAgICAg
ICAgICAgICAgICAgICAgICAJLy8gc3RhdCdpbmcgZm9yIGh1Z2UgTWVyY3VyaWFsIHJlcG9zaXRv
cmllcworICAgICAgICAgICAgICAgICAgICAgICAgCWFkZFJlcG9zaXRvcmllcyhzdWJGaWxlcywg
cmVwb3MsIGlnbm9yZWROYW1lcywgCisgICAgICAgICAgICAgICAgICAgICAgICAJCWZhbHNlLCBk
ZXB0aCsxKTsKICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAg
fQogICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2Vw
dGlvbiBleHApIHsKLSAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyhMZXZlbC5XQVJOSU5HLCAi
RmFpbGVkIHRvIGdldCBjYW5vbmljYWwgcGF0aCBmb3IgezB9OiB7MX0iLCBuZXcgT2JqZWN0W117
ZmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSwgZXhwLmdldE1lc3NhZ2UoKX0pOworICAgICAgICAgICAg
ICAgICAgICBsb2cubG9nKExldmVsLldBUk5JTkcsICJGYWlsZWQgdG8gZ2V0IGNhbm9uaWNhbCBw
YXRoIGZvciAiCisgICAgICAgICAgICAgICAgICAgIAkrIGZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkg
KyAiOiAiICsgZXhwLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICAgICAgIGxvZy5sb2co
TGV2ZWwuV0FSTklORywgIlJlcG9zaXRvcnkgd2lsbCBiZSBpZ25vcmVkLi4uIiwgZXhwKTsKICAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9IGVsc2UgewpAQCAtMzIxLDExICszMzUsMTIg
QEAKICAgICAgICAgICAgICAgICBpZiAoZmlsZS5pc0RpcmVjdG9yeSgpICYmICFpZ25vcmVkTmFt
ZXMuaWdub3JlKGZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgIEZpbGUgc3ViRmlsZXNbXSA9
IGZpbGUubGlzdEZpbGVzKCk7CiAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJGaWxlcyA9PSBu
dWxsKSB7Ci0gICAgICAgICAgICAgICAgICAgICAgICBsb2cubG9nKExldmVsLldBUk5JTkcsICJG
YWlsZWQgdG8gZ2V0IHN1YiBkaXJlY3RvcmllcyBmb3IgJyd7MH0nJywgY2hlY2sgYWNjZXNzIHBl
cm1pc3Npb25zLiIsIGZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkpOwotICAgICAgICAgICAgICAgICAg
ICB9IGVsc2UgewotICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcHRoPD1zY2FubmluZ0Rl
cHRoKSB7Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRSZXBvc2l0b3JpZXMoc3ViRmls
ZXMsIHJlcG9zLCBpZ25vcmVkTmFtZXMsIGRlcHRoKzEpOwotICAgICAgICAgICAgICAgICAgICAg
ICAgfQorICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyhMZXZlbC5XQVJOSU5HLCAKKyAg
ICAgICAgICAgICAgICAgICAgICAgIAkiRmFpbGVkIHRvIGdldCBzdWIgZGlyZWN0b3JpZXMgZm9y
ICciIAorICAgICAgICAgICAgICAgICAgICAgICAgCSsgZmlsZS5nZXRBYnNvbHV0ZVBhdGgoKQor
ICAgICAgICAgICAgICAgICAgICAgICAgCSsgIicsIGNoZWNrIGFjY2VzcyBwZXJtaXNzaW9ucy4i
KTsKKyAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXB0aDw9c2Nhbm5pbmdEZXB0aCkg
eworICAgICAgICAgICAgICAgICAgICAJYWRkUmVwb3NpdG9yaWVzKHN1YkZpbGVzLCByZXBvcywg
aWdub3JlZE5hbWVzLCBkZXB0aCsxKTsKICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgIH0KQEAgLTM2MCwxOCArMzc1LDIyIEBACiAKICAgICAgICAg
ICAgIGlmIChyZXBvc2l0b3J5LmlzV29ya2luZygpKSB7CiAgICAgICAgICAgICAgICAgaWYgKHZl
cmJvc2UpIHsKLSAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oU3RyaW5nLmZvcm1hdCgiVXBk
YXRlICVzIHJlcG9zaXRvcnkgaW4gJXMiLCB0eXBlLCBwYXRoKSk7CisgICAgICAgICAgICAgICAg
ICAgIGxvZy5pbmZvKFN0cmluZy5mb3JtYXQoIlVwZGF0ZSAlcyByZXBvc2l0b3J5IGluICVzIiwg
CisgICAgICAgICAgICAgICAgICAgIAl0eXBlLCBwYXRoKSk7CiAgICAgICAgICAgICAgICAgfQog
CiAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgcmVwb3NpdG9yeS51
cGRhdGUoKTsKICAgICAgICAgICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZE9wZXJhdGlvbkV4
Y2VwdGlvbiBlKSB7Ci0gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuaW5nKFN0cmluZy5mb3Jt
YXQoIlNraXBwaW5nIHVwZGF0ZSBvZiAlcyByZXBvc2l0b3J5IGluICVzOiBOb3QgaW1wbGVtZW50
ZWQiLCB0eXBlLCBwYXRoKSk7CisgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuaW5nKFN0cmlu
Zy5mb3JtYXQoIlNraXBwaW5nIHVwZGF0ZSBvZiAlcyByZXBvc2l0b3J5IgorICAgICAgICAgICAg
ICAgICAgICAJKyAiIGluICVzOiBOb3QgaW1wbGVtZW50ZWQiLCB0eXBlLCBwYXRoKSk7CiAgICAg
ICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKLSAgICAgICAgICAgICAgICAgICAg
bG9nLmxvZyhMZXZlbC5XQVJOSU5HLCAiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSB1cGRhdGluZyAi
ICsgcGF0aCArICIgKCIgKyB0eXBlICsgIikiLCBlKTsKKyAgICAgICAgICAgICAgICAgICAgbG9n
LmxvZyhMZXZlbC5XQVJOSU5HLCAiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSB1cGRhdGluZyAiIAor
ICAgICAgICAgICAgICAgICAgICAJKyBwYXRoICsgIiAoIiArIHR5cGUgKyAiKSIsIGUpOwogICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0gZWxzZSB7Ci0gICAgICAgICAgICAgICAgbG9n
Lndhcm5pbmcoU3RyaW5nLmZvcm1hdCgiU2tpcHBpbmcgdXBkYXRlIG9mICVzIHJlcG9zaXRvcnkg
aW4gJXM6IE1pc3NpbmcgU0NNIGRlcGVuZGVuY2llcz8iLCB0eXBlLCBwYXRoKSk7CisgICAgICAg
ICAgICAgICAgbG9nLndhcm5pbmcoU3RyaW5nLmZvcm1hdCgiU2tpcHBpbmcgdXBkYXRlIG9mICVz
IHJlcG9zaXRvcnkgaW4gIgorICAgICAgICAgICAgICAgIAkrICIlczogTWlzc2luZyBTQ00gZGVw
ZW5kZW5jaWVzPyIsIHR5cGUsIHBhdGgpKTsKICAgICAgICAgICAgIH0KICAgICAgICAgfQogICAg
IH0KQEAgLTM4MCwzNiArMzk5LDM0IEBACiAgICAgICogVXBkYXRlIHRoZSBzb3VyY2UgdGhlIGNv
bnRlbnRzIGluIHRoZSBzb3VyY2UgcmVwb3NpdG9yaWVzLgogICAgICAqIEBwYXJhbSBwYXRocyBB
IGxpc3Qgb2YgZmlsZXMvZGlyZWN0b3JpZXMgdG8gdXBkYXRlCiAgICAgICovCi0gICAgcHVibGlj
IHZvaWQgdXBkYXRlUmVwb3NpdG9yaWVzKExpc3Q8U3RyaW5nPiBwYXRocykgeworICAgIHB1Ymxp
YyB2b2lkIHVwZGF0ZVJlcG9zaXRvcmllcyhDb2xsZWN0aW9uPFN0cmluZz4gcGF0aHMpIHsKICAg
ICAgICAgYm9vbGVhbiB2ZXJib3NlID0gUnVudGltZUVudmlyb25tZW50LmdldEluc3RhbmNlKCku
aXNWZXJib3NlKCk7CiAKLSAgICAgICAgQXJyYXlMaXN0PFJlcG9zaXRvcnk+IHJlcG9zID0gbmV3
IEFycmF5TGlzdDxSZXBvc2l0b3J5PigpOwotICAgICAgICBGaWxlIHJvb3QgPSBSdW50aW1lRW52
aXJvbm1lbnQuZ2V0SW5zdGFuY2UoKS5nZXRTb3VyY2VSb290RmlsZSgpOwotICAgICAgICBmb3Ig
KFN0cmluZyBwYXRoIDogcGF0aHMpIHsKLSAgICAgICAgICAgIEZpbGUgZiA9IG5ldyBGaWxlKHJv
b3QsIHBhdGgpOwotICAgICAgICAgICAgUmVwb3NpdG9yeSByID0gZ2V0UmVwb3NpdG9yeShmKTsK
LSAgICAgICAgICAgIGlmICghcmVwb3MuY29udGFpbnMocikpIHsKLSAgICAgICAgICAgICAgICBy
ZXBvcy5hZGQocik7Ci0gICAgICAgICAgICB9Ci0gICAgICAgIH0KKyAgICAgICAgTGlzdDxSZXBv
c2l0b3J5PiByZXBvcyA9IGdldFJlcG9zRnJvbVN0cmluZyhwYXRocyk7CiAKICAgICAgICAgZm9y
IChSZXBvc2l0b3J5IHJlcG9zaXRvcnkgOiByZXBvcykgewogICAgICAgICAgICAgU3RyaW5nIHR5
cGUgPSByZXBvc2l0b3J5LmdldENsYXNzKCkuZ2V0U2ltcGxlTmFtZSgpOwogCiAgICAgICAgICAg
ICBpZiAocmVwb3NpdG9yeS5pc1dvcmtpbmcoKSkgewogICAgICAgICAgICAgICAgIGlmICh2ZXJi
b3NlKSB7Ci0gICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKFN0cmluZy5mb3JtYXQoIlVwZGF0
ZSAlcyByZXBvc2l0b3J5IGluICVzIiwgdHlwZSwgcmVwb3NpdG9yeS5nZXREaXJlY3RvcnlOYW1l
KCkpKTsKKyAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oU3RyaW5nLmZvcm1hdCgiVXBkYXRl
ICVzIHJlcG9zaXRvcnkgaW4gJXMiLCB0eXBlLCAKKyAgICAgICAgICAgICAgICAgICAgCXJlcG9z
aXRvcnkuZ2V0RGlyZWN0b3J5TmFtZSgpKSk7CiAgICAgICAgICAgICAgICAgfQogCiAgICAgICAg
ICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgcmVwb3NpdG9yeS51cGRhdGUoKTsK
ICAgICAgICAgICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiBl
KSB7Ci0gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuaW5nKFN0cmluZy5mb3JtYXQoIlNraXBw
aW5nIHVwZGF0ZSBvZiAlcyByZXBvc2l0b3J5IGluICVzOiBOb3QgaW1wbGVtZW50ZWQiLCB0eXBl
LCByZXBvc2l0b3J5LmdldERpcmVjdG9yeU5hbWUoKSkpOworICAgICAgICAgICAgICAgICAgICBs
b2cud2FybmluZyhTdHJpbmcuZm9ybWF0KCJTa2lwcGluZyB1cGRhdGUgb2YgJXMgcmVwb3NpdG9y
eSIKKyAgICAgICAgICAgICAgICAgICAgCSsgIiBpbiAlczogTm90IGltcGxlbWVudGVkIiwgdHlw
ZSwgCisgICAgICAgICAgICAgICAgICAgIAlyZXBvc2l0b3J5LmdldERpcmVjdG9yeU5hbWUoKSkp
OwogICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7Ci0gICAgICAgICAgICAg
ICAgICAgIGxvZy5sb2coTGV2ZWwuV0FSTklORywgIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgdXBk
YXRpbmcgIiArIHJlcG9zaXRvcnkuZ2V0RGlyZWN0b3J5TmFtZSgpICsgIiAoIiArIHR5cGUgKyAi
KSIsIGUpOworICAgICAgICAgICAgICAgICAgICBsb2cubG9nKExldmVsLldBUk5JTkcsICJBbiBl
cnJvciBvY2N1cmVkIHdoaWxlIHVwZGF0aW5nICIgCisgICAgICAgICAgICAgICAgICAgIAkrIHJl
cG9zaXRvcnkuZ2V0RGlyZWN0b3J5TmFtZSgpICsgIiAoIiArIHR5cGUgKyAiKSIsIGUpOwogICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0gZWxzZSB7Ci0gICAgICAgICAgICAgICAgbG9n
Lndhcm5pbmcoU3RyaW5nLmZvcm1hdCgiU2tpcHBpbmcgdXBkYXRlIG9mICVzIHJlcG9zaXRvcnkg
aW4gJXM6IE1pc3NpbmcgU0NNIGRlcGVuZGVuY2llcz8iLCB0eXBlLCByZXBvc2l0b3J5LmdldERp
cmVjdG9yeU5hbWUoKSkpOworICAgICAgICAgICAgICAgIGxvZy53YXJuaW5nKFN0cmluZy5mb3Jt
YXQoIlNraXBwaW5nIHVwZGF0ZSBvZiAlcyByZXBvc2l0b3J5IGluIgorICAgICAgICAgICAgICAg
IAkrICIgJXM6IE1pc3NpbmcgU0NNIGRlcGVuZGVuY2llcz8iLCB0eXBlLCAKKyAgICAgICAgICAg
ICAgICAJcmVwb3NpdG9yeS5nZXREaXJlY3RvcnlOYW1lKCkpKTsKICAgICAgICAgICAgIH0KICAg
ICAgICAgfQogICAgIH0KQEAgLTQyNywyNiArNDQ0LDMyIEBACiAgICAgICAgICAgICBsb25nIHN0
YXJ0ID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CiAKICAgICAgICAgICAgIGlmICh2ZXJi
b3NlKSB7Ci0gICAgICAgICAgICAgICAgbG9nLmxvZyhMZXZlbC5JTkZPLCAiQ3JlYXRlIGhpc3Rv
cnljYWNoZSBmb3IgezB9ICh7MX0pIiwgbmV3IE9iamVjdFtde3BhdGgsIHR5cGV9KTsKKyAgICAg
ICAgICAgICAgICBsb2cubG9nKExldmVsLklORk8sICJDcmVhdGUgaGlzdG9yeWNhY2hlIGZvciB7
MH0gKHsxfSkiLCAKKyAgICAgICAgICAgICAgICAJbmV3IE9iamVjdFtde3BhdGgsIHR5cGV9KTsK
ICAgICAgICAgICAgIH0KIAogICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICByZXBv
c2l0b3J5LmNyZWF0ZUNhY2hlKGhpc3RvcnlDYWNoZSwgc2luY2VSZXZpc2lvbik7CiAgICAgICAg
ICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewotICAgICAgICAgICAgICAgIGxvZy5sb2coTGV2
ZWwuV0FSTklORywgIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgY3JlYXRpbmcgY2FjaGUgZm9yICIg
KyBwYXRoICsgIiAoIiArIHR5cGUgKyAiKSIsIGUpOworICAgICAgICAgICAgICAgIGxvZy5sb2co
TGV2ZWwuV0FSTklORywgCisgICAgICAgICAgICAgICAgCSJBbiBlcnJvciBvY2N1cmVkIHdoaWxl
IGNyZWF0aW5nIGNhY2hlIGZvciAiICsgcGF0aCArICIgKCIgCisgICAgICAgICAgICAgICAgCSsg
dHlwZSArICIpIiwgZSk7CiAgICAgICAgICAgICB9CiAKICAgICAgICAgICAgIGlmICh2ZXJib3Nl
KSB7CiAgICAgICAgICAgICAgICAgbG9uZyBzdG9wID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlz
KCk7Ci0gICAgICAgICAgICAgICAgbG9nLmxvZyhMZXZlbC5JTkZPLCAiQ3JlYXRpbmcgaGlzdG9y
eWNhY2hlIGZvciB7MH0gdG9vayAoezF9bXMpIiwgbmV3IE9iamVjdFtde3BhdGgsIFN0cmluZy52
YWx1ZU9mKHN0b3AgLSBzdGFydCl9KTsKKyAgICAgICAgICAgICAgICBsb2cubG9nKExldmVsLklO
Rk8sICJDcmVhdGluZyBoaXN0b3J5Y2FjaGUgZm9yIHswfSB0b29rICh7MX1tcykiLAorICAgICAg
ICAgICAgICAgIAluZXcgT2JqZWN0W117cGF0aCwgU3RyaW5nLnZhbHVlT2Yoc3RvcCAtIHN0YXJ0
KX0pOwogICAgICAgICAgICAgfQogICAgICAgICB9IGVsc2UgewotICAgICAgICAgICAgbG9nLmxv
ZyhMZXZlbC5XQVJOSU5HLCJTa2lwcGluZyBjcmVhdGlvbiBvZiBoaXN0b3J5Y2FjaGUgb2YgezB9
IHJlcG9zaXRvcnkgaW4gezF9OiBNaXNzaW5nIFNDTSBkZXBlbmRlbmNpZXM/IiwgbmV3IE9iamVj
dFtde3R5cGUsIHBhdGh9KTsKKyAgICAgICAgICAgIGxvZy5sb2coTGV2ZWwuV0FSTklORywgIlNr
aXBwaW5nIGNyZWF0aW9uIG9mIGhpc3RvcnljYWNoZSBvZiAiIAorICAgICAgICAgICAgCSsgdHlw
ZSArICIgcmVwb3NpdG9yeSBpbiAiICsgcGF0aCArICI6IE1pc3NpbmcgU0NNIGRlcGVuZGVuY2ll
cz8iKTsKICAgICAgICAgfQogICAgIH0KIAogICAgIHByaXZhdGUgdm9pZCBjcmVhdGVDYWNoZVJl
YWwoQ29sbGVjdGlvbjxSZXBvc2l0b3J5PiByZXBvc2l0b3JpZXMpIHsKLSAgICAgICAgRXhlY3V0
b3JTZXJ2aWNlIGV4ZWN1dG9yID0gRXhlY3V0b3JzLm5ld0ZpeGVkVGhyZWFkUG9vbChSdW50aW1l
LmdldFJ1bnRpbWUoKS5hdmFpbGFibGVQcm9jZXNzb3JzKCkgKiAyKTsKKyAgICAgICAgRXhlY3V0
b3JTZXJ2aWNlIGV4ZWN1dG9yID0gRXhlY3V0b3JzCisgICAgICAgIAkubmV3Rml4ZWRUaHJlYWRQ
b29sKFJ1bnRpbWUuZ2V0UnVudGltZSgpLmF2YWlsYWJsZVByb2Nlc3NvcnMoKSAqIDIpOwogCiAg
ICAgICAgIGZvciAoZmluYWwgUmVwb3NpdG9yeSByZXBvcyA6IHJlcG9zaXRvcmllcykgewogICAg
ICAgICAgICAgZmluYWwgU3RyaW5nIGxhdGVzdFJldjsKQEAgLTQ3Miw3ICs0OTUsOCBAQAogICAg
ICAgICAgICAgICAgIC8vIFdhaXQgZm9yZXZlciAgICAgICAgICAgICAgICAKICAgICAgICAgICAg
ICAgICBleGVjdXRvci5hd2FpdFRlcm1pbmF0aW9uKDk5OSxUaW1lVW5pdC5EQVlTKTsKICAgICAg
ICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGV4cCkgewotICAgICAgICAgICAg
ICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAiUmVjZWl2
ZWQgaW50ZXJydXB0IHdoaWxlIHdhaXRpbmcgZm9yIGV4ZWN1dG9yIHRvIGZpbmlzaCIsIGV4cCk7
CisgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldB
Uk5JTkcsIAorICAgICAgICAgICAgICAgIAkiUmVjZWl2ZWQgaW50ZXJydXB0IHdoaWxlIHdhaXRp
bmcgZm9yIGV4ZWN1dG9yIHRvIGZpbmlzaCIsIGV4cCk7CiAgICAgICAgICAgICB9CiAgICAgICAg
IH0KIApAQCAtNDg2LDYgKzUxMCwzNiBAQAogICAgICAgICB9CiAgICAgfQogCisgICAgcHVibGlj
IHZvaWQgY3JlYXRlQ2FjaGUoQ29sbGVjdGlvbjxTdHJpbmc+IHJlcG9zaXRvcmllcykgeworICAg
ICAgICBpZiAoIXVzZUNhY2hlKCkpIHsKKyAgICAgICAgICAgIHJldHVybjsKKyAgICAgICAgfQor
ICAgICAgICBjcmVhdGVDYWNoZVJlYWwoZ2V0UmVwb3NGcm9tU3RyaW5nKHJlcG9zaXRvcmllcykp
OworICAgIH0KKworICAgIHB1YmxpYyB2b2lkIHJlbW92ZUNhY2hlKENvbGxlY3Rpb248U3RyaW5n
PiByZXBvc2l0b3JpZXMpIHRocm93cyBIaXN0b3J5RXhjZXB0aW9uIHsKKyAgICAJTGlzdDxSZXBv
c2l0b3J5PiByZXBvcyA9IGdldFJlcG9zRnJvbVN0cmluZyhyZXBvc2l0b3JpZXMpOworICAgIAlI
aXN0b3J5Q2FjaGUgY2FjaGUgPSBoaXN0b3J5Q2FjaGU7CisgICAgCWlmIChjYWNoZSA9PSBudWxs
KSB7CisJICAgICAgICBpZiAoUnVudGltZUVudmlyb25tZW50LmdldEluc3RhbmNlKCkuc3RvcmVI
aXN0b3J5Q2FjaGVJbkRCKCkpIHsKKwkgICAgICAgICAgICBjYWNoZSA9IG5ldyBKREJDSGlzdG9y
eUNhY2hlKCk7CisJICAgICAgICAgICAgY2FjaGUuaW5pdGlhbGl6ZSgpOworCSAgICAgICAgfSBl
bHNlIHsKKwkgICAgICAgICAgICBjYWNoZSA9IG5ldyBGaWxlSGlzdG9yeUNhY2hlKCk7CisJICAg
ICAgICB9CisgICAgCX0KKyAgICAJZm9yIChSZXBvc2l0b3J5IHIgOiByZXBvcykgeworICAgIAkJ
dHJ5IHsKKwkJCQljYWNoZS5jbGVhcihyKTsKKwkJCQlsb2cuaW5mbygiSGlzdG9yeSBjYWNoZSBm
b3IgIiArIHIuZ2V0RGlyZWN0b3J5TmFtZSgpICsgIiBjbGVhcmVkLiIpOworCQkJfSBjYXRjaCAo
SGlzdG9yeUV4Y2VwdGlvbiBlKSB7CisJCQkJbG9nLndhcm5pbmcoIkNsZWFyaW5nIGhpc3Rvcnkg
Y2FjaGUgZm9yIHJlcG9zaXRvcnkgIiArCisJCQkJCXIuZ2V0RGlyZWN0b3J5TmFtZSgpICsgIiBm
YWlsZWQ6ICIgKyBlLmdldExvY2FsaXplZE1lc3NhZ2UoKSk7CisJCQl9CisgICAgCX0KKyAgICAJ
aW52YWxpZGF0ZVJlcG9zaXRvcmllcyhyZXBvcyk7CisgICAgfQorCiAgICAgLyoqCiAgICAgICog
Q3JlYXRlIHRoZSBoaXN0b3J5IGNhY2hlIGZvciBhbGwgb2YgdGhlIHJlcG9zaXRvcmllcwogICAg
ICAqLwpAQCAtNDk3LDI1ICs1NTEsMjIgQEAKICAgICAgICAgY3JlYXRlQ2FjaGVSZWFsKHJlcG9z
aXRvcmllcy52YWx1ZXMoKSk7CiAgICAgfQogCi0gICAgcHVibGljIHZvaWQgY3JlYXRlQ2FjaGUo
TGlzdDxTdHJpbmc+IHJlcG9zaXRvcmllcykgewotICAgICAgICBpZiAoIXVzZUNhY2hlKCkpIHsK
LSAgICAgICAgICAgIHJldHVybjsKLSAgICAgICAgfQotCisgICAgcHJpdmF0ZSBMaXN0PFJlcG9z
aXRvcnk+IGdldFJlcG9zRnJvbVN0cmluZyhDb2xsZWN0aW9uPFN0cmluZz4gcmVwb3NpdG9yaWVz
KSB7CiAgICAgICAgIEFycmF5TGlzdDxSZXBvc2l0b3J5PiByZXBvcyA9IG5ldyBBcnJheUxpc3Q8
UmVwb3NpdG9yeT4oKTsKICAgICAgICAgRmlsZSByb290ID0gUnVudGltZUVudmlyb25tZW50Lmdl
dEluc3RhbmNlKCkuZ2V0U291cmNlUm9vdEZpbGUoKTsKICAgICAgICAgZm9yIChTdHJpbmcgZmls
ZSA6IHJlcG9zaXRvcmllcykgewogICAgICAgICAgICAgRmlsZSBmID0gbmV3IEZpbGUocm9vdCwg
ZmlsZSk7CiAgICAgICAgICAgICBSZXBvc2l0b3J5IHIgPSBnZXRSZXBvc2l0b3J5KGYpOwogICAg
ICAgICAgICAgaWYgKHIgPT0gbnVsbCkgewotICAgICAgICAgICAgICAgIGxvZy5sb2coTGV2ZWwu
V0FSTklORywgIkNvdWxkIG5vdCBsb2NhdGUgYSByZXBvc2l0b3J5IGZvciB7MH0iLCBmLmdldEFi
c29sdXRlUGF0aCgpKTsKLSAgICAgICAgICAgIH0gZWxzZSB7CisgICAgICAgICAgICAgICAgbG9n
LmxvZyhMZXZlbC5XQVJOSU5HLCAiQ291bGQgbm90IGxvY2F0ZSBhIHJlcG9zaXRvcnkgZm9yIHsw
fSIsCisgICAgICAgICAgICAgICAgCWYuZ2V0QWJzb2x1dGVQYXRoKCkpOworICAgICAgICAgICAg
fSBlbHNlIGlmICghcmVwb3MuY29udGFpbnMocikpewogICAgICAgICAgICAgICAgIHJlcG9zLmFk
ZChyKTsKICAgICAgICAgICAgIH0KICAgICAgICAgfQotICAgICAgICBjcmVhdGVDYWNoZVJlYWwo
cmVwb3MpOworICAgICAgICByZXR1cm4gcmVwb3M7CiAgICAgfQotCisgICAgCiAgICAgLyoqCiAg
ICAgICogRW5zdXJlIHRoYXQgd2UgaGF2ZSBhIGRpcmVjdG9yeSBpbiB0aGUgY2FjaGUuIElmIGl0
J3Mgbm90IHRoZXJlLCBmZXRjaAogICAgICAqIGl0cyBoaXN0b3J5IGFuZCBwb3B1bGF0ZSB0aGUg
Y2FjaGUuIElmIGl0J3MgYWxyZWFkeSB0aGVyZSwgYW5kIHRoZQpAQCAtNTgwLDI0ICs2MzEsMzEg
QEAKICAgICAgKiAKICAgICAgKiBAcGFyYW0gcmVwb3MgVGhlIG5ldyByZXBvc2l0b3JpZXMKICAg
ICAgKi8KLSAgICBwdWJsaWMgdm9pZCBpbnZhbGlkYXRlUmVwb3NpdG9yaWVzKExpc3Q8UmVwb3Np
dG9yeUluZm8+IHJlcG9zKSB7CisgICAgcHVibGljIHZvaWQgaW52YWxpZGF0ZVJlcG9zaXRvcmll
cyhDb2xsZWN0aW9uPD8gZXh0ZW5kcyBSZXBvc2l0b3J5SW5mbz4gcmVwb3MpIAorICAgIHsKICAg
ICAgICAgaWYgKHJlcG9zID09IG51bGwgfHwgcmVwb3MuaXNFbXB0eSgpKSB7CiAgICAgICAgICAg
ICByZXBvc2l0b3JpZXMuY2xlYXIoKTsKICAgICAgICAgfSBlbHNlIHsKLSAgICAgICAgICAgIE1h
cDxTdHJpbmcsIFJlcG9zaXRvcnk+IG5yZXAgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFJlcG9zaXRv
cnk+KHJlcG9zLnNpemUoKSk7Ci0KKyAgICAgICAgICAgIE1hcDxTdHJpbmcsIFJlcG9zaXRvcnk+
IG5yZXAgPSAKKyAgICAgICAgICAgIAluZXcgSGFzaE1hcDxTdHJpbmcsIFJlcG9zaXRvcnk+KHJl
cG9zLnNpemUoKSk7CiAgICAgICAgICAgICBmb3IgKFJlcG9zaXRvcnlJbmZvIGkgOiByZXBvcykg
ewogICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgIFJlcG9zaXRvcnkg
ciA9IFJlcG9zaXRvcnlGYWN0b3J5LmdldFJlcG9zaXRvcnkoaSk7CiAgICAgICAgICAgICAgICAg
ICAgIGlmIChyID09IG51bGwpIHsKLSAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5sb2coTGV2
ZWwuV0FSTklORywgIkZhaWxlZCB0byBpbnN0YW5jaWF0ZSBpbnRlcm5hbCByZXBvc2l0b3J5IGRh
dGEgZm9yIHswfSBpbiB7MX0iLCBuZXcgT2JqZWN0W117aS5nZXRUeXBlKCksIGkuZ2V0RGlyZWN0
b3J5TmFtZSgpfSk7CisgICAgICAgICAgICAgICAgICAgICAgICBsb2cubG9nKExldmVsLldBUk5J
TkcsIAorICAgICAgICAgICAgICAgICAgICAgICAgCSJGYWlsZWQgdG8gaW5zdGFuY2lhdGUgaW50
ZXJuYWwgcmVwb3NpdG9yeSBkYXRhIGZvciAiCisgICAgICAgICAgICAgICAgICAgICAgICAJKyBp
LmdldFR5cGUoKSArICIgaW4gIiArIGkuZ2V0RGlyZWN0b3J5TmFtZSgpKTsKICAgICAgICAgICAg
ICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgIG5yZXAucHV0KHIuZ2V0
RGlyZWN0b3J5TmFtZSgpLCByKTsKICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg
ICAgIH0gY2F0Y2ggKEluc3RhbnRpYXRpb25FeGNlcHRpb24gZXgpIHsKLSAgICAgICAgICAgICAg
ICAgICAgbG9nLmxvZyhMZXZlbC5XQVJOSU5HLCAiQ291bGQgbm90IGNyZWF0ZSAiICsgaS5nZXRU
eXBlKCkgKyAiIGZvciAnIiArIGkuZ2V0RGlyZWN0b3J5TmFtZSgpICsgIicsIGNvdWxkIG5vdCBp
bnN0YW50aWF0ZSB0aGUgcmVwb3NpdG9yeS4iLCBleCk7CisgICAgICAgICAgICAgICAgICAgIGxv
Zy5sb2coTGV2ZWwuV0FSTklORywgIkNvdWxkIG5vdCBjcmVhdGUgIiArIGkuZ2V0VHlwZSgpIAor
ICAgICAgICAgICAgICAgICAgICAJKyAiIGZvciAnIiArIGkuZ2V0RGlyZWN0b3J5TmFtZSgpIAor
ICAgICAgICAgICAgICAgICAgICAJKyAiJywgY291bGQgbm90IGluc3RhbnRpYXRlIHRoZSByZXBv
c2l0b3J5LiIsIGV4KTsKICAgICAgICAgICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQWNjZXNzRXhj
ZXB0aW9uIGlhZSkgewotICAgICAgICAgICAgICAgICAgICBsb2cubG9nKExldmVsLldBUk5JTkcs
ICJDb3VsZCBub3QgY3JlYXRlICIgKyBpLmdldFR5cGUoKSArICIgZm9yICciICsgaS5nZXREaXJl
Y3RvcnlOYW1lKCkgKyAiJywgbWlzc2luZyBhY2Nlc3MgcmlnaHRzLiIsIGlhZSk7CisgICAgICAg
ICAgICAgICAgICAgIGxvZy5sb2coTGV2ZWwuV0FSTklORywgIkNvdWxkIG5vdCBjcmVhdGUgIiAr
IGkuZ2V0VHlwZSgpIAorICAgICAgICAgICAgICAgICAgICAJKyAiIGZvciAnIiArIGkuZ2V0RGly
ZWN0b3J5TmFtZSgpIAorICAgICAgICAgICAgICAgICAgICAJKyAiJywgbWlzc2luZyBhY2Nlc3Mg
cmlnaHRzLiIsIGlhZSk7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAg
ICAgICAgcmVwb3NpdG9yaWVzID0gbnJlcDsKZGlmZiAtciBiZmU4MjhjYmNjODQgc3JjL29yZy9v
cGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L0pEQkNIaXN0b3J5Q2FjaGUuamF2YQotLS0gYS9z
cmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2hpc3RvcnkvSkRCQ0hpc3RvcnlDYWNoZS5qYXZh
CVNhdCBGZWIgMjYgMTk6MTY6NTggMjAxMSArMDEwMAorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlz
L29wZW5ncm9rL2hpc3RvcnkvSkRCQ0hpc3RvcnlDYWNoZS5qYXZhCVRodSBNYXIgMzEgMDY6NTk6
MTcgMjAxMSArMDIwMApAQCAtMTA3NSwxMSArMTA5MCw3IEBACiAgICAgcHJpdmF0ZSBJbnRlZ2Vy
IGdldEdlbmVyYXRlZEludEtleShTdGF0ZW1lbnQgc3RtdCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7
CiAgICAgICAgIFJlc3VsdFNldCBrZXlzID0gc3RtdC5nZXRHZW5lcmF0ZWRLZXlzKCk7CiAgICAg
ICAgIHRyeSB7Ci0gICAgICAgICAgICBpZiAoa2V5cy5uZXh0KCkpIHsKLSAgICAgICAgICAgICAg
ICByZXR1cm4ga2V5cy5nZXRJbnQoMSk7Ci0gICAgICAgICAgICB9IGVsc2UgewotICAgICAgICAg
ICAgICAgIHJldHVybiBudWxsOwotICAgICAgICAgICAgfQorICAgICAgICAgICAgcmV0dXJuIGtl
eXMubmV4dCgpID8ga2V5cy5nZXRJbnQoMSkgOiBudWxsOwogICAgICAgICB9IGZpbmFsbHkgewog
ICAgICAgICAgICAga2V5cy5jbG9zZSgpOwogICAgICAgICB9CmRpZmYgLXIgYmZlODI4Y2JjYzg0
IHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9NZXJjdXJpYWxSZXBvc2l0b3J5
LmphdmEKLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L01lcmN1cmlh
bFJlcG9zaXRvcnkuamF2YQlTYXQgRmViIDI2IDE5OjE2OjU4IDIwMTEgKzAxMDAKKysrIGIvc3Jj
L29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L01lcmN1cmlhbFJlcG9zaXRvcnkuamF2
YQlUaHUgTWFyIDMxIDA2OjU5OjE3IDIwMTEgKzAyMDAKQEAgLTQ2LDIzICs0NiwyNyBAQAogcHVi
bGljIGNsYXNzIE1lcmN1cmlhbFJlcG9zaXRvcnkgZXh0ZW5kcyBSZXBvc2l0b3J5IHsKICAgICBw
cml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDsKIAorICAgIC8q
KiBUaGUgcHJvcGVydHkgbmFtZSB1c2VkIHRvIG9idGFpbiB0aGUgY2xpZW50IGNvbW1hbmQgZm9y
IHRoaXNyZXBvc2l0b3J5LiAqLworICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIENNRF9Q
Uk9QRVJUWV9LRVkgPSAKKyAgICAJIm9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5Lk1l
cmN1cmlhbCI7CisgICAgLyoqIFRoZSBjb21tYW5kIHRvIHVzZSB0byBhY2Nlc3MgdGhlIHJlcG9z
aXRvcnkgaWYgbm9uZSB3YXMgZ2l2ZW4gZXhwbGljaXRseSAqLworICAgIHB1YmxpYyBzdGF0aWMg
ZmluYWwgU3RyaW5nIENNRF9GQUxMQkFDSyA9ICJoZyI7CisKKyAgICAvKiogVGhlIGJvb2xlYW4g
cHJvcGVydHkgYW5kIGVudmlyb25tZW50IHZhcmlhYmxlIG5hbWUgdG8gaW5kaWNhdGUKKyAgICAg
KiB3aGV0aGVyIGZvcmVzdC1leHRlbnNpb24gaW4gTWVyY3VyaWFsIGFkZHMgcmVwb3NpdG9yaWVz
IGluc2lkZSB0aGUKKyAgICAgKiByZXBvc2l0b3JpZXMuICovCisgICAgcHVibGljIHN0YXRpYyBm
aW5hbCBTdHJpbmcgTk9GT1JFU1RfUFJPUEVSVFlfS0VZID0KKyAgICAJIm9yZy5vcGVuc29sYXJp
cy5vcGVuZ3Jvay5oaXN0b3J5Lm1lcmN1cmlhbC5kaXNhYmxlRm9yZXN0IjsKKwogICAgIC8qKiBU
ZW1wbGF0ZSBmb3IgZm9ybWF0dGluZyBoZyBsb2cgb3V0cHV0IGZvciBmaWxlcy4gKi8KLSAgICBw
cml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgVEVNUExBVEUgPSAiY2hhbmdlc2V0OiB7cmV2fTp7
bm9kZXxzaG9ydH1cXG57YnJhbmNoZXN9e3RhZ3N9e3BhcmVudHN9XFxudXNlcjoge2F1dGhvcn1c
XG5kYXRlOiB7ZGF0ZXxpc29kYXRlfVxcbmRlc2NyaXB0aW9uOiB7ZGVzY3xzdHJpcHxvYmZ1c2Nh
dGV9XFxuIjsKKyAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgVEVNUExBVEUgPSAiY2hh
bmdlc2V0OiB7cmV2fTp7bm9kZXxzaG9ydH1cXG4iCisgICAgCSsgInticmFuY2hlc317dGFnc317
cGFyZW50c31cXG4iCisgICAgCSsgInVzZXI6IHthdXRob3J9XFxuZGF0ZToge2RhdGV8aXNvZGF0
ZX1cXG4iCisgICAgCSsgImRlc2NyaXB0aW9uOiB7ZGVzY3xzdHJpcHxvYmZ1c2NhdGV9XFxuIjsK
IAogICAgIC8qKiBUZW1wbGF0ZSBmb3IgZm9ybWF0dGluZyBoZyBsb2cgb3V0cHV0IGZvciBkaXJl
Y3Rvcmllcy4gKi8KLSAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgRElSX1RFTVBMQVRF
ID0gVEVNUExBVEUgKyAiZmlsZXM6IHtmaWxlc317ZmlsZV9jb3BpZXN9XFxuIjsKLQotICAgIHBy
aXZhdGUgc3RhdGljIFNjbUNoZWNrZXIgaGdCaW5hcnkgPSBuZXcgU2NtQ2hlY2tlcihuZXcgU3Ry
aW5nW10gewotICAgICAgICBTeXN0ZW0uZ2V0UHJvcGVydHkoIm9yZy5vcGVuc29sYXJpcy5vcGVu
Z3Jvay5oaXN0b3J5Lk1lcmN1cmlhbCIsICJoZyIpLAotICAgICAgICAiLS1oZWxwIiB9KTsKLSAg
ICAKLSAgICAvKioKLSAgICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIE1lcmN1cmlhbCBjb21tYW5k
IHRoYXQgc2hvdWxkIGJlIHVzZWQKLSAgICAgKiBAcmV0dXJuIHRoZSBuYW1lIG9mIHRoZSBoZyBj
b21tYW5kIGluIHVzZQotICAgICAqLwotICAgIHN0YXRpYyBTdHJpbmcgZ2V0Q29tbWFuZCgpIHsK
LSAgICAgICAgcmV0dXJuIFN5c3RlbS5nZXRQcm9wZXJ0eSgib3JnLm9wZW5zb2xhcmlzLm9wZW5n
cm9rLmhpc3RvcnkuTWVyY3VyaWFsIiwgImhnIik7Ci0gICAgfQorICAgIHByaXZhdGUgc3RhdGlj
IGZpbmFsIFN0cmluZyBESVJfVEVNUExBVEUgPSBURU1QTEFURSAKKyAgICAJKyAiZmlsZXM6IHtm
aWxlc317ZmlsZV9jb3BpZXN9XFxuIjsKIAogICAgIHB1YmxpYyBNZXJjdXJpYWxSZXBvc2l0b3J5
KCkgewogICAgICAgICB0eXBlID0gIk1lcmN1cmlhbCI7CkBAIC04OCw3ICs5Miw4IEBACiAgICAg
ICAgIH0KICAgICAgICAgCiAgICAgICAgIExpc3Q8U3RyaW5nPiBjbWQgPSBuZXcgQXJyYXlMaXN0
PFN0cmluZz4oKTsKLSAgICAgICAgY21kLmFkZChnZXRDb21tYW5kKCkpOworCQllbnN1cmVDb21t
YW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAgIGNtZC5hZGQodGhp
cy5jbWQpOwogICAgICAgICBjbWQuYWRkKCJsb2ciKTsKICAgICAgICAgaWYgKCAhZmlsZS5pc0Rp
cmVjdG9yeSgpICkgeyBjbWQuYWRkKCItZiIpOyB9CiAKQEAgLTExMiw3ICsxMTcsOCBAQAogICAg
IH0gICAgCiAgICAgCiAgICAgQE92ZXJyaWRlCi0gICAgcHVibGljIElucHV0U3RyZWFtIGdldEhp
c3RvcnlHZXQoU3RyaW5nIHBhcmVudCwgU3RyaW5nIGJhc2VuYW1lLCBTdHJpbmcgcmV2KSB7Cisg
ICAgcHVibGljIElucHV0U3RyZWFtIGdldEhpc3RvcnlHZXQoU3RyaW5nIHBhcmVudCwgU3RyaW5n
IGJhc2VuYW1lLCBTdHJpbmcgcmV2KQorICAgIHsKICAgICAgICAgSW5wdXRTdHJlYW0gcmV0ID0g
bnVsbDsKIAogICAgICAgICBGaWxlIGRpcmVjdG9yeSA9IG5ldyBGaWxlKGRpcmVjdG9yeU5hbWUp
OwpAQCAtMTI1LDggKzEzMSwxMCBAQAogICAgICAgICAgICAgcmV2aXNpb24gPSByZXYuc3Vic3Ry
aW5nKDAsIHJldi5pbmRleE9mKCc6JykpOwogICAgICAgICB9CiAgICAgICAgIHRyeSB7Ci0gICAg
ICAgICAgICBTdHJpbmcgZmlsZW5hbWUgPSAgKG5ldyBGaWxlKHBhcmVudCwgYmFzZW5hbWUpKS5n
ZXRDYW5vbmljYWxQYXRoKCkuc3Vic3RyaW5nKGRpcmVjdG9yeU5hbWUubGVuZ3RoKCkgKyAxKTsK
LSAgICAgICAgICAgIFN0cmluZyBhcmd2W10gPSB7Z2V0Q29tbWFuZCgpLCAiY2F0IiwgIi1yIiwg
cmV2aXNpb24sIGZpbGVuYW1lfTsKKyAgICAgICAgICAgIFN0cmluZyBmaWxlbmFtZSA9ICAobmV3
IEZpbGUocGFyZW50LCBiYXNlbmFtZSkpLmdldENhbm9uaWNhbFBhdGgoKQorICAgICAgICAgICAg
CS5zdWJzdHJpbmcoZGlyZWN0b3J5TmFtZS5sZW5ndGgoKSArIDEpOworICAgIAkJZW5zdXJlQ29t
bWFuZChDTURfUFJPUEVSVFlfS0VZLCBDTURfRkFMTEJBQ0spOworICAgICAgICAgICAgU3RyaW5n
IGFyZ3ZbXSA9IHtjbWQsICJjYXQiLCAiLXIiLCByZXZpc2lvbiwgZmlsZW5hbWV9OwogICAgICAg
ICAgICAgcHJvY2VzcyA9IFJ1bnRpbWUuZ2V0UnVudGltZSgpLmV4ZWMoYXJndiwgbnVsbCwgZGly
ZWN0b3J5KTsKICAgICAgICAgICAgIAogICAgICAgICAgICAgQnl0ZUFycmF5T3V0cHV0U3RyZWFt
IG91dCA9IG5ldyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0oKTsKQEAgLTE0MiwxMyArMTUwLDE1IEBA
CiAgICAgICAgICAgICAKICAgICAgICAgICAgIHJldCA9IG5ldyBCdWZmZXJlZElucHV0U3RyZWFt
KG5ldyBCeXRlQXJyYXlJbnB1dFN0cmVhbShvdXQudG9CeXRlQXJyYXkoKSkpOwogICAgICAgICB9
IGNhdGNoIChFeGNlcHRpb24gZXhwKSB7Ci0gICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRM
b2dnZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAiRmFpbGVkIHRvIGdldCBoaXN0b3J5OiAiICsgZXhw
LmdldENsYXNzKCkudG9TdHJpbmcoKSk7CisgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRM
b2dnZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAKKyAgICAgICAgICAgIAkiRmFpbGVkIHRvIGdldCBo
aXN0b3J5OiAiICsgZXhwLmdldENsYXNzKCkudG9TdHJpbmcoKSk7CiAgICAgICAgIH0gZmluYWxs
eSB7CiAgICAgICAgICAgICBpZiAoaW4gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgIHRyeSB7
CiAgICAgICAgICAgICAgICAgICAgIGluLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgfSBjYXRj
aCAoSU9FeGNlcHRpb24gZSkgewotICAgICAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5n
ZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgY2xv
c2luZyBzdHJlYW0iLCBlKTsKKyAgICAgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0
TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsIAorICAgICAgICAgICAgICAgICAgICAJIkFuIGVy
cm9yIG9jY3VyZWQgd2hpbGUgY2xvc2luZyBzdHJlYW0iLCBlKTsKICAgICAgICAgICAgICAgICB9
CiAgICAgICAgICAgICB9CiAgICAgICAgICAgICAvLyBDbGVhbiB1cCB6b21iaWUtcHJvY2Vzc2Vz
Li4uCkBAIC0xNzksNyArMTg5LDggQEAKICAgICBAT3ZlcnJpZGUKICAgICBwdWJsaWMgQW5ub3Rh
dGlvbiBhbm5vdGF0ZShGaWxlIGZpbGUsIFN0cmluZyByZXZpc2lvbikgdGhyb3dzIElPRXhjZXB0
aW9uIHsKICAgICAgICAgQXJyYXlMaXN0PFN0cmluZz4gYXJndiA9IG5ldyBBcnJheUxpc3Q8U3Ry
aW5nPigpOwotICAgICAgICBhcmd2LmFkZChnZXRDb21tYW5kKCkpOworCQllbnN1cmVDb21tYW5k
KENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAgIGFyZ3YuYWRkKGNtZCk7
CiAgICAgICAgIGFyZ3YuYWRkKCJhbm5vdGF0ZSIpOwogICAgICAgICBhcmd2LmFkZCgiLXUiKTsK
ICAgICAgICAgYXJndi5hZGQoIi1uIik7CkBAIC0yMTIsOCArMjIzLDkgQEAKICAgICAgICAgICAg
ICAgICAgICAgU3RyaW5nIHJldiA9IG1hdGNoZXIuZ3JvdXAoMik7ICAgICAgICAgICAgICAgICAg
ICAKICAgICAgICAgICAgICAgICAgICAgcmV0LmFkZExpbmUocmV2LCBhdXRob3IsIHRydWUpOyAg
ICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgfSBlbHNlIHsKLSAgICAgICAgICAg
ICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLlNFVkVSRSwgIkVy
cm9yOiBkaWQgbm90IGZpbmQgYW5ub3RhdGlvbiBpbiBsaW5lICIgKyAKLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBsaW5lbm8gKyAiOiBbIiArIGxpbmUgKyAiXSIpOworICAgICAgICAgICAg
ICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAKKyAg
ICAgICAgICAgICAgICAgICAgCSJFcnJvcjogZGlkIG5vdCBmaW5kIGFubm90YXRpb24gaW4gbGlu
ZSAiIAorICAgICAgICAgICAgICAgICAgICAJKyBsaW5lbm8gKyAiOiBbIiArIGxpbmUgKyAiXSIp
OwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIAog
ICAgICAgICB9IGZpbmFsbHkgewpAQCAtMjIxLDcgKzIzMyw4IEBACiAgICAgICAgICAgICAgICAg
dHJ5IHsKICAgICAgICAgICAgICAgICAgICAgaW4uY2xvc2UoKTsKICAgICAgICAgICAgICAgICB9
IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7Ci0gICAgICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9n
Z2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAiQW4gZXJyb3Igb2NjdXJlZCB3aGls
ZSBjbG9zaW5nIHN0cmVhbSIsIGUpOworICAgICAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dl
ci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgCisgICAgICAgICAgICAgICAgICAgIAki
QW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBjbG9zaW5nIHN0cmVhbSIsIGUpOwogICAgICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgIH0KICAgICAgICAgICAgIGlmIChwcm9jZXNzICE9IG51bGwpIHsK
QEAgLTI0Niw3ICsyNTksOCBAQAogICAgICAgICBGaWxlIGRpcmVjdG9yeSA9IG5ldyBGaWxlKGRp
cmVjdG9yeU5hbWUpOwogCiAgICAgICAgIExpc3Q8U3RyaW5nPiBjbWQgPSBuZXcgQXJyYXlMaXN0
PFN0cmluZz4oKTsKLSAgICAgICAgY21kLmFkZChnZXRDb21tYW5kKCkpOworCQllbnN1cmVDb21t
YW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAgIGNtZC5hZGQodGhp
cy5jbWQpOwogICAgICAgICBjbWQuYWRkKCJzaG93Y29uZmlnIik7CiAgICAgICAgIEV4ZWN1dG9y
IGV4ZWN1dG9yID0gbmV3IEV4ZWN1dG9yKGNtZCwgZGlyZWN0b3J5KTsKICAgICAgICAgaWYgKGV4
ZWN1dG9yLmV4ZWMoKSAhPSAwKSB7CkBAIC0yNTUsNyArMjY5LDcgQEAKIAogICAgICAgICBpZiAo
ZXhlY3V0b3IuZ2V0T3V0cHV0U3RyaW5nKCkuaW5kZXhPZigicGF0aHMuZGVmYXVsdD0iKSAhPSAt
MSkgewogICAgICAgICAgICAgY21kLmNsZWFyKCk7Ci0gICAgICAgICAgICBjbWQuYWRkKGdldENv
bW1hbmQoKSk7CisgICAgICAgICAgICBjbWQuYWRkKHRoaXMuY21kKTsKICAgICAgICAgICAgIGNt
ZC5hZGQoInB1bGwiKTsKICAgICAgICAgICAgIGNtZC5hZGQoIi11Iik7CiAgICAgICAgICAgICBl
eGVjdXRvciA9IG5ldyBFeGVjdXRvcihjbWQsIGRpcmVjdG9yeSk7CkBAIC0yNzksMjAgKzI5Mywy
NSBAQAogICAgICAgaWYgKGZpbGUuaXNEaXJlY3RvcnkoKSkgewogICAgICAgICBGaWxlIGYgPSBu
ZXcgRmlsZShmaWxlLCAiLmhnIik7CiAgICAgICAgIHJldHVybiBmLmV4aXN0cygpICYmIGYuaXNE
aXJlY3RvcnkoKTsKLSAgICAgIH0gZWxzZSB7Ci0gICAgICAgIHJldHVybiBmYWxzZTsgfQorICAg
ICAgfQorICAgICAgcmV0dXJuIGZhbHNlOwogICAgIH0KIAogICAgIEBPdmVycmlkZQogICAgIGJv
b2xlYW4gc3VwcG9ydHNTdWJSZXBvc2l0b3JpZXMoKSB7Ci0gICAgICAgIC8vIFRoZSBmb3Jlc3Qt
ZXh0ZW5zaW9uIGluIE1lcmN1cmlhbCBhZGRzIHJlcG9zaXRvcmllcyBpbnNpZGUgdGhlCi0gICAg
ICAgIC8vIHJlcG9zaXRvcmllcy4KLSAgICAgICAgcmV0dXJuICFCb29sZWFuLmdldEJvb2xlYW4o
Im9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5Lm1lcmN1cmlhbC5kaXNhYmxlRm9yZXN0
Iik7CisgICAgCVN0cmluZyB2YWwgPSBTeXN0ZW0uZ2V0ZW52KE5PRk9SRVNUX1BST1BFUlRZX0tF
WSk7CisgICAgICAgIHJldHVybiAhICh2YWwgPT0gbnVsbAorICAgICAgICAJPyBCb29sZWFuLmdl
dEJvb2xlYW4oTk9GT1JFU1RfUFJPUEVSVFlfS0VZKQorICAgICAgICAJOiBCb29sZWFuLnBhcnNl
Qm9vbGVhbih2YWwpKTsKICAgICB9CiAKICAgICBAT3ZlcnJpZGUKICAgICBwdWJsaWMgYm9vbGVh
biBpc1dvcmtpbmcoKSB7Ci0gICAgICAgIHJldHVybiBoZ0JpbmFyeS5hdmFpbGFibGU7CisgICAg
CWlmICh3b3JraW5nID09IG51bGwpIHsKKyAgICAJCWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZ
X0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgCXdvcmtpbmcgPSBjaGVja0NtZChuZXcgU3Ry
aW5nW117IGNtZCB9KTsKKyAgICAJfQorICAgICAgICByZXR1cm4gd29ya2luZy5ib29sZWFuVmFs
dWUoKTsKICAgICB9CiAKICAgICBAT3ZlcnJpZGUKZGlmZiAtciBiZmU4MjhjYmNjODQgc3JjL29y
Zy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L01vbm90b25lUmVwb3NpdG9yeS5qYXZhCi0t
LSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9Nb25vdG9uZVJlcG9zaXRv
cnkuamF2YQlTYXQgRmViIDI2IDE5OjE2OjU4IDIwMTEgKzAxMDAKKysrIGIvc3JjL29yZy9vcGVu
c29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L01vbm90b25lUmVwb3NpdG9yeS5qYXZhCVRodSBNYXIg
MzEgMDY6NTk6MTcgMjAxMSArMDIwMApAQCAtNDYsMTcgKzQ2LDExIEBACiBwdWJsaWMgY2xhc3Mg
TW9ub3RvbmVSZXBvc2l0b3J5IGV4dGVuZHMgUmVwb3NpdG9yeSB7CiAKICAgICBwcml2YXRlIHN0
YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDsKLSAgICBwcml2YXRlIHN0YXRp
YyBTY21DaGVja2VyIGJpbmFyeSA9IG5ldyBTY21DaGVja2VyKG5ldyBTdHJpbmdbXXsKLSAgICAg
ICAgICAgICAgICBTeXN0ZW0uZ2V0UHJvcGVydHkoIm9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5o
aXN0b3J5Lk1vbm90b25lIiwgIm10biIpLAotICAgICAgICAgICAgICAgICItLWhlbHAifSk7Ci0K
LSAgICAvKioKLSAgICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIE1lcmN1cmlhbCBjb21tYW5kIHRo
YXQgc2hvdWxkIGJlIHVzZWQKLSAgICAgKiBAcmV0dXJuIHRoZSBuYW1lIG9mIHRoZSBoZyBjb21t
YW5kIGluIHVzZQotICAgICAqLwotICAgIHN0YXRpYyBTdHJpbmcgZ2V0Q29tbWFuZCgpIHsKLSAg
ICAgICAgcmV0dXJuIFN5c3RlbS5nZXRQcm9wZXJ0eSgib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9r
Lmhpc3RvcnkuTW9ub3RvbmUiLCAibXRuIik7Ci0gICAgfQorICAgIC8qKiBUaGUgcHJvcGVydHkg
bmFtZSB1c2VkIHRvIG9idGFpbiB0aGUgY2xpZW50IGNvbW1hbmQgZm9yIHRoaXMgcmVwb3NpdG9y
eS4gKi8KKyAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBDTURfUFJPUEVSVFlfS0VZID0g
CisgICAgCSJvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suaGlzdG9yeS5Nb25vdG9uZSI7CisgICAg
LyoqIFRoZSBjb21tYW5kIHRvIHVzZSB0byBhY2Nlc3MgdGhlIHJlcG9zaXRvcnkgaWYgbm9uZSB3
YXMgZ2l2ZW4gZXhwbGljaXRseSAqLworICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIENN
RF9GQUxMQkFDSyA9ICJtbnQiOwogCiAgICAgcHVibGljIE1vbm90b25lUmVwb3NpdG9yeSgpIHsK
ICAgICAgICAgdHlwZSA9ICJNb25vdG9uZSI7CkBAIC02NCw3ICs1OCw4IEBACiAgICAgfQogCiAg
ICAgQE92ZXJyaWRlCi0gICAgcHVibGljIElucHV0U3RyZWFtIGdldEhpc3RvcnlHZXQoU3RyaW5n
IHBhcmVudCwgU3RyaW5nIGJhc2VuYW1lLCBTdHJpbmcgcmV2KSB7CisgICAgcHVibGljIElucHV0
U3RyZWFtIGdldEhpc3RvcnlHZXQoU3RyaW5nIHBhcmVudCwgU3RyaW5nIGJhc2VuYW1lLCBTdHJp
bmcgcmV2KSAKKyAgICB7CiAgICAgICAgIElucHV0U3RyZWFtIHJldCA9IG51bGw7CiAKICAgICAg
ICAgRmlsZSBkaXJlY3RvcnkgPSBuZXcgRmlsZShkaXJlY3RvcnlOYW1lKTsKQEAgLTc0LDggKzY5
LDEwIEBACiAgICAgICAgIFN0cmluZyByZXZpc2lvbiA9IHJldjsKIAogICAgICAgICB0cnkgewot
ICAgICAgICAgICAgU3RyaW5nIGZpbGVuYW1lID0gKG5ldyBGaWxlKHBhcmVudCwgYmFzZW5hbWUp
KS5nZXRDYW5vbmljYWxQYXRoKCkuc3Vic3RyaW5nKGRpcmVjdG9yeU5hbWUubGVuZ3RoKCkgKyAx
KTsKLSAgICAgICAgICAgIFN0cmluZyBhcmd2W10gPSB7Z2V0Q29tbWFuZCgpLCAiY2F0IiwgIi1y
IiwgcmV2aXNpb24sIGZpbGVuYW1lfTsKKyAgICAgICAgICAgIFN0cmluZyBmaWxlbmFtZSA9IChu
ZXcgRmlsZShwYXJlbnQsIGJhc2VuYW1lKSkuZ2V0Q2Fub25pY2FsUGF0aCgpCisgICAgICAgICAg
ICAJLnN1YnN0cmluZyhkaXJlY3RvcnlOYW1lLmxlbmd0aCgpICsgMSk7CisgICAgCQllbnN1cmVD
b21tYW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAgICAgICBTdHJp
bmcgYXJndltdID0geyBjbWQsICJjYXQiLCAiLXIiLCByZXZpc2lvbiwgZmlsZW5hbWV9OwogICAg
ICAgICAgICAgcHJvY2VzcyA9IFJ1bnRpbWUuZ2V0UnVudGltZSgpLmV4ZWMoYXJndiwgbnVsbCwg
ZGlyZWN0b3J5KTsKIAogICAgICAgICAgICAgQnl0ZUFycmF5T3V0cHV0U3RyZWFtIG91dCA9IG5l
dyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0oKTsKQEAgLTkxLDEzICs4OCwxNSBAQAogCiAgICAgICAg
ICAgICByZXQgPSBuZXcgQnVmZmVyZWRJbnB1dFN0cmVhbShuZXcgQnl0ZUFycmF5SW5wdXRTdHJl
YW0ob3V0LnRvQnl0ZUFycmF5KCkpKTsKICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4cCkg
ewotICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLlNFVkVS
RSwgIkZhaWxlZCB0byBnZXQgaGlzdG9yeTogIiArIGV4cC5nZXRDbGFzcygpLnRvU3RyaW5nKCkp
OworICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLlNFVkVS
RSwgCisgICAgICAgICAgICAJIkZhaWxlZCB0byBnZXQgaGlzdG9yeTogIiArIGV4cC5nZXRDbGFz
cygpLnRvU3RyaW5nKCkpOwogICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgaWYgKGlu
ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICBp
bi5jbG9zZSgpOwogICAgICAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKLSAg
ICAgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldB
Uk5JTkcsICJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGNsb3Npbmcgc3RyZWFtIiwgZSk7CisgICAg
ICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJO
SU5HLCAKKyAgICAgICAgICAgICAgICAgICAgCSJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGNsb3Np
bmcgc3RyZWFtIiwgZSk7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAg
ICAgICAgLy8gQ2xlYW4gdXAgem9tYmllLXByb2Nlc3Nlcy4uLgpAQCAtMTE1LDcgKzExNCw3IEBA
CiAgICAgfQogCiAgICAgRXhlY3V0b3IgZ2V0SGlzdG9yeUxvZ0V4ZWN1dG9yKEZpbGUgZmlsZSwg
U3RyaW5nIGNoYW5nZXNldCkKLSAgICAgICAgdGhyb3dzIEhpc3RvcnlFeGNlcHRpb24sIElPRXhj
ZXB0aW9uIHsKKyAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgU3RyaW5nIGFi
cyA9IGZpbGUuZ2V0Q2Fub25pY2FsUGF0aCgpOwogICAgICAgICBTdHJpbmcgZmlsZW5hbWUgPSAi
IjsKICAgICAgICAgaWYgKGFicy5sZW5ndGgoKSA+IGRpcmVjdG9yeU5hbWUubGVuZ3RoKCkpIHsK
QEAgLTEyMyw3ICsxMjIsOCBAQAogICAgICAgICB9CiAKICAgICAgICAgTGlzdDxTdHJpbmc+IGNt
ZCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwotICAgICAgICBjbWQuYWRkKGdldENvbW1hbmQo
KSk7CisJCWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAg
ICAgICAgY21kLmFkZCh0aGlzLmNtZCk7CiAgICAgICAgIGNtZC5hZGQoImxvZyIpOwogCiAgICAg
ICAgIGlmIChjaGFuZ2VzZXQgIT0gbnVsbCkgewpAQCAtMTUxLDcgKzE1MSw4IEBACiAgICAgQE92
ZXJyaWRlCiAgICAgcHVibGljIEFubm90YXRpb24gYW5ub3RhdGUoRmlsZSBmaWxlLCBTdHJpbmcg
cmV2aXNpb24pIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgIEFycmF5TGlzdDxTdHJpbmc+
IGNtZCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwotICAgICAgICBjbWQuYWRkKGdldENvbW1h
bmQoKSk7CisJCWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsK
KyAgICAgICAgY21kLmFkZCh0aGlzLmNtZCk7CiAgICAgICAgIGNtZC5hZGQoImFubm90YXRlIik7
CiAgICAgICAgIGNtZC5hZGQoIi0tcmVhbGx5cXVpZXQiKTsKICAgICAgICAgaWYgKHJldmlzaW9u
ICE9IG51bGwpIHsKQEAgLTE5MSw3ICsxOTIsOCBAQAogICAgICAgICAgICAgICAgIHRyeSB7CiAg
ICAgICAgICAgICAgICAgICAgIGluLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgfSBjYXRjaCAo
SU9FeGNlcHRpb24gZSkgewotICAgICAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRM
b2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgIkFuIGVycm9yIG9jY3VyZWQgd2hpbGUgY2xvc2lu
ZyBzdHJlYW0iLCBlKTsKKyAgICAgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9n
Z2VyKCkubG9nKExldmVsLldBUk5JTkcsIAorICAgICAgICAgICAgICAgICAgICAJIkFuIGVycm9y
IG9jY3VyZWQgd2hpbGUgY2xvc2luZyBzdHJlYW0iLCBlKTsKICAgICAgICAgICAgICAgICB9CiAg
ICAgICAgICAgICB9CiAgICAgICAgIH0KQEAgLTIwNiw5ICsyMDgsMTAgQEAKICAgICBAT3ZlcnJp
ZGUKICAgICBwdWJsaWMgdm9pZCB1cGRhdGUoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg
ICBGaWxlIGRpcmVjdG9yeSA9IG5ldyBGaWxlKGRpcmVjdG9yeU5hbWUpOworCQllbnN1cmVDb21t
YW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CiAKICAgICAgICAgTGlzdDxTdHJp
bmc+IGNtZCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwotICAgICAgICBjbWQuYWRkKGdldENv
bW1hbmQoKSk7CisgICAgICAgIGNtZC5hZGQodGhpcy5jbWQpOwogICAgICAgICBjbWQuYWRkKCJw
dWxsIik7CiAgICAgICAgIGNtZC5hZGQoIi0tcmVhbGx5cXVpZXQiKTsKICAgICAgICAgRXhlY3V0
b3IgZXhlY3V0b3IgPSBuZXcgRXhlY3V0b3IoY21kLCBkaXJlY3RvcnkpOwpAQCAtMjE3LDcgKzIy
MCw3IEBACiAgICAgICAgIH0KIAogICAgICAgICBjbWQuY2xlYXIoKTsKLSAgICAgICAgY21kLmFk
ZChnZXRDb21tYW5kKCkpOworICAgICAgICBjbWQuYWRkKHRoaXMuY21kKTsKICAgICAgICAgY21k
LmFkZCgidXBkYXRlIik7CiAgICAgICAgIGNtZC5hZGQoIi0tcmVhbGx5cXVpZXQiKTsKICAgICAg
ICAgZXhlY3V0b3IgPSBuZXcgRXhlY3V0b3IoY21kLCBkaXJlY3RvcnkpOwpAQCAtMjM5LDcgKzI0
MiwxMSBAQAogCiAgICAgQE92ZXJyaWRlCiAgICAgcHVibGljIGJvb2xlYW4gaXNXb3JraW5nKCkg
ewotICAgICAgICByZXR1cm4gYmluYXJ5LmF2YWlsYWJsZTsKKyAgICAJaWYgKHdvcmtpbmcgPT0g
bnVsbCkgeworICAgIAkJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVSVFlfS0VZLCBDTURfRkFMTEJB
Q0spOworICAgICAgICAJd29ya2luZyA9IGNoZWNrQ21kKG5ldyBTdHJpbmdbXXsgY21kLCAiLS1o
ZWxwIn0pOworICAgIAl9CisgICAgICAgIHJldHVybiB3b3JraW5nLmJvb2xlYW5WYWx1ZSgpOwog
ICAgIH0KIAogICAgIEBPdmVycmlkZQpkaWZmIC1yIGJmZTgyOGNiY2M4NCBzcmMvb3JnL29wZW5z
b2xhcmlzL29wZW5ncm9rL2hpc3RvcnkvUGVyZm9yY2VSZXBvc2l0b3J5LmphdmEKLS0tIGEvc3Jj
L29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L1BlcmZvcmNlUmVwb3NpdG9yeS5qYXZh
CVNhdCBGZWIgMjYgMTk6MTY6NTggMjAxMSArMDEwMAorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlz
L29wZW5ncm9rL2hpc3RvcnkvUGVyZm9yY2VSZXBvc2l0b3J5LmphdmEJVGh1IE1hciAzMSAwNjo1
OToxNyAyMDExICswMjAwCkBAIC00MiwyNyArNDIsMjUgQEAKIHB1YmxpYyBjbGFzcyBQZXJmb3Jj
ZVJlcG9zaXRvcnkgZXh0ZW5kcyBSZXBvc2l0b3J5IHsKIAogICAgIHByaXZhdGUgc3RhdGljIGZp
bmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMOwotICAgIHByaXZhdGUgc3RhdGljIFNjbUNo
ZWNrZXIgcDRCaW5hcnkgPSBuZXcgU2NtQ2hlY2tlcihuZXcgU3RyaW5nW117Z2V0Q29tbWFuZCgp
LCAiaGVscCJ9KTsKLSAgICBwcml2YXRlIGZpbmFsIHN0YXRpYyBQYXR0ZXJuIGFubm90YXRpb25f
cGF0dGVybiA9IFBhdHRlcm4uY29tcGlsZSgiXihcXGQrKTogLioiKTsKKyAgICAvKiogVGhlIHBy
b3BlcnR5IG5hbWUgdXNlZCB0byBvYnRhaW4gdGhlIGNsaWVudCBjb21tYW5kIGZvciB0aGlzIHJl
cG9zaXRvcnkuICovCisgICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ01EX1BST1BFUlRZ
X0tFWSA9IAorICAgIAkib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuUGVyZm9yY2Ui
OworICAgIC8qKiBUaGUgY29tbWFuZCB0byB1c2UgdG8gYWNjZXNzIHRoZSByZXBvc2l0b3J5IGlm
IG5vbmUgd2FzIGdpdmVuIGV4cGxpY2l0bHkgKi8KKyAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0
cmluZyBDTURfRkFMTEJBQ0sgPSAicDQiOworCisgICAgcHJpdmF0ZSBmaW5hbCBzdGF0aWMgUGF0
dGVybiBhbm5vdGF0aW9uX3BhdHRlcm4gPSAKKyAgICAJUGF0dGVybi5jb21waWxlKCJeKFxcZCsp
OiAuKiIpOwogCiAgICAgcHVibGljIFBlcmZvcmNlUmVwb3NpdG9yeSgpIHsKICAgICAgICAgdHlw
ZSA9ICJQZXJmb3JjZSI7CiAgICAgfQogCi0gICAgLyoqCi0gICAgICogR2V0IHRoZSBuYW1lIG9m
IHRoZSBQZXJmb3JjZSBjb21tYW5kIHRoYXQgc2hvdWxkIGJlIHVzZWQKLSAgICAgKiAKLSAgICAg
KiBAcmV0dXJuIHRoZSBuYW1lIG9mIHRoZSBwNCBjb21tYW5kIGluIHVzZQotICAgICAqLwotICAg
IHByaXZhdGUgc3RhdGljIFN0cmluZyBnZXRDb21tYW5kKCkgewotICAgICAgICByZXR1cm4gU3lz
dGVtLmdldFByb3BlcnR5KCJvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suaGlzdG9yeS5QZXJmb3Jj
ZSIsICJwNCIpOwotICAgIH0KLQogICAgIEBPdmVycmlkZQogICAgIHB1YmxpYyBBbm5vdGF0aW9u
IGFubm90YXRlKEZpbGUgZmlsZSwgU3RyaW5nIHJldikgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAg
ICAgICAgQW5ub3RhdGlvbiBhID0gbmV3IEFubm90YXRpb24oZmlsZS5nZXROYW1lKCkpOwogCi0g
ICAgICAgIExpc3Q8SGlzdG9yeUVudHJ5PiByZXZpc2lvbnMgPSBQZXJmb3JjZUhpc3RvcnlQYXJz
ZXIuZ2V0UmV2aXNpb25zKGZpbGUsIHJldikuZ2V0SGlzdG9yeUVudHJpZXMoKTsKKyAgICAgICAg
TGlzdDxIaXN0b3J5RW50cnk+IHJldmlzaW9ucyA9IAorICAgICAgICAJUGVyZm9yY2VIaXN0b3J5
UGFyc2VyLmdldFJldmlzaW9ucyhmaWxlLCByZXYpLmdldEhpc3RvcnlFbnRyaWVzKCk7CiAgICAg
ICAgIEhhc2hNYXA8U3RyaW5nLCBTdHJpbmc+IHJldkF1dGhvciA9IG5ldyBIYXNoTWFwPFN0cmlu
ZywgU3RyaW5nPigpOwogICAgICAgICBmb3IgKEhpc3RvcnlFbnRyeSBlbnRyeSA6IHJldmlzaW9u
cykgewogICAgICAgICAgICAgLy8gYS5hZGREZXNjKGVudHJ5LmdldFJldmlzaW9uKCksIGVudHJ5
LmdldE1lc3NhZ2UoKSk7CkBAIC03MCw3ICs2OCw4IEBACiAgICAgICAgIH0KIAogICAgICAgICBB
cnJheUxpc3Q8U3RyaW5nPiBjbWQgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsKLSAgICAgICAg
Y21kLmFkZChnZXRDb21tYW5kKCkpOworCQllbnN1cmVDb21tYW5kKENNRF9QUk9QRVJUWV9LRVks
IENNRF9GQUxMQkFDSyk7CisgICAgICAgIGNtZC5hZGQodGhpcy5jbWQpOwogICAgICAgICBjbWQu
YWRkKCJhbm5vdGF0ZSIpOwogICAgICAgICBjbWQuYWRkKCItcSIpOwogICAgICAgICBjbWQuYWRk
KGZpbGUuZ2V0UGF0aCgpICsgKChyZXYgPT0gbnVsbCkgPyAiIiA6ICIjIiArIHJldikpOwpAQCAt
OTAsOCArODksOSBAQAogICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYXV0aG9yID0gcmV2QXV0
aG9yLmdldChyZXZpc2lvbik7CiAgICAgICAgICAgICAgICAgICAgIGEuYWRkTGluZShyZXZpc2lv
biwgYXV0aG9yLCB0cnVlKTsKICAgICAgICAgICAgICAgICB9IGVsc2UgewotICAgICAgICAgICAg
ICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuU0VWRVJFLAotICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvcjogZGlkIG5vdCBmaW5kIGFubm90YXRpb24g
aW4gbGluZSAiICsgbGluZW5vICsgIjogWyIgKyBsaW5lICsgIl0iKTsKKyAgICAgICAgICAgICAg
ICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLlNFVkVSRSwgCisgICAg
ICAgICAgICAgICAgICAgIAkiRXJyb3I6IGRpZCBub3QgZmluZCBhbm5vdGF0aW9uIGluIGxpbmUg
IiAKKyAgICAgICAgICAgICAgICAgICAgCSsgbGluZW5vICsgIjogWyIgKyBsaW5lICsgIl0iKTsK
ICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9CiAgICAgICAgIH0gY2F0Y2ggKElPRXhj
ZXB0aW9uIGUpIHsKQEAgLTEwNSw3ICsxMDUsOCBAQAogICAgIEBPdmVycmlkZQogICAgIElucHV0
U3RyZWFtIGdldEhpc3RvcnlHZXQoU3RyaW5nIHBhcmVudCwgU3RyaW5nIGJhc2VuYW1lLCBTdHJp
bmcgcmV2KSB7CiAgICAgICAgIEFycmF5TGlzdDxTdHJpbmc+IGNtZCA9IG5ldyBBcnJheUxpc3Q8
U3RyaW5nPigpOwotICAgICAgICBjbWQuYWRkKGdldENvbW1hbmQoKSk7CisJCWVuc3VyZUNvbW1h
bmQoQ01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgY21kLmFkZCh0aGlz
LmNtZCk7CiAgICAgICAgIGNtZC5hZGQoInByaW50Iik7CiAgICAgICAgIGNtZC5hZGQoIi1xIik7
CiAgICAgICAgIGNtZC5hZGQoYmFzZW5hbWUgKyAoKHJldiA9PSBudWxsKSA/ICIiIDogIiMiICsg
cmV2KSk7CkBAIC0xMTksNyArMTIwLDggQEAKICAgICAgICAgRmlsZSBkaXJlY3RvcnkgPSBuZXcg
RmlsZShnZXREaXJlY3RvcnlOYW1lKCkpOwogCiAgICAgICAgIExpc3Q8U3RyaW5nPiBjbWQgPSBu
ZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsKLSAgICAgICAgY21kLmFkZChnZXRDb21tYW5kKCkpOwor
CQllbnN1cmVDb21tYW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7CisgICAgICAg
IGNtZC5hZGQodGhpcy5jbWQpOwogICAgICAgICBjbWQuYWRkKCJzeW5jIik7CiAgICAgICAgIEV4
ZWN1dG9yIGV4ZWN1dG9yID0gbmV3IEV4ZWN1dG9yKGNtZCwgZGlyZWN0b3J5KTsKICAgICAgICAg
aWYgKGV4ZWN1dG9yLmV4ZWMoKSAhPSAwKSB7CkBAIC0xMzcsNiArMTM5LDggQEAKICAgICAgICAg
cmV0dXJuIHRydWU7CiAgICAgfQogCisgICAgcHJpdmF0ZSBzdGF0aWMgUGVyZm9yY2VSZXBvc2l0
b3J5IHRlc3RSZXBvOworCiAgICAgLyoqCiAgICAgICogQ2hlY2sgaWYgYSBnaXZlbiBmaWxlIGlz
IGluIHRoZSBkZXBvdAogICAgICAqIApAQCAtMTQ1LDE0ICsxNDksMTcgQEAKICAgICAgKi8KICAg
ICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gaXNJblA0RGVwb3QoRmlsZSBmaWxlKSB7CiAgICAgICAg
IGJvb2xlYW4gc3RhdHVzID0gZmFsc2U7Ci0gICAgICAgIGlmIChwNEJpbmFyeS5hdmFpbGFibGUp
IHsKKyAgICAgICAgaWYgKHRlc3RSZXBvID09IG51bGwpIHsKKyAgICAgICAgCXRlc3RSZXBvID0g
bmV3IFBlcmZvcmNlUmVwb3NpdG9yeSgpOworICAgICAgICB9CisgICAgICAgIGlmICh0ZXN0UmVw
by5pc1dvcmtpbmcoKSkgewogICAgICAgICAgICAgQXJyYXlMaXN0PFN0cmluZz4gY21kID0gbmV3
IEFycmF5TGlzdDxTdHJpbmc+KCk7CiAgICAgICAgICAgICBTdHJpbmcgbmFtZSA9IGZpbGUuZ2V0
TmFtZSgpOwogICAgICAgICAgICAgRmlsZSAgIGRpciAgPSBmaWxlLmdldFBhcmVudEZpbGUoKTsK
ICAgICAgICAgICAgIGlmIChmaWxlLmlzRGlyZWN0b3J5KCkpIHsKICAgICAgICAgICAgICAgICBk
aXIgPSBmaWxlOwogICAgICAgICAgICAgICAgIG5hbWUgPSAiKiI7Ci0gICAgICAgICAgICAgICAg
Y21kLmFkZChnZXRDb21tYW5kKCkpOworICAgICAgICAgICAgICAgIGNtZC5hZGQodGVzdFJlcG8u
Y21kKTsKICAgICAgICAgICAgICAgICBjbWQuYWRkKCJkaXJzIik7CiAgICAgICAgICAgICAgICAg
Y21kLmFkZChuYW1lKTsKICAgICAgICAgICAgICAgICBFeGVjdXRvciBleGVjdXRvciA9IG5ldyBF
eGVjdXRvcihjbWQsIGRpcik7CkBAIC0xNjUsNyArMTcyLDcgQEAKICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgIGlmICghc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgY21kLmNsZWFyKCk7Ci0g
ICAgICAgICAgICAgICAgY21kLmFkZChnZXRDb21tYW5kKCkpOworICAgICAgICAgICAgICAgIGNt
ZC5hZGQodGVzdFJlcG8uY21kKTsKICAgICAgICAgICAgICAgICBjbWQuYWRkKCJmaWxlcyIpOwog
ICAgICAgICAgICAgICAgIGNtZC5hZGQobmFtZSk7CiAgICAgICAgICAgICAgICAgRXhlY3V0b3Ig
ZXhlY3V0b3IgPSBuZXcgRXhlY3V0b3IoY21kLCBkaXIpOwpAQCAtMTg3LDcgKzE5NCwxMSBAQAog
CiAgICAgQE92ZXJyaWRlCiAgICAgcHVibGljIGJvb2xlYW4gaXNXb3JraW5nKCkgewotICAgICAg
ICByZXR1cm4gcDRCaW5hcnkuYXZhaWxhYmxlOworICAgIAlpZiAod29ya2luZyA9PSBudWxsKSB7
CisgICAgCQllbnN1cmVDb21tYW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7Cisg
ICAgICAgIAl3b3JraW5nID0gY2hlY2tDbWQobmV3IFN0cmluZ1tdeyBjbWQsICJoZWxwIiB9KTsK
KyAgICAJfQorICAgICAgICByZXR1cm4gd29ya2luZy5ib29sZWFuVmFsdWUoKTsKICAgICB9CiAK
ICAgICBAT3ZlcnJpZGUKZGlmZiAtciBiZmU4MjhjYmNjODQgc3JjL29yZy9vcGVuc29sYXJpcy9v
cGVuZ3Jvay9oaXN0b3J5L1Jhem9yUmVwb3NpdG9yeS5qYXZhCi0tLSBhL3NyYy9vcmcvb3BlbnNv
bGFyaXMvb3Blbmdyb2svaGlzdG9yeS9SYXpvclJlcG9zaXRvcnkuamF2YQlTYXQgRmViIDI2IDE5
OjE2OjU4IDIwMTEgKzAxMDAKKysrIGIvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0
b3J5L1Jhem9yUmVwb3NpdG9yeS5qYXZhCVRodSBNYXIgMzEgMDY6NTk6MTcgMjAxMSArMDIwMApA
QCAtMTQyLDcgKzE0Miw3IEBACiAKICAgICBwdWJsaWMgUmF6b3JSZXBvc2l0b3J5KCkgewogICAg
ICAgICB0eXBlID0gIlJhem9yIjsKLSAgICAgICAgd29ya2luZyA9IHRydWU7CisgICAgICAgIHdv
cmtpbmcgPSBCb29sZWFuLlRSVUU7CiAgICAgICAgIGRhdGVQYXR0ZXJuID0gInl5eXkvTU0vZGQs
aGg6bW06c3MiOwogICAgIH0KIApAQCAtMTUwLDggKzE1MCwxMCBAQAogICAgIHB1YmxpYyB2b2lk
IHNldERpcmVjdG9yeU5hbWUoU3RyaW5nIGRpcmVjdG9yeU5hbWUpIHsKICAgICAgICAgc3VwZXIu
c2V0RGlyZWN0b3J5TmFtZShkaXJlY3RvcnlOYW1lKTsKICAgICAgICAgRmlsZSBvcGVuZ3Jva0Jh
c2VEaXJlY3RvcnkgPSBuZXcgRmlsZShkaXJlY3RvcnlOYW1lKTsKLSAgICAgICAgb3Blbmdyb2tT
b3VyY2VSb290RGlyZWN0b3J5UGF0aCA9IG9wZW5ncm9rQmFzZURpcmVjdG9yeS5nZXRQYXJlbnRG
aWxlKCkuZ2V0QWJzb2x1dGVQYXRoKCk7Ci0gICAgICAgIHJhem9yR3JvdXBCYXNlRGlyZWN0b3J5
UGF0aCA9IG5ldyBGaWxlKGRpcmVjdG9yeU5hbWUsICIucmF6b3IiKS5nZXRBYnNvbHV0ZVBhdGgo
KTsKKyAgICAgICAgb3Blbmdyb2tTb3VyY2VSb290RGlyZWN0b3J5UGF0aCA9IAorICAgICAgICAJ
b3Blbmdyb2tCYXNlRGlyZWN0b3J5LmdldFBhcmVudEZpbGUoKS5nZXRBYnNvbHV0ZVBhdGgoKTsK
KyAgICAgICAgcmF6b3JHcm91cEJhc2VEaXJlY3RvcnlQYXRoID0gCisgICAgICAgIAluZXcgRmls
ZShkaXJlY3RvcnlOYW1lLCAiLnJhem9yIikuZ2V0QWJzb2x1dGVQYXRoKCk7CiAgICAgfQogCiAg
ICAgcHVibGljIFN0cmluZyBnZXRPcGVuZ3Jva1NvdXJjZVJvb3REaXJlY3RvcnlQYXRoKCkgewpA
QCAtMTcxLDcgKzE3Myw4IEBACiAgICAgfQogCiAgICAgU3RyaW5nIGdldE9wZW5Hcm9rRmlsZU5h
bWVGb3IoRmlsZSBmaWxlKSB7Ci0gICAgICAgIHJldHVybiBmaWxlLmdldEFic29sdXRlUGF0aCgp
LnN1YnN0cmluZyhvcGVuZ3Jva1NvdXJjZVJvb3REaXJlY3RvcnlQYXRoLmxlbmd0aCgpKTsKKyAg
ICAgICAgcmV0dXJuIGZpbGUuZ2V0QWJzb2x1dGVQYXRoKCkKKyAgICAgICAgCS5zdWJzdHJpbmco
b3Blbmdyb2tTb3VyY2VSb290RGlyZWN0b3J5UGF0aC5sZW5ndGgoKSk7CiAgICAgfQogCiAgICAg
RmlsZSBnZXRTb3VyY2VOYW1lRm9yT3Blbkdyb2tOYW1lKFN0cmluZyBwYXRoKSB7CkBAIC0yMTEs
NyArMjE0LDggQEAKICAgICBJbnB1dFN0cmVhbSBnZXRIaXN0b3J5R2V0KCBTdHJpbmcgcGFyZW50
LCBTdHJpbmcgYmFzZW5hbWUsIFN0cmluZyByZXYpIHsKICAgICAgICAgLy8gQFRPRE8gOiBSZW5h
bWUgJiBEZWxldGUgU3VwcG9ydAogICAgICAgICB0cnkgewotICAgICAgICAgICAgRmlsZSBiaW5h
cnlGaWxlID0gZ2V0UmF6b3JBcmNoaXZlQmluYXJ5RmlsZUZvcihuZXcgRmlsZShwYXJlbnQsIGJh
c2VuYW1lKSwgcmV2KTsKKyAgICAgICAgICAgIEZpbGUgYmluYXJ5RmlsZSA9IAorICAgICAgICAg
ICAgCWdldFJhem9yQXJjaGl2ZUJpbmFyeUZpbGVGb3IobmV3IEZpbGUocGFyZW50LCBiYXNlbmFt
ZSksIHJldik7CiAgICAgICAgICAgICBpZiAoYmluYXJ5RmlsZSAhPSBudWxsICYmIGJpbmFyeUZp
bGUuZXhpc3RzKCkpIHsKICAgICAgICAgICAgICAgICAvLyBAVE9ETyA6IEltcGxlbWVudCBhIFVO
SVggQ29tcHJlc3MgZGVjb21wcmVzc2lvbiBpbnB1dCBzdHJlYW0KICAgICAgICAgICAgICAgICAv
LyBUaGUgc3RhbmRhcmQgUmF6b3IgaW1wbGVtZW50YXRpb24gdXNlcyBVTklYIENvbXByZXNzLCBz
byB3ZQpAQCAtMjMwLDExICsyMzQsMTMgQEAKIAogICAgICAgICAgICAgRmlsZSBzY2NzRmlsZSA9
IGdldFJhem9yQXJjaGl2ZVNDQ1NGaWxlRm9yKG5ldyBGaWxlKHBhcmVudCwgYmFzZW5hbWUpKTsK
ICAgICAgICAgICAgIGlmIChzY2NzRmlsZSAhPSBudWxsICYmIHNjY3NGaWxlLmV4aXN0cygpKSB7
Ci0gICAgICAgICAgICAgICAgU3RyaW5nIFNDQ1NfQ09NTUFORCA9IFN5c3RlbS5nZXRQcm9wZXJ0
eSgib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuU0NDUyIsICJzY2NzIik7Ci0gICAg
ICAgICAgICAgICAgcmV0dXJuIFNDQ1NnZXQuZ2V0UmV2aXNpb24oU0NDU19DT01NQU5ELCBzY2Nz
RmlsZSwgcmV2KTsKKyAgICAgICAgICAgIAllbnN1cmVDb21tYW5kKFNDQ1NSZXBvc2l0b3J5LkNN
RF9QUk9QRVJUWV9LRVksIAorICAgICAgICAgICAgCQlTQ0NTUmVwb3NpdG9yeS5DTURfRkFMTEJB
Q0spOworICAgICAgICAgICAgICAgIHJldHVybiBTQ0NTZ2V0LmdldFJldmlzaW9uKGNtZCwgc2Nj
c0ZpbGUsIHJldik7CiAgICAgICAgICAgICB9CiAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl
KSB7Ci0gICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuU0VW
RVJFLCAiZ2V0SGlzdG9yeUdldCggIiArIHBhcmVudCArICIsICIgKyBiYXNlbmFtZSArICIsICIg
KyByZXYgKyAiKSIsIGUpOworICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCku
bG9nKExldmVsLlNFVkVSRSwgImdldEhpc3RvcnlHZXQoICIgCisgICAgICAgICAgICAJKyBwYXJl
bnQgKyAiLCAiICsgYmFzZW5hbWUgKyAiLCAiICsgcmV2ICsgIikiLCBlKTsKICAgICAgICAgfQog
ICAgICAgICByZXR1cm4gbnVsbDsKICAgICB9CkBAIC0yODQsMTIgKzI5MCwxNiBAQAogICAgICAg
ICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oIk5vdCBzdXBwb3J0ZWQg
eWV0LiIpOwogICAgIH0KIAotICAgIHByaXZhdGUgRmlsZSBwYXRoVHJhbnNsYXRpb24oRmlsZSBm
aWxlLCBTdHJpbmcgaW50ZXJtZWRpYXRlRWxlbWVudHMsIFN0cmluZyBmaWxlUHJlZml4LCBTdHJp
bmcgZmlsZVN1ZmZpeCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKKyAgICBwcml2YXRlIEZpbGUgcGF0
aFRyYW5zbGF0aW9uKEZpbGUgZmlsZSwgU3RyaW5nIGludGVybWVkaWF0ZUVsZW1lbnRzLCAKKyAg
ICAJU3RyaW5nIGZpbGVQcmVmaXgsIFN0cmluZyBmaWxlU3VmZml4KSB0aHJvd3MgSU9FeGNlcHRp
b24gCisgICAgewogICAgICAgICAKICAgICAgICAgRmlsZSBmID0gZmlsZTsKIAogICAgICAgICBp
ZiAoIWYuZ2V0QWJzb2x1dGVQYXRoKCkuc3RhcnRzV2l0aChvcGVuZ3Jva1NvdXJjZVJvb3REaXJl
Y3RvcnlQYXRoKSkgewotICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJJbnZhbGlk
IFBhdGggZm9yIFRyYW5zbGF0aW9uICciICsgZi5nZXRQYXRoKCkgKyAiJywgJyIgKyBpbnRlcm1l
ZGlhdGVFbGVtZW50cyArICInLCAnIiArIGZpbGVQcmVmaXggKyAiJywgJyIgKyBmaWxlU3VmZml4
ICsgIiciKTsKKyAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiSW52YWxpZCBQYXRo
IGZvciBUcmFuc2xhdGlvbiAnIiArIGYuZ2V0UGF0aCgpCisgICAgICAgICAgICAJKyAiJywgJyIg
KyBpbnRlcm1lZGlhdGVFbGVtZW50cyArICInLCAnIiArIGZpbGVQcmVmaXggKyAiJywgJyIgCisg
ICAgICAgICAgICAJKyBmaWxlU3VmZml4ICsgIiciKTsKICAgICAgICAgfQogCiAgICAgICAgIGlm
IChmaWxlUHJlZml4Lmxlbmd0aCgpICE9IDApIHsKQEAgLTMwMCw3ICszMTAsOCBAQAogICAgICAg
ICBwYXRoLmFwcGVuZChpbnRlcm1lZGlhdGVFbGVtZW50cyk7CiAKICAgICAgICAgaWYgKGYuZ2V0
QWJzb2x1dGVQYXRoKCkubGVuZ3RoKCkgPiBvcGVuZ3Jva1NvdXJjZVJvb3REaXJlY3RvcnlQYXRo
Lmxlbmd0aCgpKSB7Ci0gICAgICAgICAgICBwYXRoLmFwcGVuZChmLmdldEFic29sdXRlUGF0aCgp
LnN1YnN0cmluZyhvcGVuZ3Jva1NvdXJjZVJvb3REaXJlY3RvcnlQYXRoLmxlbmd0aCgpICsgMSkp
OworICAgICAgICAgICAgcGF0aC5hcHBlbmQoZi5nZXRBYnNvbHV0ZVBhdGgoKQorICAgICAgICAg
ICAgCS5zdWJzdHJpbmcob3Blbmdyb2tTb3VyY2VSb290RGlyZWN0b3J5UGF0aC5sZW5ndGgoKSAr
IDEpKTsKICAgICAgICAgfQogCiAgICAgICAgIGlmIChmaWxlU3VmZml4Lmxlbmd0aCgpICE9IDAp
IHsKZGlmZiAtciBiZmU4MjhjYmNjODQgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0
b3J5L1JlcG9SZXBvc2l0b3J5LmphdmEKLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jv
ay9oaXN0b3J5L1JlcG9SZXBvc2l0b3J5LmphdmEJU2F0IEZlYiAyNiAxOToxNjo1OCAyMDExICsw
MTAwCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9SZXBvUmVwb3Np
dG9yeS5qYXZhCVRodSBNYXIgMzEgMDY6NTk6MTcgMjAxMSArMDIwMApAQCAtMzgsMTEgKzM4LDE1
IEBACiBwdWJsaWMgY2xhc3MgUmVwb1JlcG9zaXRvcnkgZXh0ZW5kcyBSZXBvc2l0b3J5IHsKIAog
ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMOwotLy8g
ICAgcHJpdmF0ZSBzdGF0aWMgU2NtQ2hlY2tlciByZXBvQmluYXJ5ID0gbmV3IFNjbUNoZWNrZXIo
bmV3IFN0cmluZ1tdewotLy8gICAgICAgICAgICAgICAgZ2V0Q29tbWFuZCgpLCAiLWgifSk7Cisg
ICAgLyoqIFRoZSBwcm9wZXJ0eSBuYW1lIHVzZWQgdG8gb2J0YWluIHRoZSBjbGllbnQgY29tbWFu
ZCBmb3IgdGhpcyByZXBvc2l0b3J5LiovCisgICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg
Q01EX1BST1BFUlRZX0tFWSA9IAorICAgIAkib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3Rv
cnkucmVwbyI7CisgICAgLyoqIFRoZSBjb21tYW5kIHRvIHVzZSB0byBhY2Nlc3MgdGhlIHJlcG9z
aXRvcnkgaWYgbm9uZSB3YXMgZ2l2ZW4gZXhwbGljaXRseSAqLworICAgIHB1YmxpYyBzdGF0aWMg
ZmluYWwgU3RyaW5nIENNRF9GQUxMQkFDSyA9ICJyZXBvIjsKIAogICAgIHB1YmxpYyBSZXBvUmVw
b3NpdG9yeSgpIHsKICAgICAgICAgdHlwZSA9ICJyZXBvIjsKKyAgICAgICAgc2V0V29ya2luZyhC
b29sZWFuLlRSVUUpOwogICAgIH0KIAogICAgIEBPdmVycmlkZQpAQCAtNTAsMTMgKzU0LDkgQEAK
ICAgICAgICAgc3VwZXIuc2V0RGlyZWN0b3J5TmFtZShkaXJlY3RvcnlOYW1lKTsKICAgICB9CiAK
LSAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgZ2V0Q29tbWFuZCgpIHsKLSAgICAgICAgcmV0dXJu
IFN5c3RlbS5nZXRQcm9wZXJ0eSgib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkucmVw
byIsICJyZXBvIik7Ci0gICAgfQotCiAgICAgQE92ZXJyaWRlCiAgICAgcHVibGljIGJvb2xlYW4g
aXNXb3JraW5nKCkgewotLy8gICAgICAgIHJldHVybiByZXBvQmluYXJ5LmF2YWlsYWJsZTsKKyAg
ICAJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVSVFlfS0VZLCBDTURfRkFMTEJBQ0spOwogICAgICAg
ICByZXR1cm4gdHJ1ZTsKICAgICB9CiAKQEAgLTY0LDcgKzY0LDggQEAKICAgICBwdWJsaWMgdm9p
ZCB1cGRhdGUoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICBGaWxlIGRpcmVjdG9yeSA9
IG5ldyBGaWxlKGdldERpcmVjdG9yeU5hbWUoKSk7CiAgICAgICAgIExpc3Q8U3RyaW5nPiBjbWQg
PSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsKLSAgICAgICAgY21kLmFkZChnZXRDb21tYW5kKCkp
OworICAgIAllbnN1cmVDb21tYW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7Cisg
ICAgICAgIGNtZC5hZGQodGhpcy5jbWQpOwogICAgICAgICBjbWQuYWRkKCJzeW5jIik7CiAKICAg
ICAgICAgRXhlY3V0b3IgZXhlY3V0b3IgPSBuZXcgRXhlY3V0b3IoY21kLCBkaXJlY3RvcnkpOwpA
QCAtNzgsOSArNzksOCBAQAogICAgICAgICBpZiAoZmlsZS5pc0RpcmVjdG9yeSgpKSB7CiAgICAg
ICAgICAgICBGaWxlIGYgPSBuZXcgRmlsZShmaWxlLCAiLnJlcG8iKTsKICAgICAgICAgICAgIHJl
dHVybiBmLmV4aXN0cygpICYmIGYuaXNEaXJlY3RvcnkoKTsKLSAgICAgICAgfSBlbHNlIHsKLSAg
ICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgfQorICAgICAgICByZXR1cm4gZmFsc2U7
CiAgICAgfQogCiAgICAgQE92ZXJyaWRlCkBAIC05OSw3ICs5OSw3IEBACiAgICAgfQogCiAgICAg
QE92ZXJyaWRlCi0gICAgSGlzdG9yeSBnZXRIaXN0b3J5KEZpbGUgZmlsZSkgdGhyb3dzIEhpc3Rv
cnlFeGNlcHRpb24geworICAgIEhpc3RvcnkgZ2V0SGlzdG9yeShGaWxlIGZpbGUpIHsKICAgICAg
ICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCJTaG91bGQgbmV2ZXIg
YmUgY2FsbGVkISIpOwogICAgIH0KIApAQCAtMTE0LDcgKzExNCw3IEBACiAgICAgfQogCiAgICAg
QE92ZXJyaWRlCi0gICAgQW5ub3RhdGlvbiBhbm5vdGF0ZShGaWxlIGZpbGUsIFN0cmluZyByZXZp
c2lvbikgdGhyb3dzIElPRXhjZXB0aW9uIHsKKyAgICBBbm5vdGF0aW9uIGFubm90YXRlKEZpbGUg
ZmlsZSwgU3RyaW5nIHJldmlzaW9uKSB7CiAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9w
ZXJhdGlvbkV4Y2VwdGlvbigiU2hvdWxkIG5ldmVyIGJlIGNhbGxlZCEiKTsKICAgICB9CiAKZGlm
ZiAtciBiZmU4MjhjYmNjODQgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L1Jl
cG9zaXRvcnkuamF2YQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2hpc3Rvcnkv
UmVwb3NpdG9yeS5qYXZhCVNhdCBGZWIgMjYgMTk6MTY6NTggMjAxMSArMDEwMAorKysgYi9zcmMv
b3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2hpc3RvcnkvUmVwb3NpdG9yeS5qYXZhCVRodSBNYXIg
MzEgMDY6NTk6MTcgMjAxMSArMDIwMApAQCAtMzMsNiArMzMsNyBAQAogaW1wb3J0IGphdmEudXRp
bC5sb2dnaW5nLkxldmVsOwogaW1wb3J0IGphdmEudXRpbC5sb2dnaW5nLkxvZ2dlcjsKIGltcG9y
dCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suT3Blbkdyb2tMb2dnZXI7CitpbXBvcnQgb3JnLm9w
ZW5zb2xhcmlzLm9wZW5ncm9rLnV0aWwuRXhlY3V0b3I7CiAKIC8qKgogICogQW4gaW50ZXJmYWNl
IGZvciBhbiBleHRlcm5hbCByZXBvc2l0b3J5LiAKQEAgLTIwMCwxNiArMjAxLDE1IEBACiAgICAg
ICAgICAgICBpZiAoc2luY2VSZXZpc2lvbiA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgLy8g
RmFpbGVkIHRvIGdldCBmdWxsIGhpc3RvcnksIHNvIGZhaWwuCiAgICAgICAgICAgICAgICAgdGhy
b3cgaGU7Ci0gICAgICAgICAgICB9IGVsc2UgewotICAgICAgICAgICAgICAgIC8vIEZhaWxlZCB0
byBnZXQgcGFydGlhbCBoaXN0b3J5LiBUaGlzIG1heSBoYXZlIGJlZW4gY2F1c2VkCi0gICAgICAg
ICAgICAgICAgLy8gYnkgY2hhbmdlcyBpbiB0aGUgcmV2aXNpb24gbnVtYmVycyBzaW5jZSB0aGUg
bGFzdCB1cGRhdGUKLSAgICAgICAgICAgICAgICAvLyAoYnVnICMxNDcyNCkgc28gd2UnbGwgdHJ5
IHRvIHJlZ2VuZXJhdGUgdGhlIGNhY2hlIGZyb20KLSAgICAgICAgICAgICAgICAvLyBzY3JhdGNo
IGluc3RlYWQuCi0gICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9n
KExldmVsLklORk8sCi0gICAgICAgICAgICAgICAgICAgICAgICAiRmFpbGVkIHRvIGdldCBwYXJ0
aWFsIGhpc3RvcnkuIEF0dGVtcHRpbmcgdG8gIiArCi0gICAgICAgICAgICAgICAgICAgICAgICAi
cmVjcmVhdGUgdGhlIGhpc3RvcnkgY2FjaGUgZnJvbSBzY3JhdGNoLiIsIGhlKTsKLSAgICAgICAg
ICAgICAgICBoaXN0b3J5ID0gbnVsbDsKICAgICAgICAgICAgIH0KKyAgICAgICAgICAgIC8vIEZh
aWxlZCB0byBnZXQgcGFydGlhbCBoaXN0b3J5LiBUaGlzIG1heSBoYXZlIGJlZW4gY2F1c2VkCisg
ICAgICAgICAgICAvLyBieSBjaGFuZ2VzIGluIHRoZSByZXZpc2lvbiBudW1iZXJzIHNpbmNlIHRo
ZSBsYXN0IHVwZGF0ZQorICAgICAgICAgICAgLy8gKGJ1ZyAjMTQ3MjQpIHNvIHdlJ2xsIHRyeSB0
byByZWdlbmVyYXRlIHRoZSBjYWNoZSBmcm9tCisgICAgICAgICAgICAvLyBzY3JhdGNoIGluc3Rl
YWQuCisgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuSU5G
TywKKyAgICAgICAgICAgICAgICAgICAgIkZhaWxlZCB0byBnZXQgcGFydGlhbCBoaXN0b3J5LiBB
dHRlbXB0aW5nIHRvICIgKworICAgICAgICAgICAgICAgICAgICAicmVjcmVhdGUgdGhlIGhpc3Rv
cnkgY2FjaGUgZnJvbSBzY3JhdGNoLiIsIGhlKTsKKyAgICAgICAgICAgIGhpc3RvcnkgPSBudWxs
OwogICAgICAgICB9CiAKICAgICAgICAgaWYgKHNpbmNlUmV2aXNpb24gIT0gbnVsbCAmJiBoaXN0
b3J5ID09IG51bGwpIHsKQEAgLTI1Myw0ICsyNTMsOSBAQAogICAgIHB1YmxpYyBEYXRlRm9ybWF0
IGdldERhdGVGb3JtYXQoKSB7CiAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlRGF0ZUZvcm1hdChk
YXRlUGF0dGVybiwgTG9jYWxlLmdldERlZmF1bHQoKSk7CiAgICAgfQorICAgIAorICAgIHN0YXRp
YyBCb29sZWFuIGNoZWNrQ21kKGZpbmFsIFN0cmluZ1tdIGFyZ3MpIHsKKyAgICAJRXhlY3V0b3Ig
ZXhlYyA9IG5ldyBFeGVjdXRvcihhcmdzKTsKKyAgICAJcmV0dXJuIEJvb2xlYW4udmFsdWVPZihl
eGVjLmV4ZWMoZmFsc2UpID09IDApOworICAgIH0KIH0KZGlmZiAtciBiZmU4MjhjYmNjODQgc3Jj
L29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L1JlcG9zaXRvcnlGYWN0b3J5LmphdmEK
LS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0b3J5L1JlcG9zaXRvcnlGYWN0
b3J5LmphdmEJU2F0IEZlYiAyNiAxOToxNjo1OCAyMDExICswMTAwCisrKyBiL3NyYy9vcmcvb3Bl
bnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9SZXBvc2l0b3J5RmFjdG9yeS5qYXZhCVRodSBNYXIg
MzEgMDY6NTk6MTcgMjAxMSArMDIwMApAQCAtMjUsNyArMjUsMTAgQEAKIAogaW1wb3J0IGphdmEu
aW8uRmlsZTsKIGltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOworaW1wb3J0IGphdmEudXRpbC5B
cnJheUxpc3Q7CitpbXBvcnQgamF2YS51dGlsLkxpc3Q7CiBpbXBvcnQgamF2YS51dGlsLmxvZ2dp
bmcuTGV2ZWw7CisKIGltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suT3Blbkdyb2tMb2dn
ZXI7CiAKIC8qKgpAQCAtNTUsNiArNTgsMTkgQEAKICAgICB9CiAKICAgICAvKioKKyAgICAgKiBH
ZXQgYSBsaXN0IG9mIGFsbCBhdmFpbGFibGUgcmVwb3NpdG9yeSBoYW5kbGVycy4KKyAgICAgKiBA
cmV0dXJuIGEgbGlzdCB3aGljaCBjb250YWlucyBub25lLXtAY29kZSBudWxsfSB2YWx1ZXMsIG9u
bHkuCisgICAgICovCisgICAgcHVibGljIHN0YXRpYyBMaXN0PENsYXNzPD8gZXh0ZW5kcyBSZXBv
c2l0b3J5Pj4gZ2V0UmVwb3NpdG9yeUNsYXNzZXMoKSB7CisgICAgCUFycmF5TGlzdDxDbGFzczw/
IGV4dGVuZHMgUmVwb3NpdG9yeT4+IGxpc3QgPSAKKyAgICAJCW5ldyBBcnJheUxpc3Q8Q2xhc3M8
PyBleHRlbmRzIFJlcG9zaXRvcnk+PihyZXBvc2l0b3JpZXMubGVuZ3RoKTsKKyAgICAJZm9yIChp
bnQgaT1yZXBvc2l0b3JpZXMubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7CisgICAgCQlsaXN0LmFk
ZChyZXBvc2l0b3JpZXNbaV0uZ2V0Q2xhc3MoKSk7CisgICAgCX0KKyAgICAJcmV0dXJuIGxpc3Q7
CisgICAgfQorICAgIAorICAgIC8qKgogICAgICAqIFJldHVybnMgYSByZXBvc2l0b3J5IGZvciB0
aGUgZ2l2ZW4gZmlsZSwgb3IgbnVsbCBpZiBubyByZXBvc2l0b3J5IHdhcyBmb3VuZC4KICAgICAg
KiAKICAgICAgKiBAcGFyYW0gZmlsZSBGaWxlIHRoYXQgbWlnaHQgY29udGFpbiBhIHJlcG9zaXRv
cnkKZGlmZiAtciBiZmU4MjhjYmNjODQgc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9oaXN0
b3J5L1JlcG9zaXRvcnlJbmZvLmphdmEKLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jv
ay9oaXN0b3J5L1JlcG9zaXRvcnlJbmZvLmphdmEJU2F0IEZlYiAyNiAxOToxNjo1OCAyMDExICsw
MTAwCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9SZXBvc2l0b3J5
SW5mby5qYXZhCVRodSBNYXIgMzEgMDY6NTk6MTcgMjAxMSArMDIwMApAQCAtMjUsNiArMjUsOCBA
QAogCiBpbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7CiAKK2ltcG9ydCBvcmcub3BlbnNvbGFy
aXMub3Blbmdyb2suY29uZmlndXJhdGlvbi5SdW50aW1lRW52aXJvbm1lbnQ7CisKIC8qKgogICog
Q2xhc3MgdG8gY29udGFpbiB0aGUgY29tbW9uIGluZm8gZm9yIGEgcmVwb3NpdG9yeS4gVGhpcyBv
YmplY3QKICAqIHdpbGwgbGl2ZSBvbiB0aGUgc2VydmVyIGFuZCB0aGUgY2xpZW50IHNpZGUsIHNv
IGRvbid0IGFkZCBsb2dpYwpAQCAtMzYsMTAgKzM4LDExIEBACiAgICAgcHJpdmF0ZSBzdGF0aWMg
ZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7CiAgICAgCiAgICAgcHJvdGVjdGVkIFN0
cmluZyBkaXJlY3RvcnlOYW1lOwotICAgIHByb3RlY3RlZCBib29sZWFuIHdvcmtpbmc7CisgICAg
cHJvdGVjdGVkIEJvb2xlYW4gd29ya2luZzsKICAgICBwcm90ZWN0ZWQgU3RyaW5nIHR5cGU7CiAg
ICAgcHJvdGVjdGVkIGJvb2xlYW4gcmVtb3RlOwogICAgIHByb3RlY3RlZCBTdHJpbmcgZGF0ZVBh
dHRlcm47CisgICAgcHJvdGVjdGVkIFN0cmluZyBjbWQ7CiAKICAgICAvKioKICAgICAgKiBFbXB0
eSBjb25zdHJ1Y3RvciB0byBzdXBwb3J0IHNlcmlhbGl6YXRpb24uCkBAIC01MSw5ICs1NCwxMCBA
QAogICAgIHB1YmxpYyBSZXBvc2l0b3J5SW5mbyhSZXBvc2l0b3J5SW5mbyBvcmlnKSB7CiAgICAg
ICAgIHRoaXMuZGlyZWN0b3J5TmFtZSA9IG9yaWcuZGlyZWN0b3J5TmFtZTsKICAgICAgICAgdGhp
cy50eXBlID0gb3JpZy50eXBlOwotICAgICAgICB0aGlzLndvcmtpbmcgPSBvcmlnLmlzV29ya2lu
ZygpOworICAgICAgICB0aGlzLndvcmtpbmcgPSBCb29sZWFuLnZhbHVlT2Yob3JpZy5pc1dvcmtp
bmcoKSk7CiAgICAgICAgIHRoaXMucmVtb3RlID0gb3JpZy5pc1JlbW90ZSgpOwogICAgICAgICB0
aGlzLmRhdGVQYXR0ZXJuID0gb3JpZy5kYXRlUGF0dGVybjsKKyAgICAgICAgdGhpcy5jbWQgPSBv
cmlnLmNtZDsKICAgICB9CiAKICAgICAvKioKQEAgLTc5LDcgKzgzLDcgQEAKICAgICAgKiBAcmV0
dXJuIHRydWUgaWYgdGhlIEhpc3RvcnlHdXJ1IG1heSB1c2UgdGhlIHJlcG9zaXRvcnkKICAgICAg
Ki8KICAgICBwdWJsaWMgYm9vbGVhbiBpc1dvcmtpbmcoKSB7Ci0gICAgICAgIHJldHVybiB3b3Jr
aW5nOworICAgICAgICByZXR1cm4gd29ya2luZyAhPSBudWxsICYmIHdvcmtpbmcuYm9vbGVhblZh
bHVlKCk7CiAgICAgfQogCiAgICAgLyoqCkBAIC04Nyw3ICs5MSw3IEBACiAgICAgICoKICAgICAg
KiBAcGFyYW0gd29ya2luZwogICAgICAqLwotICAgIHB1YmxpYyB2b2lkIHNldFdvcmtpbmcoYm9v
bGVhbiB3b3JraW5nKSB7CisgICAgcHVibGljIHZvaWQgc2V0V29ya2luZyhCb29sZWFuIHdvcmtp
bmcpIHsKICAgICAgICAgdGhpcy53b3JraW5nID0gd29ya2luZzsKICAgICB9CiAKQEAgLTEzMiw1
ICsxMzYsMzAgQEAKICAgICBwdWJsaWMgU3RyaW5nIGdldERhdGVQYXR0ZXJuKCkgewogICAgICAg
ICByZXR1cm4gZGF0ZVBhdHRlcm47CiAgICAgfQorICAgIAorICAgIC8qKgorICAgICAqIFNldCB0
aGUgbmFtZSBvZiB0aGUgZXh0ZXJuYWwgY2xpZW50IGNvbW1hbmQgdGhhdCBzaG91bGQgYmUgdXNl
ZCB0byAKKyAgICAgKiBhY2Nlc3MgdGhlIHJlcG9zaXRvcnkgd3J0LiB0aGUgZ2l2ZW4gcGFyYW1l
dGVycy4gRG9lcyBub3RoaW5nLCBpZiB0aGlzCisgICAgICogcmVwb3NpdG9yeSdzIDx2YXI+Y21k
PC92YXI+IGhhcyBiZWVuIGFscmVhZHkgc2V0IChpLmUuIGhhcyBhIAorICAgICAqIG5vbmUte0Bj
b2RlIG51bGx9IHZhbHVlKS4KKyAgICAgKiAKKyAgICAgKiBAcGFyYW0gcHJvcGVydHlLZXkgcHJv
cGVydHkga2V5IHRvIGxvb2t1cCB0aGUgY29ycmVzcG9uZGluZyBzeXN0ZW0gcHJvcGVydHkuCisg
ICAgICogQHBhcmFtIGZhbGxiYWNrQ29tbWFuZCB0aGUgY29tbWFuZCB0byB1c2UsIGlmIGxvb2t1
cCBmYWlscy4KKyAgICAgKiBAcmV0dXJuIHRoZSBjb21tYW5kIHRvIHVzZS4KKyAgICAgKiBAc2Vl
ICNjbWQKKyAgICAgKi8KKyAgICBwcm90ZWN0ZWQgU3RyaW5nIGVuc3VyZUNvbW1hbmQoU3RyaW5n
IHByb3BlcnR5S2V5LCBTdHJpbmcgZmFsbGJhY2tDb21tYW5kKSB7CisgICAgCWlmIChjbWQgIT0g
bnVsbCkgeworICAgIAkJcmV0dXJuIGNtZDsKKyAgICAJfQorICAgIAljbWQgPSBSdW50aW1lRW52
aXJvbm1lbnQuZ2V0SW5zdGFuY2UoKQorICAgIAkJLmdldFJlcG9DbWQodGhpcy5nZXRDbGFzcygp
LmdldENhbm9uaWNhbE5hbWUoKSk7CisgICAgCWlmIChjbWQgPT0gbnVsbCkgeworICAgIAkJY21k
ID0gU3lzdGVtLmdldFByb3BlcnR5KHByb3BlcnR5S2V5LCBmYWxsYmFja0NvbW1hbmQpOworICAg
IAkJUnVudGltZUVudmlyb25tZW50LmdldEluc3RhbmNlKCkKKyAgICAJCQkuc2V0UmVwb0NtZCh0
aGlzLmdldENsYXNzKCkuZ2V0Q2Fub25pY2FsTmFtZSgpLCBjbWQpOworICAgIAl9CisgICAgCXJl
dHVybiBjbWQ7CisgICAgfQogfQogCmRpZmYgLXIgYmZlODI4Y2JjYzg0IHNyYy9vcmcvb3BlbnNv
bGFyaXMvb3Blbmdyb2svaGlzdG9yeS9TQ0NTUmVwb3NpdG9yeS5qYXZhCi0tLSBhL3NyYy9vcmcv
b3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9TQ0NTUmVwb3NpdG9yeS5qYXZhCVNhdCBGZWIg
MjYgMTk6MTY6NTggMjAxMSArMDEwMAorKysgYi9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9r
L2hpc3RvcnkvU0NDU1JlcG9zaXRvcnkuamF2YQlUaHUgTWFyIDMxIDA2OjU5OjE3IDIwMTEgKzAy
MDAKQEAgLTQzLDEyICs0MywxMSBAQAogICovCiBwdWJsaWMgY2xhc3MgU0NDU1JlcG9zaXRvcnkg
ZXh0ZW5kcyBSZXBvc2l0b3J5IHsKICAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlh
bFZlcnNpb25VSUQgPSAxTDsKLSAgICBwcml2YXRlIHN0YXRpYyBTY21DaGVja2VyIHNjY3NCaW5h
cnkgPSBuZXcgU2NtQ2hlY2tlcihuZXcgU3RyaW5nW10gewotICAgICAgICBTeXN0ZW0uZ2V0UHJv
cGVydHkoIm9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5LlNDQ1MiLCAic2NjcyIpLAot
ICAgICAgICAiaGVscCIsICJoZWxwIiB9KTsKLSAgICBwcml2YXRlIHN0YXRpYyBTY21DaGVja2Vy
IGNzc2NCaW5hcnkgPSBuZXcgU2NtQ2hlY2tlcihuZXcgU3RyaW5nW10gewotICAgICAgICBTeXN0
ZW0uZ2V0UHJvcGVydHkoIm9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5LlNDQ1MiLCAi
c2NjcyIpLAotICAgICAgICAiLS12ZXJzaW9uIiB9KTsKKyAgICAvKiogVGhlIHByb3BlcnR5IG5h
bWUgdXNlZCB0byBvYnRhaW4gdGhlIGNsaWVudCBjb21tYW5kIGZvciB0aGlzIHJlcG9zaXRvcnku
ICovCisgICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ01EX1BST1BFUlRZX0tFWSA9IAor
ICAgIAkib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuU0NDUyI7CisgICAgLyoqIFRo
ZSBjb21tYW5kIHRvIHVzZSB0byBhY2Nlc3MgdGhlIHJlcG9zaXRvcnkgaWYgbm9uZSB3YXMgZ2l2
ZW4gZXhwbGljaXRseSAqLworICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIENNRF9GQUxM
QkFDSyA9ICJzY2NzIjsKIAogICAgIHByaXZhdGUgTWFwPFN0cmluZywgU3RyaW5nPiBhdXRob3Jz
X2NhY2hlOwogCkBAIC01NywxOSArNTYsMTcgQEAKICAgICAgICAgZGF0ZVBhdHRlcm4gPSAieXkv
TU0vZGQiOwogICAgIH0KIAotICAgIHByaXZhdGUgU3RyaW5nIGdldENvbW1hbmQoKSB7Ci0gICAg
ICAgcmV0dXJuIFN5c3RlbS5nZXRQcm9wZXJ0eSgib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhp
c3RvcnkuU0NDUyIsICJzY2NzIik7Ci0gICAgfQotICAgIAogICAgIEBPdmVycmlkZQogICAgIHB1
YmxpYyBJbnB1dFN0cmVhbSBnZXRIaXN0b3J5R2V0KFN0cmluZyBwYXJlbnQsIFN0cmluZyBiYXNl
bmFtZSwgU3RyaW5nIHJldikgewogICAgICAgICB0cnkgewogICAgICAgICAgICAgRmlsZSBoaXN0
b3J5ID0gU0NDU0hpc3RvcnlQYXJzZXIuZ2V0U0NDU0ZpbGUocGFyZW50LCBiYXNlbmFtZSk7Ci0g
ICAgICAgICAgICByZXR1cm4gU0NDU2dldC5nZXRSZXZpc2lvbihnZXRDb21tYW5kKCksaGlzdG9y
eSwgcmV2KTsKKyAgICAJCWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExC
QUNLKTsKKyAgICAgICAgICAgIHJldHVybiBTQ0NTZ2V0LmdldFJldmlzaW9uKGNtZCwgaGlzdG9y
eSwgcmV2KTsKICAgICAgICAgfSBjYXRjaCAoRmlsZU5vdEZvdW5kRXhjZXB0aW9uIGV4KSB7CiAg
ICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZXgp
IHsKLSAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJO
SU5HLCAiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIHJldmlzaW9uIiwgZXgpOworICAg
ICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsIAor
ICAgICAgICAgICAgCSJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgcmV2aXNpb24iLCBl
eCk7CiAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgfQogICAgIH0KQEAgLTgzLDcg
KzgwLDggQEAKICAgICAgICAgYXV0aG9yc19jYWNoZSA9IG5ldyBIYXNoTWFwPFN0cmluZywgU3Ry
aW5nPigpOwogCiAgICAgICAgIEFycmF5TGlzdDxTdHJpbmc+IGFyZ3YgPSBuZXcgQXJyYXlMaXN0
PFN0cmluZz4oKTsKLSAgICAgICAgYXJndi5hZGQoZ2V0Q29tbWFuZCgpKTsKKwkJZW5zdXJlQ29t
bWFuZChDTURfUFJPUEVSVFlfS0VZLCBDTURfRkFMTEJBQ0spOworICAgICAgICBhcmd2LmFkZChj
bWQpOwogICAgICAgICBhcmd2LmFkZCgicHJzIik7CiAgICAgICAgIGFyZ3YuYWRkKCItZSIpOwog
ICAgICAgICBhcmd2LmFkZCgiLWQiKTsKQEAgLTEwNyw3ICsxMDUsOSBAQAogICAgICAgICAgICAg
ICAgICAgICBTdHJpbmcgYXV0aCA9IG1hdGNoZXIuZ3JvdXAoMik7CiAgICAgICAgICAgICAgICAg
ICAgIGF1dGhvcnNfY2FjaGUucHV0KHJldiwgYXV0aCk7CiAgICAgICAgICAgICAgICAgfSBlbHNl
IHsKLSAgICAgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExl
dmVsLlNFVkVSRSwgIkVycm9yOiBkaWQgbm90IGZpbmQgYXV0aG9ycyBpbiBsaW5lIHswfTogW3sx
fV0iLCBuZXcgT2JqZWN0W117bGluZW5vLCBsaW5lfSk7CisgICAgICAgICAgICAgICAgICAgIE9w
ZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5TRVZFUkUsIAorICAgICAgICAgICAg
ICAgICAgICAJIkVycm9yOiBkaWQgbm90IGZpbmQgYXV0aG9ycyBpbiBsaW5lIHswfTogW3sxfV0i
LCAKKyAgICAgICAgICAgICAgICAgICAgCW5ldyBPYmplY3RbXXtsaW5lbm8sIGxpbmV9KTsKICAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICB9CiAgICAgICAgIH0gZmluYWxseSB7CkBAIC0x
NDgsNyArMTQ4LDggQEAKICAgICAgICAgZ2V0QXV0aG9ycyhmaWxlKTsKICAgICAgICAgCiAgICAg
ICAgIEFycmF5TGlzdDxTdHJpbmc+IGFyZ3YgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsKLSAg
ICAgICAgYXJndi5hZGQoZ2V0Q29tbWFuZCgpKTsKKwkJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVS
VFlfS0VZLCBDTURfRkFMTEJBQ0spOworICAgICAgICBhcmd2LmFkZChjbWQpOwogICAgICAgICBh
cmd2LmFkZCgiZ2V0Iik7CiAgICAgICAgIGFyZ3YuYWRkKCItbSIpOwogICAgICAgICBhcmd2LmFk
ZCgiLXAiKTsKQEAgLTE3OCw3ICsxNzksOSBAQAogICAgICAgICAgICAgICAgICAgICAKICAgICAg
ICAgICAgICAgICAgICAgYS5hZGRMaW5lKHJldiwgYXV0aG9yLCB0cnVlKTsKICAgICAgICAgICAg
ICAgICB9IGVsc2UgewotICAgICAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dn
ZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAiRXJyb3I6IGRpZCBub3QgZmluZCBhbm5vdGF0aW9ucyBp
biBsaW5lIHswfTogW3sxfV0iLCBuZXcgT2JqZWN0W117bGluZW5vLCBsaW5lfSk7CisgICAgICAg
ICAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5TRVZFUkUs
IAorICAgICAgICAgICAgICAgICAgICAJIkVycm9yOiBkaWQgbm90IGZpbmQgYW5ub3RhdGlvbnMg
aW4gbGluZSB7MH06IFt7MX1dIiwgCisgICAgICAgICAgICAgICAgICAgIAluZXcgT2JqZWN0W117
bGluZW5vLCBsaW5lfSk7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAg
ICAgICAgcmV0dXJuIGE7CkBAIC0xODcsNyArMTkwLDggQEAKICAgICAgICAgICAgICAgICB0cnkg
ewogICAgICAgICAgICAgICAgICAgICBpbi5jbG9zZSgpOwogICAgICAgICAgICAgICAgIH0gY2F0
Y2ggKElPRXhjZXB0aW9uIGUpIHsKLSAgICAgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIu
Z2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsICJBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGNs
b3Npbmcgc3RyZWFtIiwgZSk7CisgICAgICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdl
dExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAKKyAgICAgICAgICAgICAgICAgICAgCSJBbiBl
cnJvciBvY2N1cmVkIHdoaWxlIGNsb3Npbmcgc3RyZWFtIiwgZSk7CiAgICAgICAgICAgICAgICAg
fQogICAgICAgICAgICAgfQogICAgICAgICAgICAgaWYgKHByb2Nlc3MgIT0gbnVsbCkgewpAQCAt
MjMzLDEzICsyMzcsMjAgQEAKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0K
ICAgICAgICAgIHJldHVybiBuZXcgRmlsZShmaWxlLCAiU0NDUyIpLmlzRGlyZWN0b3J5KCk7Ci0g
ICAgICAgfSBlbHNlIHsKLSAgICAgICAgcmV0dXJuIGZhbHNlOyB9CisgICAgICAgfQorICAgICAg
IHJldHVybiBmYWxzZTsKICAgICB9CiAKICAgICBAT3ZlcnJpZGUKICAgICBwdWJsaWMgYm9vbGVh
biBpc1dvcmtpbmcoKSB7Ci0gICAgICAgIHJldHVybiBzY2NzQmluYXJ5LmF2YWlsYWJsZSB8fCBj
c3NjQmluYXJ5LmF2YWlsYWJsZTsKKyAgICAJaWYgKHdvcmtpbmcgPT0gbnVsbCkgeworICAgIAkJ
ZW5zdXJlQ29tbWFuZChDTURfUFJPUEVSVFlfS0VZLCBDTURfRkFMTEJBQ0spOworICAgICAgICAJ
d29ya2luZyA9IGNoZWNrQ21kKG5ldyBTdHJpbmdbXXsgY21kLCAiaGVscCIsICJoZWxwIiB9KTsK
KyAgICAgICAgCWlmICghd29ya2luZy5ib29sZWFuVmFsdWUoKSkgeworICAgICAgICAgICAgCXdv
cmtpbmcgPSBjaGVja0NtZChuZXcgU3RyaW5nW117IGNtZCwgIi0tdmVyc2lvbiIgfSk7CisgICAg
ICAgIAl9CisgICAgCX0KKyAgICAgICAgcmV0dXJuIHdvcmtpbmcuYm9vbGVhblZhbHVlKCk7CiAg
ICAgfQogCiAgICAgQE92ZXJyaWRlCmRpZmYgLXIgYmZlODI4Y2JjYzg0IHNyYy9vcmcvb3BlbnNv
bGFyaXMvb3Blbmdyb2svaGlzdG9yeS9TdWJ2ZXJzaW9uSGlzdG9yeVBhcnNlci5qYXZhCi0tLSBh
L3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9TdWJ2ZXJzaW9uSGlzdG9yeVBh
cnNlci5qYXZhCVNhdCBGZWIgMjYgMTk6MTY6NTggMjAxMSArMDEwMAorKysgYi9zcmMvb3JnL29w
ZW5zb2xhcmlzL29wZW5ncm9rL2hpc3RvcnkvU3VidmVyc2lvbkhpc3RvcnlQYXJzZXIuamF2YQlU
aHUgTWFyIDMxIDA2OjU5OjE3IDIwMTEgKzAyMDAKQEAgLTEwNiw3ICsxMDYsNyBAQAogICAgICAg
ICAgICAgICAgICAgICBwYXRoID0gc3RyaW5nSW50ZXJuZXIuaW50ZXJuKHBhdGgpOwogICAgICAg
ICAgICAgICAgICAgICBlbnRyeS5hZGRGaWxlKHBhdGgpOwogICAgICAgICAgICAgICAgIH0gZWxz
ZSB7Ci0gICAgICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhM
ZXZlbC5GSU5FLCAiU2tpcHBpbmcgZmlsZSBvdXRzaWRlIHJlcG9zaXRvcnk6ICIgKyBzKTsKKyAg
ICAgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLklO
Rk8sICJTa2lwcGluZyBmaWxlIG91dHNpZGUgcmVwb3NpdG9yeTogIiArIHMpOwogICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgIH0gZWxzZSBpZiAoIm1zZyIuZXF1YWxzKHFuYW1lKSkgewog
ICAgICAgICAgICAgICAgIGVudHJ5LnNldE1lc3NhZ2Uocyk7CmRpZmYgLXIgYmZlODI4Y2JjYzg0
IHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9TdWJ2ZXJzaW9uUmVwb3NpdG9y
eS5qYXZhCi0tLSBhL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaGlzdG9yeS9TdWJ2ZXJz
aW9uUmVwb3NpdG9yeS5qYXZhCVNhdCBGZWIgMjYgMTk6MTY6NTggMjAxMSArMDEwMAorKysgYi9z
cmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL2hpc3RvcnkvU3VidmVyc2lvblJlcG9zaXRvcnku
amF2YQlUaHUgTWFyIDMxIDA2OjU5OjE3IDIwMTEgKzAyMDAKQEAgLTMwLDYgKzMwLDcgQEAKIGlt
cG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwogaW1wb3J0IGphdmEudXRpbC5MaXN0OwogaW1wb3J0
IGphdmEudXRpbC5sb2dnaW5nLkxldmVsOworCiBpbXBvcnQgamF2YXgueG1sLnBhcnNlcnMuRG9j
dW1lbnRCdWlsZGVyOwogaW1wb3J0IGphdmF4LnhtbC5wYXJzZXJzLkRvY3VtZW50QnVpbGRlckZh
Y3Rvcnk7CiBpbXBvcnQgamF2YXgueG1sLnBhcnNlcnMuUGFyc2VyQ29uZmlndXJhdGlvbkV4Y2Vw
dGlvbjsKQEAgLTUzLDE1ICs1NCwxNSBAQAogICovCiBwdWJsaWMgY2xhc3MgU3VidmVyc2lvblJl
cG9zaXRvcnkgZXh0ZW5kcyBSZXBvc2l0b3J5IHsKICAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBs
b25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDsKLSAgICAKKyAgICAvKiogVGhlIHByb3BlcnR5IG5h
bWUgdXNlZCB0byBvYnRhaW4gdGhlIGNsaWVudCAKKyAgICAgKiBjb21tYW5kIGZvciB0aGlzIHJl
cG9zaXRvcnkuCisgICAgICovCisgICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ01EX1BS
T1BFUlRZX0tFWSA9IAorICAgIAkib3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuU3Vi
dmVyc2lvbiI7CisgICAgLyoqIFRoZSBjb21tYW5kIHRvIHVzZSB0byBhY2Nlc3MgdGhlIHJlcG9z
aXRvcnkgaWYgbm9uZSB3YXMgZ2l2ZW4gZXhwbGljaXRseSAqLworICAgIHB1YmxpYyBzdGF0aWMg
ZmluYWwgU3RyaW5nIENNRF9GQUxMQkFDSyA9ICJzdm4iOworCiAgICAgcHJvdGVjdGVkIFN0cmlu
ZyByZXBvc1BhdGg7Ci0gICAgcHJpdmF0ZSBzdGF0aWMgU2NtQ2hlY2tlciBzdm5CaW5hcnkgPSBu
ZXcgU2NtQ2hlY2tlcihuZXcgU3RyaW5nW117Ci0gICAgICAgICAgICAgICAgZ2V0Q29tbWFuZCgp
LCAiLS1oZWxwIgotICAgICAgICAgICAgfSk7Ci0KLSAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBT
dHJpbmcgZ2V0Q29tbWFuZCgpIHsKLSAgICAgICAgcmV0dXJuIFN5c3RlbS5nZXRQcm9wZXJ0eSgi
b3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuU3VidmVyc2lvbiIsICJzdm4iKTsKLSAg
ICB9CiAKICAgICBwdWJsaWMgU3VidmVyc2lvblJlcG9zaXRvcnkoKSB7CiAgICAgICAgIHR5cGUg
PSAiU3VidmVyc2lvbiI7CkBAIC03NSw3ICs3Niw3IEBACiAgICAgICAgIFN0cmluZ0J1ZmZlciBz
YiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICAgTm9kZSBuID0gbm9kZS5nZXRGaXJzdENo
aWxkKCk7CiAgICAgICAgIHdoaWxlIChuICE9IG51bGwpIHsKLSAgICAgICAgICAgIGlmIChuLmdl
dE5vZGVUeXBlKCkgPT0gbi5URVhUX05PREUpIHsKKyAgICAgICAgICAgIGlmIChuLmdldE5vZGVU
eXBlKCkgPT0gTm9kZS5URVhUX05PREUpIHsKICAgICAgICAgICAgICAgICBzYi5hcHBlbmQobi5n
ZXROb2RlVmFsdWUoKSk7CiAgICAgICAgICAgICB9CiAKQEAgLTg4LDEyICs4OSwxMiBAQAogICAg
IHB1YmxpYyB2b2lkIHNldERpcmVjdG9yeU5hbWUoU3RyaW5nIGRpcmVjdG9yeU5hbWUpIHsKICAg
ICAgICAgc3VwZXIuc2V0RGlyZWN0b3J5TmFtZShkaXJlY3RvcnlOYW1lKTsKIAotICAgICAgICBp
ZiAoc3ZuQmluYXJ5LmF2YWlsYWJsZSkgewotICAgICAgICAgICAgYm9vbGVhbiByb290Rm91bmQg
PSBmYWxzZTsgLy8gc2V0IHRvIHRydWUgaWYgd2UgbWFuYWdlIHRvIGZpbmQgdGhlCi0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm9vdCBkaXJlY3RvcnkKKyAgICAgICAg
aWYgKGlzV29ya2luZygpKSB7CisgICAgICAgIAkvLyBzZXQgdG8gdHJ1ZSBpZiB3ZSBtYW5hZ2Ug
dG8gZmluZCB0aGUgcm9vdCBkaXJlY3RvcnkKKyAgICAgICAgICAgIEJvb2xlYW4gcm9vdEZvdW5k
ID0gQm9vbGVhbi5GQUxTRTsKIAogICAgICAgICAgICAgTGlzdDxTdHJpbmc+IGNtZCA9IG5ldyBB
cnJheUxpc3Q8U3RyaW5nPigpOwotICAgICAgICAgICAgY21kLmFkZChnZXRDb21tYW5kKCkpOwor
ICAgICAgICAgICAgY21kLmFkZCh0aGlzLmNtZCk7CiAgICAgICAgICAgICBjbWQuYWRkKCJpbmZv
Iik7CiAgICAgICAgICAgICBjbWQuYWRkKCItLXhtbCIpOwogICAgICAgICAgICAgRmlsZSBkaXJl
Y3RvcnkgPSBuZXcgRmlsZShnZXREaXJlY3RvcnlOYW1lKCkpOwpAQCAtMTA1LDI5ICsxMDYsMzkg
QEAKICAgICAgICAgICAgICAgICAgICAgRG9jdW1lbnRCdWlsZGVyIGJ1aWxkZXIgPSBmYWN0b3J5
Lm5ld0RvY3VtZW50QnVpbGRlcigpOwogICAgICAgICAgICAgICAgICAgICBEb2N1bWVudCBkb2N1
bWVudCA9IGJ1aWxkZXIucGFyc2UoZXhlY3V0b3IuZ2V0T3V0cHV0U3RyZWFtKCkpOwogCi0gICAg
ICAgICAgICAgICAgICAgIFN0cmluZyB1cmwgPSBnZXRWYWx1ZShkb2N1bWVudC5nZXRFbGVtZW50
c0J5VGFnTmFtZSgidXJsIikuaXRlbSgwKSk7CisgICAgICAgICAgICAgICAgICAgIFN0cmluZyB1
cmwgPSAKKyAgICAgICAgICAgICAgICAgICAgCWdldFZhbHVlKGRvY3VtZW50LmdldEVsZW1lbnRz
QnlUYWdOYW1lKCJ1cmwiKS5pdGVtKDApKTsKICAgICAgICAgICAgICAgICAgICAgaWYgKHVybCA9
PSBudWxsKSB7Ci0gICAgICAgICAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dn
ZXIoKS53YXJuaW5nKCJzdm4gaW5mbyBkaWQgbm90IGNvbnRhaW4gYW4gVVJMIGZvciBbIisgZGly
ZWN0b3J5TmFtZSArICJdLiBBc3N1bWluZyByZW1vdGUgcmVwb3NpdG9yeS4iKTsKKyAgICAgICAg
ICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpCisgICAgICAgICAgICAg
ICAgICAgICAgICAJLndhcm5pbmcoInN2biBpbmZvIGRpZCBub3QgY29udGFpbiBhbiBVUkwgZm9y
IFsiCisgICAgICAgICAgICAgICAgICAgICAgICAJCSsgZGlyZWN0b3J5TmFtZSAKKyAgICAgICAg
ICAgICAgICAgICAgICAgIAkJKyAiXS4gQXNzdW1pbmcgcmVtb3RlIHJlcG9zaXRvcnkuIik7CiAg
ICAgICAgICAgICAgICAgICAgICAgICBzZXRSZW1vdGUodHJ1ZSk7CiAgICAgICAgICAgICAgICAg
ICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVybC5zdGFydHNXaXRo
KCJmaWxlIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZW1vdGUodHJ1ZSk7
CiAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIH0KLSAgICAg
ICAgICAgICAgICAgICAgU3RyaW5nIHJvb3QgPSBnZXRWYWx1ZShkb2N1bWVudC5nZXRFbGVtZW50
c0J5VGFnTmFtZSgicm9vdCIpLml0ZW0oMCkpOworICAgICAgICAgICAgICAgICAgICBTdHJpbmcg
cm9vdCA9IAorICAgICAgICAgICAgICAgICAgICAJZ2V0VmFsdWUoZG9jdW1lbnQuZ2V0RWxlbWVu
dHNCeVRhZ05hbWUoInJvb3QiKS5pdGVtKDApKTsKICAgICAgICAgICAgICAgICAgICAgaWYgKHVy
bCAhPSBudWxsICYmIHJvb3QgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgcmVw
b3NQYXRoID0gdXJsLnN1YnN0cmluZyhyb290Lmxlbmd0aCgpKTsKLSAgICAgICAgICAgICAgICAg
ICAgICAgIHJvb3RGb3VuZCA9IHRydWU7CisgICAgICAgICAgICAgICAgICAgICAgICByb290Rm91
bmQgPSBCb29sZWFuLlRSVUU7CiAgICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAg
ICAgfSBjYXRjaCAoU0FYRXhjZXB0aW9uIHNheGUpIHsKLSAgICAgICAgICAgICAgICAgICAgT3Bl
bkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsICJQYXJzZXIgZXJyb3Ig
cGFyc2luZyBzdm4gb3V0cHV0Iiwgc2F4ZSk7CisgICAgICAgICAgICAgICAgICAgIE9wZW5Hcm9r
TG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJOSU5HLCAKKyAgICAgICAgICAgICAgICAg
ICAgCSJQYXJzZXIgZXJyb3IgcGFyc2luZyBzdm4gb3V0cHV0Iiwgc2F4ZSk7CiAgICAgICAgICAg
ICAgICAgfSBjYXRjaCAoUGFyc2VyQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiBwY2UpIHsKLSAgICAg
ICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5J
TkcsICJQYXJzZXIgY29uZmlndXJhdGlvbiBlcnJvciBwYXJzaW5nIHN2biBvdXRwdXQiLCBwY2Up
OworICAgICAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2
ZWwuV0FSTklORywgCisgICAgICAgICAgICAgICAgICAgIAkiUGFyc2VyIGNvbmZpZ3VyYXRpb24g
ZXJyb3IgcGFyc2luZyBzdm4gb3V0cHV0IiwgcGNlKTsKICAgICAgICAgICAgICAgICB9IGNhdGNo
IChJT0V4Y2VwdGlvbiBpb2UpIHsKLSAgICAgICAgICAgICAgICAgICAgT3Blbkdyb2tMb2dnZXIu
Z2V0TG9nZ2VyKCkubG9nKExldmVsLldBUk5JTkcsICJJT0V4Y2VwdGlvbiByZWFkaW5nIGZyb20g
c3ZuIHByb2Nlc3MiLCBpb2UpOworICAgICAgICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5n
ZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklORywgCisgICAgICAgICAgICAgICAgICAgIAkiSU9F
eGNlcHRpb24gcmVhZGluZyBmcm9tIHN2biBwcm9jZXNzIiwgaW9lKTsKICAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgICB9IGVsc2UgewotICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2Vy
LmdldExvZ2dlcigpLndhcm5pbmcoIkZhaWxlZCB0byBleGVjdXRlIHN2biBpbmZvIGZvciBbIisg
ZGlyZWN0b3J5TmFtZSArICJdLiBSZXBvc2l0b3J5IGRpc2FibGVkLiIpOworICAgICAgICAgICAg
ICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpCisgICAgICAgICAgICAgICAgCQkud2Fybmlu
ZygiRmFpbGVkIHRvIGV4ZWN1dGUgc3ZuIGluZm8gZm9yIFsiCisgICAgICAgICAgICAgICAgCQkJ
KyBkaXJlY3RvcnlOYW1lICsgIl0uIFJlcG9zaXRvcnkgZGlzYWJsZWQuIik7CiAgICAgICAgICAg
ICB9CiAKICAgICAgICAgICAgIHNldFdvcmtpbmcocm9vdEZvdW5kKTsKQEAgLTE1MSw3ICsxNjIs
OCBAQAogICAgICAgICB9CiAKICAgICAgICAgTGlzdDxTdHJpbmc+IGNtZCA9IG5ldyBBcnJheUxp
c3Q8U3RyaW5nPigpOwotICAgICAgICBjbWQuYWRkKGdldENvbW1hbmQoKSk7CisJCWVuc3VyZUNv
bW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgY21kLmFkZCh0
aGlzLmNtZCk7CiAgICAgICAgIGNtZC5hZGQoImxvZyIpOwogICAgICAgICBjbWQuYWRkKCItLXRy
dXN0LXNlcnZlci1jZXJ0Iik7CiAgICAgICAgIGNtZC5hZGQoIi0tbm9uLWludGVyYWN0aXZlIik7
CkBAIC0xNzEsMTUgKzE4MywxOCBAQAogICAgIH0KIAogICAgIEBPdmVycmlkZQotICAgIHB1Ymxp
YyBJbnB1dFN0cmVhbSBnZXRIaXN0b3J5R2V0KFN0cmluZyBwYXJlbnQsIFN0cmluZyBiYXNlbmFt
ZSwgU3RyaW5nIHJldikgeworICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRIaXN0b3J5R2V0KFN0
cmluZyBwYXJlbnQsIFN0cmluZyBiYXNlbmFtZSwgU3RyaW5nIHJldikKKyAgICB7CiAgICAgICAg
IElucHV0U3RyZWFtIHJldCA9IG51bGw7CiAKICAgICAgICAgRmlsZSBkaXJlY3RvcnkgPSBuZXcg
RmlsZShkaXJlY3RvcnlOYW1lKTsKIAotICAgICAgICBTdHJpbmcgZmlsZW5hbWUgPSAobmV3IEZp
bGUocGFyZW50LCBiYXNlbmFtZSkpLmdldEFic29sdXRlUGF0aCgpLnN1YnN0cmluZyhkaXJlY3Rv
cnlOYW1lLmxlbmd0aCgpICsgMSk7CisgICAgICAgIFN0cmluZyBmaWxlbmFtZSA9IChuZXcgRmls
ZShwYXJlbnQsIGJhc2VuYW1lKSkuZ2V0QWJzb2x1dGVQYXRoKCkKKyAgICAgICAgCS5zdWJzdHJp
bmcoZGlyZWN0b3J5TmFtZS5sZW5ndGgoKSArIDEpOwogCiAgICAgICAgIExpc3Q8U3RyaW5nPiBj
bWQgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsKLSAgICAgICAgY21kLmFkZChnZXRDb21tYW5k
KCkpOworCQllbnN1cmVDb21tYW5kKENNRF9QUk9QRVJUWV9LRVksIENNRF9GQUxMQkFDSyk7Cisg
ICAgICAgIGNtZC5hZGQodGhpcy5jbWQpOwogICAgICAgICBjbWQuYWRkKCJjYXQiKTsKICAgICAg
ICAgY21kLmFkZCgiLXIiKTsKICAgICAgICAgY21kLmFkZChyZXYpOwpAQCAtMjI5LDcgKzI0NCw5
IEBACiAgICAgICAgIH0KIAogICAgICAgICBAT3ZlcnJpZGUKLSAgICAgICAgcHVibGljIHZvaWQg
c3RhcnRFbGVtZW50KFN0cmluZyB1cmksIFN0cmluZyBsb2NhbE5hbWUsIFN0cmluZyBxbmFtZSwg
QXR0cmlidXRlcyBhdHRyKSB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKKyAgICAgICAgcHVibGljIHZv
aWQgc3RhcnRFbGVtZW50KFN0cmluZyB1cmksIFN0cmluZyBsb2NhbE5hbWUsIFN0cmluZyBxbmFt
ZSwgCisgICAgICAgIAlBdHRyaWJ1dGVzIGF0dHIpCisgICAgICAgIHsKICAgICAgICAgICAgIHNi
LnNldExlbmd0aCgwKTsKICAgICAgICAgICAgIGlmICgiZW50cnkiLmVxdWFscyhxbmFtZSkpIHsK
ICAgICAgICAgICAgICAgICByZXYgPSBudWxsOwpAQCAtMjQwLDcgKzI1Nyw3IEBACiAgICAgICAg
IH0KIAogICAgICAgICBAT3ZlcnJpZGUKLSAgICAgICAgcHVibGljIHZvaWQgZW5kRWxlbWVudChT
dHJpbmcgdXJpLCBTdHJpbmcgbG9jYWxOYW1lLCBTdHJpbmcgcW5hbWUpIHRocm93cyBTQVhFeGNl
cHRpb24geworICAgICAgICBwdWJsaWMgdm9pZCBlbmRFbGVtZW50KFN0cmluZyB1cmksIFN0cmlu
ZyBsb2NhbE5hbWUsIFN0cmluZyBxbmFtZSkgewogICAgICAgICAgICAgaWYgKCJhdXRob3IiLmVx
dWFscyhxbmFtZSkpIHsKICAgICAgICAgICAgICAgICBhdXRob3IgPSBzYi50b1N0cmluZygpOwog
ICAgICAgICAgICAgfSBlbHNlIGlmICgiZW50cnkiLmVxdWFscyhxbmFtZSkpIHsKQEAgLTI0OSw3
ICsyNjYsNyBAQAogICAgICAgICB9CiAKICAgICAgICAgQE92ZXJyaWRlCi0gICAgICAgIHB1Ymxp
YyB2b2lkIGNoYXJhY3RlcnMoY2hhcltdIGFyZzAsIGludCBhcmcxLCBpbnQgYXJnMikgdGhyb3dz
IFNBWEV4Y2VwdGlvbiB7CisgICAgICAgIHB1YmxpYyB2b2lkIGNoYXJhY3RlcnMoY2hhcltdIGFy
ZzAsIGludCBhcmcxLCBpbnQgYXJnMikgewogICAgICAgICAgICAgc2IuYXBwZW5kKGFyZzAsIGFy
ZzEsIGFyZzIpOwogICAgICAgICB9CiAgICAgfQpAQCAtMjY2LDcgKzI4Myw4IEBACiAgICAgICAg
IH0KIAogICAgICAgICBBcnJheUxpc3Q8U3RyaW5nPiBhcmd2ID0gbmV3IEFycmF5TGlzdDxTdHJp
bmc+KCk7Ci0gICAgICAgIGFyZ3YuYWRkKGdldENvbW1hbmQoKSk7CisJCWVuc3VyZUNvbW1hbmQo
Q01EX1BST1BFUlRZX0tFWSwgQ01EX0ZBTExCQUNLKTsKKyAgICAgICAgYXJndi5hZGQoY21kKTsK
ICAgICAgICAgYXJndi5hZGQoImFubm90YXRlIik7CiAgICAgICAgIGFyZ3YuYWRkKCItLXRydXN0
LXNlcnZlci1jZXJ0Iik7CiAgICAgICAgIGFyZ3YuYWRkKCItLW5vbi1pbnRlcmFjdGl2ZSIpOwpA
QCAtMjkwLDE0ICszMDgsMTYgQEAKICAgICAgICAgICAgICAgICBzYXhQYXJzZXIucGFyc2UoaW4s
IGhhbmRsZXIpOwogICAgICAgICAgICAgICAgIHJldCA9IGhhbmRsZXIuYW5ub3RhdGlvbjsKICAg
ICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7Ci0gICAgICAgICAgICAgICAgT3Blbkdy
b2tMb2dnZXIuZ2V0TG9nZ2VyKCkubG9nKExldmVsLlNFVkVSRSwgIkFuIGVycm9yIG9jY3VycmVk
IHdoaWxlIHBhcnNpbmcgdGhlIHhtbCBvdXRwdXQiLCBlKTsKKyAgICAgICAgICAgICAgICBPcGVu
R3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuU0VWRVJFLCAKKyAgICAgICAgICAgICAg
ICAJIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHBhcnNpbmcgdGhlIHhtbCBvdXRwdXQiLCBlKTsK
ICAgICAgICAgICAgIH0KICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgIGlmIChpbiAh
PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgaW4u
Y2xvc2UoKTsKICAgICAgICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7Ci0gICAg
ICAgICAgICAgICAgICAgIE9wZW5Hcm9rTG9nZ2VyLmdldExvZ2dlcigpLmxvZyhMZXZlbC5XQVJO
SU5HLCAiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBjbG9zaW5nIHN0cmVhbSIsIGUpOworICAgICAg
ICAgICAgICAgICAgICBPcGVuR3Jva0xvZ2dlci5nZXRMb2dnZXIoKS5sb2coTGV2ZWwuV0FSTklO
RywgCisgICAgICAgICAgICAgICAgICAgIAkiQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBjbG9zaW5n
IHN0cmVhbSIsIGUpOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0KICAgICAgICAg
ICAgIGlmIChwcm9jZXNzICE9IG51bGwpIHsKQEAgLTMzMCw3ICszNTAsOCBAQAogICAgICAgICBG
aWxlIGRpcmVjdG9yeSA9IG5ldyBGaWxlKGdldERpcmVjdG9yeU5hbWUoKSk7CiAKICAgICAgICAg
TGlzdDxTdHJpbmc+IGNtZCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwotICAgICAgICBjbWQu
YWRkKGdldENvbW1hbmQoKSk7CisJCWVuc3VyZUNvbW1hbmQoQ01EX1BST1BFUlRZX0tFWSwgQ01E
X0ZBTExCQUNLKTsKKyAgICAgICAgY21kLmFkZCh0aGlzLmNtZCk7CiAgICAgICAgIGNtZC5hZGQo
InVwZGF0ZSIpOwogICAgICAgICBjbWQuYWRkKCItLXRydXN0LXNlcnZlci1jZXJ0Iik7CiAgICAg
ICAgIGNtZC5hZGQoIi0tbm9uLWludGVyYWN0aXZlIik7CkBAIC0zNDUsMTIgKzM2NiwxNiBAQAog
ICAgICAgIGlmIChmaWxlLmlzRGlyZWN0b3J5KCkpIHsKICAgICAgICAgRmlsZSBmID0gbmV3IEZp
bGUoZmlsZSwgIi5zdm4iKTsKICAgICAgICAgcmV0dXJuIGYuZXhpc3RzKCkgJiYgZi5pc0RpcmVj
dG9yeSgpOwotICAgICAgIH0gZWxzZSB7Ci0gICAgICAgIHJldHVybiBmYWxzZTsgfQorICAgICAg
IH0KKyAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgfQogCiAgICAgQE92ZXJyaWRlCiAgICAgcHVi
bGljIGJvb2xlYW4gaXNXb3JraW5nKCkgewotICAgICAgICByZXR1cm4gc3VwZXIuaXNXb3JraW5n
KCkgJiYgc3ZuQmluYXJ5LmF2YWlsYWJsZTsKKyAgICAJaWYgKHdvcmtpbmcgPT0gbnVsbCkgewor
ICAgIAkJZW5zdXJlQ29tbWFuZChDTURfUFJPUEVSVFlfS0VZLCBDTURfRkFMTEJBQ0spOworICAg
ICAgICAJd29ya2luZyA9IGNoZWNrQ21kKG5ldyBTdHJpbmdbXXsgY21kLCAiLS1oZWxwIiB9KTsK
KyAgICAJfQorICAgICAgICByZXR1cm4gd29ya2luZy5ib29sZWFuVmFsdWUoKTsKICAgICB9CiB9
CmRpZmYgLXIgYmZlODI4Y2JjYzg0IHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaW5kZXgv
Q29tbWFuZExpbmVPcHRpb25zLmphdmEKLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jv
ay9pbmRleC9Db21tYW5kTGluZU9wdGlvbnMuamF2YQlTYXQgRmViIDI2IDE5OjE2OjU4IDIwMTEg
KzAxMDAKKysrIGIvc3JjL29yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9pbmRleC9Db21tYW5kTGlu
ZU9wdGlvbnMuamF2YQlUaHUgTWFyIDMxIDA2OjU5OjE3IDIwMTEgKzAyMDAKQEAgLTY3LDQzICs2
Nyw0NSBAQAogCiAgICAgcHVibGljIENvbW1hbmRMaW5lT3B0aW9ucygpIHsKICAgICAgICAgb3B0
aW9ucyA9IG5ldyBBcnJheUxpc3Q8T3B0aW9uPigpOwotICAgICAgICBvcHRpb25zLmFkZChuZXcg
T3B0aW9uKCdxJywgbnVsbCwgIlJ1biBhcyBxdWlldGx5IGFzIHBvc3NpYmxlIikpOwotICAgICAg
ICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCd2JywgbnVsbCwgIlByaW50IHByb2dyZXNzIGluZm9y
bWF0aW9uIGFzIHdlIGdvIGFsb25nIikpOworICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9u
KCc/JywgbnVsbCwgIkhlbHAiKSk7CisgICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ0En
LCAiZXh0OmFuYWx5emVyIiwgIkZpbGVzIHdpdGggdGhlIG5hbWVkIGV4dGVuc2lvbiBzaG91bGQg
YmUgYW5hbHl6ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzIikpOworICAgICAgICBvcHRpb25z
LmFkZChuZXcgT3B0aW9uKCdhJywgT05fT0ZGLCAiQWxsb3cgb3IgZGlzYWxsb3cgbGVhZGluZyB3
aWxkY2FyZHMgaW4gYSBzZWFyY2giKSk7CisgICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24o
J0InLCAidXJsIiwgIkJhc2UgVVJMIG9mIHRoZSB1c2VyIEluZm9ybWF0aW9uIHByb3ZpZGVyLiBE
ZWZhdWx0OiBcImh0dHA6Ly93d3cub3BlbnNvbGFyaXMub3JnL3ZpZXdQcm9maWxlLmpzcGE/dXNl
cm5hbWU9XCIiKSk7CiAgICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ0MnLCBudWxsLCAi
UHJpbnQgcGVyIHByb2plY3QgcGVyY2VudGFnZSBwcm9ncmVzcyBpbmZvcm1hdGlvbihJL08gZXh0
ZW5zaXZlLCBzaW5jZSBvbmUgcmVhZCB0aHJvdWdoIGRpciBzdHJ1Y3R1cmUgaXMgbWFkZSBiZWZv
cmUgaW5kZXhpbmcsIG5lZWRzIC12LCBvdGhlcndpc2UgaXQganVzdCBnb2VzIHRvIHRoZSBsb2cp
IikpOworICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdjJywgIi9wYXRoL3RvL2N0YWdz
IiwgIlBhdGggdG8gRXh1YmVyYW50IEN0YWdzIGZyb20gaHR0cDovL2N0YWdzLnNmLm5ldCBieSBk
ZWZhdWx0IHRha2VzIHRoZSBFeHViZXJhbnQgQ3RhZ3MgaW4gUEFUSC4iKSk7CisgICAgICAgIG9w
dGlvbnMuYWRkKG5ldyBPcHRpb24oJ0QnLCBudWxsLCAiU3RvcmUgaGlzdG9yeSBjYWNoZSBpbiBh
IGRhdGFiYXNlIChuZWVkcyB0aGUgSkRCQyBkcml2ZXIgaW4gdGhlIGNsYXNzcGF0aCwgdHlwaWNh
bGx5IGRlcmJ5Y2xpZW50LmphciBvciBkZXJieS5qYXIpIikpOworICAgICAgICBvcHRpb25zLmFk
ZChuZXcgT3B0aW9uKCdkJywgIi9wYXRoL3RvL2RhdGEvcm9vdCIsICJUaGUgZGlyZWN0b3J5IHdo
ZXJlIE9wZW5Hcm9rIHN0b3JlcyB0aGUgZ2VuZXJhdGVkIGRhdGEiKSk7CiAgICAgICAgIG9wdGlv
bnMuYWRkKG5ldyBPcHRpb24oJ2UnLCBudWxsLCAiRWNvbm9taWNhbCAtIGNvbnN1bWVzIGxlc3Mg
ZGlzayBzcGFjZS4gSXQgZG9lcyBub3QgZ2VuZXJhdGUgaHlwZXIgdGV4dCBjcm9zcyByZWZlcmVu
Y2UgZmlsZXMgb2ZmbGluZSwgYnV0IHdpbGwgZG8gc28gb24gZGVtYW5kIC0gd2hpY2ggY291bGQg
YmUgc2lnaHRseSBzbG93LiIpKTsKLSAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbignYycs
ICIvcGF0aC90by9jdGFncyIsICJQYXRoIHRvIEV4dWJlcmFudCBDdGFncyBmcm9tIGh0dHA6Ly9j
dGFncy5zZi5uZXQgYnkgZGVmYXVsdCB0YWtlcyB0aGUgRXh1YmVyYW50IEN0YWdzIGluIFBBVEgu
IikpOwotICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdSJywgIi9wYXRoL3RvL2NvbmZp
Z3VyYXRpb24iLCAiUmVhZCBjb25maWd1cmF0aW9uIGZyb20gdGhlIHNwZWNpZmllZCBmaWxlIikp
OwotICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdXJywgIi9wYXRoL3RvL2NvbmZpZ3Vy
YXRpb24iLCAiV3JpdGUgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbiB0byB0aGUgc3BlY2lmaWVk
IGZpbGUgKHNvIHRoYXQgdGhlIHdlYiBhcHBsaWNhdGlvbiBjYW4gdXNlIHRoZSBzYW1lIGNvbmZp
Z3VyYXRpb24iKSk7Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ1UnLCAiaG9zdDpw
b3J0IiwgIlNlbmQgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbiB0byB0aGUgc3BlY2lmaWVkIGFk
ZHJlc3MgKFRoaXMgaXMgbW9zdCBsaWtlbHkgdGhlIHdlYi1hcHAgY29uZmlndXJlZCB3aXRoIENv
bmZpZ0FkZHJlc3MpIikpOworICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdIJywgbnVs
bCwgIkdlbmVyYXRlIGhpc3RvcnkgY2FjaGUgZm9yIGFsbCByZXBvc2l0b3JpZXMiKSk7CisgICAg
ICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ2gnLCAiL3BhdGgvdG8vcmVwb3NpdG9yeSIsICJq
dXN0IGdlbmVyYXRlIGhpc3RvcnkgY2FjaGUgZm9yIHRoZSBzcGVjaWZpZWQgcmVwb3MgKGFic29s
dXRlIHBhdGggZnJvbSBzb3VyY2Ugcm9vdCkiKSk7CisgICAgICAgIG9wdGlvbnMuYWRkKG5ldyBP
cHRpb24oJ0knLCAicGF0dGVybiIsICJPbmx5IGZpbGVzIG1hdGNoaW5nIHRoaXMgcGF0dGVybiB3
aWxsIGJlIGV4YW1pbmVkIChzdXBwb3J0cyB3aWxkY2FyZHMsIGV4YW1wbGU6IC1JICouamF2YSAt
SSAqLmMpIikpOworICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdpJywgInBhdHRlcm4i
LCAiSWdub3JlIHRoZSBuYW1lZCBmaWxlcyBvciBkaXJlY3RvcmllcyAoc3VwcG9ydHMgd2lsZGNh
cmRzLCBleGFtcGxlOiAtaSAqLnNvIC1pICouZGxsKSIpKTsKKyAgICAgICAgb3B0aW9ucy5hZGQo
bmV3IE9wdGlvbignaicsICJjbGFzcyIsICJOYW1lIG9mIHRoZSBKREJDIGRyaXZlciBjbGFzcyB1
c2VkIGJ5IHRoZSBoaXN0b3J5IGNhY2hlLiBDYW4gdXNlIG9uZSBvZiB0aGUgc2hvcnRoYW5kcyBc
ImNsaWVudFwiIChvcmcuYXBhY2hlLmRlcmJ5LmpkYmMuQ2xpZW50RHJpdmVyKSBvciBcImVtYmVk
ZGVkXCIgKG9yZy5hcGFjaGUuZGVyYnkuamRiYy5FbWJlZGRlZERyaXZlcikuIERlZmF1bHQ6IFwi
Y2xpZW50XCIiKSk7CisgICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ2snLCAiL3BhdGgv
dG8vcmVwb3NpdG9yeSIsICJLaWxsIHRoZSBoaXN0b3J5IGNhY2hlIGZvciB0aGUgZ2l2ZW4gcmVw
b3NpdG9yeSBhbmQgZXhpdC4gVXNlICcqJyB0byBkZWxldGUgdGhlIGNhY2hlIGZvciBhbGwgcmVw
b3NpdG9yaWVzLiIpKTsKKyAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbignSycsIG51bGws
ICJMaXN0IGFsbCByZXBvc2l0b3J5IHBhdGhlcyBhbmQgZXhpdC4iKSk7CisgICAgICAgIG9wdGlv
bnMuYWRkKG5ldyBPcHRpb24oJ0wnLCAicGF0aCIsICJQYXRoIHRvIHRoZSBzdWJkaXJlY3Rvcnkg
aW4gdGhlIHdlYi1hcHBsaWNhdGlvbiBjb250YWluaW5nIHRoZSByZXF1ZXN0ZWQgc3R5bGVzaGVl
dC4gVGhlIGZvbGxvd2luZyBmYWN0b3J5LWRlZmF1bHRzIGV4aXN0OiBcImRlZmF1bHRcIiwgXCJv
ZmZ3aGl0ZVwiIGFuZCBcInBvbGlzaGVkXCIiKSk7CisgICAgICAgIG9wdGlvbnMuYWRkKG5ldyBP
cHRpb24oJ2wnLCBPTl9PRkYsICJUdXJuIG9uL29mZiBsb2NraW5nIG9mIHRoZSBMdWNlbmUgZGF0
YWJhc2UgZHVyaW5nIGluZGV4IGdlbmVyYXRpb24iKSk7CisgICAgICAgIG9wdGlvbnMuYWRkKG5l
dyBPcHRpb24oJ20nLCAibnVtYmVyIiwgIlRoZSBtYXhpbXVtIHdvcmRzIHRvIGluZGV4IGluIGEg
ZmlsZSIpKTsKKyAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbignTicsICIvcGF0aC90by9z
eW1saW5rIiwgIkFsbG93IHRoaXMgc3ltbGluayB0byBiZSBmb2xsb3dlZC4gT3B0aW9uIG1heSBi
ZSByZXBlYXRlZC4iKSk7CisgICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ24nLCBudWxs
LCAiRG8gbm90IGdlbmVyYXRlIGluZGV4ZXMsIGJ1dCBwcm9jZXNzIGFsbCBvdGhlciBjb21tYW5k
IGxpbmUgb3B0aW9ucyIpKTsKKyAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbignTycsIE9O
X09GRiwgIlR1cm4gb24vb2ZmIHRoZSBvcHRpbWl6YXRpb24gb2YgdGhlIGluZGV4IGRhdGFiYXNl
IGFzIHBhcnQgb2YgdGhlIGluZGV4aW5nIHN0ZXAiKSk7CiAgICAgICAgIG9wdGlvbnMuYWRkKG5l
dyBPcHRpb24oJ1AnLCBudWxsLCAiR2VuZXJhdGUgYSBwcm9qZWN0IGZvciBlYWNoIG9mIHRoZSB0
b3AtbGV2ZWwgZGlyZWN0b3JpZXMgaW4gc291cmNlIHJvb3QiKSk7CiAgICAgICAgIG9wdGlvbnMu
YWRkKG5ldyBPcHRpb24oJ3AnLCAiL3BhdGgvdG8vZGVmYXVsdC9wcm9qZWN0IiwgIlRoaXMgaXMg
dGhlIHBhdGggdG8gdGhlIHByb2plY3QgdGhhdCBzaG91bGQgYmUgc2VsZWN0ZWQgYnkgZGVmYXVs
dCBpbiB0aGUgd2ViIGFwcGxpY2F0aW9uKHdoZW4gbm8gb3RoZXIgcHJvamVjdCBzZXQgZWl0aGVy
IGluIGNvb2tpZSBvciBpbiBwYXJhbWV0ZXIpLiBZb3Ugc2hvdWxkIHN0cmlwIG9mZiB0aGUgc291
cmNlIHJvb3QuIikpOwogICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdRJywgT05fT0ZG
LCAiVHVybiBvbi9vZmYgcXVpY2sgY29udGV4dCBzY2FuLiBCeSBkZWZhdWx0IG9ubHkgdGhlIGZp
cnN0IDMyayBvZiBhIGZpbGUgaXMgc2Nhbm5lZCwgYW5kIGEgJ1suLmFsbC4uXScgbGluayBpcyBp
bnNlcnRlZCBpZiB0aGUgZmlsZSBpcyBiaWdnZXIuIEFjdGl2YXRpbmcgdGhpcyBtYXkgc2xvdyB0
aGUgc2VydmVyIGRvd24gKE5vdGU6IHRoaXMgaXMgc2V0dGluZyBvbmx5IGFmZmVjdHMgdGhlIHdl
YiBhcHBsaWNhdGlvbikiKSk7Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ04nLCAi
L3BhdGgvdG8vc3ltbGluayIsICJBbGxvdyB0aGlzIHN5bWxpbmsgdG8gYmUgZm9sbG93ZWQuIE9w
dGlvbiBtYXkgYmUgcmVwZWF0ZWQuIikpOwotICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9u
KCduJywgbnVsbCwgIkRvIG5vdCBnZW5lcmF0ZSBpbmRleGVzLCBidXQgcHJvY2VzcyBhbGwgb3Ro
ZXIgY29tbWFuZCBsaW5lIG9wdGlvbnMiKSk7Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRp
b24oJ0gnLCBudWxsLCAiR2VuZXJhdGUgaGlzdG9yeSBjYWNoZSBmb3IgYWxsIHJlcG9zaXRvcmll
cyIpKTsKLSAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbignaCcsICIvcGF0aC90by9yZXBv
c2l0b3J5IiwgImp1c3QgZ2VuZXJhdGUgaGlzdG9yeSBjYWNoZSBmb3IgdGhlIHNwZWNpZmllZCBy
ZXBvcyAoYWJzb2x1dGUgcGF0aCBmcm9tIHNvdXJjZSByb290KSIpKTsKLSAgICAgICAgb3B0aW9u
cy5hZGQobmV3IE9wdGlvbignRCcsIG51bGwsICJTdG9yZSBoaXN0b3J5IGNhY2hlIGluIGEgZGF0
YWJhc2UgKG5lZWRzIHRoZSBKREJDIGRyaXZlciBpbiB0aGUgY2xhc3NwYXRoLCB0eXBpY2FsbHkg
ZGVyYnljbGllbnQuamFyIG9yIGRlcmJ5LmphcikiKSk7Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5l
dyBPcHRpb24oJ2onLCAiY2xhc3MiLCAiTmFtZSBvZiB0aGUgSkRCQyBkcml2ZXIgY2xhc3MgdXNl
ZCBieSB0aGUgaGlzdG9yeSBjYWNoZS4gQ2FuIHVzZSBvbmUgb2YgdGhlIHNob3J0aGFuZHMgXCJj
bGllbnRcIiAob3JnLmFwYWNoZS5kZXJieS5qZGJjLkNsaWVudERyaXZlcikgb3IgXCJlbWJlZGRl
ZFwiIChvcmcuYXBhY2hlLmRlcmJ5LmpkYmMuRW1iZWRkZWREcml2ZXIpLiBEZWZhdWx0OiBcImNs
aWVudFwiIikpOworICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdxJywgbnVsbCwgIlJ1
biBhcyBxdWlldGx5IGFzIHBvc3NpYmxlIikpOworICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0
aW9uKCdSJywgIi9wYXRoL3RvL2NvbmZpZ3VyYXRpb24iLCAiUmVhZCBjb25maWd1cmF0aW9uIGZy
b20gdGhlIHNwZWNpZmllZCBmaWxlIikpOworICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9u
KCdyJywgT05fT0ZGLCAiVHVybiBvbi9vZmYgc3VwcG9ydCBmb3IgcmVtb3RlIFNDTSBzeXN0ZW1z
IikpOworICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdTJywgbnVsbCwgIlNlYXJjaCBm
b3IgXCJleHRlcm5hbFwiIHNvdXJjZSByZXBvc2l0b3JpZXMgYW5kIGFkZCB0aGVtIikpOworICAg
ICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdzJywgIi9wYXRoL3RvL3NvdXJjZS9yb290Iiwg
IlRoZSByb290IGRpcmVjdG9yeSBvZiB0aGUgc291cmNlIHRyZWUiKSk7CisgICAgICAgIG9wdGlv
bnMuYWRkKG5ldyBPcHRpb24oJ1QnLCAibnVtYmVyIiwgIlRoZSBudW1iZXIgb2YgdGhyZWFkcyB0
byB1c2UgZm9yIGluZGV4IGdlbmVyYXRpb24uIEJ5IGRlZmF1bHQgdGhlIG51bWJlciBvZiB0aHJl
YWRzIHdpbGwgYmUgc2V0IHRvIHRoZSBudW1iZXIgb2YgYXZhaWxhYmxlIENQVXMiKSk7ICAgICAg
ICAKKyAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbignVScsICJob3N0OnBvcnQiLCAiU2Vu
ZCB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uIHRvIHRoZSBzcGVjaWZpZWQgYWRkcmVzcyAoVGhp
cyBpcyBtb3N0IGxpa2VseSB0aGUgd2ViLWFwcCBjb25maWd1cmVkIHdpdGggQ29uZmlnQWRkcmVz
cykiKSk7CiAgICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ3UnLCAidXJsIiwgIlVSTCB0
byB0aGUgZGF0YWJhc2UgdGhhdCBjb250YWlucyB0aGUgaGlzdG9yeSBjYWNoZS4gRGVmYXVsdDog
SWYgLWogc3BlY2lmaWVzIFwiZW1iZWRkZWRcIiwgXCJqZGJjOmRlcmJ5OiREQVRBX1JPT1QvY2Fj
aGVkYjtjcmVhdGU9dHJ1ZVwiOyBvdGhlcndpc2UsIFwiamRiYzpkZXJieTovL2xvY2FsaG9zdC9j
YWNoZWRiO2NyZWF0ZT10cnVlXCIiKSk7Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24o
J3InLCBPTl9PRkYsICJUdXJuIG9uL29mZiBzdXBwb3J0IGZvciByZW1vdGUgU0NNIHN5c3RlbXMi
KSk7Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ0wnLCAicGF0aCIsICJQYXRoIHRv
IHRoZSBzdWJkaXJlY3RvcnkgaW4gdGhlIHdlYi1hcHBsaWNhdGlvbiBjb250YWluaW5nIHRoZSBy
ZXF1ZXN0ZWQgc3R5bGVzaGVldC4gVGhlIGZvbGxvd2luZyBmYWN0b3J5LWRlZmF1bHRzIGV4aXN0
OiBcImRlZmF1bHRcIiwgXCJvZmZ3aGl0ZVwiIGFuZCBcInBvbGlzaGVkXCIiKSk7Ci0gICAgICAg
IG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ2wnLCBPTl9PRkYsICJUdXJuIG9uL29mZiBsb2NraW5n
IG9mIHRoZSBMdWNlbmUgZGF0YWJhc2UgZHVyaW5nIGluZGV4IGdlbmVyYXRpb24iKSk7Ci0gICAg
ICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ08nLCBPTl9PRkYsICJUdXJuIG9uL29mZiB0aGUg
b3B0aW1pemF0aW9uIG9mIHRoZSBpbmRleCBkYXRhYmFzZSBhcyBwYXJ0IG9mIHRoZSBpbmRleGlu
ZyBzdGVwIikpOwotICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdhJywgT05fT0ZGLCAi
QWxsb3cgb3IgZGlzYWxsb3cgbGVhZGluZyB3aWxkY2FyZHMgaW4gYSBzZWFyY2giKSk7CisgICAg
ICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ1YnLCBudWxsLCAiUHJpbnQgdmVyc2lvbiBhbmQg
cXVpdCIpKTsKKyAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbigndicsIG51bGwsICJQcmlu
dCBwcm9ncmVzcyBpbmZvcm1hdGlvbiBhcyB3ZSBnbyBhbG9uZyIpKTsKKyAgICAgICAgb3B0aW9u
cy5hZGQobmV3IE9wdGlvbignVycsICIvcGF0aC90by9jb25maWd1cmF0aW9uIiwgIldyaXRlIHRo
ZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24gdG8gdGhlIHNwZWNpZmllZCBmaWxlIChzbyB0aGF0IHRo
ZSB3ZWIgYXBwbGljYXRpb24gY2FuIHVzZSB0aGUgc2FtZSBjb25maWd1cmF0aW9uIikpOwogICAg
ICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCd3JywgIndlYmFwcC1jb250ZXh0IiwgIkNvbnRl
eHQgb2Ygd2ViYXBwLiBEZWZhdWx0IGlzIC9zb3VyY2UuIElmIHlvdSBzcGVjaWZ5IGEgZGlmZmVy
ZW50IG5hbWUsIG1ha2Ugc3VyZSB0byByZW5hbWUgc291cmNlLndhciB0byB0aGF0IG5hbWUuIikp
OwotICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdpJywgInBhdHRlcm4iLCAiSWdub3Jl
IHRoZSBuYW1lZCBmaWxlcyBvciBkaXJlY3RvcmllcyAoc3VwcG9ydHMgd2lsZGNhcmRzLCBleGFt
cGxlOiAtaSAqLnNvIC1pICouZGxsKSIpKTsKLSAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlv
bignSScsICJwYXR0ZXJuIiwgIk9ubHkgZmlsZXMgbWF0Y2hpbmcgdGhpcyBwYXR0ZXJuIHdpbGwg
YmUgZXhhbWluZWQgKHN1cHBvcnRzIHdpbGRjYXJkcywgZXhhbXBsZTogLUkgKi5qYXZhIC1JICou
YykiKSk7Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ0EnLCAiZXh0OmFuYWx5emVy
IiwgIkZpbGVzIHdpdGggdGhlIG5hbWVkIGV4dGVuc2lvbiBzaG91bGQgYmUgYW5hbHl6ZWQgd2l0
aCB0aGUgc3BlY2lmaWVkIGNsYXNzIikpOwotICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9u
KCdtJywgIm51bWJlciIsICJUaGUgbWF4aW11bSB3b3JkcyB0byBpbmRleCBpbiBhIGZpbGUiKSk7
Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ1MnLCBudWxsLCAiU2VhcmNoIGZvciBc
ImV4dGVybmFsXCIgc291cmNlIHJlcG9zaXRvcmllcyBhbmQgYWRkIHRoZW0iKSk7CisgICAgICAg
IG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ1gnLCAidXJsOnN1ZmZpeCIsICJVUkwgU3VmZml4IGZv
ciB0aGUgdXNlciBJbmZvcm1hdGlvbiBwcm92aWRlci4gRGVmYXVsdDogXCJcIiIpKTsKICAgICAg
ICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbigneicsICJudW1iZXIiLCAiZGVwdGggb2Ygc2Nhbm5p
bmcgZm9yIHJlcG9zaXRvcmllcyBpbiBkaXJlY3Rvcnkgc3RydWN0dXJlIHJlbGF0aXZlIHRvIHNv
dXJjZSByb290IikpOwotICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdzJywgIi9wYXRo
L3RvL3NvdXJjZS9yb290IiwgIlRoZSByb290IGRpcmVjdG9yeSBvZiB0aGUgc291cmNlIHRyZWUi
KSk7Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJ2QnLCAiL3BhdGgvdG8vZGF0YS9y
b290IiwgIlRoZSBkaXJlY3Rvcnkgd2hlcmUgT3Blbkdyb2sgc3RvcmVzIHRoZSBnZW5lcmF0ZWQg
ZGF0YSIpKTsKLSAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbignVCcsICJudW1iZXIiLCAi
VGhlIG51bWJlciBvZiB0aHJlYWRzIHRvIHVzZSBmb3IgaW5kZXggZ2VuZXJhdGlvbi4gQnkgZGVm
YXVsdCB0aGUgbnVtYmVyIG9mIHRocmVhZHMgd2lsbCBiZSBzZXQgdG8gdGhlIG51bWJlciBvZiBh
dmFpbGFibGUgQ1BVcyIpKTsgICAgICAgIAotICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9u
KCdCJywgInVybCIsICJCYXNlIFVSTCBvZiB0aGUgdXNlciBJbmZvcm1hdGlvbiBwcm92aWRlci4g
RGVmYXVsdDogXCJodHRwOi8vd3d3Lm9wZW5zb2xhcmlzLm9yZy92aWV3UHJvZmlsZS5qc3BhP3Vz
ZXJuYW1lPVwiIikpOwotICAgICAgICBvcHRpb25zLmFkZChuZXcgT3B0aW9uKCdYJywgInVybDpz
dWZmaXgiLCAiVVJMIFN1ZmZpeCBmb3IgdGhlIHVzZXIgSW5mb3JtYXRpb24gcHJvdmlkZXIuIERl
ZmF1bHQ6IFwiXCIiKSk7Ci0gICAgICAgIG9wdGlvbnMuYWRkKG5ldyBPcHRpb24oJz8nLCBudWxs
LCAiSGVscCIpKTsKLSAgICAgICAgb3B0aW9ucy5hZGQobmV3IE9wdGlvbignVicsIG51bGwsICJQ
cmludCB2ZXJzaW9uIGFuZCBxdWl0IikpOwogICAgIH0KIAogICAgIHB1YmxpYyBTdHJpbmcgZ2V0
Q29tbWFuZFN0cmluZygpIHsKZGlmZiAtciBiZmU4MjhjYmNjODQgc3JjL29yZy9vcGVuc29sYXJp
cy9vcGVuZ3Jvay9pbmRleC9JbmRleGVyLmphdmEKLS0tIGEvc3JjL29yZy9vcGVuc29sYXJpcy9v
cGVuZ3Jvay9pbmRleC9JbmRleGVyLmphdmEJU2F0IEZlYiAyNiAxOToxNjo1OCAyMDExICswMTAw
CisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svaW5kZXgvSW5kZXhlci5qYXZhCVRo
dSBNYXIgMzEgMDY6NTk6MTcgMjAxMSArMDIwMApAQCAtMjQsNiArMjQsNyBAQAogCiBpbXBvcnQg
amF2YS5pby5GaWxlOwogaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CitpbXBvcnQgamF2YS5s
YW5nLnJlZmxlY3QuRmllbGQ7CiBpbXBvcnQgamF2YS5uZXQuSW5ldEFkZHJlc3M7CiBpbXBvcnQg
amF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uOwogaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CkBA
IC00NSw3ICs0NiwxMSBAQAogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5jb25maWd1
cmF0aW9uLkNvbmZpZ3VyYXRpb247CiBpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmNv
bmZpZ3VyYXRpb24uUHJvamVjdDsKIGltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Blbmdyb2suY29u
ZmlndXJhdGlvbi5SdW50aW1lRW52aXJvbm1lbnQ7CitpbXBvcnQgb3JnLm9wZW5zb2xhcmlzLm9w
ZW5ncm9rLmhpc3RvcnkuSGlzdG9yeUV4Y2VwdGlvbjsKIGltcG9ydCBvcmcub3BlbnNvbGFyaXMu
b3Blbmdyb2suaGlzdG9yeS5IaXN0b3J5R3VydTsKK2ltcG9ydCBvcmcub3BlbnNvbGFyaXMub3Bl
bmdyb2suaGlzdG9yeS5SZXBvc2l0b3J5OworaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jv
ay5oaXN0b3J5LlJlcG9zaXRvcnlGYWN0b3J5OworaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVu
Z3Jvay5oaXN0b3J5LlJlcG9zaXRvcnlJbmZvOwogaW1wb3J0IG9yZy5vcGVuc29sYXJpcy5vcGVu
Z3Jvay51dGlsLkdldG9wdDsKIAogLyoqCkBAIC04MCw2ICs4NSw3IEBACiAgICAgICAgIGJvb2xl
YW4gcnVuSW5kZXggPSB0cnVlOwogICAgICAgICBib29sZWFuIHVwZGF0ZSA9IHRydWU7CiAgICAg
ICAgIGJvb2xlYW4gb3B0aW1pemVkQ2hhbmdlZCA9IGZhbHNlOworICAgICAgICBBcnJheUxpc3Q8
U3RyaW5nPiB6YXBDYWNoZSA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwogICAgICAgICBDb21t
YW5kTGluZU9wdGlvbnMgY21kT3B0aW9ucyA9IG5ldyBDb21tYW5kTGluZU9wdGlvbnMoKTsKIAog
ICAgICAgICBpZiAoYXJndi5sZW5ndGggPT0gMCkgewpAQCAtOTYsNiArMTAyLDcgQEAKICAgICAg
ICAgICAgIGJvb2xlYW4gcmVmcmVzaEhpc3RvcnkgPSBmYWxzZTsKICAgICAgICAgICAgIFN0cmlu
ZyBkZWZhdWx0UHJvamVjdCA9IG51bGw7CiAgICAgICAgICAgICBib29sZWFuIGxpc3RGaWxlcyA9
IGZhbHNlOworICAgICAgICAgICAgYm9vbGVhbiBsaXN0UmVwb3MgPSBmYWxzZTsKICAgICAgICAg
ICAgIGJvb2xlYW4gY3JlYXRlRGljdCA9IGZhbHNlOwogICAgICAgICAgICAgaW50IG5vVGhyZWFk
cyA9IDIgKyAoMiAqIFJ1bnRpbWUuZ2V0UnVudGltZSgpLmF2YWlsYWJsZVByb2Nlc3NvcnMoKSk7
CiAgICAgICAgICAgICAKQEAgLTM4MSw3ICszODgsMTIgQEAKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oSW5mby5nZXRGdWxsVmVyc2lvbigpKTsKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uZXhpdCgwKTsKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBicmVhazsKLQorICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnayc6Cisg
ICAgICAgICAgICAgICAgICAgICAgICAJemFwQ2FjaGUuYWRkKGdldG9wdC5nZXRPcHRhcmcoKSk7
CisgICAgICAgICAgICAgICAgICAgICAgICAJYnJlYWs7CisgICAgICAgICAgICAgICAgICAgICAg
ICBjYXNlICdLJzoKKyAgICAgICAgICAgICAgICAgICAgICAgIAlsaXN0UmVwb3MgPSB0cnVlOwor
ICAgICAgICAgICAgICAgICAgICAgICAgCWJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAg
Y2FzZSAnPyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxu
KGNtZE9wdGlvbnMuZ2V0VXNhZ2UoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3lz
dGVtLmV4aXQoMCk7CkBAIC0zOTMsNiArNDA1LDIwIEBACiAgICAgICAgICAgICAgICAgICAgIH0K
ICAgICAgICAgICAgICAgICB9CiAKKyAgICAgICAgICAgICAgICBMaXN0PENsYXNzPD8gZXh0ZW5k
cyBSZXBvc2l0b3J5Pj4gcmVwb3NpdG9yeUNsYXNzZXMgPSAKKyAgICAgICAgICAgICAgICAJUmVw
b3NpdG9yeUZhY3RvcnkuZ2V0UmVwb3NpdG9yeUNsYXNzZXMoKTsKKyAgICAgICAgICAgICAgICBm
b3IgKENsYXNzPD8gZXh0ZW5kcyBSZXBvc2l0b3J5PiBjbGF6eiA6IHJlcG9zaXRvcnlDbGFzc2Vz
KSB7CisgICAgICAgICAgICAgICAgCXRyeSB7CisJCQkJCQlGaWVsZCBmID0gY2xhenouZ2V0RGVj
bGFyZWRGaWVsZCgiQ01EX1BST1BFUlRZX0tFWSIpOworCQkJCQkJT2JqZWN0IGtleSA9IGYuZ2V0
KG51bGwpOworCQkJCQkJaWYgKGtleSAhPSBudWxsKSB7CisJCQkJCQkJY2ZnLnNldFJlcG9DbWQo
Y2xhenouZ2V0Q2Fub25pY2FsTmFtZSgpLCAKKwkJCQkJCQkJU3lzdGVtLmdldFByb3BlcnR5KGtl
eS50b1N0cmluZygpKSk7CisJCQkJCQl9CisJCQkJCX0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CisJ
CQkJCQkvLyBkb24ndCBjYXJlCisJCQkJCX0KKyAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
ICAgICAgaW50IG9wdGluZCA9IGdldG9wdC5nZXRPcHRpbmQoKTsKICAgICAgICAgICAgICAgICBp
ZiAob3B0aW5kICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChvcHRpbmQgPCBh
cmd2Lmxlbmd0aCkgewpAQCAtNDU0LDcgKzQ4MCwxMSBAQAogCiAgICAgICAgICAgICAgICAgZ2V0
SW5zdGFuY2UoKS5wcmVwYXJlSW5kZXhlcihlbnYsIHNlYXJjaFJlcG9zaXRvcmllcywgYWRkUHJv
amVjdHMsCiAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UHJvamVjdCwgY29uZmlnRmls
ZW5hbWUsIHJlZnJlc2hIaXN0b3J5LAotICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEZpbGVz
LCBjcmVhdGVEaWN0LCBzdWJGaWxlcywgcmVwb3NpdG9yaWVzKTsKKyAgICAgICAgICAgICAgICAg
ICAgICAgIGxpc3RGaWxlcywgY3JlYXRlRGljdCwgc3ViRmlsZXMsIHJlcG9zaXRvcmllcywKKyAg
ICAgICAgICAgICAgICAgICAgICAgIHphcENhY2hlLCBsaXN0UmVwb3MpOworICAgICAgICAgICAg
ICAgIGlmIChsaXN0UmVwb3MgfHwgIXphcENhY2hlLmlzRW1wdHkoKSkgeworICAgICAgICAgICAg
ICAgIAlyZXR1cm47CisgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIGlmIChydW5J
bmRleCB8fCAob3B0aW1pemVkQ2hhbmdlZCAmJiBlbnYuaXNPcHRpbWl6ZURhdGFiYXNlKCkpKSB7
CiAgICAgICAgICAgICAgICAgICAgIEluZGV4Q2hhbmdlZExpc3RlbmVyIHByb2dyZXNzID0gbmV3
IERlZmF1bHRJbmRleENoYW5nZWRMaXN0ZW5lcigpOwogICAgICAgICAgICAgICAgICAgICBnZXRJ
bnN0YW5jZSgpLmRvSW5kZXhlckV4ZWN1dGlvbih1cGRhdGUsIG5vVGhyZWFkcywgc3ViRmlsZXMs
CkBAIC00ODYsNyArNTE2LDkgQEAKICAgICAgICAgICAgIGJvb2xlYW4gbGlzdEZpbGVzLAogICAg
ICAgICAgICAgYm9vbGVhbiBjcmVhdGVEaWN0LAogICAgICAgICAgICAgTGlzdDxTdHJpbmc+IHN1
YkZpbGVzLAotICAgICAgICAgICAgTGlzdDxTdHJpbmc+IHJlcG9zaXRvcmllcykgdGhyb3dzIElu
ZGV4ZXJFeGNlcHRpb24sIElPRXhjZXB0aW9uIHsKKyAgICAgICAgICAgIExpc3Q8U3RyaW5nPiBy
ZXBvc2l0b3JpZXMsCisgICAgICAgICAgICBMaXN0PFN0cmluZz4gemFwQ2FjaGUsCisgICAgICAg
ICAgICBib29sZWFuIGxpc3RSZXBvUGF0aGVzKSB0aHJvd3MgSW5kZXhlckV4Y2VwdGlvbiwgSU9F
eGNlcHRpb24gewogCiAgICAgICAgIGlmIChlbnYuZ2V0RGF0YVJvb3RQYXRoKCkgPT0gbnVsbCkg
ewogICAgICAgICAgICAgdGhyb3cgbmV3IEluZGV4ZXJFeGNlcHRpb24oIkVSUk9SOiBQbGVhc2Ug
c3BlY2lmeSBhIERBVEEgUk9PVCBwYXRoIik7CkBAIC01MDAsMTUgKzUzMiw1OCBAQAogICAgICAg
ICAgICAgdGhyb3cgbmV3IEluZGV4ZXJFeGNlcHRpb24oIkRpZG4ndCBmaW5kIEV4dWJlcmFudCBD
dGFncyIpOwogICAgICAgICB9CiAKLSAgICAgICAgaWYgKHNlYXJjaFJlcG9zaXRvcmllcykgeyAg
ICAgICAgICAgIAorICAgICAgICBpZiAoc2VhcmNoUmVwb3NpdG9yaWVzIHx8IGxpc3RSZXBvUGF0
aGVzIHx8ICF6YXBDYWNoZS5pc0VtcHR5KCkpIHsgICAgICAgICAgICAKICAgICAgICAgICAgIGxv
Zy5sb2coTGV2ZWwuSU5GTywiU2Nhbm5pbmcgZm9yIHJlcG9zaXRvcmllcy4uLiIpOwogICAgICAg
ICAgICAgbG9uZyBzdGFydCA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwogICAgICAgICAg
ICAgSGlzdG9yeUd1cnUuZ2V0SW5zdGFuY2UoKS5hZGRSZXBvc2l0b3JpZXMoZW52LmdldFNvdXJj
ZVJvb3RQYXRoKCkpOwogICAgICAgICAgICAgbG9uZyB0aW1lID0gKFN5c3RlbS5jdXJyZW50VGlt
ZU1pbGxpcygpIC0gc3RhcnQpIC8gMTAwMDsgICAgICAgICAgICAKICAgICAgICAgICAgIGxvZy5s
b2coTGV2ZWwuSU5GTywgIkRvbmUgc2Nhbm5pbmcgZm9yIHJlcG9zaXRvcmllcyAoezB9cykiLCB0
aW1lKTsKKyAgICAgICAgICAgIGlmIChsaXN0UmVwb1BhdGhlcyB8fCAhemFwQ2FjaGUuaXNFbXB0
eSgpKSB7CisgICAgICAgICAgICAJTGlzdDxSZXBvc2l0b3J5SW5mbz4gcmVwb3MgPSBlbnYuZ2V0
UmVwb3NpdG9yaWVzKCk7CisgICAgICAgIAkJU3RyaW5nIHByZWZpeCA9ICBlbnYuZ2V0U291cmNl
Um9vdFBhdGgoKTsKKyAgICAgICAgICAgIAlpZiAobGlzdFJlcG9QYXRoZXMpIHsKKyAgICAgICAg
ICAgIAkJaWYgKHJlcG9zLmlzRW1wdHkoKSkgeworICAgICAgICAgICAgCQkJU3lzdGVtLm91dC5w
cmludGxuKCJObyByZXBvc2l0b3JpZXMgZm91bmQuIik7CisgICAgICAgICAgICAJCQlyZXR1cm47
CisgICAgICAgICAgICAJCX0KKyAgICAgICAgICAgIAkJU3lzdGVtLm91dC5wcmludGxuKCJSZXBv
c2l0b3JpZXMgaW4gIiArIHByZWZpeCArICI6Iik7CisJICAgICAgICAgICAgCWZvciAoUmVwb3Np
dG9yeUluZm8gaW5mbyA6IGVudi5nZXRSZXBvc2l0b3JpZXMoKSkgeworCSAgICAgICAgICAgIAkJ
U3RyaW5nIGRpciA9IGluZm8uZ2V0RGlyZWN0b3J5TmFtZSgpOworCSAgICAgICAgICAgIAkJU3lz
dGVtLm91dC5wcmludGxuKGRpci5zdWJzdHJpbmcocHJlZml4Lmxlbmd0aCgpKSk7CisJICAgICAg
ICAgICAgCX0KKyAgICAgICAgICAgIAl9CisgICAgICAgICAgICAJaWYgKCF6YXBDYWNoZS5pc0Vt
cHR5KCkpIHsKKyAgICAgICAgICAgIAkJSGFzaFNldDxTdHJpbmc+IHRvWmFwID0gbmV3IEhhc2hT
ZXQ8U3RyaW5nPih6YXBDYWNoZS5zaXplKCkgPDwgMSk7CisgICAgICAgICAgICAJCWJvb2xlYW4g
YWxsID0gZmFsc2U7CisgICAgICAgICAgICAJCWZvciAoU3RyaW5nIHJlcG8gOiB6YXBDYWNoZSkg
eworICAgICAgICAgICAgCQkJaWYgKHJlcG8uZXF1YWxzKCIqIikpIHsKKyAgICAgICAgICAgIAkJ
CQlhbGwgPSB0cnVlOworICAgICAgICAgICAgCQkJCWJyZWFrOworICAgICAgICAgICAgCQkJfQor
ICAgICAgICAgICAgCQkJaWYgKHJlcG8uc3RhcnRzV2l0aChwcmVmaXgpKSB7CisgICAgICAgICAg
ICAJCQkJcmVwbyA9IHJlcG8uc3Vic3RyaW5nKHByZWZpeC5sZW5ndGgoKSk7CisgICAgICAgICAg
ICAJCQl9CisgICAgICAgICAgICAJCX0KKyAgICAgICAgICAgIAkJaWYgKGFsbCkgeworICAgICAg
ICAgICAgCQkJdG9aYXAuY2xlYXIoKTsKKyAgICAJICAgICAgICAgICAgCWZvciAoUmVwb3NpdG9y
eUluZm8gaW5mbyA6IGVudi5nZXRSZXBvc2l0b3JpZXMoKSkgeworICAgIAkgICAgICAgICAgICAJ
CXRvWmFwLmFkZChpbmZvLmdldERpcmVjdG9yeU5hbWUoKQorICAgIAkgICAgICAgICAgICAJCQku
c3Vic3RyaW5nKHByZWZpeC5sZW5ndGgoKSkpOyAgICAJICAgICAgICAgICAgCQkKKyAgICAJICAg
ICAgICAgICAgCX0gICAgICAgICAgICAJCQkKKyAgICAgICAgICAgIAkJfQorICAgICAgICAgICAg
CQl0cnkgeworCQkJCQkJSGlzdG9yeUd1cnUuZ2V0SW5zdGFuY2UoKS5yZW1vdmVDYWNoZSh0b1ph
cCk7CisJCQkJCX0gY2F0Y2ggKEhpc3RvcnlFeGNlcHRpb24gZSkgeworCQkJCQkJbG9nLndhcm5p
bmcoIkNsZWFyaW5nIGhpc3RvcnkgY2FjaGUgZmFpbGQ6ICIKKwkJCQkJCQkrIGUuZ2V0TG9jYWxp
emVkTWVzc2FnZSgpKTsKKwkJCQkJfQorICAgICAgICAgICAgCX0KKyAgICAgICAgICAgIAlyZXR1
cm47CisgICAgICAgICAgICB9CiAgICAgICAgIH0KIAogICAgICAgICBpZiAoYWRkUHJvamVjdHMp
IHsKKyAgICAgICAgCVN5c3RlbS5lcnIucHJpbnRsbigiYWRkUHJvamVjdHMiKTsKICAgICAgICAg
ICAgIEZpbGUgZmlsZXNbXSA9IGVudi5nZXRTb3VyY2VSb290RmlsZSgpLmxpc3RGaWxlcygpOwog
ICAgICAgICAgICAgTGlzdDxQcm9qZWN0PiBwcm9qZWN0cyA9IGVudi5nZXRQcm9qZWN0cygpOwog
CmRpZmYgLXIgYmZlODI4Y2JjYzg0IHNyYy9vcmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svd2ViL1V0
aWwuamF2YQotLS0gYS9zcmMvb3JnL29wZW5zb2xhcmlzL29wZW5ncm9rL3dlYi9VdGlsLmphdmEJ
U2F0IEZlYiAyNiAxOToxNjo1OCAyMDExICswMTAwCisrKyBiL3NyYy9vcmcvb3BlbnNvbGFyaXMv
b3Blbmdyb2svd2ViL1V0aWwuamF2YQlUaHUgTWFyIDMxIDA2OjU5OjE3IDIwMTEgKzAyMDAKQEAg
LTEzNCw3ICsxMzQsOSBAQAogCiAgICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIHZlcnNpb25QPWh0
bWxpemUob3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLkluZm8uZ2V0UmV2aXNpb24oKSk7CiAgICAg
LyoqCi0gICAgICogdXNlZCBieSBCVUkgLSBDU1MgbmVlZHMgdGhpcyBwYXJhbWV0ZXIgZm9yIHBy
b3BlciBjYWNoZSByZWZyZXNoIChwZXIgY2hhbmdlc2V0KSBpbiBjbGllbnQgYnJvd3NlcgorICAg
ICAqIHVzZWQgYnkgQlVJIC0gQ1NTIG5lZWRzIHRoaXMgcGFyYW1ldGVyIGZvciBwcm9wZXIgY2Fj
aGUgcmVmcmVzaCAKKyAgICAgKiAocGVyIGNoYW5nZXNldCkgaW4gY2xpZW50IGJyb3dzZXIKKyAg
ICAgKiBqZWw6IGJ1dCB1c2VsZXNzLCBzaW5jZSB0aGUgcGFnZSBjYWNoZWQgYW55d2F5LgogICAg
ICAqIEByZXR1cm4gaHRtbCBlc2NhcGVkIHZlcnNpb24gKGhnIGNoYW5nZXNldCkKICAgICAgKi8K
ICAgICBwdWJsaWMgc3RhdGljIFN0cmluZyB2ZXJzaW9uUGFyYW1ldGVyKCkgewpAQCAtMjc2LDcg
KzI3OCw3IEBACiAgICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIGVzY2FwZUZvclJlZ2V4KGNoYXIg
YykgewogICAgICAgICBTdHJpbmdCdWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoNik7CiAg
ICAgICAgIHNiLmFwcGVuZCgiXFx1Iik7Ci0gICAgICAgIFN0cmluZyBoZXggPSBJbnRlZ2VyLnRv
SGV4U3RyaW5nKChpbnQpIGMpOworICAgICAgICBTdHJpbmcgaGV4ID0gSW50ZWdlci50b0hleFN0
cmluZyhjKTsKICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA0IC0gaGV4Lmxlbmd0aCgpOyBp
KyspIHsKICAgICAgICAgICAgIHNiLmFwcGVuZCgnMCcpOwogICAgICAgICB9CkBAIC0yODQsOSAr
Mjg2LDExIEBACiAgICAgICAgIHJldHVybiBzYi50b1N0cmluZygpOwogICAgIH0KIAorICAgIHN0
YXRpYyBOdW1iZXJGb3JtYXQgRk9STUFUVEVSID0gbmV3IERlY2ltYWxGb3JtYXQoIiMsIyMjLCMj
IywjIyMuIyIpOworICAgIAogICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIHJlZGFibGVTaXplKGxv
bmcgbnVtKSB7Ci0gICAgICAgIGZsb2F0IGwgPSAoZmxvYXQpIG51bTsKLSAgICAgICAgTnVtYmVy
Rm9ybWF0IGZvcm1hdHRlciA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjLCMjIywjIyMsIyMjLiMiKTsK
KyAgICAgICAgZmxvYXQgbCA9IG51bTsKKyAgICAgICAgTnVtYmVyRm9ybWF0IGZvcm1hdHRlciA9
IChOdW1iZXJGb3JtYXQpIEZPUk1BVFRFUi5jbG9uZSgpOwogICAgICAgICBpZiAobCA8IDEwMjQp
IHsKICAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0KGwpOwogICAgICAgICB9IGVs
c2UgaWYgKGwgPCAxMDQ4NTc2KSB7CmRpZmYgLXIgYmZlODI4Y2JjYzg0IHdlYi9odHRwaGVhZGVy
LmpzcGYKLS0tIGEvd2ViL2h0dHBoZWFkZXIuanNwZglTYXQgRmViIDI2IDE5OjE2OjU4IDIwMTEg
KzAxMDAKKysrIGIvd2ViL2h0dHBoZWFkZXIuanNwZglUaHUgTWFyIDMxIDA2OjU5OjE3IDIwMTEg
KzAyMDAKQEAgLTM2LDEyICszNiwxMiBAQAogICAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQt
VHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04Ii8+CiAgICAgPG1ldGEgbmFt
ZT0iZ2VuZXJhdG9yIiBjb250ZW50PSI8JT1vcmcub3BlbnNvbGFyaXMub3Blbmdyb2suSW5mby5n
ZXRWZXJzaW9uKCklPiAoPCU9b3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLkluZm8uZ2V0UmV2aXNp
b24oKSU+KSIvPgogICAgIDxsaW5rIHJlbD0iaWNvbiIgaHJlZj0iPCU9aHR0cEhlYWRlckNvbnRl
eHQlPi88JT1sYWYlPi9pbWcvaWNvbi5wbmciIHR5cGU9ImltYWdlL3BuZyIvPiAgICAKLSAgICA8
bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSI8JT1odHRwSGVhZGVy
Q29udGV4dCU+LzwlPWxhZiU+L3N0eWxlLmNzcz92PTwlPVV0aWwudmVyc2lvblBhcmFtZXRlcigp
JT4iLz4KLSAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSI8
JT1odHRwSGVhZGVyQ29udGV4dCU+LzwlPWxhZiU+L3ByaW50LmNzcz92PTwlPVV0aWwudmVyc2lv
blBhcmFtZXRlcigpJT4iIG1lZGlhPSJwcmludCIgLz4KLSAgICA8JS0tIFRPRE8gIEJ1ZyAxMTc0
OSA8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSI8JT1odHRwSGVh
ZGVyQ29udGV4dCU+LzwlPWxhZiU+L2pxdWVyeS5hdXRvY29tcGxldGUuY3NzP3Y9PCU9VXRpbC52
ZXJzaW9uUGFyYW1ldGVyKCklPiIgLz4gLS0lPgotICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIg
dHlwZT0idGV4dC9jc3MiIGhyZWY9IjwlPWh0dHBIZWFkZXJDb250ZXh0JT4vPCU9bGFmJT4vanF1
ZXJ5LnRvb2x0aXAuY3NzP3Y9PCU9VXRpbC52ZXJzaW9uUGFyYW1ldGVyKCklPiIgLz4KLSAgICA8
JS0tIFRPRE8gIEJ1ZyAxMTc0OSA8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3Nz
IiBocmVmPSI8JT1odHRwSGVhZGVyQ29udGV4dCU+LzwlPWxhZiU+L2pxdWVyeS5jb21iby5jc3M/
dj08JT1VdGlsLnZlcnNpb25QYXJhbWV0ZXIoKSU+IiAvPi0tJT4KLSAgICA8bGluayByZWw9ImFs
dGVybmF0ZSBzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgbWVkaWE9ImFsbCIgdGl0bGU9IlBh
cGVyIFdoaXRlIiBocmVmPSI8JT1odHRwSGVhZGVyQ29udGV4dCU+LzwlPWxhZiU+L3ByaW50LmNz
cz92PTwlPVV0aWwudmVyc2lvblBhcmFtZXRlcigpJT4iLz4KKyAgICA8bGluayByZWw9InN0eWxl
c2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSI8JT1odHRwSGVhZGVyQ29udGV4dCU+LzwlPWxh
ZiU+L3N0eWxlLmNzcyIvPgorICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9j
c3MiIGhyZWY9IjwlPWh0dHBIZWFkZXJDb250ZXh0JT4vPCU9bGFmJT4vcHJpbnQuY3NzIiBtZWRp
YT0icHJpbnQiIC8+CisgICAgPCUtLSBUT0RPICBCdWcgMTE3NDkgPGxpbmsgcmVsPSJzdHlsZXNo
ZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iPCU9aHR0cEhlYWRlckNvbnRleHQlPi88JT1sYWYl
Pi9qcXVlcnkuYXV0b2NvbXBsZXRlLmNzcyIgLz4gLS0lPgorICAgIDxsaW5rIHJlbD0ic3R5bGVz
aGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9IjwlPWh0dHBIZWFkZXJDb250ZXh0JT4vPCU9bGFm
JT4vanF1ZXJ5LnRvb2x0aXAuY3NzIiAvPgorICAgIDwlLS0gVE9ETyAgQnVnIDExNzQ5IDxsaW5r
IHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9IjwlPWh0dHBIZWFkZXJDb250
ZXh0JT4vPCU9bGFmJT4vanF1ZXJ5LmNvbWJvLmNzcyU+IiAvPi0tJT4KKyAgICA8bGluayByZWw9
ImFsdGVybmF0ZSBzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgbWVkaWE9ImFsbCIgdGl0bGU9
IlBhcGVyIFdoaXRlIiBocmVmPSI8JT1odHRwSGVhZGVyQ29udGV4dCU+LzwlPWxhZiU+L3ByaW50
LmNzcyIvPgogICAgIDxsaW5rIHJlbD0ic2VhcmNoIiBocmVmPSI8JT1odHRwSGVhZGVyQ29udGV4
dCU+L29wZW5zZWFyY2giIHR5cGU9ImFwcGxpY2F0aW9uL29wZW5zZWFyY2hkZXNjcmlwdGlvbit4
bWwiIHRpdGxlPSJPcGVuR3JvayBTZWFyY2ggZm9yIGN1cnJlbnQgcHJvamVjdChzKSIgLz4KICAg
ICA8dGl0bGU+PCU9cGFnZVRpdGxlJT48L3RpdGxlPgogPC9oZWFkPgo=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
              isurl="0"
          >
            <attachid>4506</attachid>
            <date>2011-03-31 05:21:00 +0000</date>
            <delta_ts>2011-03-31 05:21:04 +0000</delta_ts>
            <desc>example indexer script (may help to understand the issue)</desc>
            <filename>opengrok</filename>
            <type>text/plain</type>
            <size>16489</size>
            <attacher>jel+osolbugs</attacher>
            
              <data encoding="base64">IyEvYmluL2tzaDkzCgojIE9wZW5Hcm9rIFdyYXBwZXIgKGluaXRpYWwgc2V0dXAgYW5kIGNyb24g
am9iIHVwZGF0aW5nKSBmb3IgR2xhc3NmaXNoCk9QRU5HUk9LX0RJUj0kKF9UPWBwd2RgOyBjZCBg
ZGlybmFtZSAkezB9YDsgY2QgLi47IHB3ZDsgY2QgJF9UKQpleHBvcnQgTENfQ1RZUEU9ImRlX0RF
LlVURi04IiBMQU5HPSIkTENfQ1RZUEUiCgp0eXBlc2V0IC1mdCAkKHR5cGVzZXQgK2YpCgojIElu
aXRpYWxpemUgdGhlIGVudmlyb25tZW50IGZvciBvcGVuZ3JvayB3aXRoIHJlYXNvbmFibGUgZGVm
YXVsdHMuClNldHVwRW52KCkgewoJIyBJZiBzZXQgYW5kIGF2YWlsYWJsZSB0aGUgaW5kZXhfYm9k
eS5odG1sIGluIHRoZSB3ZWJhcmNoaXZlIChzb3VyY2Uud2FyKQoJIyBnZXRzIHJlcGxhY2VkIHdp
dGggdGhlIGdpdmVuIGZpbGUgcmlnaHQgYmVmb3JlIGl0IGdldHMgZGVwbG95ZWQgdG8gR0YuCgkj
SU5ERVhfQk9EWV9IVE1MPQoKCSMgUkVRVUlSRUQ6IEdsYXNzZmlzaCBkb21haW4gZGlyZWN0b3J5
IHRvIHVzZQoJR0ZfRE9NQUlORElSPSIke0dGX0RPTUFJTkRJUjotL2RhdGEvc2l0ZXMvZ2xhc3Nm
aXNoL3YzLjEvc3JjfSIKCgkjIFRoZSBvd25lciBvZiB0aGUgZ2xhc3NmaXNoIGRpcmVjdG9yeQoJ
R0ZfT1dORVI9IndlYnNlcnZkOndlYnNlcnZkIgoKCSMgQ29uZmlndXJhdGlvbiBBZGRyZXNzICho
b3N0OnBvcnQgaW4gY29uZi93ZWIueG1sKQoJV0VCQVBQX0NPTkZJRz0ibG9jYWxob3N0OjI0MjQi
CgoJIyBSRVFVSVJFRDogRnVsbCBQYXRoIHRvIEphdmEgSW5zdGFsbGF0aW9uIFJvb3QKCUpBVkFf
SE9NRT0iJHtKQVZBX0hPTUU6LS91c3IvamRrL2luc3RhbmNlcy9qZGsxLjYuMH0iCgkjIEVuYWJs
ZSByZW1vdGUgZGVidWdnaW5nIGZvciB0aGUgY3VycmVudCBpbmRleGVyCgkjSkFWQV9ERUJVRz0i
LWFnZW50bGliOmpkd3A9dHJhbnNwb3J0PWR0X3NvY2tldCxzZXJ2ZXI9eSxhZGRyZXNzPTgwMTAs
c3VzcGVuZD15IgoJI0pBVkFfT1BUUz0iLXNlcnZlciAtWG14MjA0OG0iCglKQVZBX09QVFM9JHtK
QVZBX09QVFM6LSItWG14MjA0OG0ifQoKCSMgUkVRVUlSRUQ6IEZ1bGwgUGF0aCB0byBFeHViZXJh
bnQgQ1RhZ3MKCUVYVUJFUkFOVF9DVEFHUz0iJHtFWFVCRVJBTlRfQ1RBR1M6LS9sb2NhbC91c3Iv
YmluL2N0YWdzfSIKCgkjIFJFUVVJUkVEOiBCYXNlIERpcmVjdG9yeSBvZiB0aGUgT3Blbkdyb2sg
VXNlciBEYXRhIEFyZWEKCU9QRU5HUk9LX0lOU1RBTkNFX0JBU0U9IiR7T1BFTkdST0tfSU5TVEFO
Q0VfQkFTRTotL2RhdGEvb3Blbmdyb2t9IgoKCSMgZmlsZSB3aXRoIHJlYWQgb25seSBjb25maWd1
cmF0aW9uIC0gYSB0ZW1wIHdvcmthcm91bmQgZm9yIGJ1ZyAjMzI3CgkjIHNlZSBodHRwczovL2Rl
ZmVjdC5vcGVuc29sYXJpcy5vcmcvYnovc2hvd19idWcuY2dpP2lkPTMyNwoJI1JFQURfWE1MX0NP
TkZJR1VSQVRJT049CgoJIyBIb3cgZGVlcCBzaG91bGQgc2Nhbm5pbmcgZm9yIHJlcG9zIGdvIChk
ZWZhdWx0OiAzIGRpcnMgZnJvbSBTUkNfUk9PVCkKCSNPUEVOR1JPS19TQ0FOX0RFUFRIPTMKCgkj
IEVuYWJsZSBQcm9qZWN0czogZXZlcnkgZGlyIGluIFNSQ19ST09UIGlzIGNvbnNpZGVyZWQgYSBz
ZXBhcmF0ZSBwcm9qZWN0CgkjT1BFTkdST0tfUFJPSkVDVFM9MQoKCSMgRGlzYWJsZSBIaXN0b3J5
IENhY2hlIGZvciAocmVtb3RlKSBSZXBvc2l0b3JpZXMgKENWUyBvciBTVk4pLgoJIyBDYW4gYmUg
dmVyeSB0aW1lIGRlbWFuZGluZywgdW5jb21tZW50IGlmIG5vdCBuZWVkZWQuCgkjT1BFTkdST0tf
Tk9SRU1PVEVfUkVQT1M9MQoKCSMgRGlzYWJsZSBTY2FuIGZvciByZXBvc2l0b3JpZXMuIFVuY29t
bWVudCBpZiBuZWVkZWQuCgkjT1BFTkdST0tfTk9TQ0FOX1JFUE9TPTEKCgkjIFNldCBNYXhpbXVt
IEluZGV4ZWQgV29yZHMgUGVyIEZpbGUgKGRlZmF1bHQ6IHVubGltaXRlZCkuCgkjIE5vdGUsIHRo
YXQgeW91IG1pZ2h0IHJ1biBvdXQgb2YgbWVtb3J5LCB0aGVuIGVpdGhlciBpbmNyZWFzZSBKVk0g
bWVtb3J5CgkjIGFzIG5vdGVkIGluIEpBVkFfT1BUUywgb3Igc2V0IHRoaXMgbGltaXQgKGlmIHlv
dSBkb24ndCBtaW5kIG9wZW5ncm9rIG5vdAoJIyBpbmRleGluZyB0aGUgcmVzdCBvZiB0aGUgZmls
ZSwgb25jZSB0aGUgbGltaXQgaXMgcmVhY2hlZCkKCSNPUEVOR1JPS19NQVhfV09SRFM9MTAwMDAw
CgoJIyBTdG9yZSB0aGUgaGlzdG9yeSBjYWNoZSBpbiBKYXZhIERCIChkZXJieSkgQGxvY2FsaG9z
dDoxNTI3IHBlciBkZWZhdWx0LAoJIyBpbnN0ZWFkIG9mIGZpbGUgc3lzdGVtIChnemlwcGVkIHht
bCBmaWxlcykuCgkjT1BFTkdST0tfREVSQlk9MQoKCSMgRGlzYWJsZSB3aWxkY2FyZCBwcmVmaXgg
c2VhcmNoIHF1ZXJ5IHN1cHBvcnQuIFVuY29tbWVudCBpZiBuZWVkZWQuCgkjT1BFTkdST0tfTk9X
UFJFRklYPTEKCgkjIElnbm9yZSB0aGVzZSBwYXR0ZXJucyBhcyBuYW1lcyBvZiBmaWxlcyBvciBk
aXJlY3Rvcmllcy4KCSMgQWRkIGZvciBlYWNoIHBhdHRlcm4gYSAnLWknIGFuZCBlbmNsb3NlIHBh
dHRlcm5zIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzCgkjIGxpa2UgISBvciAqIGluIHNpbmdsZSBx
dW90ZXMgYW5kIGVzY2FwZSBzcGVjaWFsIHNoZWxsIGNoYXJhY3RlcnMuCgkjT1BFTkdST0tfSUdO
T1JFPSItaSBkdW1teSAtaSBkdW1teTIiCgoJIyBXZWIgU2l0ZSBMb29rICYgRmVlbCB7ZGVmYXVs
dHxvZmZ3aGl0ZXxwb2xpc2hlZH0uCgkjT1BFTkdST0tfU0tJTj0iZGVmYXVsdCIKCgkjIFN1cHBy
ZXNzIFByb2dyZXNzIGFuZCBXYXJuaW5ncyBNZXNzYWdlcwoJI09QRU5HUk9LX05PTl9JTlRFUkFD
VElWRT0xCgoJIyBFbmFibGUgVmVyYm9zZSBNb2RlIGluIG9wZW5ncm9rLmphcgoJI09QRU5HUk9L
X1ZFUkJPU0U9MQoKCSMgU2hvd3MgcHJvZ3Jlc3MgaW4gJSBvZiB3b3JraW5nIHRocm91Z2ggcHJv
amVjdC4gSXQncyBnb29kIHRvIGhhdmUgdmVyYm9zZQoJIyBNb2RlIGVuYWJsZWQgdG9vLCBjb3N0
IG9mIHRoaXMgaXMgb25lIG1vcmUgdHJhdmVyc2FsIG9mIHRoZSBwcm9qZWN0IAoJIyBiZWZvcmUg
aW5kZXhpbmcgaXQKCSNPUEVOR1JPS19QUk9HUkVTUz0xCgoJIyAtLS0tLS0gdXN1YWxseSBvbmUg
ZG9lcyBub3QgbmVlZCB0byB0b3VjaCByZW1haW5pbmcgc3R1ZmYgLS0tLS0tCgoJIyBSRVFVSVJF
RCAoZGVwbG95KTogR2xhc3NmaXNoIFdBUiBUYXJnZXQgRGlyZWN0b3J5CglPUEVOR1JPS19XQVJf
VEFSR0VUPSIke09QRU5HUk9LX1dBUl9UQVJHRVQ6LSR7R0ZfRE9NQUlORElSfS9hdXRvZGVwbG95
fSIKCgkjIFJFUVVJUkVEIChkZXBsb3kpOiBXZWIgQXJjaGl2ZSBvZiBPcGVuR3JvayAoRGlzdHJp
YnV0aW9uIExvY2F0aW9uKS4KCU9QRU5HUk9LX1dBUl9TT1VSQ0U9IiR7T1BFTkdST0tfV0FSX1NP
VVJDRTotJHtPUEVOR1JPS19ESVJ9L2xpYi9zb3VyY2Uud2FyfSIKCgkjIFJFUVVJUkVEOiBTb3Vy
Y2UgQ29kZS9SZXBvc2l0b3J5IFJvb3QKCSMgKHlvdXIgc291cmNlIGNvZGUgb3IgdGhlIHJvb3Qg
b2YgYWxsIHJlcG9zaXRvcmllcykKCVNSQ19ST09UPSIke1NSQ19ST09UOi0ke09QRU5HUk9LX0lO
U1RBTkNFX0JBU0V9L3NvdXJjZX0iCgoJIyBSRVFVSVJFRDogT3Blbkdyb2sgR2VuZXJhdGUgRGF0
YSBSb290IChmb3IgTHVjZW5lIGluZGV4IGFuZCBoeXBlcnRleHQKCSMgY3Jvc3MtcmVmZXJlbmNl
cykuIFRoaXMgYXJlYSBpcyByZWJ1aWx0IGJ5ICJ1cGRhdGUiLgoJREFUQV9ST09UPSIke0RBVEFf
Uk9PVDotJHtPUEVOR1JPS19JTlNUQU5DRV9CQVNFfS9kYXRhfSIKCgkjIFVzZXIgUHJvdmlkZWQg
U291cmNlIFBhdGggdG8gRGVzY3JpcHRpb24gTWFwcGluZyAoVGFiIFNlcGFyYXRlZCBWYWx1ZSkK
CSMgVGhlIHVzZXIgbWFpbnRhaW5lZCBzb3VyY2Ugb2YgdGhlIGdlbmVyYXRlZCBFZnRhckZpbGUg
ZmlsZS4KCVBBVEhfREVTQz0iJHtQQVRIX0RFU0M6LSR7T1BFTkdST0tfSU5TVEFOQ0VfQkFTRX0v
ZXRjL3BhdGhzLnRzdn0iCgoJIyBSRVFVSVJFRDogWE1MIENvbmZpZ3VyYXRpb24gKHRoZSBjb25m
aWcgdXNlZCBieSBXZWIvR1VJIGludGVyZmFjZXMpCglYTUxfQ09ORklHVVJBVElPTj0iJHtYTUxf
Q09ORklHVVJBVElPTjotJHtPUEVOR1JPS19JTlNUQU5DRV9CQVNFfS9ldGMvY29uZmlndXJhdGlv
bi54bWx9IgoKCSMgUkVRVUlSRUQ6IExvZ2dlciBDb25maWd1cmF0aW9uCglMT0dHRVJfQ09ORklH
X0ZJTEU9IiR7TE9HR0VSX0NPTkZJR19GSUxFOi1sb2dnaW5nLnByb3BlcnRpZXN9IgoJTE9HR0VS
X0NPTkZJR19QQVRIPSIke0xPR0dFUl9DT05GSUdfUEFUSDotJHtPUEVOR1JPS19JTlNUQU5DRV9C
QVNFfS8ke0xPR0dFUl9DT05GSUdfRklMRX19IgoKCSMgdGVtcGxhdGUgdG8gdXNlIHRvIGNyZWF0
ZSAkTE9HR0VSX0NPTkZJR19QQVRIIHdoZW4gaXQgaXMgbi9hCglMT0dHRVJfQ09ORl9TT1VSQ0U9
IiR7TE9HR0VSX0NPTkZfU09VUkNFOi0ke09QRU5HUk9LX0RJUn0vZG9jL2xvZ2dpbmcucHJvcGVy
dGllc30iCgoJIyBSRVFVSVJFRDogSmF2YSBBcmNoaXZlIG9mIE9wZW5Hcm9rIChJbnN0YWxsYXRp
b24gTG9jYXRpb24pCglPUEVOR1JPS19KQVI9IiR7T1BFTkdST0tfSkFSOi0ke09QRU5HUk9LX0RJ
Un0vbGliL29wZW5ncm9rLmphcn0iCgoJIyBGdWxsIFBhdGggdG8gSGlzdG9yeSBVdGlsaXRpZXMK
CUhHPSIke0hHOi1gV2hpY2ggaGdgfSIKCUNWUz0iJHtDVlM6LWBXaGljaCBjdnNgfSIKCVNWTj0i
JHtTVk46LWBXaGljaCBzdm5gfSIKCVNDQ1M9IiR7U0NDUzotYFdoaWNoIHNjY3NgfSIKCUNMRUFS
Q0FTRT0iJHtDTEVBUkNBU0U6LWBXaGljaCBjbGVhcnRvb2xgfSIKCUdJVD0iJHtHSVQ6LWBXaGlj
aCBnaXRgfSIKCVA0PSIke1A0Oi1gV2hpY2ggcDRgfSIKCU1UTj0iJHtNVE46LWBXaGljaCBtdG5g
fSIKCUJaUj0iJHtCWlI6LWBXaGljaCBienJgfSIKCgkjIEVmdGFyRmlsZSA9PSBBbiBFeHRyZW1l
bHkgRmFzdCBUYWdnZWQgQXR0cmlidXRlIFJlYWQtb25seSBGaWxlIFN5c3RlbQoJRUZUQVJfVVBE
QVRFPSIke0VGVEFSX1VQREFURTotb3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLndlYi5FZnRhckZp
bGV9IgoKCSMgSEFSRENPREVEOiBHZW5lcmF0ZWQgRWZ0YXJGaWxlIChTZWUgd2ViLyouanNwKQoJ
RUZUQVJfT1VUUFVUX0ZJTEU9IiR7RUZUQVJfT1VUUFVUX0ZJTEU6LSR7REFUQV9ST09UfS9pbmRl
eC9kdGFncy5lZnRhcn0iCn0KCiMKIyBIZWxwZXIgRnVuY3Rpb25zCiMKUHJvZ3Jlc3MoKSB7Cglb
IC16ICIke09QRU5HUk9LX05PTl9JTlRFUkFDVElWRX0iIF0gJiYgcHJpbnQgIiR7QH0iCn0KCldh
cm5pbmcoKSB7CglbIC16ICIke09QRU5HUk9LX05PTl9JTlRFUkFDVElWRX0iIF0gJiYgcHJpbnQg
LXUyICJXQVJOSU5HOiAke0B9Igp9CgpFcnJvcigpIHsKCXByaW50IC11MiAiRVJST1I6ICR7QH0i
Cn0KCkZhdGFsRXJyb3IoKSB7CglwcmludCAtdTIgIlxuRkFUQUwgRVJST1I6ICR7QH0gLSBBYm9y
dGluZyEiCgkke0RPfSBleGl0IDIKfQoKIwojIEhlbHBlciBGdW5jdGlvbnMgLSBBdXRvZGV0ZWN0
aW9uIG9mIFJ1bnRpbWUgRW52aXJvbm1lbnQKIwoKV2hpY2goKSB7Cgl3aGVuY2UgLXAgJDEgMj4v
ZGV2L251bGwKfQoKTG9hZEluc3RhbmNlQ29uZmlndXJhdGlvbigpIHsKCWlmIFsgLW4gIiQxIiAt
YSAtciAiJDEiIF07IHRoZW4KCQkjIExvYWQgdGhlIExvY2FsIE9wZW5Hcm9rIENvbmZpZ3VyYXRp
b24gRW52aXJvbm1lbnQKCQlQcm9ncmVzcyAiTG9hZGluZyAkMSAuLi4iCgkJLiAiJDEiCgllbHNl
CgkJVXNhZ2UKCWZpCn0KClZhbGlkYXRlQ29uZmlndXJhdGlvbigpIHsKCSMgUkVRVUlSRUQ6IEph
dmEgVmlydHVhbCBNYWNoaW5lCglleHBvcnQgSkFWQV9IT01FCglpZiBbIC16ICIkSkFWQV9IT01F
IiBdOyB0aGVuCgkJaWYgWyAtbiAiJEpBVkE6IiAtYSAteCAiJEpBVkEiIF07IHRoZW4KCQkJOgoJ
CWVsc2UKCQkJSkFWQT0kKFdoaWNoIGphdmEpCgkJZmkKCQlpZiBbIC1uICIkSkFWQToiIC1hIC14
ICIkSkFWQSIgXTsgdGhlbgoJCQlKQVZBX0hPTUU9JHtKQVZBJS8qfQoJCQlKQVZBX0hPTUU9JHtK
QVZBJS8qfQoJCWVsc2UKCQkJRmF0YWxFcnJvciAiamF2YSBub3QgZm91bmQuIgoJCWZpCglmaQoJ
SkFWQT0iJHtKQVZBOi0kSkFWQV9IT01FL2Jpbi9qYXZhfSIKCUpBUj0iJHtKQVI6LSRKQVZBX0hP
TUUvYmluL2phcn0iCgoJVkVSQk9TRT0iIiA7IFFVSUVUPSIiIDsgUFJPR1JFU1M9IiIgOyBERVJC
WV9ISVNUT1JZX0NBQ0hFPSIiCglTQ0FOX0RFUFRIPSIiIDsgUkVBRF9YTUxfQ09ORj0iIiA7IEVO
QUJMRV9QUk9KRUNUUz0iIiA7IFNLSU49IiIKCUlHTk9SRV9QQVRURVJOUz0iIiA7IE1BWF9JTkRF
WEVEX1dPUkRTPSIiCgoJWyAtbiAiJHtPUEVOR1JPS19WRVJCT1NFfSIgXSAmJiBWRVJCT1NFPSIt
diIgJiYgUVVJRVQ9IiIKCVsgLW4gIiR7T1BFTkdST0tfUFJPR1JFU1N9IiBdICYmIFBST0dSRVNT
PSItQyIKCVsgLW4gIiR7T1BFTkdST0tfREVSQll9IiBdICYmIERFUkJZX0hJU1RPUllfQ0FDSEU9
Ii1EIgoJWyAtbiAiJHtPUEVOR1JPS19TQ0FOX0RFUFRIfSIgXSAmJiBTQ0FOX0RFUFRIPSIteiR7
T1BFTkdST0tfU0NBTl9ERVBUSH0iCglbIC1uICIke09QRU5HUk9LX1BST0pFQ1RTfSIgXSAmJiBF
TkFCTEVfUFJPSkVDVFM9Ii1QIgoJWyAtbiAiJHtPUEVOR1JPS19JR05PUkV9IiBdICYmIElHTk9S
RV9QQVRURVJOUz0iLWkgJE9QRU5HUk9LX0lHTk9SRSIKCVsgLW4gIiR7T1BFTkdST0tfTUFYX1dP
UkRTfSIgXSAmJiBNQVhfSU5ERVhFRF9XT1JEUz0iLW0gJE9QRU5HUk9LX01BWF9XT1JEUyIKCUxP
R0dFUl9QUk9QRVJUSUVTPSItRGphdmEudXRpbC5sb2dnaW5nLmNvbmZpZy5maWxlPSR7TE9HR0VS
X0NPTkZJR19QQVRIfSIKCVdFQkFQUF9DT05GSUdfQUREUkVTUz0iLVUgIiR7V0VCQVBQX0NPTkZJ
RzotImxvY2FsaG9zdDoyNDI0In0KCgkjIFdlIHNob3VsZCBub3Qgc2V0IHByb3BlcnRpZXMgdG8g
dGhlIGVtcHR5IHN0cmluZwoJUFJPUEVSVElFUz0iXAoke0hHOistRG9yZy5vcGVuc29sYXJpcy5v
cGVuZ3Jvay5oaXN0b3J5Lk1lcmN1cmlhbD0kSEd9IFwKJHtDVlM6Ky1Eb3JnLm9wZW5zb2xhcmlz
Lm9wZW5ncm9rLmhpc3RvcnkuY3ZzPSRDVlN9IFwKJHtTVk46Ky1Eb3JnLm9wZW5zb2xhcmlzLm9w
ZW5ncm9rLmhpc3RvcnkuU3VidmVyc2lvbj0kU1ZOfSBcCiR7U0NDUzorLURvcmcub3BlbnNvbGFy
aXMub3Blbmdyb2suaGlzdG9yeS5TQ0NTPSRTQ0NTfSBcCiR7Q0xFQVJDQVNFOistRG9yZy5vcGVu
c29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5LkNsZWFyQ2FzZT0kQ0xFQVJDQVNFfSBcCiR7R0lUOist
RG9yZy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5LmdpdD0kR0lUfSBcCiR7UDQ6Ky1Eb3Jn
Lm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuUGVyZm9yY2U9JFA0fSBcCiR7TVROOistRG9y
Zy5vcGVuc29sYXJpcy5vcGVuZ3Jvay5oaXN0b3J5Lk1vbm90b25lPSRNVE59IFwKJHtCWlI6Ky1E
b3JnLm9wZW5zb2xhcmlzLm9wZW5ncm9rLmhpc3RvcnkuQmF6YWFyPSRCWlJ9IFwKIgoJWyAtbiAi
JFJFQURfWE1MX0NPTkZJR1VSQVRJT04iIC1hIC1yICIke1JFQURfWE1MX0NPTkZJR1VSQVRJT059
IiBdICYmIFwKCVJFQURfWE1MX0NPTkY9Ii1SICR7UkVBRF9YTUxfQ09ORklHVVJBVElPTn0iCgoJ
TEVBRElOR19XSUxEQ0FSRD0iLWEgb24iCglbIC1uICIke09QRU5HUk9LX05PV1BSRUZJWH0iIF0g
JiYgTEVBRElOR19XSUxEQ0FSRD0iIgoKCVJFTU9URV9SRVBPU0lUT1JJRVM9Ii1yIG9uIgoJWyAt
biAiJHtPUEVOR1JPS19OT1JFTU9URV9SRVBPU30iIF0gJiYgUkVNT1RFX1JFUE9TSVRPUklFUz0i
IgoKCVNDQU5fRk9SX1JFUE9TSVRPUlk9Ii1TIgoJWyAtbiAiJHtPUEVOR1JPS19OT1NDQU5fUkVQ
T1N9IiBdICYmIFNDQU5fRk9SX1JFUE9TSVRPUlk9IiIKCglpZiBbIC1uICIkT1BFTkdST0tfU0tJ
TiIgXTsgdGhlbgoJCWNhc2UgIiRPUEVOR1JPS19TS0lOIiBpbgoJCQlkZWZhdWx0KSBTS0lOPSIt
TCBkZWZhdWx0IiA7OwoJCQlvZmZ3aGl0ZSkgU0tJTj0iLUwgb2Zmd2hpdGUiIDs7CgkJCXBvbGlz
aGVkKSBTS0lOPSItTCBwb2xpc2hlZCIgOzsKCQkJKikgV2FybmluZyAiSW52YWxpZCBPUEVOR1JP
S19TS0lOIGlnbm9yZWQhIiA7OwoJCWVzYWMKCWZpCgoJaWYgWyAhIC14ICIke0VYVUJFUkFOVF9D
VEFHU30iIF07IHRoZW4KCQlGYXRhbEVycm9yICJNaXNzaW5nIERlcGVuZGVudCBBcHBsaWNhdGlv
biAtIEV4dWJlcmFudCBDVGFncyIKCWZpCgoJaWYgWyAhIC1kICIke1NSQ19ST09UfSIgXTsgdGhl
bgoJCUZhdGFsRXJyb3IgIk9wZW5Hcm9rIFNvdXJjZSBQYXRoICR7U1JDX1JPT1R9IGRvZXNuJ3Qg
ZXhpc3QiCglmaQoKCWlmIFsgLW4gIiR7UVVJRVR9IiAtYSAtbiAiJHtWRVJCT1NFfSIgXTsgdGhl
bgoJCVdhcm5pbmcgIkJvdGggUXVpZXQgYW5kIFZlcmJvc2UgTW9kZSBFbmFibGVkIC0gQ2hvb3Np
bmcgVmVyYm9zZSIKCQlRVUlFVD0iIgoJCVZFUkJPU0U9Ii12IgoJZmkKCglpZiBbIC1uICIke09Q
RU5HUk9LX0RFUkJZfSIgXTsgdGhlbgoJCWlmIFsgISAtciAiJE9QRU5HUk9LX0RJUi9saWIvbGli
L2RlcmJ5Y2xpZW50LmphciIgXTsgdGhlbgoJCQlpZiBbIC1uICIkQVNfSE9NRSIgLWEgLXIgIiRB
U19IT01FL2phdmFkYi9saWIvZGVyYnljbGllbnQuamFyIiBdOyB0aGVuCgkJCQlsbiAtcyAiJEFT
X0hPTUUvamF2YWRiL2xpYi9kZXJieWNsaWVudC5qYXIiIFwKCQkJCQkiJE9QRU5HUk9LX0RJUi9s
aWIvbGliL2RlcmJ5Y2xpZW50LmphciIKCQkJZWxpZiBbIC1yIC9vcHQvU1VOV2phdmFkYi9saWIv
ZGVyYnljbGllbnQuamFyIF07IHRoZW4KCQkJCWxuIC1zIC9vcHQvU1VOV2phdmFkYi9saWIvZGVy
YnljbGllbnQuamFyIFwKCQkJCQkiJE9QRU5HUk9LX0RJUi9saWIvbGliL2RlcmJ5Y2xpZW50Lmph
ciIKCQkJZWxzZQoJCQkJRmF0YWxFcnJvciAiJE9QRU5HUk9LX0RJUi9saWIvbGliL2RlcmJ5Y2xp
ZW50LmphciBub3QgZm91bmQhIgoJCQlmaQoJCWZpCglmaQp9CgpDcmVhdGVSdW50aW1lUmVxdWly
ZW1lbnRzKCkgewoJaWYgWyAhIC1kICIke0RBVEFfUk9PVH0iIF07IHRoZW4KCQlXYXJuaW5nICAi
T3Blbkdyb2sgZ2VuZXJhdGVkIGRhdGEgcGF0aCAke0RBVEFfUk9PVH0gZG9lc24ndCBleGlzdCIK
CQlQcm9ncmVzcyAiICBBdHRlbXB0aW5nIHRvIGNyZWF0ZSBnZW5lcmF0ZWQgZGF0YSBkaXJlY3Rv
cnkgLi4uICIKCQkke0RPfSBta2RpciAtcCAiJHtEQVRBX1JPT1R9IgoJZmkKCWlmIFsgISAtZCAi
JHtEQVRBX1JPT1R9IiBdOyB0aGVuCgkJRmF0YWxFcnJvciAiT3Blbkdyb2sgZGF0YSBwYXRoICR7
REFUQV9ST09UfSBkb2Vzbid0IGV4aXN0IgoJZmkKCglpZiBbICEgLWQgIiR7T1BFTkdST0tfSU5T
VEFOQ0VfQkFTRX0vZXRjIiBdOyB0aGVuCgkJV2FybmluZyAgIk9wZW5Hcm9rIGdlbmVyYXRlZCBl
dGMgcGF0aCAiIFwKCQkJIiR7T1BFTkdST0tfSU5TVEFOQ0VfQkFTRX0vZXRjIGRvZXNuJ3QgZXhp
c3QiCgkJUHJvZ3Jlc3MgIiAgQXR0ZW1wdGluZyB0byBjcmVhdGUgZ2VuZXJhdGVkIGV0YyBkaXJl
Y3RvcnkgLi4uICIKCQkke0RPfSBta2RpciAtcCAiJHtPUEVOR1JPS19JTlNUQU5DRV9CQVNFfS9l
dGMiCglmaQoJaWYgWyAhIC1kICIke09QRU5HUk9LX0lOU1RBTkNFX0JBU0V9L2V0YyIgXTsgdGhl
bgoJCUZhdGFsRXJyb3IgIk9wZW5Hcm9rIGV0YyBwYXRoICIgXAoJCQkiJHtPUEVOR1JPS19JTlNU
QU5DRV9CQVNFfS9ldGMgZG9lc24ndCBleGlzdCIKCWZpCgoJaWYgWyAtbiAiJHtMT0dHRVJfQ09O
RklHX1BBVEh9IiAtYSAhIC1mICIke0xPR0dFUl9DT05GSUdfUEFUSH0iIF07IHRoZW4KCQlQcm9n
cmVzcyAiICBDcmVhdGluZyBkZWZhdWx0ICR7TE9HR0VSX0NPTkZJR19QQVRIfSAuLi4gIgoJCWlm
IFsgISAtZiAiJHtMT0dHRVJfQ09ORl9TT1VSQ0V9IiBdOyB0aGVuCgkJCVdhcm5pbmcgIkNhbid0
IGZpbmQgZGlzdHJpYnV0aW9uIGxvZ2dpbmcgY29uZmlndXJhdGlvbiIgICBcCgkJCQkiKCR7TE9H
R0VSX0NPTkZfU09VUkNFfSkgdG8gaW5zdGFsbCBhcyBkZWZhdWx0IiBcCgkJCQkibG9nZ2luZyBj
b25maWd1cmF0aW9uICgke0xPR0dFUl9DT05GSUdfUEFUSH0pIgoJCWVsc2UKCQkJJHtET30gZ3Jl
cCAtdiBqYXZhLnV0aWwubG9nZ2luZy5GaWxlSGFuZGxlci5wYXR0ZXJuIFwKCQkJCSIke0xPR0dF
Ul9DT05GX1NPVVJDRX0iID4gIiR7TE9HR0VSX0NPTkZJR19QQVRIfSIKCQkJJHtET30gZ3JlcCBq
YXZhLnV0aWwubG9nZ2luZy5GaWxlSGFuZGxlci5wYXR0ZXJuIFwKCQkJCSIke0xPR0dFUl9DT05G
X1NPVVJDRX0iIHwgXAoJCQkJc2VkICJzfG9wZW5ncm9rJWcuJXUubG9nfCR7T1BFTkdST0tfSU5T
VEFOQ0VfQkFTRX0vbG9nL29wZW5ncm9rJWcuJXUubG9nfGciID4+ICIke0xPR0dFUl9DT05GSUdf
UEFUSH0iCgkJCSR7RE99IG1rZGlyICR7T1BFTkdST0tfSU5TVEFOQ0VfQkFTRX0vbG9nCgkJZmkK
CWZpCgoJaWYgWyAtbiAiJHtPUEVOR1JPS19ERVJCWX0iIF07IHRoZW4KCQlpZiBbICEgLWQgIiR7
T1BFTkdST0tfSU5TVEFOQ0VfQkFTRX0vZGVyYnkiIF07IHRoZW4KCQkJV2FybmluZyAgIk9wZW5H
cm9rIGdlbmVyYXRlZCBkZXJieSBwYXRoICIgXAoJCQkJIiR7T1BFTkdST0tfSU5TVEFOQ0VfQkFT
RX0vZGVyYnkgZG9lc24ndCBleGlzdCIKCQkJUHJvZ3Jlc3MgIiAgQXR0ZW1wdGluZyB0byBjcmVh
dGUgZ2VuZXJhdGVkIGRlcmJ5IGRpcmVjdG9yeSAuLi4gIgoJCQkke0RPfSBta2RpciAtcCAke09Q
RU5HUk9LX0lOU1RBTkNFX0JBU0V9L2RlcmJ5CgkJZmkKCWZpCn0KClN0ZEludm9jYXRpb24oKSB7
Cgkke0RPfSAke0pBVkF9ICR7SkFWQV9PUFRTfSAke1BST1BFUlRJRVN9IFwKCQkke0xPR0dFUl9Q
Uk9QRVJUSUVTfSBcCgkJJHtKQVZBX0RFQlVHfSBcCgkJLWphciAke09QRU5HUk9LX0pBUn0gXAoJ
CSR7SUdOT1JFX1BBVFRFUk5TfSAke0VOQUJMRV9QUk9KRUNUU30gXAoJCSR7REVSQllfSElTVE9S
WV9DQUNIRX0gXAoJCSR7U0NBTl9GT1JfUkVQT1NJVE9SWX0gJHtSRU1PVEVfUkVQT1NJVE9SSUVT
fSBcCgkJJHtTQ0FOX0RFUFRIfSBcCgkJJHtWRVJCT1NFfSAke1FVSUVUfSBcCgkJJHtQUk9HUkVT
U30gXAoJCSR7RVhVQkVSQU5UX0NUQUdTOistY30gJHtFWFVCRVJBTlRfQ1RBR1N9IFwKCQkke01B
WF9JTkRFWEVEX1dPUkRTfSAke1NLSU59ICR7TEVBRElOR19XSUxEQ0FSRH0gXAoJCSR7UkVBRF9Y
TUxfQ09ORn0gXAoJCS1XICR7WE1MX0NPTkZJR1VSQVRJT059IFwKCQkke1dFQkFQUF9DT05GSUdf
QUREUkVTU30gXAoJCS1zICR7U1JDX1JPT1R9IC1kICR7REFUQV9ST09UfSBcCgkJIiR7QH0iCn0K
ClVwZGF0ZURlc2NyaXB0aW9uQ2FjaGUoKSB7CgkjIEFuIHVwZGF0ZSBwcm9ncmFtIGZvciBFZnRh
ckZpbGUKCSMgVXNhZ2U6IDxjbGFzcz4gaW5wdXRGaWxlIFtpbnB1dEZpbGUgLi4uXSBvdXRwdXRG
aWxlCglpZiBbIC1uICIke1BBVEhfREVTQ30iIC1hIC1zICIke1BBVEhfREVTQ30iIF07IHRoZW4K
CQkke0RPfSAke0pBVkF9IC1jbGFzc3BhdGggJHtPUEVOR1JPS19KQVJ9IFwKCQkJJHtFRlRBUl9V
UERBVEV9ICR7UEFUSF9ERVNDfSAke0VGVEFSX09VVFBVVF9GSUxFfQoJZmkKfQoKT3Blbkdyb2tV
c2FnZSgpIHsKCXByaW50IC11MiAiT3B0aW9ucyBmb3Igb3Blbmdyb2suamFyOlxuIgoJJHtET30g
JHtKQVZBfSAke0pBVkFfT1BUU30gLWphciAke09QRU5HUk9LX0pBUn0gJy0/Jwp9CgojIEFyZ3M6
IEN1cnJlbnRWYWx1ZSwgUHJvcGVydHlOYW1lLCBQcm9wZXJ0eVZhbHVlCkFwcGVuZEVudHJ5KCkg
ewoJcHJpbnRmICIlcyA8ZW52LWVudHJ5PjxlbnYtZW50cnktbmFtZT4lczwvZW52LWVudHJ5LW5h
bWU+PGVudi1lbnRyeS12YWx1ZT4lczwvZW52LWVudHJ5LXZhbHVlPjxlbnYtZW50cnktdHlwZT5q
YXZhLmxhbmcuU3RyaW5nPC9lbnYtZW50cnktdHlwZT48L2Vudi1lbnRyeT4iICIkMSIgIiQyIiAi
JDMiCn0KCkRlcGxveVdhcigpIHsKCWlmIFsgISAtZiAiJHtPUEVOR1JPS19XQVJfU09VUkNFfSIg
XTsgdGhlbgoJCUZhdGFsRXJyb3IgIk1pc3NpbmcgV2ViIEFwcGxpY2F0aW9uIEFyY2hpdmUgJHtP
UEVOR1JPS19XQVJfU09VUkNFfSIKCWZpCgoJaWYgWyAhIC1kICIke09QRU5HUk9LX1dBUl9UQVJH
RVR9IiBdOyB0aGVuCgkJRmF0YWxFcnJvciAiTWlzc2luZyBEZXBsb3ltZW50IERpcmVjdG9yeSAk
e09QRU5HUk9LX1dBUl9UQVJHRVR9IgoJZmkKCglQcm9ncmVzcyAiSW5zdGFsbGluZyAke09QRU5H
Uk9LX1dBUl9TT1VSQ0V9IHRvICR7T1BFTkdST0tfV0FSX1RBUkdFVH0gLi4uIgoJCglSRVBMQUNF
X0lEWD0iIiA7IFJFUExBQ0VfT0c9IiIKCVsgLW4gIiRJTkRFWF9CT0RZX0hUTUwiIC1hIC1yICIk
SU5ERVhfQk9EWV9IVE1MIiBdICYmIFJFUExBQ0VfSURYPSJ5IgoJWyAiJE9QRU5HUk9LX0lOU1RB
TkNFX0JBU0UiICE9ICIvdmFyL29wZW5ncm9rIiBdICYmIFJFUExBQ0VfT0c9InkiCglSRVM9Cglp
ZiBbIC1uICIkUkVQTEFDRV9JRFgiIC1vIC1uICIkV0VOViIgLW8gLW4gIiRSRVBMQUNFX09HIiBd
OyB0aGVuCgkJQVRNUERJUj0kKC91c3IvYmluL21rdGVtcCAtZCkKCQlpZiBbIC16ICIkQVRNUERJ
UiIgXTsgdGhlbgoJCQlGYXRhbEVycm9yICJVbmFibGUgdG8gY3JlYXRlIHRlbXAgZmlsZSIKCQlm
aQoJCU9MRFBXRD0kKHB3ZCkKCQkke0RPfSBjcCAiJHtPUEVOR1JPS19XQVJfU09VUkNFfSIgIiRB
VE1QRElSL3NvdXJjZS53YXIiCgkJJHtET30gY2QgIiRBVE1QRElSIgoJCUZJTEVTPSIiCgkJaWYg
WyAtbiAiJFdFTlYiIC1vICIkUkVQTEFDRV9PRyIgXTsgdGhlbgoJCQkke0RPfSAke0pBUn0geGYg
c291cmNlLndhciBXRUItSU5GL3dlYi54bWwgCgkJCUZJTEVTPSJXRUItSU5GL3dlYi54bWwiCgkJ
CWlmIFsgLW4gIiRSRVBMQUNFX09HIiBdOyB0aGVuCgkJCQkke0RPfSAke0pBUn0geGYgc291cmNl
LndhciBXRUItSU5GL2xpYi9vcGVuZ3Jvay5qYXIKCQkJCSR7RE99ICR7SkFSfSB4ZiBXRUItSU5G
L2xpYi9vcGVuZ3Jvay5qYXIgXAoJCQkJCW9yZy9vcGVuc29sYXJpcy9vcGVuZ3Jvay9tYW5hZ2Vt
ZW50L29nYS5wcm9wZXJ0aWVzCgkJCQkke0RPfSBnc2VkIC1pIC1lICJzfC92YXIvb3Blbmdyb2t8
JE9QRU5HUk9LX0lOU1RBTkNFX0JBU0V8IiBcCgkJCQkJV0VCLUlORi93ZWIueG1sIFwKCQkJCQlv
cmcvb3BlbnNvbGFyaXMvb3Blbmdyb2svbWFuYWdlbWVudC9vZ2EucHJvcGVydGllcwoJCQkJJHtE
T30gJHtKQVJ9IHVmIFdFQi1JTkYvbGliL29wZW5ncm9rLmphciBcCgkJCQkJb3JnL29wZW5zb2xh
cmlzL29wZW5ncm9rL21hbmFnZW1lbnQvb2dhLnByb3BlcnRpZXMKCQkJCUZJTEVTPSIkRklMRVMg
V0VCLUlORi9saWIvb3Blbmdyb2suamFyIgoJCQkJY3AgV0VCLUlORi9saWIvb3Blbmdyb2suamFy
ICIkT1BFTkdST0tfSkFSIgoJCQlmaQoJCWZpCgkJaWYgWyAtbiAiJElOREVYX0JPRFlfSFRNTCIg
LWEgLXIgIiRJTkRFWF9CT0RZX0hUTUwiIF07IHRoZW4KCQkJJHtET30gY3AgIiRJTkRFWF9CT0RZ
X0hUTUwiIGluZGV4X2JvZHkuaHRtbAoJCQlGSUxFUz0iJEZJTEVTIGluZGV4X2JvZHkuaHRtbCIK
CQlmaQoJCSR7RE99ICR7SkFSfSB1ZiBzb3VyY2Uud2FyICRGSUxFUwoJCWNobW9kIDY0NCBzb3Vy
Y2Uud2FyCgkJJHtET30gY3Agc291cmNlLndhciAiJHtPUEVOR1JPS19XQVJfVEFSR0VUfS9zb3Vy
Y2Uud2FyIgoJCVJFUz0kPwoJCWNkICIkWCIKCQkke0RPfSBybSAtcmYgIiRBVE1QRElSIgoJZWxz
ZQoJCSR7RE99IGNwICIke09QRU5HUk9LX1dBUl9TT1VSQ0V9IiAiJHtPUEVOR1JPS19XQVJfVEFS
R0VUfS9zb3VyY2Uud2FyIgoJCVJFUz0kPwoJZmkKCSNjaG93biAkR0ZfT1dORVIgIiR7T1BFTkdS
T0tfV0FSX1RBUkdFVH0vc291cmNlLndhciIKCQoJaWYgWyAkUkVTICE9IDAgXTsgdGhlbgoJCUZh
dGFsRXJyb3IgIldlYiBBcHBsaWNhdGlvbiBJbnN0YWxsYXRpb24gRkFJTEVEIgoJZmkKCglQcm9n
cmVzcwoJUHJvZ3Jlc3MgIlN0YXJ0IHlvdXIgR2xhc3NmaXNoIGFwcGxpY2F0aW9uIHNlcnZlciwg
aWYgaXQgaXMgbm90IGFscmVhZHkiCglQcm9ncmVzcyAicnVubmluZywgb3Igd2FpdCB1bnRpbCBp
dCBsb2FkcyB0aGUganVzdCBpbnN0YWxsZWQgd2ViIGFwcGxpY2F0aW9uLiIKCVByb2dyZXNzCglQ
cm9ncmVzcyAiT3Blbkdyb2sgc2hvdWxkIGJlIGF2YWlsYWJsZSBvbiA8SE9TVD46PFBPUlQ+L3Nv
dXJjZSIKCVByb2dyZXNzICIgIHdoZXJlIEhPU1QgYW5kIFBPUlQgYXJlIGNvbmZpZ3VyZWQgaW4g
R2xhc3NmaXNoLiIKCVByb2dyZXNzCn0KCiMgTWFpbiBQcm9ncmFtClVzYWdlKCkgewoJcHJpbnQg
LXUyICJcblVzYWdlOiAkezB9IFstaF0gWy1jIGZpbGVdIFstcXx2XSBbLXBdIFstcyBkaXJlY3Rv
cnldIGNtZFxuXG5cCk9wdGlvbnM6XG5cCiAgICAtaCAgICAgIC4uIHByaW50IHRoaXMgaGVscCBh
bmQgZXhpdC5cblwKICAgIC1jIGZpbGUgLi4gY29uZmlndXJhdGlvbiBmaWxlIHRvIHJlYWQuIEdl
dHMgc291cmNlZCBpbiBpbW1lZGlhdGVseSBhbmRcblwKICAgICAgICAgICAgICAgaXQgbWF5IG92
ZXJ3cml0ZSBvdGhlciBjbWQgbGluZSBvcHRpb25zIG9yIHZhbHVlcyBjb25maWd1cmVkXG5cCiAg
ICAgICAgICAgICAgIG1pZ2h0IGJlIG92ZXJ3cml0dGVuIGJ5IGNtZCBsaW5lIG9wdGlvbnMsIHdo
aWNoIGZvbGxvdyB0aGlzXG5cCiAgICAgICAgICAgICAgIG9uZS4gU28gY21kIGxpbmUgb3B0aW9u
IG9yZGVyIGlzIGltcG9ydGFudC4gVGhlIGNvbmZpZyBmaWxlXG5cCiAgICAgICAgICAgICAgIHNo
b3VsZCBvYmV5IGJvdXJuZSBzaGVsbCBzeW50YXggYW5kIG9ubHkgb3ZlcndyaXRlIGludGVuZGVk
XG5cCgkJCQkgICBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG5cCiAgICAtcyBkaXIgIC4uIFVzZSB0
aGUgZ2l2ZW4gZGlyZWN0b3J5IGRpciBhcyBTUkNfUk9PVC5cblwKICAgIC1xICAgICAgLi4gUnVu
IHF1aWV0bHkgKGRpc2FibGVzIHZlcmJvc2UpLlxuXAogICAgLXYgICAgICAuLiBSdW4gdmVyYm9z
ZS5cblwKICAgIC1wICAgICAgLi4gU2hvdyBwcm9ncmVzcyBpbiBwZXJjZW50LlxuXAogICAgY21k
ICAgICAuLiBkZXBsb3k6XG5cCiAgICAgICAgICAgICAgICAgICBEZXBsb3lzIHRoZSBvcGVuZ3Jv
ayBzb3VyY2Uud2FyIHRvIHRoZSBHbGFzc2Zpc2ggZG9tYWluXG5cCiAgICAgICAgICAgICAgICAg
ICBkaXJlY3RvcnkuXG5cCiAgICAgICAgICAgICAgIHVuZGVwbG95OlxuXAogICAgICAgICAgICAg
ICAgICAgVW5kZXBsb3kgdGhlIG9wZW5ncm9rIHNvdXJjZS53YXJcblwKICAgICAgICAgICAgICAg
ZGVyYnk6XG5cCiAgICAgICAgICAgICAgICAgICBFbmFibGVzIHRoZSBKYXZhIERCIHN5c3RlbSBz
ZXJ2aWNlIChzbWYpLlxuXAogICAgICAgICAgICAgICB1cGRhdGU6XG5cCiAgICAgICAgICAgICAg
ICAgICBJbmRleCB0aGUgcmVsYXRlZCBzb3VyY2UgZGlyZWN0b3JpZXMgYW5kIHVwZGF0ZSBkYXRh
YmFzZS5cblwKICAgICAgICAgICAgICAgdXNhZ2U6XG5cCiAgICAgICAgICAgICAgICAgICBEaXNw
bGF5IG9wZW5ncm9rIHVzYWdlLlxuXAogICAgICAgICAgICAgICBsaXN0OlxuXAogICAgICAgICAg
ICAgICAgICAgRGlzcGxheSBhIGxpc3Qgb2YgYWxsIHJlcG9zaXRvcnkgcGF0aGVzLlxuXAogICAg
ICAgICAgICAgICB6YXA6XG5cCiAgICAgICAgICAgICAgICAgICBDbGVhbiB0aGUgY2FjaGUgZm9y
IHRoZSBnaXZlbiByZXBvc2l0b3J5IHBhdGhlcy5cblwKIgoJZXhpdCAxCn0KCndoaWxlIGdldG9w
dHMgImhjOnF2cHM6IiBvcHRpb24gOyBkbwoJY2FzZSAiJG9wdGlvbiIgaW4KCQloKSBVc2FnZSA7
OwoJCXEpIFFVSUVUPSItcSIgOyBWRVJCT1NFPSIiIDs7CgkJYykgTG9hZEluc3RhbmNlQ29uZmln
dXJhdGlvbiAiJHtPUFRBUkd9IiA7OwoJCXMpIFNSQ19ST09UPSIke09QVEFSR30iIDs7CgkJdikg
T1BFTkdST0tfVkVSQk9TRT0xIDs7CgkJcCkgT1BFTkdST0tfUFJPR1JFU1M9MSA7OwoJZXNhYwpk
b25lCnNoaWZ0ICQoKE9QVElORC0xKSkKClsgJCMgLWVxIDAgLW8gJCMgLWd0IDEgXSAmJiBVc2Fn
ZQoKU2V0dXBFbnYKCmNhc2UgIiR7MX0iIGluCgl1bmRlcGxveSkKCQlWYWxpZGF0ZUNvbmZpZ3Vy
YXRpb24KCQkke0RPfSBybSAtZiAiJHtPUEVOR1JPS19XQVJfVEFSR0VUfS9zb3VyY2Uud2FyIgoJ
CTs7CglkZXBsb3kpCgkJVmFsaWRhdGVDb25maWd1cmF0aW9uCgkJRGVwbG95V2FyCgkJOzsKCWRl
cmJ5KQoJCVZhbGlkYXRlQ29uZmlndXJhdGlvbgoJCUNyZWF0ZVJ1bnRpbWVSZXF1aXJlbWVudHMK
CQlzdmNhZG0gZW5hYmxlIGphdmFkYgoJCTs7Cgl1cGRhdGUpCgkJVmFsaWRhdGVDb25maWd1cmF0
aW9uCgkJQ3JlYXRlUnVudGltZVJlcXVpcmVtZW50cwoJCVN0ZEludm9jYXRpb24gLUgKCQlVcGRh
dGVEZXNjcmlwdGlvbkNhY2hlCgkJOzsKCWxpc3QpCgkJVmFsaWRhdGVDb25maWd1cmF0aW9uCgkJ
Q3JlYXRlUnVudGltZVJlcXVpcmVtZW50cwoJCVN0ZEludm9jYXRpb24gLUsKCQk7OwoJemFwKQoJ
CVZhbGlkYXRlQ29uZmlndXJhdGlvbgoJCUNyZWF0ZVJ1bnRpbWVSZXF1aXJlbWVudHMKCQlTdGRJ
bnZvY2F0aW9uIC1rICcqJwoJCTs7Cgl1c2FnZSkKCQlPcGVuR3Jva1VzYWdlCgkJOzsKCSopCgkJ
VXNhZ2UKCQk7Owplc2FjCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>