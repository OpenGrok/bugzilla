<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "http://defect.opensolaris.org/bz/bugzilla.dtd">

<bugzilla version="3.6.5"
          urlbase="http://defect.opensolaris.org/bz/"
          
          maintainer="website-admin@opensolaris.org"
>

    <bug>
          <bug_id>19231</bug_id>
          
          <creation_ts>2012-07-13 04:43:00 +0000</creation_ts>
          <short_desc>MercurialRepository uses weak file checking</short_desc>
          <delta_ts>2012-07-13 04:43:15 +0000</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Development</classification>
          <product>opengrok</product>
          <component>misc</component>
          <version>unspecified</version>
          <rep_platform>ANY/Generic</rep_platform>
          <op_sys>All</op_sys>
          <bug_status>NEW</bug_status>
          
          
          
          
          
          
          <priority>P3</priority>
          <bug_severity>major</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jens Elkner">jel+osbugs</reporter>
          <assigned_to name="Trond Norbye">trond.norbye</assigned_to>
          <cc>opengrok-dev</cc>
          

      

      

      

          <long_desc isprivate="0">
            <commentid>86556</commentid>
            <who name="Jens Elkner">jel+osbugs</who>
            <bug_when>2012-07-13 04:43:15 +0000</bug_when>
            <thetext>In certain methods MercurialRepository just cuts off leading repopath.length() characters from the passed path without checking, that that the path actually belongs to this repos. So it even operates on stuff with !path.startsWith(repopath), which may lead to unexpected behavior. E.g. JDBCHistoryCacheTest.testHasCacheForDirectory() should actually fail - test should use assertFalse(...) and pass ...

Other repos may have the same problem.</thetext>
          </long_desc>
      
      

    </bug>

</bugzilla>